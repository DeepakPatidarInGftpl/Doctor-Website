"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[3443],{93443:(O,m,i)=>{i.r(m),i.d(m,{SaleBillListModule:()=>I});var v=i(36895),f=i(88996),C=i(2454),d=i.n(C),B=i(53583),D=i(12983),L=i.n(D),u=i(80574),T=i(94327),a=i(94650),g=i(72170),x=i(42917);const A=[{path:"",component:(()=>{class s{constructor(e,l){this.saleService=e,this.cs=l,this.dtOptions={},this.initChecked=!1,this.p=1,this.pageSize=10,this.itemsPerPage=10,this.supplierType="",this.selectedCompany="",this.loader=!0,this.allSelected=!1,this.select=!1,this.key="id",this.reverse=!1}confirmText(e,l){d().fire({title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",buttonsStyling:!0,customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-danger ml-1"}}).then(t=>{t.isConfirmed&&this.saleService.deleteSalesOrder(l).subscribe(o=>{this.delRes=o,"Sale Deleted successfully"==this.delRes.msg?(this.ngOnInit(),d().fire({icon:"success",title:"Deleted!",text:this.delRes.msg}),this.tableData.splice(e,1)):d().fire({icon:"error",title:"Not Deleted!",text:this.delRes.error})})})}isActive(e,l){d().fire({title:"Are you sure?",text:"Do you want to Deactivate this sale!",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Deactivate it!",buttonsStyling:!0,customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-danger ml-1"}}).then(t=>{t.isConfirmed&&(this.saleService.SalesOrderIsActive(l,"").subscribe(o=>{this.delRes=o,"Sale Is active Updated Successfully"==this.delRes.msg&&this.ngOnInit()}),d().fire({icon:"success",title:"Deactivate!",text:"Sale Is Deactivate Successfully."}))})}Active(e,l){d().fire({title:"Are you sure?",text:"Do you want to Active this sale!",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Active it!",buttonsStyling:!0,customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-danger ml-1"}}).then(t=>{t.isConfirmed&&(this.saleService.SalesOrderIsActive(l,"").subscribe(o=>{this.delRes=o,"Sale Is active Updated Successfully"==this.delRes.msg&&this.ngOnInit()}),d().fire({icon:"success",title:"Active!",text:"Sale Is Active Successfully."}))})}ngOnInit(){this.saleService.getSalesOrder().subscribe(e=>{this.tableData=e,this.loader=!1,this.selectedRows=new Array(this.tableData.length).fill(!1),this.filteredData=this.tableData.slice(),this.filterData()}),this.cs.userDetails$.subscribe(e=>{this.userDetails=e,this.userDetails?.permission?.map(t=>{"master"===t.content_type.app_label&&"dealer"===t.content_type.model&&"add_dealer"==t.codename?this.isAdd=t.codename:"master"===t.content_type.app_label&&"dealer"===t.content_type.model&&"change_dealer"==t.codename?this.isEdit=t.codename:"master"===t.content_type.app_label&&"dealer"===t.content_type.model&&"delete_dealer"==t.codename&&(this.isDelete=t.codename)})})}selectAlll(){this.selectedRows.fill(this.allSelected)}selectAll(e){this.tableData.forEach(e?l=>{l.isSelected=!1}:l=>{l.isSelected=!0})}search(){if(""==this.titlee)this.ngOnInit();else{const e=this.titlee.toLocaleLowerCase();this.filteredData=this.filteredData.filter(l=>{const t=l.name.toLocaleLowerCase(),o=l.company_name.toLocaleLowerCase();return!!t.match(e)||!!o.match(e)})}}sort(e){this.key=e,this.reverse=!this.reverse}generatePDF(){const e=new B.default;e.setFontSize(15),e.setTextColor(33,43,54),e.text("Dealer List",10,10),L()(e,{html:"#mytable",theme:"grid",headStyles:{fillColor:[255,159,67]},columns:[{header:"Sr No."},{header:"Name"},{header:"Company Name"},{header:"Mobile Number"},{header:"Opening Balance"},{header:"GSTIN"},{header:"PanCard"},{header:"Membership"},{header:"Is Active"}]}),e.save("dealer.pdf")}getVisibleDataFromTable(){const e=[],l=document.getElementById("mytable"),t=l.querySelector("thead tr"),o=l.querySelectorAll("tbody tr"),n=[];return t.querySelectorAll("th").forEach(c=>{const r=c.textContent.trim();"Is Active"!==r&&"Action"!==r&&n.push(r)}),e.push(n),o.forEach(c=>{const r=[];c.querySelectorAll("td").forEach(p=>{r.push(p.textContent.trim())}),e.push(r)}),e}exportToExcel(){const e=this.getVisibleDataFromTable(),l=u.P6.aoa_to_sheet(e),t=u.P6.book_new();u.P6.book_append_sheet(t,l,"Sheet1");const o=u.cW(t,{bookType:"xlsx",type:"array"}),n=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,T.saveAs)(n,"dealer.xlsx")}printTable(){const e=document.getElementById("mytable"),o=document.querySelector(".titl").outerHTML,n=e.cloneNode(!0),c=n.querySelector("th.thone:nth-child(10)");c&&c.remove();const r=n.querySelector("th.thone:last-child");r&&r.remove(),n.querySelectorAll("tr").forEach(y=>{const b=y.querySelector("td:nth-child(10)");b&&b.remove();const S=y.querySelector("td:last-child");S&&S.remove()});const R=n.outerHTML,E="<style>.spaced-title { margin-top: 80px; }</style>"+o.replace("titl","spaced-title")+R,H=document.body.innerHTML;document.body.innerHTML=E,window.print(),document.body.innerHTML=H}filterData(){let e=this.tableData.slice();if(this.selectedCompany){const l=this.selectedCompany.toLowerCase();e=e.filter(t=>t?.company_name.toLowerCase().includes(l))}this.filteredData=e}clearFilter(){this.selectedCompany=null,this.filterData()}}return s.\u0275fac=function(e){return new(e||s)(a.Y36(g.M),a.Y36(x.J))},s.\u0275cmp=a.Xpm({type:s,selectors:[["app-sale-bill-list"]],decls:2,vars:0,template:function(e,l){1&e&&(a.TgZ(0,"p"),a._uU(1,"sale-bill-list works!"),a.qZA())}}),s})()}];let w=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=a.oAB({type:s}),s.\u0275inj=a.cJS({imports:[f.Bz.forChild(A),f.Bz]}),s})();var M=i(8468);let I=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=a.oAB({type:s}),s.\u0275inj=a.cJS({imports:[v.ez,w,M.I]}),s})()}}]);