"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[5913],{15247:(I,b,n)=>{n.d(b,{x:()=>y});var c=n(20553),g=n(19212),p=n(69862);let y=(()=>{class v{constructor(e){this.http=e,this.apiUrl=`${c.N.api}`}getSupplier(){return this.http.get(this.apiUrl+"/pv-api/supplier/")}getPurchase(){return this.http.get(this.apiUrl+"/pv-api/purchase_order/")}addPurchase(e){return this.http.post(this.apiUrl+"/pv-api/purchase_order/",e)}getPurchaseById(e){return this.http.get(`${this.apiUrl+"/pv-api/purchase_order/?id="}${e}`)}PurchaseIsActive(e,r){return this.http.patch(`${this.apiUrl+"/pv-api/purchase_order/?id="}${e}`,r)}updatePurchase(e,r){return this.http.put(`${this.apiUrl+"/pv-api/purchase_order/?id="}${r}`,e)}deletePurchase(e){return this.http.delete(`${this.apiUrl+"/pv-api/purchase_order/?id="}${e}`)}searchProduct(e){return this.http.get(this.apiUrl+"/pv-api/product_search/?search="+e)}productVariant(){return this.http.get(this.apiUrl+"/pv-api/product_variant/")}getMaterial(){return this.http.get(this.apiUrl+"/pv-api/material_inward/")}addMaterial(e){return this.http.post(this.apiUrl+"/pv-api/material_inward/",e)}getMaterialById(e){return this.http.get(`${this.apiUrl+"/pv-api/material_inward/?id="}${e}`)}MaterialIsActive(e,r){return this.http.patch(`${this.apiUrl+"/pv-api/material_inward/?id="}${e}`,r)}updateMaterial(e,r){return this.http.put(`${this.apiUrl+"/pv-api/material_inward/?id="}${r}`,e)}deleteMaterial(e){return this.http.delete(`${this.apiUrl+"/pv-api/material_inward/?id="}${e}`)}getPurchaseBill(){return this.http.get(this.apiUrl+"/pv-api/purchase_bill/")}addPurchaseBill(e){return this.http.post(this.apiUrl+"/pv-api/purchase_bill/",e)}getPurchaseBillById(e){return this.http.get(`${this.apiUrl+"/pv-api/purchase_bill/?id="}${e}`)}PurchaseBillIsActive(e,r){return this.http.patch(`${this.apiUrl+"/pv-api/purchase_bill/?id="}${e}`,r)}updatePurchaseBill(e,r){return this.http.put(`${this.apiUrl+"/pv-api/purchase_bill/?id="}${r}`,e)}deletePurchaseBill(e){return this.http.delete(`${this.apiUrl+"/pv-api/purchase_bill/?id="}${e}`)}getDebitNotes(){return this.http.get(this.apiUrl+"/pv-api/debit_note/")}addDebitNotes(e){return this.http.post(this.apiUrl+"/pv-api/debit_note/",e)}getDebitNotesById(e){return this.http.get(`${this.apiUrl+"/pv-api/debit_note/?id="}${e}`)}DebitNotesIsActive(e,r){return this.http.patch(`${this.apiUrl+"/pv-api/debit_note/?id="}${e}`,r)}updateDebitNotes(e,r){return this.http.put(`${this.apiUrl+"/pv-api/debit_note/?id="}${r}`,e)}deleteDebitNotes(e){return this.http.delete(`${this.apiUrl+"/pv-api/debit_note/?id="}${e}`)}getSearchProductById(e){return this.http.get(`${this.apiUrl+"/pv-api/variant-search/?search="}${e}`)}getSearchProduct(){return this.http.get(this.apiUrl+"/pv-api/variant-search/")}getPurchaseOrderPrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=PurchaseOrder")}getPurchaseBillPrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=PurchaseBill")}getDebitNotePrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=PurchaseReturn")}getMaterialInwardPrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=MaterialInward")}productBySupplier(){return this.http.get(this.apiUrl+"/pv-api/purchase_product_filter/")}getAdditionalCharge(){return this.http.get(this.apiUrl+"/pv-api/pos/additional_charge_pos/")}getTax(){return this.http.get(this.apiUrl+"/pv-api/tax/")}getPurchaseReturn(){return this.http.get(this.apiUrl+"/pv-api/purchase_return/")}addPurchaseReturn(e){return this.http.post(this.apiUrl+"/pv-api/purchase_return/",e)}getPurchaseReturnById(e){return this.http.get(`${this.apiUrl+"/pv-api/purchase_return/?id="}${e}`)}PurchaseReturnIsActive(e,r){return this.http.patch(`${this.apiUrl+"/pv-api/purchase_return/?id="}${e}`,r)}updatePurchaseReturn(e,r){return this.http.put(`${this.apiUrl+"/pv-api/purchase_return/?id="}${r}`,e)}deletePurchaseReturn(e){return this.http.delete(`${this.apiUrl+"/pv-api/purchase_return/?id="}${e}`)}filterVariant(e,r,l,f){let d=this.apiUrl+"/pv-api/purchase_product_filter/";const h=[];return e&&h.push(`supplier=${e}`),r&&h.push(`category=${r}`),l&&h.push(`subcategory=${l}`),f&&h.push(`search=${f}`),h.length>0&&(d+="?"+h.join("&")),this.http.get(d)}static#t=this.\u0275fac=function(r){return new(r||v)(g.LFG(p.eN))};static#e=this.\u0275prov=g.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})()},75913:(I,b,n)=>{n.r(b),n.d(b,{ExpenseModule:()=>Q});var c=n(96814),g=n(74408),p=n(56223),y=n(27921),v=n(37398),t=n(19212),e=n(15247),r=n(44293),l=n(49546),f=n(58763),d=n(24630),h=n(23680),_=n(19157),U=n(2032);function C(i,u){if(1&i){const a=t.EpF();t.TgZ(0,"mat-option",28),t.NdJ("onSelectionChange",function(){const m=t.CHM(a).$implicit,x=t.oxw();return t.KtG(x.oncheck(null==m?null:m.id))}),t._uU(1),t.qZA()}if(2&i){const a=u.$implicit;t.Q6J("value",a.name),t.xp6(1),t.Oqu(null==a?null:a.name)}}function P(i,u){1&i&&(t.TgZ(0,"mat-option",30),t._uU(1,"Please Enter 3 or more characters"),t.qZA())}function Z(i,u){if(1&i&&(t.ynx(0),t.YNc(1,P,2,0,"mat-option",29),t.BQk()),2&i){const a=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==a.supplierControl.value?null:a.supplierControl.value.length)<3)}}function $(i,u){1&i&&(t.TgZ(0,"span",31),t._uU(1,"Select Supplier "),t.qZA())}function E(i,u){1&i&&(t.TgZ(0,"span",31),t._uU(1,"Enter Amount"),t.qZA())}function F(i,u){1&i&&(t.TgZ(0,"span",31),t._uU(1,"Enter Remark"),t.qZA())}function T(i,u){if(1&i&&(t.TgZ(0,"option",32),t._uU(1),t.qZA()),2&i){const a=u.$implicit;t.s9C("value",a.id),t.xp6(1),t.Oqu(a.name)}}function N(i,u){1&i&&(t.TgZ(0,"span",31),t._uU(1,"Select Payment Account"),t.qZA())}function D(i,u){1&i&&(t.TgZ(0,"button",33),t._uU(1,"Submit"),t.qZA())}function M(i,u){1&i&&(t.TgZ(0,"button",34),t._UZ(1,"span",35),t._uU(2,"\xa0 Submit"),t.qZA())}const A=i=>({"is-invalid":i});let B=(()=>{class i{get f(){return this.expenceForm.controls}constructor(a,o,s,m,x,Y){this.fb=a,this.purchaseService=o,this.coreService=s,this.posService=m,this.toastr=x,this.router=Y,this.supplierControlName="party",this.supplierControl=new p.NI,this.productOption=[],this.suppliers=[],this.loaders=!1}ngOnInit(){this.expenceForm=this.fb.group({party:new p.NI("",[p.kI.required]),amount:new p.NI("",[p.kI.required,p.kI.pattern(/^[0-9]*$/)]),remarks:new p.NI("",[p.kI.required]),non_gst:new p.NI("",[p.kI.required]),payment_account:new p.NI("",[p.kI.required])}),this.filteredSuppliers=this.supplierControl.valueChanges.pipe((0,y.O)(""),(0,v.U)(a=>this._filter(a,!0))),this.getBank(),this.getSuuplier()}getBank(){this.posService.getCompanyBank().subscribe(a=>{this.bankList=a})}_filter(a,o){const s="string"==typeof a?a.toLowerCase():a.toString().toLowerCase(),m=this.suppliers.filter(o?x=>x.name.toLowerCase().includes(s):x=>!x.name.toLowerCase().includes(s));return!o&&0===m.length&&m.push({name:"No data found"}),m}get supplier(){return this.expenceForm.get("party")}getSuuplier(){this.purchaseService.getSupplier().subscribe(a=>{this.suppliers=a})}oncheck(a){this.expenceForm.patchValue({party:a})}submit(){let a=new FormData;a.append("party",this.expenceForm.get("party")?.value),a.append("amount",this.expenceForm.get("amount")?.value),a.append("remarks",this.expenceForm.get("remarks")?.value),a.append("non_gst",this.expenceForm.get("non_gst")?.value),a.append("payment_account",this.expenceForm.get("payment_account")?.value),this.expenceForm.valid?(this.loaders=!0,this.posService.expensePayment(a).subscribe(o=>{this.addRes=o,this.addRes.isSuccess?(this.toastr.success(this.addRes.msg),this.loaders=!1,this.expenceForm.reset(),this.router.navigate(["//bank/expense"])):this.loaders=!1},o=>{this.loaders=!1})):(this.expenceForm.markAllAsTouched(),this.toastr.error("Please Fill All The Required Fields"))}get party(){return this.expenceForm.get("party")}get amount(){return this.expenceForm.get("amount")}get remarks(){return this.expenceForm.get("remarks")}get non_gst(){return this.expenceForm.get("non_gst")}get payment_account(){return this.expenceForm.get("payment_account")}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(p.qu),t.Y36(e.x),t.Y36(r.p),t.Y36(l.v),t.Y36(f._W),t.Y36(g.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-expense"]],decls:53,vars:31,consts:[[1,"page-header"],[1,"page-title"],[1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-4","col-md-6","col-12"],[1,"form-group"],[1,"w-100",2,"padding","0","width","100%","min-width","100%","border-top","none"],["type","text","placeholder","Search Party","aria-label","Party","matInput","",2,"box-sizing","border-box",3,"formControl","matAutocomplete","ngClass"],["auto","matAutocomplete"],["style","color:#FF9F43",3,"value","onSelectionChange",4,"ngFor","ngForOf"],[4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"col-lg-3","col-sm-3","col-12"],["type","text","formControlName","amount","placeholder","Enter Amount","id","amount",3,"ngClass"],["type","text","formControlName","remarks","id","remarks","placeholder","Enter Remark",3,"ngClass"],["formControlName","payment_account",1,"form-select",3,"ngClass"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","my-4"],[1,"d-flex"],["type","checkbox","formControlName","non_gst",3,"id","ngModel"],[1,"d_flex",2,"margin-bottom","0","margin-left","5px",3,"for"],[1,"col-lg-12"],["class","btn btn-submit me-2",4,"ngIf"],["class","btn btn-submit me-2","type","submit","disabled","",4,"ngIf"],["routerLink","//bank/expense",1,"btn","btn-cancel"],[2,"color","#FF9F43",3,"value","onSelectionChange"],["class","is-loading",4,"ngIf"],[1,"is-loading"],[1,"text-danger"],[3,"value"],[1,"btn","btn-submit","me-2"],["type","submit","disabled","",1,"btn","btn-submit","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,s){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3,"Create New Expence"),t.qZA()()(),t.TgZ(4,"div",2)(5,"div",3)(6,"form",4),t.NdJ("ngSubmit",function(){return s.submit()}),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"label"),t._uU(11,"Select Party Name*"),t.qZA(),t.TgZ(12,"mat-form-field",8),t._UZ(13,"input",9),t.TgZ(14,"mat-autocomplete",null,10),t.YNc(16,C,2,2,"mat-option",11),t.ALo(17,"async"),t.YNc(18,Z,2,1,"ng-container",12),t.ALo(19,"async"),t.qZA()(),t.YNc(20,$,2,0,"span",13),t.qZA()(),t.TgZ(21,"div",14)(22,"div",7)(23,"label"),t._uU(24,"Amount"),t.qZA(),t._UZ(25,"input",15),t.YNc(26,E,2,0,"span",13),t.qZA()(),t.TgZ(27,"div",14)(28,"div",7)(29,"label"),t._uU(30,"Remarks*"),t.qZA(),t._UZ(31,"input",16),t.YNc(32,F,2,0,"span",13),t.qZA()(),t.TgZ(33,"div",14)(34,"div",7)(35,"label"),t._uU(36,"Select Payment Account*"),t.qZA(),t.TgZ(37,"select",17)(38,"option",18),t._uU(39,"Select Payment Account"),t.qZA(),t.YNc(40,T,2,2,"option",19),t.qZA(),t.YNc(41,N,2,0,"span",13),t.qZA()(),t.TgZ(42,"div",14)(43,"div",20)(44,"div",21),t._UZ(45,"input",22),t.TgZ(46,"label",23),t._uU(47,"Non GST"),t.qZA()()()(),t.TgZ(48,"div",24),t.YNc(49,D,2,0,"button",25)(50,M,3,0,"button",26),t.TgZ(51,"a",27),t._uU(52,"Cancel"),t.qZA()()()()()()),2&o){const m=t.MAs(15);t.xp6(6),t.Q6J("formGroup",s.expenceForm),t.xp6(7),t.Q6J("formControl",s.supplierControl)("matAutocomplete",m)("ngClass",t.VKq(23,A,s.f.party.touched&&s.f.party.invalid)),t.xp6(3),t.Q6J("ngForOf",t.lcZ(17,19,s.filteredSuppliers)),t.xp6(2),t.Q6J("ngIf",t.lcZ(19,21,s.filteredSuppliers)),t.xp6(2),t.Q6J("ngIf",s.supplier&&s.supplier.invalid&&s.supplier.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(25,A,s.f.amount.touched&&s.f.amount.invalid)),t.xp6(1),t.Q6J("ngIf",s.amount&&s.amount.invalid&&s.amount.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(27,A,s.f.remarks.touched&&s.f.remarks.invalid)),t.xp6(1),t.Q6J("ngIf",s.remarks&&s.remarks.invalid&&s.remarks.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(29,A,s.f.payment_account.touched&&s.f.payment_account.invalid)),t.xp6(3),t.Q6J("ngForOf",s.bankList),t.xp6(1),t.Q6J("ngIf",s.payment_account&&s.payment_account.invalid&&s.payment_account.touched),t.xp6(4),t.Q6J("id","checkboxMeasure-")("ngModel",!0),t.xp6(1),t.Q6J("for","checkboxMeasure-"),t.xp6(3),t.Q6J("ngIf",!s.loaders),t.xp6(1),t.Q6J("ngIf",s.loaders)}},dependencies:[c.mk,c.sg,c.O5,g.rH,p._Y,p.YN,p.Kr,p.Fj,p.Wl,p.EJ,p.JJ,p.JL,p.oH,p.sg,p.u,d.XC,h.ey,d.ZL,_.KE,U.Nt,c.Ov]})}return i})();var O=n(1971);const S=JSON.parse(localStorage.getItem("auth"));let J;S&&S.map(u=>{"pos"===u.content_type.app_label&&"expance"===u.content_type.model&&"add_expance"==u.codename&&(J=u.codename)});const R=[{path:"",component:B,canActivate:[O.l],data:{allowedRoles:["add_expance"]}}];let L=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#r=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(R),g.Bz]})}return i})();var k=n(16047);let Q=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#r=this.\u0275inj=t.cJS({imports:[c.ez,L,k.I,p.u5,p.UX,d.Bb,_.lN,U.c]})}return i})()},1971:(I,b,n)=>{n.d(b,{l:()=>t});var c=n(19212),g=n(74408),p=n(58763),y=n(41789),v=n(44293);let t=(()=>{class e{constructor(l,f,d,h,_){this.router=l,this.Arout=f,this.toastr=d,this.profileService=h,this.coreService=_}canActivate(l,f){const d=JSON.parse(localStorage.getItem("auth"));if(this.profileService.userDetails$.subscribe(h=>{this.userDetails=h,this.permissions=this.userDetails?.permission}),d){const h=l.data.allowedRoles;console.log(h,"allowedRoles");const _=d.some(U=>h.includes(U.codename));if(console.log(_),this.coreService.getProfile().subscribe(U=>{this.userDetails=U,this.profileService.setUserDetails(this.userDetails);const C=U?.permission,P=this.profileService.getUserDetails();(!P||P.length!==C.length)&&(this.profileService.setUserPermission(C),window.location.reload())}),_)return!0}return this.toastr.error("User have Not Permission to Access This page"),this.router.navigate(["/dashboard"]),!1}static#t=this.\u0275fac=function(f){return new(f||e)(c.LFG(g.F0),c.LFG(g.gz),c.LFG(p._W),c.LFG(y.J),c.LFG(v.p))};static#e=this.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})()}}]);