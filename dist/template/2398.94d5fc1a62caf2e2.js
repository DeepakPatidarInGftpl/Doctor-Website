"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[2398],{62398:(F,T,a)=>{a.r(T),a.d(T,{TaxSlabsModule:()=>L});var g=a(36895),v=a(88996),i=a(24006),t=a(94650),C=a(80927),l=a(97185);function r(e,c){if(1&e&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&e){const o=c.$implicit;t.s9C("value",o.id),t.xp6(1),t.hij(" ",o.title," ")}}function s(e,c){1&e&&(t.TgZ(0,"span",30),t._uU(1,"Select Category "),t.qZA())}const d=function(e){return{"is-invalid":e}};function p(e,c){if(1&e){const o=t.EpF();t.TgZ(0,"a",31)(1,"input",32),t.NdJ("change",function(b){t.CHM(o);const h=t.oxw();return t.KtG(h.onCheckChange(b))}),t.qZA(),t.TgZ(2,"label",33),t.NdJ("click",function(b){t.CHM(o);const h=t.oxw();return t.KtG(h.onLabelClick(b))}),t._uU(3),t.qZA()()}if(2&e){const o=c.$implicit,n=c.index,b=t.oxw();t.xp6(1),t.Q6J("value",o.id)("checked",b.selectedSubCategoryIds.includes(o.id))("ngClass",t.VKq(6,d,b.f.subcategory.touched&&b.f.subcategory.invalid))("id","checkboxSize-"+n),t.xp6(1),t.Q6J("for","checkboxSize-"+n),t.xp6(1),t.Oqu(o.title)}}function u(e,c){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Oqu(o.selectedSubcat+" Subcategory Selected")}}function m(e,c){1&e&&(t.TgZ(0,"span",30),t._uU(1,"Select Sub Category "),t.qZA())}function _(e,c){1&e&&(t.TgZ(0,"span",30),t._uU(1,"Subcategory not available "),t.qZA())}function f(e,c){if(1&e&&(t.TgZ(0,"option",29),t._uU(1),t.qZA()),2&e){const o=c.$implicit;t.s9C("value",o.id),t.xp6(1),t.hij(" ",o.tax_percentage+"%"," ")}}function x(e,c){if(1&e){const o=t.EpF();t.ynx(0),t.TgZ(1,"tr",34)(2,"td"),t._UZ(3,"input",35),t.qZA(),t.TgZ(4,"td"),t._UZ(5,"input",36),t.qZA(),t.TgZ(6,"td")(7,"select",37)(8,"option",11),t._uU(9,"Select tax"),t.qZA(),t.YNc(10,f,2,2,"option",12),t.qZA()(),t.TgZ(11,"td")(12,"button",38),t.NdJ("click",function(){const h=t.CHM(o).index,A=t.oxw();return t.KtG(A.removeAmount(h))}),t._uU(13,"\u2212"),t.qZA()()(),t.BQk()}if(2&e){const o=c.index,n=t.oxw();t.xp6(1),t.Q6J("formGroupName",o),t.xp6(9),t.Q6J("ngForOf",n.taxList)}}function y(e,c){1&e&&(t.TgZ(0,"button",39),t._uU(1,"Submit"),t.qZA())}function S(e,c){1&e&&(t.TgZ(0,"button",40),t._UZ(1,"span",41),t._uU(2," Submit"),t.qZA())}const Z=function(){return{standalone:!0}};let M=(()=>{class e{constructor(o,n,b,h){this.fb=o,this.coreService=n,this.router=b,this.toastrService=h,this.subcatbySubcatGroup=[],this.filteredSubcategory=[],this.searchTerm="",this.selectSubcat=[],this.selectedSubcat=0,this.selectedSubCategoryIds=[],this.loaders=!1}get f(){return this.taxSlabForm.controls}ngOnInit(){this.taxSlabForm=this.fb.group({subcategory_group:new i.NI("",[i.kI.required]),subcategory:new i.Oe([],[i.kI.required]),amount_tax_slabs:this.fb.array([])}),this.addAmount(),this.getSubcateGroup(),this.getTax()}amount_tax_slabs(){return this.fb.group({from_amount:"",to_amount:"",tax:""})}getAmount(){return this.taxSlabForm.get("amount_tax_slabs")}addAmount(){this.getAmount().push(this.amount_tax_slabs())}removeAmount(o){this.getAmount().removeAt(o)}get subcategory_group(){return this.taxSlabForm.get("subcategory_group")}get subcategory(){return this.taxSlabForm.get("subcategory")}get tax(){return this.taxSlabForm.get("tax")}getSubcateGroup(){this.coreService.getSubcategoryGroup().subscribe(o=>{this.subcatGroupList=o})}getTax(){this.coreService.gettaxd().subscribe(o=>{this.taxList=o})}getSubcategoryBySubcatGroup(o){this.coreService.getSubcategoryBySubcatGroup(o).subscribe(n=>{this.subcatbySubcatGroup=n.subcategories,this.filteredSubcategory=[...this.subcatbySubcatGroup],setTimeout(()=>{this.subcatbySubcatGroup.map(b=>{this.selectSubcat.includes(b.id)&&this.taxSlabForm.get("subcategory").push(new i.NI(b.id))})},1e3)})}filterSubcategory(){this.filteredSubcategory=""===this.searchTerm.trim()?[...this.subcatbySubcatGroup]:this.subcatbySubcatGroup.filter(o=>o.title.toLowerCase().includes(this.searchTerm.toLowerCase()))}onCheckChange(o){const n=this.taxSlabForm.get("subcategory");if(o.target.checked)n.push(new i.NI(parseInt(o.target.value))),this.check=n,this.selectedSubCategoryIds=n.value,this.selectedSubcat++;else{let b=0;n.controls.forEach(h=>{if(h.value==o.target.value)return n.removeAt(b),void this.selectedSubcat--;b++})}}submit(){this.taxSlabForm.valid?(this.loaders=!0,this.coreService.addTaxSlab(this.taxSlabForm.value).subscribe(o=>{this.addRes=o,"Tax Slabs Created"==this.addRes.msg&&(this.loaders=!1,this.toastrService.success(this.addRes.msg),this.router.navigate(["product/taxSlabList"]))})):this.taxSlabForm.markAllAsTouched()}onLabelClick(o){o.stopPropagation()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(i.qu),t.Y36(C.p),t.Y36(v.F0),t.Y36(l._W))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-tax-slabs"]],decls:58,vars:16,consts:[[1,"page-header","justify-content-center"],[1,"page-title"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"card"],[1,"card-body"],[1,"row","form-card"],[1,"col-lg-4","col-sm-4","col-12"],[1,"form-group"],["formControlName","subcategory_group","required","","id","subcategory_group",1,"w-100","h-100","border",3,"ngClass","change"],["category_idValue","","categoryValue",""],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"dropdown"],["type","button","type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","button"],[1,"dropdown-menu",2,"width","100%","max-height","300px","overflow-y","auto"],["type","text","placeholder","search subcategory",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["class","dropdown-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-lg-8","col-sm-8","col-12"],[1,"table","amt-table"],["formArrayName","amount_tax_slabs"],[4,"ngFor","ngForOf"],[1,"w-100","text-right"],[1,"addMore",3,"click"],[1,"col-lg-8","text-end","mt-5"],["class","btn btn-submit me-2",4,"ngIf"],["class","btn btn-submit me-2","type","submit","disabled","",4,"ngIf"],[3,"value"],[1,"text-danger"],[1,"dropdown-item"],["type","checkbox","formArrayName","subcategory",2,"margin-right","5px",3,"value","checked","ngClass","id","change"],[2,"margin-bottom","0",3,"for","click"],[3,"formGroupName"],["type","text","formControlName","from_amount","placeholder","ex-100",1,"form-control","inp"],["type","text","formControlName","to_amount","placeholder","ex-1000",1,"form-control","inp"],["formControlName","tax",1,"inp"],[1,"btn",2,"background","#FF9F43",3,"click"],[1,"btn","btn-submit","me-2"],["type","submit","disabled","",1,"btn","btn-submit","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,n){if(1&o){const b=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3,"Tax Slab Add"),t.qZA(),t.TgZ(4,"h6"),t._uU(5,"Create new Tax Slab"),t.qZA()()(),t.TgZ(6,"form",2),t.NdJ("ngSubmit",function(){return n.submit()}),t.TgZ(7,"div",3)(8,"div",4)(9,"div",5)(10,"div",6)(11,"div",7)(12,"div",8)(13,"label"),t._uU(14,"Subcategory Group*"),t.qZA(),t.TgZ(15,"select",9,10),t.NdJ("change",function(){t.CHM(b);const A=t.MAs(17);return t.KtG(n.getSubcategoryBySubcatGroup(A.value))}),t.TgZ(18,"option",11),t._uU(19,"select subcategory group"),t.qZA(),t.YNc(20,r,2,2,"option",12),t.qZA(),t.YNc(21,s,2,0,"span",13),t.qZA()(),t.TgZ(22,"div",7)(23,"div",8)(24,"label"),t._uU(25,"SubCategory*"),t.qZA(),t.TgZ(26,"div",14)(27,"button",15),t._uU(28,"Select Subcategory"),t.qZA(),t.TgZ(29,"ul",16)(30,"li")(31,"input",17),t.NdJ("ngModelChange",function(A){return n.searchTerm=A})("ngModelChange",function(){return n.filterSubcategory()}),t.qZA()(),t.TgZ(32,"li"),t.YNc(33,p,4,8,"a",18),t.qZA()()(),t.YNc(34,u,2,1,"p",19),t.YNc(35,m,2,0,"span",13),t.YNc(36,_,2,0,"span",13),t.qZA()(),t.TgZ(37,"div",20)(38,"table",21)(39,"thead")(40,"tr")(41,"th"),t._uU(42,"From Amount"),t.qZA(),t.TgZ(43,"th"),t._uU(44,"To Amount"),t.qZA(),t.TgZ(45,"th"),t._uU(46,"Tax"),t.qZA(),t.TgZ(47,"th"),t._uU(48,"\xa0"),t.qZA()()(),t.TgZ(49,"tbody"),t.ynx(50,22),t.YNc(51,x,14,2,"ng-container",23),t.BQk(),t.qZA()(),t.TgZ(52,"div",24)(53,"span",25),t.NdJ("click",function(){return n.addAmount()}),t._uU(54,"+ Add more"),t.qZA()()(),t.TgZ(55,"div",26),t.YNc(56,y,2,0,"button",27),t.YNc(57,S,3,0,"button",28),t.qZA()()()()()()}2&o&&(t.xp6(6),t.Q6J("formGroup",n.taxSlabForm),t.xp6(9),t.Q6J("ngClass",t.VKq(13,d,n.f.subcategory_group.touched&&n.f.subcategory_group.invalid)),t.xp6(5),t.Q6J("ngForOf",n.subcatGroupList),t.xp6(1),t.Q6J("ngIf",n.subcategory_group&&n.subcategory_group.invalid&&n.subcategory_group.touched),t.xp6(10),t.Q6J("ngModel",n.searchTerm)("ngModelOptions",t.DdM(15,Z)),t.xp6(2),t.Q6J("ngForOf",n.filteredSubcategory),t.xp6(1),t.Q6J("ngIf",n.selectedSubcat>0),t.xp6(1),t.Q6J("ngIf",n.subcategory&&n.subcategory.invalid&&n.subcategory.touched&&(null==n.subcatbySubcatGroup?null:n.subcatbySubcatGroup.length)>0),t.xp6(1),t.Q6J("ngIf",n.subcategory_group&&n.subcategory_group.touched&&(null==n.subcatbySubcatGroup?null:n.subcatbySubcatGroup.length)<=0),t.xp6(15),t.Q6J("ngForOf",n.getAmount().controls),t.xp6(5),t.Q6J("ngIf",!n.loaders),t.xp6(1),t.Q6J("ngIf",n.loaders))},dependencies:[g.mk,g.sg,g.O5,i._Y,i.YN,i.Kr,i.Fj,i.EJ,i.JJ,i.JL,i.Q7,i.On,i.sg,i.u,i.x0,i.CE],styles:['.ng-dirty.ng-invalid.is-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}select[_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], input[type=button][_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;padding:10px 15px;border-radius:5px}.button[_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;display:flex;padding:10px 15px;border-radius:5px;justify-content:space-between;align-items:center;background-color:#fff}.table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){border-top:none!important}.labelSize[_ngcontent-%COMP%]{display:flex;align-items:center}.entries[_ngcontent-%COMP%]{font-size:12px;color:#5e5873;font-weight:600;float:left;margin-top:10px}.labelSize[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid #ced4da;width:80px;height:30px;padding:0;border-radius:3px}.thone[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{float:right;margin-top:4px}@media (max-width: 765px){.thone[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{float:inherit;margin-top:0}}.fa-sort[_ngcontent-%COMP%]:before{content:"\\f0dc";right:.5em;color:#babfc7;font-size:12px;opacity:1}.inp[_ngcontent-%COMP%]{border:none}.amt-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#EEF0F8}.amt-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#FAFBFE}.addMore[_ngcontent-%COMP%]{color:#ff9f43;font-size:20px;font-weight:500;float:right}.form-card[_ngcontent-%COMP%]{width:100%;margin:auto;justify-content:center}']}),e})();var O=a(30597);const P=JSON.parse(localStorage.getItem("auth"));let G;P&&P.map(c=>{"product"===c.content_type.app_label&&"taxslabs"===c.content_type.model&&"add_taxslabs"==c.codename&&(G=c.codename)});const N=[{path:"",component:M,canActivate:[O.l],data:{allowedRoles:["add_taxslabs"]}}];let U=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[v.Bz.forChild(N),v.Bz]}),e})();var I=a(30906),w=a(65415),D=a(43189),J=a(54333),E=a(54040),R=a(84385),k=a(56709);let L=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.ez,U,I.ZU,i.u5,i.UX,w.T,D.h,J.JX,E.l,R.LD,k.p9]}),e})()},30597:(F,T,a)=>{a.d(T,{l:()=>l});var g=a(94650),v=a(88996),i=a(97185),t=a(42917),C=a(80927);let l=(()=>{class r{constructor(d,p,u,m,_){this.router=d,this.Arout=p,this.toastr=u,this.profileService=m,this.coreService=_}canActivate(d,p){const u=JSON.parse(localStorage.getItem("auth"));if(this.profileService.userDetails$.subscribe(m=>{this.userDetails=m,this.permissions=this.userDetails?.permission}),u){const m=d.data.allowedRoles,_=u.some(f=>m.includes(f.codename));if(this.coreService.getProfile().subscribe(f=>{this.userDetails=f,this.profileService.setUserDetails(this.userDetails);const x=f?.permission,y=this.profileService.getUserDetails();(!y||y.length!==x.length)&&(this.profileService.setUserPermission(x),window.location.reload())}),_)return!0}return this.toastr.error("User have Not Permission to Access This page"),this.router.navigate(["/dashboard"]),!1}}return r.\u0275fac=function(d){return new(d||r)(g.LFG(v.F0),g.LFG(v.gz),g.LFG(i._W),g.LFG(t.J),g.LFG(C.p))},r.\u0275prov=g.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},65415:(F,T,a)=>{a.d(T,{G:()=>i,T:()=>C});var g=a(94650),i=function(){function l(r,s,d){this.el=r,this.vcr=s,this.renderer=d,this.dtOptions={}}return l.prototype.ngOnInit=function(){var r=this;this.dtTrigger?this.dtTrigger.subscribe(function(s){r.displayTable(s)}):this.displayTable(null)},l.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},l.prototype.displayTable=function(r){var s=this;r&&(this.dtOptions=r),this.dtInstance=new Promise(function(d,p){Promise.resolve(s.dtOptions).then(function(u){0===Object.keys(u).length&&0===$("tbody tr",s.el.nativeElement).length?p("Both the table and dtOptions cannot be empty"):setTimeout(function(){var _={rowCallback:function(f,x,y){if(u.columns){var S=u.columns;s.applyNgPipeTransform(f,S),s.applyNgRefTemplate(f,S,x)}u.rowCallback&&u.rowCallback(f,x,y)}};_=Object.assign({},u,_),s.dt=$(s.el.nativeElement).DataTable(_),d(s.dt)})})})},l.prototype.applyNgPipeTransform=function(r,s){s.filter(function(p){return p.ngPipeInstance&&!p.ngTemplateRef}).forEach(function(p){var u=p.ngPipeInstance,m=p.ngPipeArgs||[],_=s.findIndex(function(S){return S.data===p.data}),f=r.childNodes.item(_),x=$(f).text(),y=u.transform.apply(u,function(l,r,s){if(s||2===arguments.length)for(var u,d=0,p=r.length;d<p;d++)(u||!(d in r))&&(u||(u=Array.prototype.slice.call(r,0,d)),u[d]=r[d]);return l.concat(u||Array.prototype.slice.call(r))}([x],m,!1));$(f).text(y)})},l.prototype.applyNgRefTemplate=function(r,s,d){var p=this;s.filter(function(m){return m.ngTemplateRef&&!m.ngPipeInstance}).forEach(function(m){var _=m.ngTemplateRef,f=_.ref,x=_.context,y=s.findIndex(function(O){return O.data===m.data}),S=r.childNodes.item(y);$(S).html("");var Z=Object.assign({},x,x?.userData,{adtData:d}),M=p.vcr.createEmbeddedView(f,Z);p.renderer.appendChild(S,M.rootNodes[0])})},l.\u0275fac=function(s){return new(s||l)(g.Y36(g.SBq),g.Y36(g.s_b),g.Y36(g.Qsj))},l.\u0275dir=g.lG2({type:l,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),l}(),t=a(36895),C=function(){function l(){}return l.forRoot=function(){return{ngModule:l}},l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=g.oAB({type:l}),l.\u0275inj=g.cJS({imports:[t.ez]}),l}()}}]);