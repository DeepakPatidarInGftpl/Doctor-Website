"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[6460],{86460:(b,x,n)=>{n.r(x),n.d(x,{CompanylistModule:()=>S});var c=n(96814),f=n(74408),C=n(46707),d=n.n(C),t=n(19212),s=n(31025),l=n(41789);function m(i,y){1&i&&(t.TgZ(0,"div",6)(1,"div",7)(2,"a",8),t._UZ(3,"img",9),t._uU(4,"Add Company "),t.qZA()()())}function r(i,y){if(1&i&&(t.TgZ(0,"a",37)(1,"div",38),t.O4$(),t.TgZ(2,"svg",39),t._UZ(3,"path",40)(4,"path",41),t.qZA()()()),2&i){const e=t.oxw().$implicit;t.MGl("routerLink","//masters/company-details/",null==e?null:e.id,"")}}function u(i,y){if(1&i&&(t.TgZ(0,"a",37)(1,"div",38),t.O4$(),t.TgZ(2,"svg",42),t._UZ(3,"path",43)(4,"path",44),t.qZA()()()),2&i){const e=t.oxw().$implicit;t.MGl("routerLink","//masters/editcompany/",null==e?null:e.id,"")}}function h(i,y){if(1&i){const e=t.EpF();t.TgZ(0,"a",45),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(),Z=a.index,A=a.$implicit,D=t.oxw();return t.KtG(D.confirmText(Z,null==A?null:A.id))})("click",function(){t.CHM(e);const a=t.oxw(),Z=a.$implicit,A=a.index,D=t.oxw();return t.KtG(D.delete(Z,A))}),t.TgZ(1,"div",38),t.O4$(),t.TgZ(2,"svg",46),t._UZ(3,"path",47),t.qZA()()()}}const p=(i,y,e)=>({"green-dot":i,grey:y,"bg-lightyellow":e});function g(i,y){if(1&i&&(t.TgZ(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13)(4,"div")(5,"h5",14),t._uU(6,"Company Details "),t.O4$(),t.TgZ(7,"svg",15),t._UZ(8,"path",16)(9,"polyline",17)(10,"line",18)(11,"line",19)(12,"polyline",20),t.qZA()(),t.kcU(),t._UZ(13,"hr"),t.qZA(),t.TgZ(14,"div",1)(15,"div",21)(16,"div",22)(17,"p",23),t._uU(18,"Name"),t.qZA(),t.TgZ(19,"p",23),t._uU(20,"Phone Number"),t.qZA(),t.TgZ(21,"p",23),t._uU(22,"Email"),t.qZA(),t.TgZ(23,"p",23),t._uU(24,"Country"),t.qZA(),t.TgZ(25,"p",23),t._uU(26,"Financial Year"),t.qZA(),t.TgZ(27,"p",23),t._uU(28,"Currency"),t.qZA(),t.TgZ(29,"p",23),t._uU(30,"GST Number"),t.qZA(),t.TgZ(31,"p",23),t._uU(32,"Is Active"),t.qZA()(),t.TgZ(33,"div",24)(34,"p",25)(35,"a",26),t._uU(36),t.qZA()(),t.TgZ(37,"p",25),t._uU(38),t.qZA(),t.TgZ(39,"p",25),t._uU(40),t.qZA(),t.TgZ(41,"p",25),t._uU(42),t.qZA(),t.TgZ(43,"p",25),t._uU(44),t.qZA(),t.TgZ(45,"p",25),t._uU(46),t.qZA(),t.TgZ(47,"p",25),t._uU(48),t.qZA(),t.TgZ(49,"div",27),t._UZ(50,"div",28),t.TgZ(51,"p"),t._uU(52),t.qZA()()()()()()(),t.TgZ(53,"div",12)(54,"div",13)(55,"div",29)(56,"h5",14),t._uU(57,"Company Address "),t.O4$(),t.TgZ(58,"svg",30),t._UZ(59,"path",31)(60,"path",32),t.qZA()(),t.kcU(),t._UZ(61,"hr"),t.qZA(),t.TgZ(62,"div",1)(63,"p",33),t._uU(64),t.qZA(),t.TgZ(65,"p",25),t._uU(66),t.TgZ(67,"span"),t._uU(68),t.qZA()(),t.TgZ(69,"p",25),t._uU(70),t.qZA()()()()(),t.TgZ(71,"div")(72,"div",34),t.YNc(73,r,5,1,"a",35)(74,u,5,1,"a",35)(75,h,4,0,"a",36),t.qZA()()()),2&i){const e=y.$implicit,o=t.oxw();t.xp6(35),t.MGl("routerLink","//masters/company-details/",null==e?null:e.id,""),t.xp6(1),t.hij("",null==e?null:e.name," "),t.xp6(2),t.Oqu(null==e?null:e.phone),t.xp6(2),t.Oqu(null==e?null:e.email),t.xp6(2),t.Oqu(null==e||null==e.country?null:e.country.country_name),t.xp6(2),t.Oqu(null==e||null==e.financial_year?null:e.financial_year.financial_year),t.xp6(2),t.Oqu(null==e?null:e.currency),t.xp6(2),t.Oqu(null==e?null:e.gst),t.xp6(2),t.Q6J("ngClass",t.kEZ(17,p,!0===(null==e?null:e.is_active),!1===(null==e?null:e.is_active),"Partial"===(null==e?null:e.is_active))),t.xp6(2),t.hij(" ",null==e?null:e.is_active,""),t.xp6(12),t.Oqu(e.address),t.xp6(2),t.hij("",e.pincode," , "),t.xp6(2),t.Oqu(e.state.state),t.xp6(2),t.Oqu(e.country.country_name),t.xp6(3),t.Q6J("ngIf",o.isDetails),t.xp6(1),t.Q6J("ngIf",o.isEdit),t.xp6(1),t.Q6J("ngIf",o.isDelete)}}let _=(()=>{class i{constructor(e,o,a){this.QueryService=e,this.companyService=o,this.router=a,this.dtOptions={},this.initChecked=!1,this.QueryService.filterToggle()}confirmText(e,o){d().fire({title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",buttonsStyling:!0,customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-danger ml-1"}}).then(a=>{a.isConfirmed&&this.companyService.deleteCompany(o).subscribe(Z=>{this.delRes=Z,this.delRes.success?(d().fire({icon:"success",title:"Deleted!",text:this.delRes.msg}),this.ngOnInit(),this.tableData.splice(e,1)):d().fire({icon:"error",title:"Not Deleted!",text:this.delRes.error})})})}ngOnInit(){this.companyService.userDetails$.subscribe(e=>{this.userDetails=e,this.userDetails?.permission?.map(a=>{"master"===a.content_type.app_label&&"company"===a.content_type.model&&"add_company"==a.codename?this.isAdd=a.codename:"master"===a.content_type.app_label&&"company"===a.content_type.model&&"change_company"==a.codename?this.isEdit=a.codename:"master"===a.content_type.app_label&&"company"===a.content_type.model&&"delete_company"==a.codename?this.isDelete=a.codename:"master"===a.content_type.app_label&&"company"===a.content_type.model&&"view_company"==a.codename&&(this.isDetails=a.codename)})}),this.companyService.getCompany().subscribe(e=>{this.tableData=e.reverse()})}selectAll(e){this.tableData.forEach(e?o=>{o.isSelected=!1}:o=>{o.isSelected=!0})}deleteId(e){this.companyService.deleteCompany(e).subscribe(o=>{this.delRes=o})}delete(e,o){this.tableData.splice(o,1),this.companyService.deleteC("/pv-api/company/",e.id).subscribe(a=>{})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(s._),t.Y36(l.J),t.Y36(f.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-companylist"]],decls:10,vars:2,consts:[[1,"card","bg"],[1,"card-body"],[1,"page-header"],[1,"page-title"],["class","page-header","style","float:right",4,"ngIf"],["class","company-details-card card",4,"ngFor","ngForOf"],[1,"page-header",2,"float","right"],[1,"page-btn"],["routerLink","//masters/addcompany",1,"btn","btn-added"],["src","assets/img/icons/plus.svg","alt","img",1,"me-1"],[1,"company-details-card","card"],[1,"sub-card","row"],[1,"col-sm-6"],[1,"card"],[1,"card-title","my-3","mx-2"],["_ngcontent-kof-c71","","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-file-text","addrss"],["_ngcontent-kof-c71","","d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"],["_ngcontent-kof-c71","","points","14 2 14 8 20 8"],["_ngcontent-kof-c71","","x1","16","y1","13","x2","8","y2","13"],["_ngcontent-kof-c71","","x1","16","y1","17","x2","8","y2","17"],["_ngcontent-kof-c71","","points","10 9 9 9 8 9"],[1,"d-flex"],[1,"card-h","mb-2"],[1,"grey-text"],[1,"card-p","mb-2"],[1,"bold-text"],[1,"bold-text",3,"routerLink"],[1,"bold-text","d-flex","align-items-center"],[1,"me-1",3,"ngClass"],[1,"w-100"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-geo-alt","addrss"],["d","M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z"],["d","M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"],[1,"bold-text","mb-1"],[1,"d-flex",2,"float","right"],[3,"routerLink",4,"ngIf"],["class","confirm-text",3,"click",4,"ngIf"],[3,"routerLink"],[1,"edit-icon"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-eye"],["d","M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"],["d","M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil-square"],["d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"],["fill-rule","evenodd","d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"],[1,"confirm-text",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-trash3"],["d","M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4"),t._uU(5,"Company List"),t.qZA(),t.TgZ(6,"h6"),t._uU(7,"View Company Details"),t.qZA()(),t.YNc(8,m,5,0,"div",4),t.qZA(),t.YNc(9,g,76,21,"div",5),t.qZA()()),2&o&&(t.xp6(8),t.Q6J("ngIf",a.isAdd),t.xp6(1),t.Q6J("ngForOf",a.tableData))},dependencies:[c.mk,c.sg,c.O5,f.rH],styles:[".company-details-card[_ngcontent-%COMP%]{border-radius:.625rem;box-shadow:.25rem .25rem .5rem #00000040;padding:30px 50px;border:1px solid #F9D9CC}.company-details-card[_ngcontent-%COMP%]   .bold-text[_ngcontent-%COMP%]{color:#000;font-size:18px;line-height:20px}.company-details-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{padding:0 20px}.company-details-card[_ngcontent-%COMP%]   .grey-text[_ngcontent-%COMP%]{color:#9c9c9c;line-height:20px;font-size:18px}.addrss[_ngcontent-%COMP%]{float:right;height:7%;width:7%;color:#ff9f43}.bg[_ngcontent-%COMP%]{background-color:#f2f3f9;border:none}.green[_ngcontent-%COMP%]{color:#90ee90;width:22%;height:22%}.grey[_ngcontent-%COMP%]{color:gray;width:22%;height:22%}.card-h[_ngcontent-%COMP%]{width:60%}.card-p[_ngcontent-%COMP%]{width:40%}.green-dot[_ngcontent-%COMP%]{width:10px;height:10px;background:#00FF00;border-radius:50%}.edit-icon[_ngcontent-%COMP%]{width:40px;height:40px;background:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center}.edit-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:25px;width:25px;color:#9c9c9c}"]})}return i})();var v=n(1971);const T=JSON.parse(localStorage.getItem("auth"));let M;T&&T.map(y=>{"master"===y.content_type.app_label&&"company"===y.content_type.model&&"view_company"==y.codename&&(M=y.codename)});const O=[{path:"",component:_,canActivate:[v.l],data:{allowedRoles:["view_company"]}}];let w=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(O),f.Bz]})}return i})();var P=n(98665),U=n(5164),E=n(56223),I=n(89727);let S=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[c.ez,w,P.T,E.u5,I.ZU,U.ii.forRoot()]})}return i})()},1971:(b,x,n)=>{n.d(x,{l:()=>s});var c=n(19212),f=n(74408),C=n(58763),d=n(41789),t=n(44293);let s=(()=>{class l{constructor(r,u,h,p,g){this.router=r,this.Arout=u,this.toastr=h,this.profileService=p,this.coreService=g}canActivate(r,u){const h=JSON.parse(localStorage.getItem("auth"));if(this.profileService.userDetails$.subscribe(p=>{this.userDetails=p,this.permissions=this.userDetails?.permission}),h){const p=r.data.allowedRoles;console.log(p,"allowedRoles");const g=h.some(_=>p.includes(_.codename));if(console.log(g),this.coreService.getProfile().subscribe(_=>{this.userDetails=_,this.profileService.setUserDetails(this.userDetails);const v=_?.permission,T=this.profileService.getUserDetails();(!T||T.length!==v.length)&&(this.profileService.setUserPermission(v),window.location.reload())}),g)return!0}return this.toastr.error("User have Not Permission to Access This page"),this.router.navigate(["/dashboard"]),!1}static#t=this.\u0275fac=function(u){return new(u||l)(c.LFG(f.F0),c.LFG(f.gz),c.LFG(C._W),c.LFG(d.J),c.LFG(t.p))};static#e=this.\u0275prov=c.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()},98665:(b,x,n)=>{n.d(x,{G:()=>c.G,T:()=>f.T});var c=n(37342),f=n(37263)},37342:(b,x,n)=>{n.d(x,{G:()=>C});var c=n(19212),C=function(){function d(t,s,l){this.el=t,this.vcr=s,this.renderer=l,this.dtOptions={}}return d.prototype.ngOnInit=function(){var t=this;this.dtTrigger?this.dtTrigger.subscribe(function(s){t.displayTable(s)}):this.displayTable(null)},d.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},d.prototype.displayTable=function(t){var s=this;t&&(this.dtOptions=t),this.dtInstance=new Promise(function(l,m){Promise.resolve(s.dtOptions).then(function(r){0===Object.keys(r).length&&0===$("tbody tr",s.el.nativeElement).length?m("Both the table and dtOptions cannot be empty"):setTimeout(function(){var h={rowCallback:function(p,g,_){if(r.columns){var v=r.columns;s.applyNgPipeTransform(p,v),s.applyNgRefTemplate(p,v,g)}r.rowCallback&&r.rowCallback(p,g,_)}};h=Object.assign({},r,h),s.dt=$(s.el.nativeElement).DataTable(h),l(s.dt)})})})},d.prototype.applyNgPipeTransform=function(t,s){s.filter(function(m){return m.ngPipeInstance&&!m.ngTemplateRef}).forEach(function(m){var r=m.ngPipeInstance,u=m.ngPipeArgs||[],h=s.findIndex(function(v){return v.data===m.data}),p=t.childNodes.item(h),g=$(p).text(),_=r.transform.apply(r,function(d,t,s){if(s||2===arguments.length)for(var r,l=0,m=t.length;l<m;l++)(r||!(l in t))&&(r||(r=Array.prototype.slice.call(t,0,l)),r[l]=t[l]);return d.concat(r||Array.prototype.slice.call(t))}([g],u,!1));$(p).text(_)})},d.prototype.applyNgRefTemplate=function(t,s,l){var m=this;s.filter(function(u){return u.ngTemplateRef&&!u.ngPipeInstance}).forEach(function(u){var h=u.ngTemplateRef,p=h.ref,g=h.context,_=s.findIndex(function(O){return O.data===u.data}),v=t.childNodes.item(_);$(v).html("");var T=Object.assign({},g,g?.userData,{adtData:l}),M=m.vcr.createEmbeddedView(p,T);m.renderer.appendChild(v,M.rootNodes[0])})},d.\u0275fac=function(s){return new(s||d)(c.Y36(c.SBq),c.Y36(c.s_b),c.Y36(c.Qsj))},d.\u0275dir=c.lG2({type:d,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),d}()},37263:(b,x,n)=>{n.d(x,{T:()=>d});var c=n(96814),C=(n(37342),n(19212)),d=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t.\u0275fac=function(l){return new(l||t)},t.\u0275mod=C.oAB({type:t}),t.\u0275inj=C.cJS({imports:[c.ez]}),t}()}}]);