"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[8880],{53506:(N,T,o)=>{o.d(T,{x:()=>A});var d=o(92340),_=o(94650),s=o(80529);let A=(()=>{class v{constructor(e){this.http=e,this.apiUrl=`${d.N.api}`}getSupplier(){return this.http.get(this.apiUrl+"/pv-api/supplier/")}getPurchase(){return this.http.get(this.apiUrl+"/pv-api/purchase_order/")}addPurchase(e){return this.http.post(this.apiUrl+"/pv-api/purchase_order/",e)}getPurchaseById(e){return this.http.get(`${this.apiUrl+"/pv-api/purchase_order/?id="}${e}`)}PurchaseIsActive(e,r){return this.http.patch(`${this.apiUrl+"/pv-api/purchase_order/?id="}${e}`,r)}updatePurchase(e,r){return this.http.put(`${this.apiUrl+"/pv-api/purchase_order/?id="}${r}`,e)}deletePurchase(e){return this.http.delete(`${this.apiUrl+"/pv-api/purchase_order/?id="}${e}`)}searchProduct(e){return this.http.get(this.apiUrl+"/pv-api/product_search/?search="+e)}productVariant(){return this.http.get(this.apiUrl+"/pv-api/product_variant/")}getMaterial(){return this.http.get(this.apiUrl+"/pv-api/material_inward/")}addMaterial(e){return this.http.post(this.apiUrl+"/pv-api/material_inward/",e)}getMaterialById(e){return this.http.get(`${this.apiUrl+"/pv-api/material_inward/?id="}${e}`)}MaterialIsActive(e,r){return this.http.patch(`${this.apiUrl+"/pv-api/material_inward/?id="}${e}`,r)}updateMaterial(e,r){return this.http.put(`${this.apiUrl+"/pv-api/material_inward/?id="}${r}`,e)}deleteMaterial(e){return this.http.delete(`${this.apiUrl+"/pv-api/material_inward/?id="}${e}`)}getPurchaseBill(){return this.http.get(this.apiUrl+"/pv-api/purchase_bill/")}addPurchaseBill(e){return this.http.post(this.apiUrl+"/pv-api/purchase_bill/",e)}getPurchaseBillById(e){return this.http.get(`${this.apiUrl+"/pv-api/purchase_bill/?id="}${e}`)}PurchaseBillIsActive(e,r){return this.http.patch(`${this.apiUrl+"/pv-api/purchase_bill/?id="}${e}`,r)}updatePurchaseBill(e,r){return this.http.put(`${this.apiUrl+"/pv-api/purchase_bill/?id="}${r}`,e)}deletePurchaseBill(e){return this.http.delete(`${this.apiUrl+"/pv-api/purchase_bill/?id="}${e}`)}getDebitNotes(){return this.http.get(this.apiUrl+"/pv-api/debit_note/")}addDebitNotes(e){return this.http.post(this.apiUrl+"/pv-api/debit_note/",e)}getDebitNotesById(e){return this.http.get(`${this.apiUrl+"/pv-api/debit_note/?id="}${e}`)}DebitNotesIsActive(e,r){return this.http.patch(`${this.apiUrl+"/pv-api/debit_note/?id="}${e}`,r)}updateDebitNotes(e,r){return this.http.put(`${this.apiUrl+"/pv-api/debit_note/?id="}${r}`,e)}deleteDebitNotes(e){return this.http.delete(`${this.apiUrl+"/pv-api/debit_note/?id="}${e}`)}getSearchProductById(e){return this.http.get(`${this.apiUrl+"/pv-api/variant-search/?search="}${e}`)}getSearchProduct(){return this.http.get(this.apiUrl+"/pv-api/variant-search/")}getPurchaseOrderPrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=PurchaseOrder")}getPurchaseBillPrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=PurchaseBill")}getDebitNotePrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=PurchaseReturn")}getMaterialInwardPrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=MaterialInward")}productBySupplier(){return this.http.get(this.apiUrl+"/pv-api/purchase_product_filter/")}getAdditionalCharge(){return this.http.get(this.apiUrl+"/pv-api/pos/additional_charge_pos/")}getTax(){return this.http.get(this.apiUrl+"/pv-api/tax/")}getPurchaseReturn(){return this.http.get(this.apiUrl+"/pv-api/purchase_return/")}addPurchaseReturn(e){return this.http.post(this.apiUrl+"/pv-api/purchase_return/",e)}getPurchaseReturnById(e){return this.http.get(`${this.apiUrl+"/pv-api/purchase_return/?id="}${e}`)}PurchaseReturnIsActive(e,r){return this.http.patch(`${this.apiUrl+"/pv-api/purchase_return/?id="}${e}`,r)}updatePurchaseReturn(e,r){return this.http.put(`${this.apiUrl+"/pv-api/purchase_return/?id="}${r}`,e)}deletePurchaseReturn(e){return this.http.delete(`${this.apiUrl+"/pv-api/purchase_return/?id="}${e}`)}filterVariant(e,r,a,c){let l=this.apiUrl+"/pv-api/purchase_product_filter/";const h=[];return e&&h.push(`supplier=${e}`),r&&h.push(`category=${r}`),a&&h.push(`subcategory=${a}`),c&&h.push(`search=${c}`),h.length>0&&(l+="?"+h.join("&")),this.http.get(l)}}return v.\u0275fac=function(e){return new(e||v)(_.LFG(s.eN))},v.\u0275prov=_.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},64735:(N,T,o)=>{o.r(T),o.d(T,{ExpenseModule:()=>Q});var d=o(36895),_=o(88996),s=o(24006),A=o(68675),v=o(54004),t=o(94650),e=o(53506),r=o(80927),a=o(54270),c=o(97185),l=o(47957),h=o(3238),m=o(59549),g=o(44144);function f(i,u){if(1&i){const n=t.EpF();t.TgZ(0,"mat-option",28),t.NdJ("onSelectionChange",function(){const U=t.CHM(n).$implicit,C=t.oxw();return t.KtG(C.oncheck(U.id))}),t._uU(1),t.qZA()}if(2&i){const n=u.$implicit;t.Q6J("value",n.name),t.xp6(1),t.Oqu(n.name)}}function x(i,u){1&i&&(t.TgZ(0,"mat-option",30),t._uU(1,"Please Enter 3 or more characters"),t.qZA())}function b(i,u){if(1&i&&(t.ynx(0),t.YNc(1,x,2,0,"mat-option",29),t.BQk()),2&i){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==n.supplierControl.value?null:n.supplierControl.value.length)<3)}}function P(i,u){1&i&&(t.TgZ(0,"span",31),t._uU(1,"Select supplier "),t.qZA())}function Z(i,u){1&i&&(t.TgZ(0,"span",31),t._uU(1,"Enter Amount"),t.qZA())}function S(i,u){1&i&&(t.TgZ(0,"span",31),t._uU(1,"Enter Remark"),t.qZA())}function F(i,u){if(1&i&&(t.TgZ(0,"option",32),t._uU(1),t.qZA()),2&i){const n=u.$implicit;t.s9C("value",n.id),t.xp6(1),t.Oqu(n.name)}}function M(i,u){1&i&&(t.TgZ(0,"span",31),t._uU(1,"Select Bank"),t.qZA())}function B(i,u){1&i&&(t.TgZ(0,"button",33),t._uU(1,"Submit"),t.qZA())}function D(i,u){1&i&&(t.TgZ(0,"button",34),t._UZ(1,"span",35),t._uU(2," \xa0 Submit"),t.qZA())}const I=function(i){return{"is-invalid":i}};let J=(()=>{class i{constructor(n,p,y,U,C,q){this.fb=n,this.purchaseService=p,this.coreService=y,this.posService=U,this.toastr=C,this.router=q,this.supplierControlName="party",this.supplierControl=new s.NI,this.productOption=[],this.suppliers=[],this.loaders=!1}get f(){return this.expenceForm.controls}ngOnInit(){this.expenceForm=this.fb.group({party:new s.NI("",[s.kI.required]),amount:new s.NI("",[s.kI.required,s.kI.pattern(/^[0-9]*$/)]),remarks:new s.NI("",[s.kI.required]),non_gst:new s.NI("",[s.kI.required]),payment_account:new s.NI("",[s.kI.required])}),this.filteredSuppliers=this.supplierControl.valueChanges.pipe((0,A.O)(""),(0,v.U)(n=>this._filter(n,!0))),this.getBank(),this.getSuuplier()}getBank(){this.posService.getCompanyBank().subscribe(n=>{this.bankList=n})}_filter(n,p){const y="string"==typeof n?n.toLowerCase():n.toString().toLowerCase(),U=this.suppliers.filter(p?C=>C.name.toLowerCase().includes(y):C=>!C.name.toLowerCase().includes(y));return!p&&0===U.length&&U.push({name:"No data found"}),U}get supplier(){return this.expenceForm.get("party")}getSuuplier(){this.purchaseService.getSupplier().subscribe(n=>{this.suppliers=n})}oncheck(n){this.expenceForm.patchValue({party:n})}submit(){let n=new FormData;n.append("party",this.expenceForm.get("party")?.value),n.append("amount",this.expenceForm.get("amount")?.value),n.append("remarks",this.expenceForm.get("remarks")?.value),n.append("non_gst",this.expenceForm.get("non_gst")?.value),n.append("payment_account",this.expenceForm.get("payment_account")?.value),this.expenceForm.valid?(this.loaders=!0,this.posService.expensePayment(n).subscribe(p=>{this.addRes=p,this.addRes.isSuccess?(this.toastr.success(this.addRes.msg),this.loaders=!1,this.expenceForm.reset(),this.router.navigate(["//bank/expense"])):this.loaders=!1},p=>{this.loaders=!1})):this.expenceForm.markAllAsTouched()}get party(){return this.expenceForm.get("party")}get amount(){return this.expenceForm.get("amount")}get remarks(){return this.expenceForm.get("remarks")}get non_gst(){return this.expenceForm.get("non_gst")}get payment_account(){return this.expenceForm.get("payment_account")}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(s.qu),t.Y36(e.x),t.Y36(r.p),t.Y36(a.v),t.Y36(c._W),t.Y36(_.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-expense"]],decls:53,vars:31,consts:[[1,"page-header"],[1,"page-title"],[1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-4","col-md-6","col-12"],[1,"form-group"],[1,"w-100",2,"padding","0","width","100%","min-width","100%","border-top","none"],["type","text","placeholder","Search Party","aria-label","Party","matInput","",2,"box-sizing","border-box",3,"formControl","matAutocomplete","ngClass"],["auto","matAutocomplete"],["style","color:#FF9F43",3,"value","onSelectionChange",4,"ngFor","ngForOf"],[4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"col-lg-3","col-sm-3","col-12"],["type","text","formControlName","amount","id","amount",3,"ngClass"],["type","text","formControlName","remarks","id","remarks",3,"ngClass"],["formControlName","payment_account",1,"form-select",3,"ngClass"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","my-4"],[1,"d-flex"],["type","checkbox","formControlName","non_gst",3,"id","ngModel"],[1,"d_flex",2,"margin-bottom","0","margin-left","5px",3,"for"],[1,"col-lg-12"],["class","btn btn-submit me-2",4,"ngIf"],["class","btn btn-submit me-2","type","submit","disabled","",4,"ngIf"],["routerLink","//bank/expense",1,"btn","btn-cancel"],[2,"color","#FF9F43",3,"value","onSelectionChange"],["class","is-loading",4,"ngIf"],[1,"is-loading"],[1,"text-danger"],[3,"value"],[1,"btn","btn-submit","me-2"],["type","submit","disabled","",1,"btn","btn-submit","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(n,p){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3,"Expence"),t.qZA()()(),t.TgZ(4,"div",2)(5,"div",3)(6,"form",4),t.NdJ("ngSubmit",function(){return p.submit()}),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"label"),t._uU(11,"Party Name*"),t.qZA(),t.TgZ(12,"mat-form-field",8),t._UZ(13,"input",9),t.TgZ(14,"mat-autocomplete",null,10),t.YNc(16,f,2,2,"mat-option",11),t.ALo(17,"async"),t.YNc(18,b,2,1,"ng-container",12),t.ALo(19,"async"),t.qZA()(),t.YNc(20,P,2,0,"span",13),t.qZA()(),t.TgZ(21,"div",14)(22,"div",7)(23,"label"),t._uU(24,"Amount"),t.qZA(),t._UZ(25,"input",15),t.YNc(26,Z,2,0,"span",13),t.qZA()(),t.TgZ(27,"div",14)(28,"div",7)(29,"label"),t._uU(30,"Remarks*"),t.qZA(),t._UZ(31,"input",16),t.YNc(32,S,2,0,"span",13),t.qZA()(),t.TgZ(33,"div",14)(34,"div",7)(35,"label"),t._uU(36,"Payment Account*"),t.qZA(),t.TgZ(37,"select",17)(38,"option",18),t._uU(39,"Select Payment Account"),t.qZA(),t.YNc(40,F,2,2,"option",19),t.qZA(),t.YNc(41,M,2,0,"span",13),t.qZA()(),t.TgZ(42,"div",14)(43,"div",20)(44,"div",21),t._UZ(45,"input",22),t.TgZ(46,"label",23),t._uU(47,"Non GST"),t.qZA()()()(),t.TgZ(48,"div",24),t.YNc(49,B,2,0,"button",25),t.YNc(50,D,3,0,"button",26),t.TgZ(51,"a",27),t._uU(52,"Cancel"),t.qZA()()()()()()),2&n){const y=t.MAs(15);t.xp6(6),t.Q6J("formGroup",p.expenceForm),t.xp6(7),t.Q6J("formControl",p.supplierControl)("matAutocomplete",y)("ngClass",t.VKq(23,I,p.f.party.touched&&p.f.party.invalid)),t.xp6(3),t.Q6J("ngForOf",t.lcZ(17,19,p.filteredSuppliers)),t.xp6(2),t.Q6J("ngIf",t.lcZ(19,21,p.filteredSuppliers)),t.xp6(2),t.Q6J("ngIf",p.supplier&&p.supplier.invalid&&p.supplier.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(25,I,p.f.amount.touched&&p.f.amount.invalid)),t.xp6(1),t.Q6J("ngIf",p.amount&&p.amount.invalid&&p.amount.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(27,I,p.f.remarks.touched&&p.f.remarks.invalid)),t.xp6(1),t.Q6J("ngIf",p.remarks&&p.remarks.invalid&&p.remarks.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(29,I,p.f.payment_account.touched&&p.f.payment_account.invalid)),t.xp6(3),t.Q6J("ngForOf",p.bankList),t.xp6(1),t.Q6J("ngIf",p.payment_account&&p.payment_account.invalid&&p.payment_account.touched),t.xp6(4),t.Q6J("id","checkboxMeasure-")("ngModel",!0),t.xp6(1),t.Q6J("for","checkboxMeasure-"),t.xp6(3),t.Q6J("ngIf",!p.loaders),t.xp6(1),t.Q6J("ngIf",p.loaders)}},dependencies:[d.mk,d.sg,d.O5,_.yS,s._Y,s.YN,s.Kr,s.Fj,s.Wl,s.EJ,s.JJ,s.JL,s.oH,s.sg,s.u,l.XC,l.ZL,h.ey,m.KE,g.Nt,d.Ov]}),i})();var k=o(30597);const E=JSON.parse(localStorage.getItem("auth"));let R;E&&E.map(u=>{"pos"===u.content_type.app_label&&"expance"===u.content_type.model&&"add_expance"==u.codename&&(R=u.codename)});const O=[{path:"",component:J,canActivate:[k.l],data:{allowedRoles:["add_expance"]}}];let Y=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[_.Bz.forChild(O),_.Bz]}),i})();var w=o(8468);let Q=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.ez,Y,w.I,s.u5,s.UX,l.Bb,m.lN,g.c]}),i})()},65415:(N,T,o)=>{o.d(T,{G:()=>s,T:()=>v});var d=o(94650),s=function(){function t(e,r,a){this.el=e,this.vcr=r,this.renderer=a,this.dtOptions={}}return t.prototype.ngOnInit=function(){var e=this;this.dtTrigger?this.dtTrigger.subscribe(function(r){e.displayTable(r)}):this.displayTable(null)},t.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},t.prototype.displayTable=function(e){var r=this;e&&(this.dtOptions=e),this.dtInstance=new Promise(function(a,c){Promise.resolve(r.dtOptions).then(function(l){0===Object.keys(l).length&&0===$("tbody tr",r.el.nativeElement).length?c("Both the table and dtOptions cannot be empty"):setTimeout(function(){var m={rowCallback:function(g,f,x){if(l.columns){var b=l.columns;r.applyNgPipeTransform(g,b),r.applyNgRefTemplate(g,b,f)}l.rowCallback&&l.rowCallback(g,f,x)}};m=Object.assign({},l,m),r.dt=$(r.el.nativeElement).DataTable(m),a(r.dt)})})})},t.prototype.applyNgPipeTransform=function(e,r){r.filter(function(c){return c.ngPipeInstance&&!c.ngTemplateRef}).forEach(function(c){var l=c.ngPipeInstance,h=c.ngPipeArgs||[],m=r.findIndex(function(b){return b.data===c.data}),g=e.childNodes.item(m),f=$(g).text(),x=l.transform.apply(l,function(t,e,r){if(r||2===arguments.length)for(var l,a=0,c=e.length;a<c;a++)(l||!(a in e))&&(l||(l=Array.prototype.slice.call(e,0,a)),l[a]=e[a]);return t.concat(l||Array.prototype.slice.call(e))}([f],h,!1));$(g).text(x)})},t.prototype.applyNgRefTemplate=function(e,r,a){var c=this;r.filter(function(h){return h.ngTemplateRef&&!h.ngPipeInstance}).forEach(function(h){var m=h.ngTemplateRef,g=m.ref,f=m.context,x=r.findIndex(function(S){return S.data===h.data}),b=e.childNodes.item(x);$(b).html("");var P=Object.assign({},f,f?.userData,{adtData:a}),Z=c.vcr.createEmbeddedView(g,P);c.renderer.appendChild(b,Z.rootNodes[0])})},t.\u0275fac=function(r){return new(r||t)(d.Y36(d.SBq),d.Y36(d.s_b),d.Y36(d.Qsj))},t.\u0275dir=d.lG2({type:t,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),t}(),A=o(36895),v=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[A.ez]}),t}()}}]);