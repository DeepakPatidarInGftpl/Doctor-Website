"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[94431],{35337:(te,Q,W)=>{W.d(Q,{D:()=>j});var z=W(96166),X=W(12983),B=W.n(X),Z=W(61135),V=W(94650),q=W(36895),v=W(42917);let j=(()=>{class R{constructor(n,e){this._date_pipe=n,this._com=e,this.loaderPdf=new Z.X(!1)}generatePdf(n){this.loaderPdf.next(!0),this._com.loadImage().then(e=>{const l=new z.default("p","mm","a4"),C=document.createElement("canvas"),T=C.getContext("2d");C.width=200,C.height=200,T.clearRect(0,0,200,200),T.drawImage(e,0,0,200,200);const F=C.toDataURL("image/png",.9),K=this._date_pipe.transform(n.Fist_date,"dd-MMMM-yyyy"),A=this._date_pipe.transform(n.Secouand_date,"dd-MMMM-yyyy"),H=[n.thead1],k=[n.tbody1],$=[n.table2head],N=n.foot2,b=N.length;let E=21;if("Goods Received"===n.Type||"New Stock Transfer"===n.Type||"Stock Transfer Request"===n.Type?E=13:"Invoice"===n.Type||"Purchase Return"===n.Type?E=18:"Scrap Entry"===n.Type&&(E=28),(S=>{const p=n.table2body.length%S,x=S-p;if(0!==p)for(let _=0;_<x;_++)n.table2body.push([])})(E),"Countra Voucher"!==n.Type&&"Debit Note"!==n.Type&&"Credit Note"!==n.Type){const S="Goods Received"===n.Type?99:"Scrap Entry"===n.Type?47:92;l.autoTable({head:$,body:n.table2body,foot:N,startY:S,margin:{top:S},headStyles:{fontSize:7,textColor:[0,0,0],fillColor:[255,202,153]},bodyStyles:{fillColor:[255,255,255],fontSize:8},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:7,halign:"left"},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:p=>{const{cell:x,table:_}=p,{x:P,y:w,width:u,height:s}=x;if(l.setDrawColor(0,0,0),l.setLineWidth(p.column.index===_.columns.length-1?.2:.4),l.line(x.x+x.width,x.y,x.x+x.width,x.y+x.height),"head"===p.section&&(p.row.index<=2&&(l.setLineWidth(.2),l.line(x.x,x.y,x.x+x.width,x.y)),4===p.column.index&&(l.setLineWidth(0),l.line(x.x+x.width,x.y,x.x+x.width,x.y+x.height))),"foot"===p.section){const a="Invoice"===n.Type||"Goods Received"===n.Type||"New Stock Transfer"===n.Type||"Stock Transfer Request"===n.Type;(0===p.row.index||1===p.row.index||p.row.index===b-1||a&&2===p.row.index)&&(l.setLineWidth(.2),l.line(P,w,P+u,w),l.line(P,w+s,P+u,w+s))}0===p.column.index&&(l.setLineWidth(.2),l.line(x.x,x.y,x.x,x.y+x.height))}})}("Goods Received"===n.Type||"New Stock Transfer"===n.Type||"Stock Transfer Request"===n.Type&&n.show)&&l.autoTable({head:n.Thead3,body:n.Tbody3,foot:n.Tfoot3,startY:l.lastAutoTable.finalY+2,headStyles:{fontSize:7,textColor:[0,0,0],fillColor:[255,202,153]},bodyStyles:{fillColor:[255,255,255],fontSize:8},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:7,halign:"left"},margin:{top:l.lastAutoTable.finalY+2},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:S=>{const{cell:f,table:p}=S,{x,y:_,width:P,height:w}=f;S.column.index==p.columns.length-1?(l.setDrawColor(0,0,0),l.setLineWidth(.2),l.line(f.x+f.width,f.y,f.x+f.width,f.y+f.height)):(l.setDrawColor(0,0,0),l.setLineWidth(.4),l.line(f.x+f.width,f.y,f.x+f.width,f.y+f.height)),"head"===S.section&&((0==S.row.index||1==S.row.index)&&(l.setDrawColor(0,0,0),l.setLineWidth(.2),l.line(f.x,f.y,f.x+f.width,f.y)),2==S.row.index&&(l.setDrawColor(0,0,0),l.setLineWidth(.2),l.line(f.x,f.y,f.x+f.width,f.y)),4===S.column.index&&(l.setDrawColor(0,0,0),l.setLineWidth(0),l.line(f.x+f.width,f.y,f.x+f.width,f.y+f.height))),"foot"===S.section&&((0===S.row.index||1===S.row.index||S.row.index===b-1)&&(l.setDrawColor(0,0,0),l.setLineWidth(.2),l.line(x,_,x+P,_),l.line(x,_+w,x+P,_+w)),("Invoice"===n.Type||"Goods Received"===n.Type&&2===S.row.index)&&(l.setDrawColor(0,0,0),l.setLineWidth(.2),l.line(x,_,x+P,_),l.line(x,_+w,x+P,_+w))),0==S.column.index&&(l.setDrawColor(0,0,0),l.setLineWidth(.2),l.line(f.x,f.y,f.x,f.y+f.height))}});const G=l.getNumberOfPages();for(let S=1;S<=G;S++){if(l.setPage(S),l.setFontSize(9),l.setFontSize(8),S===G){const w="Scrap Entry"===n.Type?278.4:n.table2body.length>=20?276.4:275.5;l.text(`${n.company_name} - Proudly coded`,16,w),l.setTextColor(24,129,176),l.text("by GFTPL",60,w),l.setTextColor(0,0,0),l.text("Thank You For The Business",157,w)}else l.text("Continued on next page",n.table2body.length>=20?160:190,n.table2body.length>=20?280.5:275);let f=14;l.addImage(F,"PNG",f,8,31,10),l.setFontSize(18),l.setTextColor(256,112,8),l.text(`${n.company_name}`,51,15),l.setTextColor(256,112,8),l.setTextColor(0,0,0),l.setFontSize(9),l.text(`GST ${n.company_gst}`,f,23),l.text(`${n.top_left_address_line1}`,f,27),l.text(`${n.top_left_address_line2}`,f,31),l.text(`Phone: ${n.top_left_phone}`,f,39),l.text(`Email: ${n.top_left_email}`,f,35),"Scrap Entry"!==n.Type&&(l.setTextColor(256,112,8),l.setFontSize(11),l.text("BILLING ADDRESS",f,48),l.setTextColor(0,0,0),l.setFontSize(9),l.text(`${n.company_name}`,f,55),l.text(`${n.BILLING_ADDRESS.address_line_1} ,${n.BILLING_ADDRESS.address_line_2}`,f,59),l.text(`${n.BILLING_ADDRESS.address_line_3}`,f,63),l.text(`Phone: ${n.BILLING_ADDRESS.phone}`,f,67),l.text(`${n.BILLING_ADDRESS.email}`,f,71)),l.setTextColor(0,0,0),l.setFontSize("Stock Transfer Request"===n.Type?16:19),l.text(`${n.Type}`,145,14),l.setDrawColor(0,0,0),l.setLineWidth(.2),l.line(197,17,142,17),l.setFontSize(7),l.text(`${n.Type} date : ${K}`,144,20),l.line(197,22,142,22),l.text(`${n.Type} no: ${n.order_no}`,144,25),l.line(197,27,142,27),l.text(`Page : ${S}`,144,30),l.line(197,32,142,32);let p=32;A&&(l.text(`Expiry Date : ${A}`,145,35),l.line(197,37,142,37),p=37),l.line(142,p,142,17),l.line(197,p,197,17);let x=159;"Scrap Entry"!==n.Type&&(l.setTextColor(256,112,8),l.setFontSize(11),l.text("SHIPPING ADDRESS",x,48),l.setTextColor(0,0,0),l.setFontSize(9),l.text(`${n.company_name}`,x,55),l.text(`${n.SHIPPING_ADDRESS.address_line_1} ,${n.SHIPPING_ADDRESS.address_line_2}`,x,59),l.text(`${n.SHIPPING_ADDRESS.address_line_3}`,x,63),l.text(`Phone: ${n.SHIPPING_ADDRESS.phone}`,x,67),l.text(`${n.SHIPPING_ADDRESS.email}`,x,71));const _=l.internal.pageSize.getWidth(),P=5;l.setDrawColor(224,224,224),l.setLineWidth(.2),l.line(P,42,_-P,42),B()(l,{head:H,body:"Scrap Entry"==n.Type?n.tbody1:k,startY:75,headStyles:{fontSize:"Goods Received"===n.Type?8:"Expense Voucher"===n.Type?7:9,textColor:[0,0,0],fillColor:[255,202,153]},alternateRowStyles:{fillColor:[255,255,255]},styles:{lineWidth:0,fillColor:void 0,halign:"center"},didDrawCell:w=>{if("body"===w.section||"head"===w.section){const{cell:u,table:s}=w;l.setDrawColor(0,0,0),l.setLineWidth(.2),0==w.row.index&&l.line(u.x,u.y,u.x+u.width,u.y),w.row.index==s.body.length-1&&l.line(u.x,u.y+u.height,u.x+u.width,u.y+u.height),0==w.column.index&&l.line(u.x,u.y,u.x,u.y+u.height),w.column.index==s.columns.length-1&&l.line(u.x+u.width,u.y,u.x+u.width,u.y+u.height)}}}),l.setDrawColor(0,0,0),l.setLineWidth(.2),"Goods Received"===n.Type?l.line(14,108.3,196,108.3):"Scrap Entry"==n.Type?l.line(14,53.5,196,53.5):"Countra Voucher"!==n.Type&&"Debit Note"!==n.Type&&"Credit Note"!==n.Type&&l.line(14,98.5,196,98.5)}l.save(`${n.Type}.pdf`,{returnPromise:!0}).then(()=>{setTimeout(()=>{this.loaderPdf.next(!1)},1e3)})})}nextPages(n){console.log(n.table2body);const e=new z.default("p","mm","a4");this._com.loadImage().then(l=>{const C=document.createElement("canvas"),T=C.getContext("2d");C.width=200,C.height=200,T.clearRect(0,0,200,200),T.drawImage(l,0,0,200,200);const F=C.toDataURL("image/png",.9),K=n.table3head,A=[n.table2head],H=n.table3body,k=n.tbody1,$=n.foot2,N=n.table4head,b=n.table4body,E=n.table4foot,G=$.length,S=b.length,f=E.length;(s=>{const a=n.table2body.length%2,h=2-a;if(0!==a)for(let r=0;r<h;r++)n.table2body.push([])})(),e.autoTable({head:A,body:n.table2body,foot:$,startY:90,margin:{top:90},headStyles:{fontSize:8,textColor:[0,0,0],fillColor:[255,255,255]},bodyStyles:{fillColor:[255,255,255],fontSize:8,textColor:[0,0,0]},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:8,fontStyle:"normal"},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:s=>{const{cell:t,table:a}=s,{x:h,y:r,width:d,height:o}=t;if(e.setDrawColor(0,0,0),"body"===s.section||"head"===s.section){const i=0===s.row.index,g=1===s.row.index,c=0===s.column.index,y=s.column.index===a.columns.length-1;c||y||i||g?(e.setLineWidth(.2),(i||g)&&(e.line(t.x,t.y,t.x+t.width,t.y),e.line(t.x,t.y+t.height,t.x+t.width,t.y+t.height)),c&&e.line(t.x,t.y,t.x,t.y+t.height),y&&e.line(t.x+t.width,t.y,t.x+t.width,t.y+t.height)):t.styles.lineWidth=0}if("foot"===s.section){e.setLineWidth(.2);const i=0===s.row.index,g=s.row.index===G-1,c=0===s.column.index,y=s.column.index===s.table.columns.length-1;if(5===t.colSpan&&0===s.row.index&&0===s.column.index){t.styles.lineWidth=0,i&&e.line(h,r,h+d,r),g&&e.line(h,r+o,h+d,r+o),c&&e.line(h,r,h,r+o),y&&e.line(h+d,r,h+d,r+o);try{(new Image).src=F,e.addImage(F,"PNG",h+86,r+16,34,10)}catch(m){console.error("Error loading image:",m)}}else 3===t.colSpan?(e.line(h,r,h+d,r),e.setLineWidth(.2),e.line(h,r,h,r+o),e.line(h,r+o,h+d,r+o)):2===t.colSpan&&(e.line(h,r,h+d,r),e.setLineWidth(.2),e.line(h,r+o,h+d,r+o),e.line(h+d,r,h+d,r+o))}}}),e.autoTable({head:K,body:H,startY:e.lastAutoTable.finalY+-1,headStyles:{fontSize:8,textColor:[0,0,0],fillColor:[255,255,255]},bodyStyles:{fillColor:[255,255,255],fontSize:8},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:8,halign:"left"},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:s=>{const{cell:t,table:a}=s,{x:h,y:r,width:d,height:o}=t;e.setDrawColor(0,0,0),("body"===s.section||"head"===s.section)&&(e.setLineWidth(.2),e.line(h,r,h,r+o),e.line(h+d,r,h+d,r+o),e.line(h,r,h+d,r),e.line(h,r+o,h+d,r+o)),(0===s.column.index||1===s.column.index||s.column.index===a.columns.length)&&(e.setLineWidth(.2),e.line(t.x,t.y,t.x,t.y+t.height),e.line(t.x+t.width,t.y,t.x+t.width,t.y+t.height))}}),e.autoTable({head:N,body:b,foot:E,startY:e.lastAutoTable.finalY+-1,headStyles:{fontSize:9,textColor:[0,0,0],fillColor:[255,255,255]},bodyStyles:{fillColor:[255,255,255],fontSize:9,textColor:[0,0,0]},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:9},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:s=>{const{cell:t,table:a}=s,{x:h,y:r,width:d,height:o}=t;if(e.setDrawColor(0,0,0),("head"===s.section||"body"===s.section)&&((0===s.row.index||s.row.index===S)&&(e.setLineWidth(.2),e.line(h,r,h+d,r),e.line(h,r+o,h+d,r+o)),e.setLineWidth(.2),e.line(t.x+t.width,t.y,t.x+t.width,t.y+t.height),(0===s.column.index||s.column.index===a.columns.length-1)&&(e.setLineWidth(.2),e.line(t.x,t.y,t.x,t.y+t.height),e.line(t.x+t.width,t.y,t.x+t.width,t.y+t.height))),"foot"===s.section){const i=0===s.row.index,g=s.row.index===f-1,c=0===s.column.index,y=s.column.index===a.columns.length-1;c||y||i||g?(e.setLineWidth(.2),i&&e.line(t.x,t.y,t.x+t.width,t.y),g&&e.line(t.x,t.y+t.height,t.x+t.width,t.y+t.height),c&&e.line(t.x,t.y,t.x,t.y+t.height),y&&e.line(t.x+t.width,t.y,t.x+t.width,t.y+t.height),e.setLineWidth(.2),e.line(t.x+t.width,t.y,t.x+t.width,t.y+t.height)):t.styles.lineWidth=0}}});const u=e.getNumberOfPages();for(let s=1;s<=u;s++){if(e.setPage(s),e.setFontSize(9),e.setFontSize(8),s===u){const d="Scrap Entry"===n.Type?220.4:n.table2body.length>=2?218.4:217.5;e.setTextColor(24,129,176),e.setTextColor(0,0,0),e.setFont(void 0,"bold"),e.text("Thank You For The Business",85,d)}else e.text("Continued on next page",n.table2body.length>=2?160:190,n.table2body.length>=2?280.5:275);let t=14;e.setFontSize(16),e.setTextColor(0,0,0),e.setFont(void 0,"bold"),e.text(`${n.company_name.toUpperCase()}`,t,15),e.setTextColor(256,112,8),e.setTextColor(0,0,0),e.setFontSize(9),e.setFont(void 0,"normal"),e.text(`${n.top_left_address_line1}`,t,19),e.text(`${n.top_left_address_line2}`,t,23),e.setFont(void 0,"bold"),e.text(`GSTIN: ${n.company_gst}`,t,27),e.text(`MOBILE: ${n.top_left_phone}, EMAIL Id: ${n.top_left_email}`,t,31);let a=156;e.setTextColor(135,206,235),e.setFont(void 0,"bold"),e.setFontSize(16),e.text("TAX INVOICE",190,14,{align:"right"}),e.setFontSize(9),e.setTextColor(0,0,0),e.text("ORIGINAL FOR RECIPIENT ",190,18,{align:"right"}),e.addImage(F,"PNG",a,20,34,10);const h=e.internal.pageSize.getWidth(),r=14;e.setDrawColor(0,0,0),e.setLineWidth(.2),e.line(r,40,h-r,40),B()(e,{body:k,startY:40,headStyles:{fontSize:8,textColor:[0,0,0],fillColor:[255,202,153]},bodyStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:8,fontStyle:"normal"},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:8},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:d=>{const{cell:o,table:i}=d,{x:g,y:c,width:y}=o;e.setDrawColor(0,0,0),e.line(o.x+o.width,o.y,o.x+o.width,o.y+o.height),"body"===d.section&&(8===o.colSpan&&(o.styles.lineWidth=0,(0===d.column.index||d.column.index===i.columns.length-1)&&(e.line(o.x,o.y,o.x,o.y+o.height),e.line(o.x+o.width,o.y,o.x+o.width,o.y+o.height))),(2===d.cell.colSpan||[0,1,2,3].includes(d.row.index))&&8!==o.colSpan&&(e.setFont(void 0,"bold"),e.setLineWidth(0),e.line(g,c,g+y,c)))}})}})}generateNewPdf(n){this.loaderPdf.next(!0);const e=new z.default("p","mm","a4");this._com.loadImage().then(l=>{const C=document.createElement("canvas"),T=C.getContext("2d");C.width=200,C.height=200,T.clearRect(0,0,200,200),T.drawImage(l,0,0,200,200);const F=C.toDataURL("image/png",.9),K=n.table3head,A=[n.table2head],H=n.table3body,k=n.tbody1,$=n.foot2,N=n.table4head,b=n.table4body,E=n.table4foot,G=$.length,S=b.length,f=E.length;(s=>{const a=n.table2body.length%2,h=2-a;if(0!==a)for(let r=0;r<h;r++)n.table2body.push([])})();const _={top:90};e.autoTable({head:A,body:n.table2body,foot:$,startY:90,margin:_,headStyles:{fontSize:8,textColor:[0,0,0],fillColor:[255,255,255]},bodyStyles:{fillColor:[255,255,255],fontSize:8,textColor:[0,0,0]},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:8,fontStyle:"normal"},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:s=>{const{cell:t,table:a}=s,{x:h,y:r,width:d,height:o}=t;if(e.setDrawColor(0,0,0),"body"===s.section||"head"===s.section){const i=0===s.row.index,g=1===s.row.index,c=0===s.column.index,y=s.column.index===a.columns.length-1;c||y||i||g?(e.setLineWidth(.2),(i||g)&&(e.line(t.x,t.y,t.x+t.width,t.y),e.line(t.x,t.y+t.height,t.x+t.width,t.y+t.height)),c&&e.line(t.x,t.y,t.x,t.y+t.height),y&&e.line(t.x+t.width,t.y,t.x+t.width,t.y+t.height)):t.styles.lineWidth=0}if("foot"===s.section){e.setLineWidth(.2);const i=0===s.row.index,g=s.row.index===G-1,c=0===s.column.index,y=s.column.index===s.table.columns.length-1;if(5===t.colSpan&&0===s.row.index&&0===s.column.index){t.styles.lineWidth=0,i&&e.line(h,r,h+d,r),g&&e.line(h,r+o,h+d,r+o),c&&e.line(h,r,h,r+o),y&&e.line(h+d,r,h+d,r+o);try{(new Image).src=F,e.addImage(F,"PNG",h+86,r+16,34,10)}catch(m){console.error("Error loading image:",m)}}else 3===t.colSpan?(e.line(h,r,h+d,r),e.setLineWidth(.2),e.line(h,r,h,r+o),e.line(h,r+o,h+d,r+o)):2===t.colSpan&&(e.line(h,r,h+d,r),e.setLineWidth(.2),e.line(h,r+o,h+d,r+o),e.line(h+d,r,h+d,r+o))}}}),e.autoTable({head:K,body:H,startY:e.lastAutoTable.finalY+-1,headStyles:{fontSize:8,textColor:[0,0,0],fillColor:[255,255,255]},bodyStyles:{fillColor:[255,255,255],fontSize:8,halign:"center"},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:8,halign:"left"},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:s=>{const{cell:t,table:a}=s,{x:h,y:r,width:d,height:o}=t;e.setDrawColor(0,0,0),("body"===s.section||"head"===s.section)&&(e.setLineWidth(.2),e.line(h,r,h,r+o),e.line(h+d,r,h+d,r+o),e.line(h,r,h+d,r),e.line(h,r+o,h+d,r+o)),(0===s.column.index||1===s.column.index||s.column.index===a.columns.length)&&(e.setLineWidth(.2),e.line(t.x,t.y,t.x,t.y+t.height),e.line(t.x+t.width,t.y,t.x+t.width,t.y+t.height))}}),e.autoTable({head:N,body:b,foot:E,startY:e.lastAutoTable.finalY+-1,headStyles:{fontSize:9,textColor:[0,0,0],fillColor:[255,255,255]},bodyStyles:{fillColor:[255,255,255],fontSize:9,textColor:[0,0,0]},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:9},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:s=>{const{cell:t,table:a}=s,{x:h,y:r,width:d,height:o}=t;if(e.setDrawColor(0,0,0),("head"===s.section||"body"===s.section)&&((0===s.row.index||s.row.index===S)&&(e.setLineWidth(.2),e.line(h,r,h+d,r),e.line(h,r+o,h+d,r+o)),e.setLineWidth(.2),e.line(t.x+t.width,t.y,t.x+t.width,t.y+t.height),(0===s.column.index||s.column.index===a.columns.length-1)&&(e.setLineWidth(.2),e.line(t.x,t.y,t.x,t.y+t.height),e.line(t.x+t.width,t.y,t.x+t.width,t.y+t.height))),"foot"===s.section){const i=0===s.row.index,g=s.row.index===f-1,c=0===s.column.index,y=s.column.index===a.columns.length-1;c||y||i||g?(e.setLineWidth(.2),i&&e.line(t.x,t.y,t.x+t.width,t.y),g&&e.line(t.x,t.y+t.height,t.x+t.width,t.y+t.height),c&&e.line(t.x,t.y,t.x,t.y+t.height),y&&e.line(t.x+t.width,t.y,t.x+t.width,t.y+t.height),e.setLineWidth(.2),e.line(t.x+t.width,t.y,t.x+t.width,t.y+t.height)):t.styles.lineWidth=0}}});const u=e.getNumberOfPages();for(let s=1;s<=u;s++){if(e.setPage(s),e.setFontSize(9),e.setFontSize(8),s===u){const d="Scrap Entry"===n.Type?220.4:n.table2body.length>=2?218.4:217.5;e.setTextColor(24,129,176),e.setTextColor(0,0,0),e.setFont(void 0,"bold"),e.text("Thank You For The Business",85,d)}else e.text("Continued on next page",n.table2body.length>=2?160:190,n.table2body.length>=2?280.5:275);let t=14;e.setFontSize(16),e.setTextColor(0,0,0),e.setFont(void 0,"bold"),e.text(`${n.company_name.toUpperCase()}`,t,15),e.setTextColor(256,112,8),e.setTextColor(0,0,0),e.setFontSize(9),e.setFont(void 0,"normal"),e.text(`${n.top_left_address_line1}`,t,19),e.text(`${n.top_left_address_line2}`,t,23),e.setFont(void 0,"bold"),e.text(`GSTIN: ${n.company_gst}`,t,27),e.text(`MOBILE: ${n.top_left_phone}, EMAIL Id: ${n.top_left_email}`,t,31);let a=156;e.setTextColor(135,206,235),e.setFont(void 0,"bold"),e.setFontSize(16),e.text("TAX INVOICE",190,14,{align:"right"}),e.setFontSize(9),e.setTextColor(0,0,0),e.text("ORIGINAL FOR RECIPIENT ",190,18,{align:"right"}),e.addImage(F,"PNG",a,20,34,10);const h=e.internal.pageSize.getWidth(),r=14;e.setDrawColor(0,0,0),e.setLineWidth(.2),e.line(r,40,h-r,40),B()(e,{body:k,startY:40,headStyles:{fontSize:8,textColor:[0,0,0],fillColor:[255,202,153]},bodyStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:8,fontStyle:"normal"},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:8},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:d=>{const{cell:o,table:i}=d,{x:g,y:c,width:y}=o;e.setDrawColor(0,0,0),e.line(o.x+o.width,o.y,o.x+o.width,o.y+o.height),"body"===d.section&&(8===o.colSpan&&(o.styles.lineWidth=0,(0===d.column.index||d.column.index===i.columns.length-1)&&(e.line(o.x,o.y,o.x,o.y+o.height),e.line(o.x+o.width,o.y,o.x+o.width,o.y+o.height))),(2===d.cell.colSpan||[0,1,2,3].includes(d.row.index))&&8!==o.colSpan&&(e.setFont(void 0,"bold"),e.setLineWidth(0),e.line(g,c,g+y,c)))}})}if(n.otherArray.length>1){for(let s=1;s<n.otherArray.length;s++){e.addPage();let t=n.otherArray[s].map((o,i)=>{const g=Number(o?.discount)+Number(o?.additional_discount);return[`${i+1}`,`${o?.item_name} \n${"SKU: "+o?.barcode?.sku}`,`${o?.barcode?.product?.hsncode?.hsn_code}`,`${o?.barcode?.product?.brand?.title}`,`${o?.mrp}`,`${o?.price}`,`${parseInt(o?.qty)} ${o?.barcode?.product?.unit?.title}\n${"0"===o?.description?"":o?.description}`,`${parseInt(""+g)??""}%`,`${parseInt(o?.tax)??""}%`,`${o?.total??""}`]});e.autoTable({head:A,body:t,foot:$,startY:90,margin:_,headStyles:{fontSize:8,textColor:[0,0,0],fillColor:[255,255,255]},bodyStyles:{fillColor:[255,255,255],fontSize:8,textColor:[0,0,0]},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:8,fontStyle:"normal"},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:o=>{const{cell:i,table:g}=o,{x:c,y,width:m,height:L}=i;if(e.setDrawColor(0,0,0),"body"===o.section||"head"===o.section){const O=0===o.row.index,M=1===o.row.index,U=0===o.column.index,Y=o.column.index===g.columns.length-1;U||Y||O||M?(e.setLineWidth(.2),(O||M)&&(e.line(i.x,i.y,i.x+i.width,i.y),e.line(i.x,i.y+i.height,i.x+i.width,i.y+i.height)),U&&e.line(i.x,i.y,i.x,i.y+i.height),Y&&e.line(i.x+i.width,i.y,i.x+i.width,i.y+i.height)):i.styles.lineWidth=0}if("foot"===o.section){e.setLineWidth(.2);const O=0===o.row.index,M=o.row.index===G-1,U=0===o.column.index,Y=o.column.index===o.table.columns.length-1;if(5===i.colSpan&&0===o.row.index&&0===o.column.index){i.styles.lineWidth=0,O&&e.line(c,y,c+m,y),M&&e.line(c,y+L,c+m,y+L),U&&e.line(c,y,c,y+L),Y&&e.line(c+m,y,c+m,y+L);try{(new Image).src=F,e.addImage(F,"PNG",c+86,y+16,34,10)}catch(ee){console.error("Error loading image:",ee)}}else 3===i.colSpan?(e.line(c,y,c+m,y),e.setLineWidth(.2),e.line(c,y,c,y+L),e.line(c,y+L,c+m,y+L)):2===i.colSpan&&(e.line(c,y,c+m,y),e.setLineWidth(.2),e.line(c,y+L,c+m,y+L),e.line(c+m,y,c+m,y+L))}}}),e.autoTable({head:K,body:H,startY:e.lastAutoTable.finalY+-1,headStyles:{fontSize:8,textColor:[0,0,0],fillColor:[255,255,255]},bodyStyles:{fillColor:[255,255,255],fontSize:8},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:8,halign:"left"},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:o=>{const{cell:i,table:g}=o,{x:c,y,width:m,height:L}=i;e.setDrawColor(0,0,0),("body"===o.section||"head"===o.section)&&(e.setLineWidth(.2),e.line(c,y,c,y+L),e.line(c+m,y,c+m,y+L),e.line(c,y,c+m,y),e.line(c,y+L,c+m,y+L)),(0===o.column.index||1===o.column.index||o.column.index===g.columns.length)&&(e.setLineWidth(.2),e.line(i.x,i.y,i.x,i.y+i.height),e.line(i.x+i.width,i.y,i.x+i.width,i.y+i.height))}}),e.autoTable({head:N,body:b,foot:E,startY:e.lastAutoTable.finalY+-1,headStyles:{fontSize:9,textColor:[0,0,0],fillColor:[255,255,255]},bodyStyles:{fillColor:[255,255,255],fontSize:9,textColor:[0,0,0]},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:9},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:o=>{const{cell:i,table:g}=o,{x:c,y,width:m,height:L}=i;if(e.setDrawColor(0,0,0),("head"===o.section||"body"===o.section)&&((0===o.row.index||o.row.index===S)&&(e.setLineWidth(.2),e.line(c,y,c+m,y),e.line(c,y+L,c+m,y+L)),e.setLineWidth(.2),e.line(i.x+i.width,i.y,i.x+i.width,i.y+i.height),(0===o.column.index||o.column.index===g.columns.length-1)&&(e.setLineWidth(.2),e.line(i.x,i.y,i.x,i.y+i.height),e.line(i.x+i.width,i.y,i.x+i.width,i.y+i.height))),"foot"===o.section){const O=0===o.row.index,M=o.row.index===f-1,U=0===o.column.index,Y=o.column.index===g.columns.length-1;U||Y||O||M?(e.setLineWidth(.2),O&&e.line(i.x,i.y,i.x+i.width,i.y),M&&e.line(i.x,i.y+i.height,i.x+i.width,i.y+i.height),U&&e.line(i.x,i.y,i.x,i.y+i.height),Y&&e.line(i.x+i.width,i.y,i.x+i.width,i.y+i.height),e.setLineWidth(.2),e.line(i.x+i.width,i.y,i.x+i.width,i.y+i.height)):i.styles.lineWidth=0}}}),e.setFontSize(9),e.setFontSize(8);let a=14;e.setFontSize(16),e.setTextColor(0,0,0),e.setFont(void 0,"bold"),e.text(`${n.company_name.toUpperCase()}`,a,15),e.setTextColor(256,112,8),e.setTextColor(0,0,0),e.setFontSize(9),e.setFont(void 0,"normal"),e.text(`${n.top_left_address_line1}`,a,19),e.text(`${n.top_left_address_line2}`,a,23),e.setFont(void 0,"bold"),e.text(`GSTIN: ${n.company_gst}`,a,27),e.text(`MOBILE: ${n.top_left_phone}, EMAIL Id: ${n.top_left_email}`,a,31);let h=156;e.setTextColor(135,206,235),e.setFont(void 0,"bold"),e.setFontSize(16),e.text("TAX INVOICE",190,14,{align:"right"}),e.setFontSize(9),e.setTextColor(0,0,0),e.text("ORIGINAL FOR RECIPIENT ",190,18,{align:"right"}),e.addImage(F,"PNG",h,20,34,10);const r=e.internal.pageSize.getWidth(),d=14;e.setDrawColor(0,0,0),e.setLineWidth(.2),e.line(d,40,r-d,40),B()(e,{body:k,startY:40,headStyles:{fontSize:8,textColor:[0,0,0],fillColor:[255,202,153]},bodyStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:8,fontStyle:"normal"},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:8},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:o=>{const{cell:i,table:g}=o,{x:c,y,width:m}=i;e.setDrawColor(0,0,0),e.line(i.x+i.width,i.y,i.x+i.width,i.y+i.height),"body"===o.section&&(8===i.colSpan&&(i.styles.lineWidth=0,(0===o.column.index||o.column.index===g.columns.length-1)&&(e.line(i.x,i.y,i.x,i.y+i.height),e.line(i.x+i.width,i.y,i.x+i.width,i.y+i.height))),(2===o.cell.colSpan||[0,1,2,3].includes(o.row.index))&&8!==i.colSpan&&(e.setFont(void 0,"bold"),e.setLineWidth(0),e.line(c,y,c+m,y)))}})}e.save(`${n.Type}.pdf`,{returnPromise:!0}).then(()=>{setTimeout(()=>{this.loaderPdf.next(!1)},1e3)})}else e.save(`${n.Type}.pdf`,{returnPromise:!0}).then(()=>{setTimeout(()=>{this.loaderPdf.next(!1)},1e3)})}),console.warn(n.otherArray)}set_address(n){let e={},l={};return n.address.map(C=>{"Billing"==C?.address_type&&C?.is_default?l={res:C}:"Shipping"==C.address_type&&C?.is_default&&(e={res:C})}),{fast_obj:l,secound_obj:e}}getBadgeClass(n){switch(n){case"Pending":return"pending-status-badge";case"Paid":return"approve-status-badge";default:return""}}}return R.\u0275fac=function(n){return new(n||R)(V.LFG(q.uU),V.LFG(v.J))},R.\u0275prov=V.Yz7({token:R,factory:R.\u0275fac}),R})()},30597:(te,Q,W)=>{W.d(Q,{l:()=>q});var z=W(94650),X=W(4392),B=W(97185),Z=W(42917),V=W(80927);let q=(()=>{class v{constructor(R,J,n,e,l){this.router=R,this.Arout=J,this.toastr=n,this.profileService=e,this.coreService=l}canActivate(R,J){const n=JSON.parse(localStorage.getItem("auth"));if(this.profileService.userDetails$.subscribe(e=>{this.userDetails=e,this.permissions=this.userDetails?.permission}),n){const e=R.data.allowedRoles,l=n.some(T=>e.includes(T.codename));let C=this.coreService.profileData$.value;if(C&&C.username){this.userDetails=C,this.profileService.setUserDetails(this.userDetails),this.profileService.ProfileData$.next(C);const T=C?.permission,D=this.profileService.getUserDetails();(!D||D.length!==T.length)&&(this.profileService.setUserPermission(T),window.location.reload())}else this.coreService.getProfile().subscribe(T=>{this.userDetails=T,this.profileService.setUserDetails(this.userDetails),this.profileService.ProfileData$.next(T);const D=T?.permission,I=this.profileService.getUserDetails();(!I||I.length!==D.length)&&(this.profileService.setUserPermission(D),window.location.reload())});if(l)return!0}return this.toastr.error("User have Not Permission to Access This page"),this.router.navigate(["/dashboard"]),!1}}return v.\u0275fac=function(R){return new(R||v)(z.LFG(X.F0),z.LFG(X.gz),z.LFG(B._W),z.LFG(Z.J),z.LFG(V.p))},v.\u0275prov=z.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()}}]);