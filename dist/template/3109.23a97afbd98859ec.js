"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[3109],{3109:(Se,_,o)=>{o.r(_),o.d(_,{RecieptModule:()=>Re});var d=o(6895),l=o(8996),u=o(529),r=o(4006),v=o(9300),y=o(1884),h=o(8372),g=o(8505),f=o(3900),x=o(262),Z=o(8746),e=o(4650),T=o(4440),A=o(7185),P=o(1809),q=o(4270),F=o(927),s=o(7957),b=o(3238);function C(i,n){if(1&i&&(e.TgZ(0,"div",20),e._UZ(1,"input",21),e.TgZ(2,"label",22),e._uU(3),e.qZA()()),2&i){const t=n.$implicit;e.xp6(1),e.Q6J("value",t.value),e.xp6(2),e.Oqu(t.label)}}function N(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Voucher Type is required. "),e.qZA())}function k(i,n){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,N,2,0,"div",24),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.voucher_type.errors?null:t.voucher_type.errors.required)}}function I(i,n){if(1&i&&(e.TgZ(0,"div",20),e._UZ(1,"input",25),e.TgZ(2,"label",22),e._uU(3),e.qZA()()),2&i){const t=n.$implicit;e.xp6(1),e.Q6J("value",t.value),e.xp6(2),e.Oqu(t.label)}}function J(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Payment Type is required. "),e.qZA())}function R(i,n){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,J,2,0,"div",24),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.payment_type.errors?null:t.payment_type.errors.required)}}function V(i,n){if(1&i&&(e.TgZ(0,"div",2)(1,"div",3)(2,"label",4),e._uU(3,"Select Payment Type"),e.qZA(),e.TgZ(4,"div",6),e.YNc(5,I,4,2,"div",7),e.qZA()(),e.YNc(6,R,2,1,"div",8),e.qZA()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.paymentType),e.xp6(1),e.Q6J("ngIf",t.payment_type.invalid&&(t.payment_type.dirty||t.payment_type.touched))}}function U(i,n){if(1&i&&(e.TgZ(0,"option",29),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function S(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Payment Mode is required. "),e.qZA())}function Q(i,n){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,S,2,0,"div",24),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.payment_mode.errors?null:t.payment_mode.errors.required)}}function Y(i,n){if(1&i&&(e.TgZ(0,"div",11)(1,"div",3)(2,"label"),e._uU(3,"Payment Mode"),e.qZA(),e.TgZ(4,"select",26)(5,"option",27),e._uU(6,"-- Select Payment Mode --"),e.qZA(),e.YNc(7,U,2,2,"option",28),e.qZA()(),e.YNc(8,Q,2,1,"div",8),e.qZA()),2&i){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",t.paymentMode),e.xp6(1),e.Q6J("ngIf",t.payment_mode.invalid&&(t.payment_mode.dirty||t.payment_mode.touched))}}function M(i,n){if(1&i&&(e.TgZ(0,"option",29),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",null==t?null:t.id),e.xp6(1),e.Oqu(null==t?null:t.dueAmount)}}function O(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Selecting Sales is required. "),e.qZA())}function w(i,n){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,O,2,0,"div",24),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.receipt_sales.errors?null:t.receipt_sales.errors.required)}}function B(i,n){if(1&i&&(e.TgZ(0,"div",11)(1,"div",3)(2,"label"),e._uU(3,"Select Sales"),e.qZA(),e.TgZ(4,"select",30)(5,"option",27),e._uU(6,"-- Select Sales --"),e.qZA(),e.YNc(7,M,2,2,"option",28),e.qZA()(),e.YNc(8,w,2,1,"div",8),e.qZA()),2&i){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",t.receiptSales),e.xp6(1),e.Q6J("ngIf",t.receipt_sales.invalid&&(t.receipt_sales.dirty||t.receipt_sales.touched))}}function E(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Amount is required. "),e.qZA())}function L(i,n){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,E,2,0,"div",24),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.amount_receipt.errors?null:t.amount_receipt.errors.required)}}function j(i,n){1&i&&(e.TgZ(0,"mat-option",36),e._uU(1,"Please Enter 3 or more characters"),e.qZA())}function $(i,n){1&i&&(e.TgZ(0,"mat-option",36),e._uU(1,"Loading..."),e.qZA())}function D(i,n){if(1&i&&(e.TgZ(0,"mat-option",36),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.cusErrorMsg)}}function H(i,n){if(1&i&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&i){const t=n.$implicit,a=e.oxw(2);e.Q6J("value",t),e.xp6(1),e.hij(" ",a.displayCus(t)," ")}}function G(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Customer is required. "),e.qZA())}function W(i,n){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,G,2,0,"div",24),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.customer_receipt.errors?null:t.customer_receipt.errors.required)}}function z(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",31)(1,"div",3)(2,"label"),e._uU(3,"Customer"),e.qZA(),e._UZ(4,"input",32),e.TgZ(5,"mat-autocomplete",33,34),e.NdJ("optionSelected",function(c){e.CHM(t);const p=e.oxw();return e.KtG(p.optionSelectedReceipt(c))}),e.YNc(7,j,2,0,"mat-option",35),e.YNc(8,$,2,0,"mat-option",35),e.YNc(9,D,2,1,"mat-option",35),e.YNc(10,H,2,2,"mat-option",28),e.qZA()(),e.YNc(11,W,2,1,"div",8),e.qZA()}if(2&i){const t=e.MAs(6),a=e.oxw();e.xp6(4),e.Q6J("formControl",a.receiptPaymentForm.get("customer_receipt"))("matAutocomplete",t),e.xp6(1),e.Q6J("displayWith",a.displayCus),e.xp6(2),e.Q6J("ngIf",(null==a.receiptPaymentForm.get("customer_receipt").value?null:a.receiptPaymentForm.get("customer_receipt").value.length)<3),e.xp6(1),e.Q6J("ngIf",a.cusIsLoading),e.xp6(1),e.Q6J("ngIf",a.cusErrorMsg),e.xp6(1),e.Q6J("ngForOf",a.filteredCustomer2),e.xp6(1),e.Q6J("ngIf",a.customer_receipt.invalid&&(a.customer_receipt.dirty||a.customer_receipt.touched))}}function K(i,n){1&i&&(e.TgZ(0,"mat-option",36),e._uU(1,"Please Enter 3 or more characters"),e.qZA())}function X(i,n){1&i&&(e.TgZ(0,"mat-option",36),e._uU(1,"Loading..."),e.qZA())}function ee(i,n){if(1&i&&(e.TgZ(0,"mat-option",36),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.cusErrorMsg)}}function te(i,n){if(1&i&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&i){const t=n.$implicit,a=e.oxw(2);e.Q6J("value",t),e.xp6(1),e.hij(" ",a.displayParty(t)," ")}}function ie(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Party is required. "),e.qZA())}function ae(i,n){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,ie,2,0,"div",24),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.party_receipt.errors?null:t.party_receipt.errors.required)}}function ne(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",31)(1,"div",3)(2,"label"),e._uU(3,"Party"),e.qZA(),e._UZ(4,"input",37),e.TgZ(5,"mat-autocomplete",33,38),e.NdJ("optionSelected",function(c){e.CHM(t);const p=e.oxw();return e.KtG(p.optionSelectedParty(c))}),e.YNc(7,K,2,0,"mat-option",35),e.YNc(8,X,2,0,"mat-option",35),e.YNc(9,ee,2,1,"mat-option",35),e.YNc(10,te,2,2,"mat-option",28),e.qZA()(),e.YNc(11,ae,2,1,"div",8),e.qZA()}if(2&i){const t=e.MAs(6),a=e.oxw();e.xp6(4),e.Q6J("formControl",a.receiptPaymentForm.get("party_receipt"))("matAutocomplete",t),e.xp6(1),e.Q6J("displayWith",a.displayParty),e.xp6(2),e.Q6J("ngIf",(null==a.receiptPaymentForm.get("party_receipt").value?null:a.receiptPaymentForm.get("party_receipt").value.length)<3),e.xp6(1),e.Q6J("ngIf",a.partyIsLoading),e.xp6(1),e.Q6J("ngIf",a.partyErrorMsg),e.xp6(1),e.Q6J("ngForOf",a.filteredParty),e.xp6(1),e.Q6J("ngIf",a.party_receipt.invalid&&(a.party_receipt.dirty||a.party_receipt.touched))}}function re(i,n){if(1&i&&(e.TgZ(0,"option",29),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(null==t?null:t.name)}}function pe(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Payment Account is required. "),e.qZA())}function oe(i,n){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,pe,2,0,"div",24),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.payment_account_receipt.errors?null:t.payment_account_receipt.errors.required)}}function ce(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," UPI ID is required. "),e.qZA())}function me(i,n){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,ce,2,0,"div",24),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.upi_id_receipt.errors?null:t.upi_id_receipt.errors.required)}}function de(i,n){if(1&i&&(e.TgZ(0,"div",11)(1,"div",3)(2,"label"),e._uU(3,"UPI Id"),e.qZA(),e._UZ(4,"input",41),e.qZA(),e.YNc(5,me,2,1,"div",8),e.qZA()),2&i){const t=e.oxw(2);e.xp6(5),e.Q6J("ngIf",t.upi_id_receipt.invalid&&(t.upi_id_receipt.dirty||t.upi_id_receipt.touched))}}function se(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Account No is required. "),e.qZA())}function _e(i,n){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,se,2,0,"div",24),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.receipt_account_no.errors?null:t.receipt_account_no.errors.required)}}function le(i,n){if(1&i&&(e.TgZ(0,"div",11)(1,"div",3)(2,"label"),e._uU(3,"Account No"),e.qZA(),e._UZ(4,"input",42),e.qZA(),e.YNc(5,_e,2,1,"div",8),e.qZA()),2&i){const t=e.oxw(2);e.xp6(5),e.Q6J("ngIf",t.receipt_account_no.invalid&&(t.receipt_account_no.dirty||t.receipt_account_no.touched))}}function ue(i,n){if(1&i&&(e.TgZ(0,"div",1)(1,"div",11)(2,"div",3)(3,"label"),e._uU(4,"Payment Account"),e.qZA(),e.TgZ(5,"select",39)(6,"option",40),e._uU(7,"Select Payment Account"),e.qZA(),e.YNc(8,re,2,2,"option",28),e.qZA()(),e.YNc(9,oe,2,1,"div",8),e.qZA(),e.YNc(10,de,6,1,"div",10),e.YNc(11,le,6,1,"div",10),e.qZA()),2&i){const t=e.oxw();e.xp6(8),e.Q6J("ngForOf",t.companyBankList),e.xp6(1),e.Q6J("ngIf",t.payment_account_receipt.invalid&&(t.payment_account_receipt.dirty||t.payment_account_receipt.touched)),e.xp6(1),e.Q6J("ngIf","UPI"===t.receiptPaymentForm.get("payment_mode").value&&"expense"!==t.receiptPaymentForm.get("voucher_type").value),e.xp6(1),e.Q6J("ngIf","Bank"===t.receiptPaymentForm.get("payment_mode").value)}}function ve(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Customer Bank Name is required. "),e.qZA())}function ye(i,n){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,ve,2,0,"div",24),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.receipt_customer_bank_name.errors?null:t.receipt_customer_bank_name.errors.required)}}function he(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Card Payment Amount is required. "),e.qZA())}function ge(i,n){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,he,2,0,"div",24),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.receipt_card_payment_amount.errors?null:t.receipt_card_payment_amount.errors.required)}}function fe(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Card Holder Name is required. "),e.qZA())}function xe(i,n){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,fe,2,0,"div",24),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.receipt_card_holder_name.errors?null:t.receipt_card_holder_name.errors.required)}}function Ze(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Card Transaction No. is required. "),e.qZA())}function Te(i,n){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,Ze,2,0,"div",24),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.receipt_cart_transactions_no.errors?null:t.receipt_cart_transactions_no.errors.required)}}function Ae(i,n){if(1&i&&(e.TgZ(0,"div",1)(1,"div",11)(2,"div",3)(3,"label"),e._uU(4,"Customer Bank Name"),e.qZA(),e._UZ(5,"input",43),e.qZA(),e.YNc(6,ye,2,1,"div",8),e.qZA(),e.TgZ(7,"div",11)(8,"div",3)(9,"label"),e._uU(10,"Card Payment Amount"),e.qZA(),e._UZ(11,"input",44),e.qZA(),e.YNc(12,ge,2,1,"div",8),e.qZA(),e.TgZ(13,"div",11)(14,"div",3)(15,"label"),e._uU(16,"Card Holder Name"),e.qZA(),e._UZ(17,"input",45),e.qZA(),e.YNc(18,xe,2,1,"div",8),e.qZA(),e.TgZ(19,"div",11)(20,"div",3)(21,"label"),e._uU(22,"Card Transaction No"),e.qZA(),e._UZ(23,"input",46),e.qZA(),e.YNc(24,Te,2,1,"div",8),e.qZA()()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",t.receipt_customer_bank_name.invalid&&(t.receipt_customer_bank_name.dirty||t.receipt_customer_bank_name.touched)),e.xp6(6),e.Q6J("ngIf",t.receipt_card_payment_amount.invalid&&(t.receipt_card_payment_amount.dirty||t.receipt_card_payment_amount.touched)),e.xp6(6),e.Q6J("ngIf",t.receipt_card_holder_name.invalid&&(t.receipt_card_holder_name.dirty||t.receipt_card_holder_name.touched)),e.xp6(6),e.Q6J("ngIf",t.receipt_cart_transactions_no.invalid&&(t.receipt_cart_transactions_no.dirty||t.receipt_cart_transactions_no.touched))}}function Pe(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Non GST is required. "),e.qZA())}function qe(i,n){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,Pe,2,0,"div",24),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.expense_non_gst.errors?null:t.expense_non_gst.errors.required)}}function Fe(i,n){if(1&i&&(e.TgZ(0,"div",1)(1,"div",11)(2,"div",47)(3,"label"),e._UZ(4,"input",48),e._uU(5," Non GST "),e.qZA()(),e.YNc(6,qe,2,1,"div",8),e.qZA()()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",t.expense_non_gst.invalid&&(t.expense_non_gst.dirty||t.expense_non_gst.touched))}}function be(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," Remark is required. "),e.qZA())}function Ce(i,n){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,be,2,0,"div",24),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.receipt_remark.errors?null:t.receipt_remark.errors.required)}}const Ne=[{path:"",component:(()=>{class i{constructor(t,a,c,p,m,Ve,Ue){this.billHoldService=t,this.fb=a,this.toastr=c,this.syncService=p,this.http=m,this.cartService=Ve,this.coreService=Ue,this.voucherType=[{id:1,label:"Sales",value:"sales"},{id:2,label:"Purchase",value:"purchase"},{id:3,label:"Expense",value:"expense"},{id:4,label:"Cash in Hand",value:"cash in hand"}],this.paymentType=[{id:1,label:"Advance Payment",value:"Advance"},{id:2,label:"Against Bill",value:"Against Bill"}],this.paymentMode=[{id:1,label:"UPI",value:"UPI"},{id:2,label:"Card",value:"Card"},{id:3,label:"Cash",value:"Cash"},{id:4,label:"Bank",value:"Bank"}],this.receiptSales=[],this.companyBankList=[],this.partyIsLoading=!1,this.cusMinLengthTerm=3,this.cusIsLoading=!1,this.customerAutoCompleteControl2=new r.NI("")}ngOnInit(){const c={headers:new u.WM({"Content-Type":"application/json",Authorization:"Token 4d586523c3dbbc989192bec34006e72a4edebf00"})};this.receiptPaymentForm=this.fb.group({voucher_type:["",[r.kI.required]],payment_type:[""],payment_mode:[""],receipt_sales:[""],amount_receipt:[""],customer_receipt:[""],party_receipt:[""],receipt_remark:[""],payment_account:[""],upi_id:[""],customer_bank_name:[""],card_payment_amount:[""],card_holder_name:[""],cart_transactions_no:[""],account_no:[""],non_gst:[!1]}),this.receiptPaymentForm.get("voucher_type").valueChanges.subscribe(p=>{"sales"===p?(this.receiptPaymentForm.get("payment_type").setValue(this.paymentType[0].value),this.receiptPaymentForm.get("payment_type").setValidators(r.kI.required),this.receiptPaymentForm.get("payment_mode").setValidators(r.kI.required),this.receiptPaymentForm.get("customer_receipt").setValidators(r.kI.required),this.receiptPaymentForm.get("amount_receipt").setValidators(r.kI.required),this.receiptPaymentForm.get("payment_account").setValidators(r.kI.required),this.receiptPaymentForm.get("receipt_remark").setValidators(r.kI.required)):"purchase"===p?(this.receiptPaymentForm.get("payment_type").setValue(this.paymentType[0].value),this.receiptPaymentForm.get("payment_type").setValidators(r.kI.required),this.receiptPaymentForm.get("payment_mode").setValidators(r.kI.required),this.receiptPaymentForm.get("party_receipt").setValidators(r.kI.required),this.receiptPaymentForm.get("receipt_remark").setValidators(r.kI.required),this.receiptPaymentForm.get("amount_receipt").setValidators(r.kI.required),this.receiptPaymentForm.get("payment_account").setValidators(r.kI.required)):"expense"===p?(this.receiptPaymentForm.get("upi_id").clearValidators(),this.receiptPaymentForm.get("payment_account").setValidators(r.kI.required),this.receiptPaymentForm.get("receipt_remark").setValidators(r.kI.required),this.receiptPaymentForm.get("non_gst").setValidators(r.kI.required),this.receiptPaymentForm.get("party_receipt").setValidators(r.kI.required),this.receiptPaymentForm.get("amount_receipt").setValidators(r.kI.required)):(this.receiptPaymentForm.get("payment_type").clearValidators(),this.receiptPaymentForm.get("payment_mode").clearValidators(),this.receiptPaymentForm.get("customer_receipt").clearValidators(),this.receiptPaymentForm.get("amount_receipt").clearValidators(),this.receiptPaymentForm.get("payment_account").clearValidators(),this.receiptPaymentForm.get("receipt_remark").clearValidators()),this.receiptPaymentForm.get("party_receipt").updateValueAndValidity(),this.receiptPaymentForm.get("non_gst").updateValueAndValidity(),this.receiptPaymentForm.get("payment_type").updateValueAndValidity(),this.receiptPaymentForm.get("payment_mode").updateValueAndValidity(),this.receiptPaymentForm.get("payment_account").updateValueAndValidity(),this.receiptPaymentForm.get("customer_receipt").updateValueAndValidity(),this.receiptPaymentForm.get("receipt_remark").updateValueAndValidity(),this.receiptPaymentForm.get("amount_receipt").updateValueAndValidity()}),this.receiptPaymentForm.get("payment_type").valueChanges.subscribe(p=>{this.receiptPaymentForm.get("payment_mode").setValue(this.paymentMode[0].value),"Against Bill"===p?this.receiptPaymentForm.get("receipt_sales").setValidators(r.kI.required):this.receiptPaymentForm.get("receipt_sales").clearValidators(),this.receiptPaymentForm.get("receipt_sales").updateValueAndValidity()}),this.receiptPaymentForm.get("payment_mode").valueChanges.subscribe(p=>{"UPI"===p?(this.receiptPaymentForm.get("upi_id").setValidators(r.kI.required),this.receiptPaymentForm.get("payment_account").setValidators(r.kI.required)):"Card"===p?(this.receiptPaymentForm.get("customer_bank_name").setValidators(r.kI.required),this.receiptPaymentForm.get("card_payment_amount").setValidators(r.kI.required),this.receiptPaymentForm.get("card_holder_name").setValidators(r.kI.required),this.receiptPaymentForm.get("cart_transactions_no").setValidators(r.kI.required),this.receiptPaymentForm.get("payment_account").setValidators(r.kI.required)):"Bank"===p?this.receiptPaymentForm.get("account_no").setValidators(r.kI.required):(this.receiptPaymentForm.get("upi_id").clearValidators(),this.receiptPaymentForm.get("payment_account").clearValidators(),this.receiptPaymentForm.get("customer_bank_name").clearValidators(),this.receiptPaymentForm.get("card_payment_amount").clearValidators(),this.receiptPaymentForm.get("card_holder_name").clearValidators(),this.receiptPaymentForm.get("cart_transactions_no").clearValidators(),this.receiptPaymentForm.get("account_no").clearValidators()),this.receiptPaymentForm.get("upi_id").updateValueAndValidity(),this.receiptPaymentForm.get("payment_account").updateValueAndValidity(),this.receiptPaymentForm.get("customer_bank_name").updateValueAndValidity(),this.receiptPaymentForm.get("card_payment_amount").updateValueAndValidity(),this.receiptPaymentForm.get("card_holder_name").updateValueAndValidity(),this.receiptPaymentForm.get("cart_transactions_no").updateValueAndValidity(),this.receiptPaymentForm.get("account_no").updateValueAndValidity()}),this.receiptPaymentForm.get("customer_receipt").valueChanges.pipe((0,v.h)(p=>null!==p&&p?.length>=this.cusMinLengthTerm),(0,y.x)(),(0,h.b)(100),(0,g.b)(()=>{this.cusErrorMsg="",this.filteredCustomer2=[],this.cusIsLoading=!0}),(0,f.w)(p=>this.http.get(`https://pv.greatfuturetechno.com/pv-api/pos/customer_filter/?search=${p}`,c).pipe((0,x.K)(m=>(console.log("err catch",m),this.cusErrorMsg="No Customer Found",this.cusIsLoading=!1,[])),(0,Z.x)(()=>{this.cusIsLoading=!1,console.log("search",p)})))).subscribe(p=>{console.log("data",p),p.length>0?(console.log("data",p),this.filteredCustomer2=p):(this.filteredCustomer2=[],this.cusErrorMsg="No Customers Found")}),this.receiptPaymentForm.get("party_receipt").valueChanges.pipe((0,v.h)(p=>null!==p&&p?.length>=this.cusMinLengthTerm),(0,y.x)(),(0,h.b)(100),(0,g.b)(()=>{this.partyErrorMsg="",this.filteredParty=[],this.partyIsLoading=!0}),(0,f.w)(p=>this.http.get(`https://pv.greatfuturetechno.com/pv-api/pos/party_filter/?search=${p}`,c).pipe((0,x.K)(m=>(console.log("err catch",m),this.partyErrorMsg="No Party Found",this.partyIsLoading=!1,[])),(0,Z.x)(()=>{this.partyIsLoading=!1,console.log("search",p)})))).subscribe(p=>{console.log("data",p),p.length>0?(console.log("data",p),this.filteredParty=p):(this.filteredParty=[],this.partyErrorMsg="No Party Found")}),this.cartService.getCompanyBank().subscribe({next:p=>{console.log(p,"company bank"),this.companyBankList=p},error:p=>{console.log("company bank",p)}})}optionSelectedParty(t){}optionSelectedReceipt(t){this.cartService.getReceiptDueOrder(t.option.value.id).subscribe({next:c=>{console.log(c,"receipt sales"),this.receiptSales=c},error:c=>{console.log("receipt sales",c)}})}displayCus(t){return t?t.mobile_no:""}displayParty(t){return t?t.mobile_no:""}get voucher_type(){return this.receiptPaymentForm.get("voucher_type")}get payment_type(){return this.receiptPaymentForm.get("payment_type")}get payment_mode(){return this.receiptPaymentForm.get("payment_mode")}get receipt_sales(){return this.receiptPaymentForm.get("receipt_sales")}get amount_receipt(){return this.receiptPaymentForm.get("amount_receipt")}get customer_receipt(){return this.receiptPaymentForm.get("customer_receipt")}get receipt_remark(){return this.receiptPaymentForm.get("receipt_remark")}get party_receipt(){return this.receiptPaymentForm.get("party_receipt")}get receipt_customer_bank_name(){return this.receiptPaymentForm.get("customer_bank_name")}get receipt_card_payment_amount(){return this.receiptPaymentForm.get("card_payment_amount")}get receipt_card_holder_name(){return this.receiptPaymentForm.get("card_holder_name")}get receipt_cart_transactions_no(){return this.receiptPaymentForm.get("cart_transactions_no")}get receipt_account_no(){return this.receiptPaymentForm.get("account_no")}get expense_non_gst(){return this.receiptPaymentForm.get("non_gst")}get upi_id_receipt(){return this.receiptPaymentForm.get("upi_id")}get transaction_id_receipt(){return this.receiptPaymentForm.get("transaction_id")}get payment_account_receipt(){return this.receiptPaymentForm.get("payment_account")}receiptFormSubmit(){if(this.receiptPaymentForm.invalid)return console.log("invalid"),void Object.keys(this.receiptPaymentForm.controls).forEach(t=>{this.receiptPaymentForm.controls[t].markAsTouched()});"sales"===this.voucher_type.value?this.formSubmitReceipt():"purchase"===this.voucher_type.value?this.formSubmitPurchase():this.formSubmitExpense()}formSubmitExpense(){let t=new FormData;t.append("party",this.party_receipt?.value?.id),t.append("amount",this.amount_receipt.value),t.append("remarks",this.receipt_remark.value),t.append("non_gst",this.expense_non_gst.value),t.append("payment_account",this.payment_account_receipt.value),this.cartService.expensePayment(t).subscribe({next:a=>{console.log("response receipt",a),a.isSuccess?(this.toastr.success(a.msg),this.receiptPaymentForm.reset(),document.querySelector(".receiptModalClose").click(),this.expense_non_gst.value(!1)):this.toastr.error(a.msg)},error:a=>{console.log(a),this.toastr.error(a.message)}})}formSubmitPurchase(){let t=new FormData;if("UPI"===this.payment_mode.value){let a={upi_no:Number(this.upi_id_receipt.value),payment_account:Number(this.payment_account_receipt.value)};"Advance"==this.payment_type.value?(t.append("party",this.party_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",""),t.append("card_detail",""),t.append("bank_detail",""),t.append("upi_detail",JSON.stringify(a))):(t.append("party",this.party_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",this.receipt_sales.value),t.append("card_detail",""),t.append("bank_detail",""),t.append("upi_detail",JSON.stringify(a)))}else if("Bank"===this.payment_mode.value){let a={payment_account:Number(this.payment_account_receipt.value),account_no:this.receipt_account_no.value};"Advance"==this.payment_type.value?(t.append("party",this.party_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",""),t.append("card_detail",""),t.append("bank_detail",JSON.stringify(a)),t.append("upi_detail","")):(t.append("party",this.party_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",this.receipt_sales.value),t.append("card_detail",""),t.append("bank_detail",JSON.stringify(a)),t.append("upi_detail",""))}else if("Card"===this.payment_mode.value){let a={payment_account:Number(this.payment_account_receipt.value),customer_bank_name:this.receipt_customer_bank_name.value,card_payment_amount:this.receipt_card_payment_amount.value,card_holder_name:this.receipt_card_holder_name.value,cart_transactions_no:this.receipt_cart_transactions_no.value};"Advance"==this.payment_type.value?(t.append("party",this.party_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",""),t.append("card_detail",JSON.stringify(a)),t.append("bank_detail",""),t.append("upi_detail","")):(t.append("party",this.party_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",this.receipt_sales.value),t.append("card_detail",JSON.stringify(a)),t.append("bank_detail",""),t.append("upi_detail",""))}else"Advance"==this.payment_type.value?(t.append("party",this.party_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",""),t.append("card_detail",""),t.append("bank_detail",""),t.append("upi_detail","")):(t.append("party",this.party_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",this.receipt_sales.value),t.append("card_detail",""),t.append("bank_detail",""),t.append("upi_detail",""));this.cartService.purchasePayment(t).subscribe({next:a=>{console.log("response receipt",a),a.isSuccess?(this.toastr.success(a.msg),this.receiptPaymentForm.reset(),document.querySelector(".receiptModalClose").click()):this.toastr.error(a.msg)},error:a=>{console.log(a),this.toastr.error(a.message)}})}formSubmitReceipt(){let t=new FormData;if("UPI"===this.payment_mode.value){let a={upi_no:Number(this.upi_id_receipt.value),payment_account:Number(this.payment_account_receipt.value)};"Advance"==this.payment_type.value?(t.append("customer",this.customer_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",""),t.append("card_detail",""),t.append("bank_detail",""),t.append("upi_detail",JSON.stringify(a))):(t.append("customer",this.customer_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",this.receipt_sales.value),t.append("card_detail",""),t.append("bank_detail",""),t.append("upi_detail",JSON.stringify(a)))}else if("Bank"===this.payment_mode.value){let a={payment_account:Number(this.payment_account_receipt.value),account_no:this.receipt_account_no.value};"Advance"==this.payment_type.value?(t.append("customer",this.customer_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",""),t.append("card_detail",""),t.append("bank_detail",JSON.stringify(a)),t.append("upi_detail","")):(t.append("customer",this.customer_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",this.receipt_sales.value),t.append("card_detail",""),t.append("bank_detail",JSON.stringify(a)),t.append("upi_detail",""))}else if("Card"===this.payment_mode.value){let a={payment_account:Number(this.payment_account_receipt.value),customer_bank_name:this.receipt_customer_bank_name.value,card_payment_amount:this.receipt_card_payment_amount.value,card_holder_name:this.receipt_card_holder_name.value,cart_transactions_no:this.receipt_cart_transactions_no.value};"Advance"==this.payment_type.value?(t.append("customer",this.customer_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",""),t.append("card_detail",JSON.stringify(a)),t.append("bank_detail",""),t.append("upi_detail","")):(t.append("customer",this.customer_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",this.receipt_sales.value),t.append("card_detail",JSON.stringify(a)),t.append("bank_detail",""),t.append("upi_detail",""))}else"Advance"==this.payment_type.value?(t.append("customer",this.customer_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",""),t.append("card_detail",""),t.append("bank_detail",""),t.append("upi_detail","")):(t.append("customer",this.customer_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",this.receipt_sales.value),t.append("card_detail",""),t.append("bank_detail",""),t.append("upi_detail",""));this.cartService.receiptPayment(t).subscribe({next:a=>{console.log("response receipt",a),a.isSuccess?(this.toastr.success(a.msg),this.receiptPaymentForm.reset(),document.querySelector(".receiptModalClose").click()):this.toastr.error(a.msg)},error:a=>{console.log(a),this.toastr.error(a.message)}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.u),e.Y36(r.qu),e.Y36(A._W),e.Y36(P.r),e.Y36(u.eN),e.Y36(q.v),e.Y36(F.p))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reciept"]],decls:38,vars:13,consts:[[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-12"],[1,"form-group"],[1,"d-block"],[1,"row","justify-center"],[1,"radio-payments-modal-wrapper","d-flex","justify-content-around"],["class","form-check",4,"ngFor","ngForOf"],["class","alert alert-danger",4,"ngIf"],["class","col-sm-12",4,"ngIf"],["class","col-sm-6",4,"ngIf"],[1,"col-sm-6"],["type","number","formControlName","amount_receipt","placeholder","Enter Amount",1,"form-control"],["class","col-sm-8",4,"ngIf"],["class","row",4,"ngIf"],[1,"form-group","mb-0"],["type","text","formControlName","receipt_remark","placeholder","Enter Remark",1,"form-control"],[1,"row","mt-2"],[1,"col-sm-12","d-flex","justify-content-center"],["type","submit",1,"btn","btn-dark","modal2BtnPos"],[1,"form-check"],["type","radio","formControlName","voucher_type",1,"form-check-input",3,"value"],[1,"form-check-label"],[1,"alert","alert-danger"],[4,"ngIf"],["type","radio","formControlName","payment_type",1,"form-check-input",3,"value"],["formControlName","payment_mode",1,"form-select"],["disabled","","selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formControlName","receipt_sales",1,"form-select"],[1,"col-sm-8"],["type","text","placeholder","Search for a Customer",1,"form-control",3,"formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["autoReceipt","matAutocomplete"],["class","is-loading",4,"ngIf"],[1,"is-loading"],["type","text","placeholder","Search for a Party",1,"form-control",3,"formControl","matAutocomplete"],["partyReceipt","matAutocomplete"],["formControlName","payment_account",1,"form-select"],["value","","disabled","","selected",""],["type","text","placeholder","UPI ID","formControlName","upi_id",1,"form-control"],["type","text","placeholder","Account No","formControlName","account_no",1,"form-control"],["type","text","placeholder","Customer Bank Name","formControlName","customer_bank_name",1,"form-control"],["type","number","placeholder","Card Payment Amount","formControlName","card_payment_amount",1,"form-control"],["type","text","placeholder","Card Holder Name","formControlName","card_holder_name",1,"form-control"],["type","number","placeholder","Card Transaction No","formControlName","cart_transactions_no",1,"form-control"],[1,"checkbox"],["type","checkbox","formControlName","non_gst"]],template:function(t,a){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return a.receiptFormSubmit()}),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Select Voucher Type"),e.qZA(),e.TgZ(6,"div",5)(7,"div",2)(8,"div",6),e.YNc(9,C,4,2,"div",7),e.qZA()()()(),e.YNc(10,k,2,1,"div",8),e.qZA()(),e.TgZ(11,"div",1),e.YNc(12,V,7,2,"div",9),e.YNc(13,Y,9,2,"div",10),e.YNc(14,B,9,2,"div",10),e.TgZ(15,"div",11)(16,"div",3)(17,"label"),e._uU(18,"Amount"),e.qZA(),e._UZ(19,"input",12),e.qZA(),e.YNc(20,L,2,1,"div",8),e.qZA(),e.TgZ(21,"div",1),e.YNc(22,z,12,8,"div",13),e.YNc(23,ne,12,8,"div",13),e.qZA()(),e.YNc(24,ue,12,4,"div",14),e.YNc(25,Ae,25,4,"div",14),e.YNc(26,Fe,7,1,"div",14),e.TgZ(27,"div",1)(28,"div",2)(29,"div",15)(30,"label"),e._uU(31,"Remark"),e.qZA(),e._UZ(32,"input",16),e.qZA(),e.YNc(33,Ce,2,1,"div",8),e.qZA()(),e.TgZ(34,"div",17)(35,"div",18)(36,"button",19),e._uU(37,"Save"),e.qZA()()()()),2&t&&(e.Q6J("formGroup",a.receiptPaymentForm),e.xp6(9),e.Q6J("ngForOf",a.voucherType),e.xp6(1),e.Q6J("ngIf",a.voucher_type.invalid&&(a.voucher_type.dirty||a.voucher_type.touched)),e.xp6(2),e.Q6J("ngIf","sales"===a.receiptPaymentForm.get("voucher_type").value||"purchase"===a.receiptPaymentForm.get("voucher_type").value),e.xp6(1),e.Q6J("ngIf","sales"===a.receiptPaymentForm.get("voucher_type").value||"purchase"===a.receiptPaymentForm.get("voucher_type").value),e.xp6(1),e.Q6J("ngIf","Against Bill"===a.receiptPaymentForm.get("payment_type").value),e.xp6(6),e.Q6J("ngIf",a.amount_receipt.invalid&&(a.amount_receipt.dirty||a.amount_receipt.touched)),e.xp6(2),e.Q6J("ngIf","sales"===a.receiptPaymentForm.get("voucher_type").value),e.xp6(1),e.Q6J("ngIf","purchase"===a.receiptPaymentForm.get("voucher_type").value||"expense"===a.receiptPaymentForm.get("voucher_type").value),e.xp6(1),e.Q6J("ngIf","Cash"!==a.receiptPaymentForm.get("payment_mode").value),e.xp6(1),e.Q6J("ngIf","Card"===a.receiptPaymentForm.get("payment_mode").value),e.xp6(1),e.Q6J("ngIf","expense"===a.receiptPaymentForm.get("voucher_type").value),e.xp6(7),e.Q6J("ngIf",a.receipt_remark.invalid&&(a.receipt_remark.dirty||a.receipt_remark.touched)))},dependencies:[d.sg,d.O5,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.Wl,r.EJ,r._,r.JJ,r.JL,r.oH,r.sg,r.u,s.XC,s.ZL,b.ey]}),i})()}];let ke=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[l.Bz.forChild(Ne),l.Bz]}),i})();var Ie=o(4144),Je=o(9549);let Re=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,ke,r.u5,r.UX,s.Bb,Je.lN,Ie.c]}),i})()}}]);