"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[6725],{16725:(M,g,l)=>{l.r(g),l.d(g,{NotificationsModule:()=>P});var f=l(36895),d=l(4392),i=l(94650),h=l(1954);function m(e,c){if(1&e){const t=i.EpF();i.TgZ(0,"input",28),i.NdJ("change",function(){i.CHM(t);const a=i.oxw().$implicit,o=i.oxw();return i.KtG(o.chackboxChange(null==a?null:a.id))}),i.qZA()}}function _(e,c){1&e&&i._UZ(0,"div",29)}function N(e,c){if(1&e){const t=i.EpF();i.TgZ(0,"div",17)(1,"div",18),i.YNc(2,m,1,0,"input",19),i.TgZ(3,"div",20),i.NdJ("click",function(){const o=i.CHM(t).$implicit,s=i.oxw();return i.KtG(s.notificationRead(null==o?null:o.id,null==o?null:o.is_view))}),i.TgZ(4,"div",21)(5,"div",22),i._UZ(6,"img",23),i.TgZ(7,"div")(8,"h5",24),i._uU(9),i.qZA(),i.TgZ(10,"p",25),i._uU(11),i.qZA(),i.TgZ(12,"p",26),i._uU(13),i.qZA()()(),i.YNc(14,_,1,0,"div",27),i.qZA()()()()}if(2&e){const t=c.$implicit,n=i.oxw();i.xp6(2),i.Q6J("ngIf",!(null!=t&&t.is_view)),i.xp6(1),i.Q6J("ngClass",null!=t&&t.is_view&&!n.isAllNotificationView?"notification-spacing-wrapper":""),i.xp6(1),i.Q6J("ngClass",null!=t&&t.is_view?"":"unread-card-wrapper"),i.xp6(5),i.Oqu(null==t?null:t.title),i.xp6(2),i.Oqu(null==t?null:t.body),i.xp6(2),i.Oqu(null==t?null:t.minutesAgo),i.xp6(1),i.Q6J("ngIf",!(null!=t&&t.is_view))}}const C=function(e,c){return{"active-page":e,disabled:c}};function v(e,c){if(1&e){const t=i.EpF();i.TgZ(0,"li",30),i.NdJ("click",function(){const o=i.CHM(t).$implicit,s=i.oxw();return i.KtG("..."!==o&&s.pageChange(o))}),i.TgZ(1,"a",12),i._uU(2),i.qZA()()}if(2&e){const t=c.$implicit,n=i.oxw();i.Q6J("ngClass",i.WLB(2,C,t===n.page,"..."===t)),i.xp6(2),i.Oqu(t)}}const w=[{path:"",component:(()=>{class e{constructor(t){this.notificationService=t,this.totalNotificationCount=0,this.page=1,this.itemsPerPage=10,this.notificationIds=[],this.selectedNotificationIds=[],this.isAllNotificationView=!1}ngOnInit(){this.getNotificationList(this.page)}calculateMinutesAgo(t){const n=new Date(t),o=(new Date).getTime()-n.getTime(),s=Math.floor(o/6e4);return s<60?`${s} minutes ago`:n.toLocaleDateString("en-US",{day:"numeric",month:"short",hour:"numeric",minute:"numeric",hour12:!0})}getNotificationList(t){this.notificationService.getNotificationPanel(t).subscribe(n=>{this.itemsPerPage=n?.notifications?.length,this.totalNotificationCount=n?.notifications_count,console.log(n),this.notificationList=n.notifications.map(o=>({...o,minutesAgo:this.calculateMinutesAgo(o?.schedule_time)})),console.log(this.notificationList);let a=[];this.notificationList.map(o=>{a.push(o?.is_view)}),this.isAllNotificationView=a.every(o=>!0===o)})}chackboxChange(t){this.selectedNotificationIds?.includes(t)||this.selectedNotificationIds.push(t)}selectedNotification(){let t=new FormData;t.append("notification_id",JSON.stringify(this.selectedNotificationIds)),this.notificationService.updateNotificationPanelByIds(t).subscribe(n=>{this.getNotificationList(this.page),this.selectedNotificationIds=[]},n=>{this.selectedNotificationIds=[]})}viewAllNotification(){this.notificationService.viewAllNotification().subscribe(t=>{this.getNotificationList(this.page)})}notificationRead(t,n){if(!n&&!this.notificationIds.includes(t)){this.notificationIds.push(t);let a=new FormData;a.append("notification_id",JSON.stringify(this.notificationIds)),this.notificationService.updateNotificationPanelByIds(a).subscribe(o=>{this.getNotificationList(this.page),this.notificationIds=[]},o=>{this.notificationIds=[]})}}pageChange(t){t!==this.page&&(this.page=t,this.getNotificationList(this.page))}getPageNumbers(){const t=this.totalNotificationCount,n=this.page;let o,s;if(t<=5)o=1,s=t;else{const p=Math.floor(2.5),u=Math.ceil(2.5)-1;n<=p?(o=1,s=5):n+u>=t?(o=t-5+1,s=t):(o=n-p,s=n+u)}const r=Array.from(Array(s+1-o).keys()).map(p=>o+p);return o>1&&(r.unshift("..."),r.unshift(1)),(s<t-1||s===t-1)&&r.push("..."),r}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(h.g))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-notifications"]],decls:27,vars:10,consts:[[1,"container-fluid","my-4"],[1,"mb-4","d-flex","align-items-center","justify-content-between"],[1,""],[1,"text-bold"],[1,"notification-description-wrapper"],[1,"btn","btn-primary","me-3",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"row","m-0"],["class","col-12 p-0",4,"ngFor","ngForOf"],[1,"d-flex","w-100","justify-content-end","my-3"],[1,"pagination-list"],[3,"click"],["href","javascript:void(0)"],[1,"fa","fa-angle-double-left"],[3,"ngClass","click",4,"ngFor","ngForOf"],[1,"fa","fa-angle-double-right"],[1,"entries","f-right"],[1,"col-12","p-0"],[1,"d-flex","align-items-center","mb-4"],["type","checkbox","class","me-3 checkbox-wrapper",3,"change",4,"ngIf"],[1,"card","card-wrapper","w-100","mb-0",3,"ngClass","click"],[1,"card-body","d-flex","align-items-center","justify-content-between",3,"ngClass"],[1,"d-flex","align-items-center"],["src","../../../assets/logo/logo.png","alt","logo-img","width","50","height","50",1,"rounded-circle","mr-3"],[1,"card-title","mb-1"],[1,"card-text","mb-1"],[1,"card-text"],["class","unread-notification-wrapper me-3",4,"ngIf"],["type","checkbox",1,"me-3","checkbox-wrapper",3,"change"],[1,"unread-notification-wrapper","me-3"],[3,"ngClass","click"]],template:function(t,n){1&t&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),i._uU(4,"All Notifications"),i.qZA(),i.TgZ(5,"p",4),i._uU(6,"View your all activities"),i.qZA()(),i.TgZ(7,"div")(8,"button",5),i.NdJ("click",function(){return n.selectedNotification()}),i._uU(9),i.qZA(),i.TgZ(10,"button",6),i.NdJ("click",function(){return n.viewAllNotification()}),i._uU(11,"View All"),i.qZA()()(),i.TgZ(12,"div",7),i.YNc(13,N,15,7,"div",8),i.qZA(),i.TgZ(14,"div",9)(15,"ul",10)(16,"li",11),i.NdJ("click",function(){return n.page>1&&n.pageChange(n.page-1)}),i.TgZ(17,"a",12),i._UZ(18,"i",13),i._uU(19," Previous "),i.qZA()(),i.YNc(20,v,3,5,"li",14),i.TgZ(21,"li",11),i.NdJ("click",function(){return n.page<n.totalNotificationCount&&n.pageChange(n.page+1)}),i.TgZ(22,"a",12),i._uU(23," Next "),i._UZ(24,"i",15),i.qZA()()()(),i.TgZ(25,"div",16),i._uU(26),i.qZA()()),2&t&&(i.xp6(9),i.hij("View Selected(",null==n.selectedNotificationIds?null:n.selectedNotificationIds.length,")"),i.xp6(4),i.Q6J("ngForOf",n.notificationList),i.xp6(3),i.ekj("disabled",1===n.page),i.xp6(4),i.Q6J("ngForOf",n.getPageNumbers()),i.xp6(1),i.ekj("disabled",n.page===n.totalNotificationCount),i.xp6(5),i.lnq(" Showing ",(n.page-1)*n.itemsPerPage+1," to ",n.page*n.itemsPerPage," of ",n.totalNotificationCount," entries "))},dependencies:[f.mk,f.sg,f.O5],styles:[".card-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{flex-shrink:0;margin-right:1rem}.notification-description-wrapper[_ngcontent-%COMP%]{font-weight:500;font-size:16px}.pagination-list[_ngcontent-%COMP%]{list-style-type:none;display:flex;justify-content:center;border:1px solid #ddd;border-radius:4px}.pagination-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;padding:5px 0}.pagination-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;padding:6px 12px}.pagination-list[_ngcontent-%COMP%]   li.disabled[_ngcontent-%COMP%]{pointer-events:none;color:#ccc}.pagination-list[_ngcontent-%COMP%]   li.active-page[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-color:#ff9f43;font-weight:700;color:#fff;border-color:#ff9f43}.pagination-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child){border-right:1px solid #ddd}.pagination-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{border-left:1px solid #ddd}.unread-notification-wrapper[_ngcontent-%COMP%]{height:14px;width:14px;background:#FF9F43;border-radius:50%}.unread-card-wrapper[_ngcontent-%COMP%]{background-color:#f3f3f3}.checkbox-wrapper[_ngcontent-%COMP%]{height:24px;width:24px}.notification-spacing-wrapper[_ngcontent-%COMP%]{margin-left:40px}"]}),e})()}];let b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[d.Bz.forChild(w),d.Bz]}),e})();var x=l(54333);let P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[f.ez,b,x.JX]}),e})()}}]);