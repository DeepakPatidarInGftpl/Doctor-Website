"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[8644],{8644:(A,T,o)=>{o.r(T),o.d(T,{TaxSlabsModule:()=>G});var u=o(96814),_=o(74408),i=o(56223),t=o(19212),n=o(44293),r=o(58763);function s(e,p){1&e&&(t.TgZ(0,"span",19),t._uU(1,"Enter Tax Slab Title "),t.qZA())}function b(e,p){if(1&e&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&e){const a=p.$implicit;t.s9C("value",a.id),t.xp6(1),t.hij("",a.tax_percentage+"%"," ")}}function l(e,p){if(1&e){const a=t.EpF();t.ynx(0),t.TgZ(1,"tr",26)(2,"td"),t._UZ(3,"input",27),t.qZA(),t.TgZ(4,"td"),t._UZ(5,"input",28),t.qZA(),t.TgZ(6,"td")(7,"select",29)(8,"option",30),t._uU(9,"Select tax"),t.qZA(),t.YNc(10,b,2,2,"option",31),t.qZA()(),t.TgZ(11,"td")(12,"button",32),t.NdJ("click",function(){const S=t.CHM(a).index,R=t.oxw(2);return t.KtG(R.removeAmount(S))}),t._uU(13,"\u2212"),t.qZA()()(),t.BQk()}if(2&e){const a=p.index,c=t.oxw(2);t.xp6(1),t.Q6J("formGroupName",a),t.xp6(9),t.Q6J("ngForOf",c.taxList)}}function m(e,p){if(1&e){const a=t.EpF();t.TgZ(0,"div",20)(1,"table",21)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"From Amount"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"To Amount"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Tax"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"\xa0"),t.qZA()()(),t.TgZ(12,"tbody"),t.ynx(13,22),t.YNc(14,l,14,2,"ng-container",23),t.BQk(),t.qZA()(),t.TgZ(15,"div",24)(16,"span",25),t.NdJ("click",function(){t.CHM(a);const d=t.oxw();return t.KtG(d.addAmount())}),t._uU(17,"+ Add more"),t.qZA()()()}if(2&e){const a=t.oxw();t.xp6(14),t.Q6J("ngForOf",a.getAmount().controls)}}function h(e,p){if(1&e&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&e){const a=p.$implicit;t.s9C("value",a.id),t.xp6(1),t.Oqu(a.tax_percentage+"%")}}function g(e,p){if(1&e&&(t.ynx(0),t.TgZ(1,"tr",26)(2,"td",34)(3,"select",35)(4,"option",30),t._uU(5,"Select Tax"),t.qZA(),t.YNc(6,h,2,2,"option",31),t.qZA()()(),t.BQk()),2&e){const a=p.index,c=t.oxw(2);t.xp6(1),t.Q6J("formGroupName",a),t.xp6(5),t.Q6J("ngForOf",c.taxList)}}function f(e,p){if(1&e&&(t.TgZ(0,"div",20)(1,"table",21)(2,"thead")(3,"tr",34)(4,"th"),t._uU(5,"Tax"),t.qZA()()(),t.TgZ(6,"tbody"),t.ynx(7,22),t.YNc(8,g,7,2,"ng-container",23),t.BQk(),t.qZA()()()),2&e){const a=t.oxw();t.xp6(8),t.Q6J("ngForOf",a.getAmount().controls)}}function x(e,p){1&e&&(t.TgZ(0,"button",36),t._uU(1,"Submit"),t.qZA())}function v(e,p){1&e&&(t.TgZ(0,"button",37),t._UZ(1,"span",38),t._uU(2,"\xa0 Submit"),t.qZA())}const y=e=>({"is-invalid":e});let C=(()=>{class e{get f(){return this.taxSlabForm.controls}constructor(a,c,d,S){this.fb=a,this.coreService=c,this.router=d,this.toastrService=S,this.isTax=!1,this.isAddmoreTax=!1,this.subcatbySubcatGroup=[],this.filteredSubcategory=[],this.searchTerm="",this.selectSubcat=[],this.selectedSubcat=0,this.selectedSubCategoryIds=[],this.loaders=!1}ngOnInit(){this.taxSlabForm=this.fb.group({slab_title:new i.NI("",[i.kI.required]),variable_tax:new i.NI("",[i.kI.required]),amount_tax_slabs:this.fb.array([])}),this.addAmount(),this.getTax(),this.isAddmoreTax=1==this.isTax}toggle(){this.isTax=!this.isTax,1==this.isTax?this.isAddmoreTax=!0:(this.isAddmoreTax=!1,console.log("false"))}amount_tax_slabs(){return this.fb.group(1==this.isTax?{from_amount:"",to_amount:"",tax:""}:{tax:""})}getAmount(){return this.taxSlabForm.get("amount_tax_slabs")}addAmount(){this.getAmount().push(this.amount_tax_slabs())}removeAmount(a){this.getAmount().removeAt(a)}get slab_title(){return this.taxSlabForm.get("slab_title")}get variable_tax(){return this.taxSlabForm.get("variable_tax")}get tax(){return this.taxSlabForm.get("tax")}getSubcateGroup(){this.coreService.getSubcategoryGroup().subscribe(a=>{this.subcatGroupList=a})}getTax(){this.coreService.gettaxd().subscribe(a=>{this.taxList=a})}getSubcategoryBySubcatGroup(a){this.coreService.getSubcategoryBySubcatGroup(a).subscribe(c=>{this.subcatbySubcatGroup=c.subcategories,this.filteredSubcategory=[...this.subcatbySubcatGroup],setTimeout(()=>{this.subcatbySubcatGroup.map(d=>{this.selectSubcat.includes(d.id)&&this.taxSlabForm.get("subcategory").push(new i.NI(d.id))})},1e3)})}filterSubcategory(){this.filteredSubcategory=""===this.searchTerm.trim()?[...this.subcatbySubcatGroup]:this.subcatbySubcatGroup.filter(a=>a.title.toLowerCase().includes(this.searchTerm.toLowerCase()))}onCheckChange(a){const c=this.taxSlabForm.get("subcategory");if(a.target.checked)c.push(new i.NI(parseInt(a.target.value))),this.check=c,this.selectedSubCategoryIds=c.value,this.selectedSubcat++;else{let d=0;c.controls.forEach(S=>{if(S.value==a.target.value)return c.removeAt(d),void this.selectedSubcat--;d++})}}submit(){this.taxSlabForm.valid?(this.loaders=!0,this.coreService.addTaxSlab(this.taxSlabForm.value).subscribe(a=>{this.addRes=a,this.addRes.success&&(this.loaders=!1,this.toastrService.success(this.addRes.msg),this.router.navigate(["product/taxSlabList"]))})):(this.taxSlabForm.markAllAsTouched(),this.toastrService.error("Please Fill All The Required Fields"))}onLabelClick(a){a.stopPropagation()}static#t=this.\u0275fac=function(c){return new(c||e)(t.Y36(i.qu),t.Y36(n.p),t.Y36(_.F0),t.Y36(r._W))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-tax-slabs"]],decls:30,vars:12,consts:[[1,"page-header","justify-content-center"],[1,"page-title"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"card"],[1,"card-body"],[1,"row","form-card"],[1,"col-lg-4","col-sm-4","col-12"],[1,"form-group"],["type","text","placeholder","Slab Title","formControlName","slab_title",3,"ngClass"],["class","text-danger",4,"ngIf"],[1,"d-flex",2,"margin-top","2rem"],["type","checkbox","formControlName","variable_tax",3,"id","ngModel","click"],[1,"d_flex",2,"margin-bottom","0","margin-left","5px",3,"for"],["class","col-lg-8 col-sm-8 col-12",4,"ngIf"],[1,"col-lg-8","text-end","mt-5"],["class","btn btn-submit me-2",4,"ngIf"],["class","btn btn-submit me-2","type","submit","disabled","",4,"ngIf"],["routerLink","//product/taxSlabList",1,"btn","btn-cancel"],[1,"text-danger"],[1,"col-lg-8","col-sm-8","col-12"],[1,"table","amt-table"],["formArrayName","amount_tax_slabs"],[4,"ngFor","ngForOf"],[1,"w-100","text-right"],[1,"addMore",3,"click"],[3,"formGroupName"],["type","text","formControlName","from_amount","placeholder","ex-100",1,"form-control","inp"],["type","text","formControlName","to_amount","placeholder","ex-1000",1,"form-control","inp"],["formControlName","tax",1,"inp"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn",2,"background","#FF9F43",3,"click"],[3,"value"],[1,"text-center"],["formControlName","tax",1,"inp",2,"width","30%"],[1,"btn","btn-submit","me-2"],["type","submit","disabled","",1,"btn","btn-submit","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(c,d){1&c&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3,"Tax Slab Add"),t.qZA(),t.TgZ(4,"h6"),t._uU(5,"Create new Tax Slab"),t.qZA()()(),t.TgZ(6,"form",2),t.NdJ("ngSubmit",function(){return d.submit()}),t.TgZ(7,"div",3)(8,"div",4)(9,"div",5)(10,"div",6)(11,"div",7)(12,"div",8)(13,"label"),t._uU(14,"Title*"),t.qZA(),t._UZ(15,"input",9),t.YNc(16,s,2,0,"span",10),t.qZA()(),t.TgZ(17,"div",7)(18,"div",8)(19,"div",11)(20,"input",12),t.NdJ("click",function(){return d.toggle()}),t.qZA(),t.TgZ(21,"label",13),t._uU(22,"Variable Tax"),t.qZA()()()(),t.YNc(23,m,18,1,"div",14)(24,f,9,1,"div",14),t.TgZ(25,"div",15),t.YNc(26,x,2,0,"button",16)(27,v,3,0,"button",17),t.TgZ(28,"a",18),t._uU(29,"Cancel"),t.qZA()()()()()()()),2&c&&(t.xp6(6),t.Q6J("formGroup",d.taxSlabForm),t.xp6(9),t.Q6J("ngClass",t.VKq(10,y,d.f.slab_title.touched&&d.f.slab_title.invalid)),t.xp6(1),t.Q6J("ngIf",d.slab_title&&d.slab_title.invalid&&d.slab_title.touched),t.xp6(4),t.Q6J("id","checkboxMeasure-")("ngModel",d.isTax),t.xp6(1),t.Q6J("for","checkboxMeasure-"),t.xp6(2),t.Q6J("ngIf",d.isAddmoreTax),t.xp6(1),t.Q6J("ngIf",!d.isAddmoreTax),t.xp6(2),t.Q6J("ngIf",!d.loaders),t.xp6(1),t.Q6J("ngIf",d.loaders))},dependencies:[u.mk,u.sg,u.O5,_.rH,i._Y,i.YN,i.Kr,i.Fj,i.Wl,i.EJ,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE],styles:['.ng-dirty.ng-invalid.is-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}select[_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], input[type=button][_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;padding:10px 15px;border-radius:5px}.button[_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;display:flex;padding:10px 15px;border-radius:5px;justify-content:space-between;align-items:center;background-color:#fff}.table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){border-top:none!important}.labelSize[_ngcontent-%COMP%]{display:flex;align-items:center}.entries[_ngcontent-%COMP%]{font-size:12px;color:#5e5873;font-weight:600;float:left;margin-top:10px}.labelSize[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid #ced4da;width:80px;height:30px;padding:0;border-radius:3px}.thone[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{float:right;margin-top:4px}@media (max-width: 765px){.thone[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{float:inherit;margin-top:0}}.fa-sort[_ngcontent-%COMP%]:before{content:"\\f0dc";right:.5em;color:#babfc7;font-size:12px;opacity:1}.inp[_ngcontent-%COMP%]{border:none}.amt-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#EEF0F8}.amt-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#FAFBFE}.addMore[_ngcontent-%COMP%]{color:#ff9f43;font-size:20px;font-weight:500;float:right}.form-card[_ngcontent-%COMP%]{width:100%;margin:auto;justify-content:center}']})}return e})();var M=o(1971);const O=JSON.parse(localStorage.getItem("auth"));let P;O&&O.map(p=>{"product"===p.content_type.app_label&&"taxslabs"===p.content_type.model&&"add_taxslabs"==p.codename&&(P=p.codename)});const Z=[{path:"",component:C,canActivate:[M.l],data:{allowedRoles:["add_taxslabs"]}}];let F=(()=>{class e{static#t=this.\u0275fac=function(c){return new(c||e)};static#e=this.\u0275mod=t.oAB({type:e});static#a=this.\u0275inj=t.cJS({imports:[_.Bz.forChild(Z),_.Bz]})}return e})();var E=o(89727),D=o(98665),I=o(32772),U=o(76472),N=o(35202),J=o(98525),L=o(75986);let G=(()=>{class e{static#t=this.\u0275fac=function(c){return new(c||e)};static#e=this.\u0275mod=t.oAB({type:e});static#a=this.\u0275inj=t.cJS({imports:[u.ez,F,E.ZU,i.u5,i.UX,D.T,I.h,U.JX,N.l,J.LD,L.p9]})}return e})()},1971:(A,T,o)=>{o.d(T,{l:()=>r});var u=o(19212),_=o(74408),i=o(58763),t=o(41789),n=o(44293);let r=(()=>{class s{constructor(l,m,h,g,f){this.router=l,this.Arout=m,this.toastr=h,this.profileService=g,this.coreService=f}canActivate(l,m){const h=JSON.parse(localStorage.getItem("auth"));if(this.profileService.userDetails$.subscribe(g=>{this.userDetails=g,this.permissions=this.userDetails?.permission}),h){const g=l.data.allowedRoles;console.log(g,"allowedRoles");const f=h.some(x=>g.includes(x.codename));if(console.log(f),this.coreService.getProfile().subscribe(x=>{this.userDetails=x,this.profileService.setUserDetails(this.userDetails);const v=x?.permission,y=this.profileService.getUserDetails();(!y||y.length!==v.length)&&(this.profileService.setUserPermission(v),window.location.reload())}),f)return!0}return this.toastr.error("User have Not Permission to Access This page"),this.router.navigate(["/dashboard"]),!1}static#t=this.\u0275fac=function(m){return new(m||s)(u.LFG(_.F0),u.LFG(_.gz),u.LFG(i._W),u.LFG(t.J),u.LFG(n.p))};static#e=this.\u0275prov=u.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()},98665:(A,T,o)=>{o.d(T,{G:()=>u.G,T:()=>_.T});var u=o(37342),_=o(37263)},37342:(A,T,o)=>{o.d(T,{G:()=>i});var u=o(19212),i=function(){function t(n,r,s){this.el=n,this.vcr=r,this.renderer=s,this.dtOptions={}}return t.prototype.ngOnInit=function(){var n=this;this.dtTrigger?this.dtTrigger.subscribe(function(r){n.displayTable(r)}):this.displayTable(null)},t.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},t.prototype.displayTable=function(n){var r=this;n&&(this.dtOptions=n),this.dtInstance=new Promise(function(s,b){Promise.resolve(r.dtOptions).then(function(l){0===Object.keys(l).length&&0===$("tbody tr",r.el.nativeElement).length?b("Both the table and dtOptions cannot be empty"):setTimeout(function(){var h={rowCallback:function(g,f,x){if(l.columns){var v=l.columns;r.applyNgPipeTransform(g,v),r.applyNgRefTemplate(g,v,f)}l.rowCallback&&l.rowCallback(g,f,x)}};h=Object.assign({},l,h),r.dt=$(r.el.nativeElement).DataTable(h),s(r.dt)})})})},t.prototype.applyNgPipeTransform=function(n,r){r.filter(function(b){return b.ngPipeInstance&&!b.ngTemplateRef}).forEach(function(b){var l=b.ngPipeInstance,m=b.ngPipeArgs||[],h=r.findIndex(function(v){return v.data===b.data}),g=n.childNodes.item(h),f=$(g).text(),x=l.transform.apply(l,function(t,n,r){if(r||2===arguments.length)for(var l,s=0,b=n.length;s<b;s++)(l||!(s in n))&&(l||(l=Array.prototype.slice.call(n,0,s)),l[s]=n[s]);return t.concat(l||Array.prototype.slice.call(n))}([f],m,!1));$(g).text(x)})},t.prototype.applyNgRefTemplate=function(n,r,s){var b=this;r.filter(function(m){return m.ngTemplateRef&&!m.ngPipeInstance}).forEach(function(m){var h=m.ngTemplateRef,g=h.ref,f=h.context,x=r.findIndex(function(M){return M.data===m.data}),v=n.childNodes.item(x);$(v).html("");var y=Object.assign({},f,f?.userData,{adtData:s}),C=b.vcr.createEmbeddedView(g,y);b.renderer.appendChild(v,C.rootNodes[0])})},t.\u0275fac=function(r){return new(r||t)(u.Y36(u.SBq),u.Y36(u.s_b),u.Y36(u.Qsj))},t.\u0275dir=u.lG2({type:t,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),t}()},37263:(A,T,o)=>{o.d(T,{T:()=>t});var u=o(96814),i=(o(37342),o(19212)),t=function(){function n(){}return n.forRoot=function(){return{ngModule:n}},n.\u0275fac=function(s){return new(s||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[u.ez]}),n}()}}]);