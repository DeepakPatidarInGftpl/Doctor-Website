"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[6293],{60843:(Z,y,c)=>{c.d(y,{s:()=>m});var d=c(92340),v=c(94650),b=c(80529);let m=(()=>{class g{constructor(e){this.http=e,this.apiUrl=`${d.N.api}`}getSalesNumber(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/numbers/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getCutomerRetention(e,a,n,s){let t=this.apiUrl+"/pv-api/customer-retention-rate/";const i=[];return e&&i.push(`start_date=${e}`),a&&i.push(`end_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getTotalSalePurchase(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/total-sale-vs-total-purchase/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getDailySales(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/daily-sales/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getSalevsPurchase(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/sale_vs_purchase/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getCategoryWiseSale(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/category-wise-sale/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getSubCatWiseSale(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/subcategory-wise-sale/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getInventory(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/fsn-analysis/";const i=[];return e&&i.push(`start_date=${e}`),a&&i.push(`end_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getCustomerActivity(){return this.http.get(this.apiUrl+"/pv-api/dashboard/customers-activity/")}getTopCustomer(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/top-20-customers/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getRecentlySales(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/recently-sale/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getRecentlyAddedProduct(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/recently-added-products/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getBestSellingProduct(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/best-selling-products/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getLeastSellingProduct(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/least-selling-products/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getTotalRecvsPay(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/total-receivables-vs-total-payables/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getGrowth(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/growth-graph/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getGrossNetProfit(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/gross-profit-net-profit/";const i=[];return e&&i.push(`start_date=${e}`),a&&i.push(`end_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getUnpaidInvoices(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/unpaid-invoices/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getTotalReceivables(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/total-receivable/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getTodayPayables(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/total-payable/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getTodayExpense(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/expenses/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getDepartmentWiseTarget(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/departments_wise_targets/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getEployeeTargetAchieved(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/employee-target-achievement/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getEmployeeTop10(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/top-10-employess/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getEmployeeTargetGraph(e,a,n,s){let t=this.apiUrl+"/pv-api/dashboard/employee-target-graph/";const i=[];return e&&i.push(`from_date=${e}`),a&&i.push(`to_date=${a}`),n&&i.push(`branch=${n}`),s&&i.push(`financial_year=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}getAnalysisInventoryList(e,a,n){let s=this.apiUrl+"/pv-api/dashboard/fsn-analysis-product-list/";const t=[];return e&&t.push(`start_date=${e}`),a&&t.push(`end_date=${a}`),n&&t.push(`financial_year=${n}`),t.length>0&&(s+="?"+t.join("&")),this.http.get(s)}getBranch(){return this.http.get(this.apiUrl+"/pv-api/branch/")}getDayBook(e,a,n){let s=this.apiUrl+"/api/reports/profit_and_loss/";const t=[];return e&&t.push(`start_date=${e}`),a&&t.push(`end_date=${a}`),t.length>0&&(s+="?"+t.join("&")),n&&t.push(`financial_year=${n}`),this.http.get(s)}}return g.\u0275fac=function(e){return new(e||g)(v.LFG(b.eN))},g.\u0275prov=v.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},53506:(Z,y,c)=>{c.d(y,{x:()=>m});var d=c(92340),v=c(94650),b=c(80529);let m=(()=>{class g{constructor(e){this.http=e,this.apiUrl=`${d.N.api}`}getBranch(){throw new Error("Method not implemented.")}getSupplier(e){return this.http.get(this.apiUrl+"/pv-api/supplier/?search="+e)}getPurchaseFY(e,a){console.log(a,"branch"),console.log(a.length,"branch");let n=this.apiUrl+"/pv-api/purchase_order/";const s=[];if(e&&s.push(`financial_year=${e}`),a&&a.length>0){const t=JSON.stringify(a);console.log(t),console.log(t?.length),s.push(`branch=${t}`)}return s.length>0&&(n+="?"+s.join("&")),this.http.get(n)}getPurchase(){return this.http.get(this.apiUrl+"/pv-api/purchase_order/")}getPurchaseOrderByUserId(e){return this.http.get(this.apiUrl+"/pv-api/purchase_order/?user_id="+e)}addPurchase(e){return this.http.post(this.apiUrl+"/pv-api/purchase_order/",e)}getPurchaseById(e){return this.http.get(`${this.apiUrl+"/pv-api/purchase_order/?id="}${e}`)}PurchaseIsActive(e,a){return this.http.patch(`${this.apiUrl+"/pv-api/purchase_order/?id="}${e}`,a)}updatePurchase(e,a){return this.http.put(`${this.apiUrl+"/pv-api/purchase_order/?id="}${a}`,e)}deletePurchase(e){return this.http.delete(`${this.apiUrl+"/pv-api/purchase_order/?id="}${e}`)}searchProduct(e){return this.http.get(this.apiUrl+"/pv-api/product_search/?search="+e)}productVariant(){return this.http.get(this.apiUrl+"/pv-api/product_variant/")}getMaterialFY(e,a){console.log(a,"branch"),console.log(a.length,"branch");let n=this.apiUrl+"/pv-api/material_inward/";const s=[];if(e&&s.push(`financial_year=${e}`),a&&a.length>0){const t=JSON.stringify(a);console.log(t),console.log(t?.length),s.push(`branch=${t}`)}return s.length>0&&(n+="?"+s.join("&")),this.http.get(n)}getMaterial(){return this.http.get(this.apiUrl+"/pv-api/material_inward/")}addMaterial(e){return this.http.post(this.apiUrl+"/pv-api/material_inward/",e)}getMaterialById(e){return this.http.get(`${this.apiUrl+"/pv-api/material_inward/?id="}${e}`)}getMaterialByUserId(e){return this.http.get(`${this.apiUrl+"/pv-api/material_inward/?user_id="}${e}`)}MaterialIsActive(e,a){return this.http.patch(`${this.apiUrl+"/pv-api/material_inward/?id="}${e}`,a)}updateMaterial(e,a){return this.http.put(`${this.apiUrl+"/pv-api/material_inward/?id="}${a}`,e)}deleteMaterial(e){return this.http.delete(`${this.apiUrl+"/pv-api/material_inward/?id="}${e}`)}getPurchaseBillFY(e,a){console.log(a,"branch"),console.log(a.length,"branch");let n=this.apiUrl+"/pv-api/purchase_bill/";const s=[];if(e&&s.push(`financial_year=${e}`),a&&a.length>0){const t=JSON.stringify(a);console.log(t),console.log(t?.length),s.push(`branch=${t}`)}return s.length>0&&(n+="?"+s.join("&")),this.http.get(n)}getPurchaseBill(){return this.http.get(this.apiUrl+"/pv-api/purchase_bill/")}addPurchaseBill(e){return this.http.post(this.apiUrl+"/pv-api/purchase_bill/",e)}getPurchaseBillById(e){return this.http.get(`${this.apiUrl+"/pv-api/purchase_bill/?id="}${e}`)}getPurchaseBillByUserId(e){return this.http.get(`${this.apiUrl+"/pv-api/purchase_bill/?user_id="}${e}`)}PurchaseBillIsActive(e,a){return this.http.patch(`${this.apiUrl+"/pv-api/purchase_bill/?id="}${e}`,a)}updatePurchaseBill(e,a){return this.http.put(`${this.apiUrl+"/pv-api/purchase_bill/?id="}${a}`,e)}deletePurchaseBill(e){return this.http.delete(`${this.apiUrl+"/pv-api/purchase_bill/?id="}${e}`)}getDebitNotes(e,a){console.log(a,"branch"),console.log(a.length,"branch");let n=this.apiUrl+"/pv-api/debit_note/";const s=[];if(e&&s.push(`financial_year=${e}`),a&&a.length>0){const t=JSON.stringify(a);console.log(t),console.log(t?.length),s.push(`branch=${t}`)}return s.length>0&&(n+="?"+s.join("&")),this.http.get(n)}addDebitNotes(e){return this.http.post(this.apiUrl+"/pv-api/debit_note/",e)}getDebitNotesById(e){return this.http.get(`${this.apiUrl+"/pv-api/debit_note/?id="}${e}`)}DebitNotesIsActive(e,a){return this.http.patch(`${this.apiUrl+"/pv-api/debit_note/?id="}${e}`,a)}updateDebitNotes(e,a){return this.http.put(`${this.apiUrl+"/pv-api/debit_note/?id="}${a}`,e)}deleteDebitNotes(e){return this.http.delete(`${this.apiUrl+"/pv-api/debit_note/?id="}${e}`)}getSearchProductById(e){return this.http.get(`${this.apiUrl+"/pv-api/variant-search/?search="}${e}`)}getSearchProduct(){return this.http.get(this.apiUrl+"/pv-api/variant-search/")}getPurchaseOrderPrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=PurchaseOrder")}getPurchaseBillPrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=PurchaseBill")}getDebitNotePrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=PurchaseReturn")}getMaterialInwardPrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=MaterialInward")}productBySupplier(){return this.http.get(this.apiUrl+"/pv-api/purchase_product_filter/")}getAdditionalCharge(){return this.http.get(this.apiUrl+"/pv-api/pos/additional_charge_pos/")}getTax(){return this.http.get(this.apiUrl+"/pv-api/tax/")}getPurchaseReturnfy(e,a){console.log(a,"branch"),console.log(a.length,"branch");let n=this.apiUrl+"/pv-api/purchase_return/";const s=[];if(e&&s.push(`financial_year=${e}`),a&&a.length>0){const t=JSON.stringify(a);console.log(t),console.log(t?.length),s.push(`branch=${t}`)}return s.length>0&&(n+="?"+s.join("&")),this.http.get(n)}getPurchaseReturn(){return this.http.get(this.apiUrl+"/pv-api/purchase_return/")}addPurchaseReturn(e){return this.http.post(this.apiUrl+"/pv-api/purchase_return/",e)}getPurchaseReturnById(e){return this.http.get(`${this.apiUrl+"/pv-api/purchase_return/?id="}${e}`)}PurchaseReturnIsActive(e,a){return this.http.patch(`${this.apiUrl+"/pv-api/purchase_return/?id="}${e}`,a)}updatePurchaseReturn(e,a){return this.http.put(`${this.apiUrl+"/pv-api/purchase_return/?id="}${a}`,e)}deletePurchaseReturn(e){return this.http.delete(`${this.apiUrl+"/pv-api/purchase_return/?id="}${e}`)}filterVariant(e,a,n,s){let t=this.apiUrl+"/pv-api/purchase_product_filter/";const i=[];return e&&i.push(`supplier=${e}`),a&&i.push(`category=${a}`),n&&i.push(`subcategory=${n}`),s&&i.push(`search=${s}`),i.length>0&&(t+="?"+i.join("&")),this.http.get(t)}purchaseReturnStatusUpdate(e){return this.http.post(this.apiUrl+"/pv-api/purchase_return_status_update/",e)}}return g.\u0275fac=function(e){return new(e||g)(v.LFG(b.eN))},g.\u0275prov=v.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},6293:(Z,y,c)=>{c.r(y),c.d(y,{MaterialInwardModule:()=>st});var d=c(36895),v=c(4392),b=c(2454),m=c.n(b),g=c(96166),T=c(12983),e=c.n(T),a=c(80574),n=c(94327),s=c(24006),t=c(94650),i=c(53506),w=c(42917),D=c(60843),$=c(43443),U=c(54333),I=c(73162),C=c(54040);function N(h,u){if(1&h){const r=t.EpF();t.TgZ(0,"a",60)(1,"input",61,62),t.NdJ("change",function(o){const f=t.CHM(r).$implicit,_=t.oxw(2);return t.KtG(_.SelectedBranch(f.id,o.target.checked))}),t.qZA(),t.TgZ(3,"label",63),t.NdJ("click",function(o){t.CHM(r);const p=t.oxw(2);return t.KtG(p.onLabelClick(o))}),t._uU(4),t.qZA()()}if(2&h){const r=u.$implicit,l=u.index,o=t.oxw(2);t.xp6(1),t.Q6J("value",r.id)("checked",o.selectData.includes(r.id))("id","checkboxCat-"+l),t.xp6(2),t.Q6J("for","checkboxCat-"+l),t.xp6(1),t.Oqu(r.title)}}function B(h,u){if(1&h&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&h){const r=t.oxw(2);t.xp6(1),t.Oqu(r.selectData.length+" Selected")}}const O=function(){return{standalone:!0}};function L(h,u){if(1&h){const r=t.EpF();t.TgZ(0,"div",53)(1,"div",54)(2,"button",55),t._uU(3,"Select Branch"),t.qZA(),t.TgZ(4,"ul",56)(5,"li")(6,"input",57),t.NdJ("ngModelChange",function(o){t.CHM(r);const p=t.oxw();return t.KtG(p.searchBranch=o)})("ngModelChange",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.filterBranch())}),t.qZA()(),t.TgZ(7,"li"),t.YNc(8,N,5,5,"a",58),t.qZA()()(),t.TgZ(9,"div",59),t.YNc(10,B,2,1,"span",49),t.qZA()()}if(2&h){const r=t.oxw();t.xp6(6),t.Q6J("ngModel",r.searchBranch)("ngModelOptions",t.DdM(4,O)),t.xp6(2),t.Q6J("ngForOf",r.filteredBranchList),t.xp6(2),t.Q6J("ngIf",r.selectData.length>0)}}function J(h,u){1&h&&(t.TgZ(0,"a",64),t._UZ(1,"img",65),t._uU(2,"Add New Material Inward "),t.qZA())}function E(h,u){if(1&h&&(t.TgZ(0,"a",72),t._UZ(1,"img",76),t.qZA()),2&h){const r=t.oxw().$implicit;t.MGl("routerLink","//purchase/editmaterial-Inward/",r.id,"")}}function R(h,u){if(1&h){const r=t.EpF();t.TgZ(0,"a",77),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(),p=o.index,f=o.$implicit,_=t.oxw(2);return t.KtG(_.confirmText(p,f.id))}),t._UZ(1,"img",78),t.qZA()}}const k=function(h,u,r){return{"bg-lightgreen":h,"bg-lightred":u,"bg-lightyellow":r}};function F(h,u){if(1&h){const r=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"label",67)(3,"input",68),t.NdJ("ngModelChange",function(o){const f=t.CHM(r).index,_=t.oxw(2);return t.KtG(_.selectedRows[f]=o)}),t.qZA(),t._UZ(4,"span",47),t.qZA()(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",69)(10,"a",70),t._uU(11),t.qZA()(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.ALo(16,"date"),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.ALo(19,"date"),t.qZA(),t.TgZ(20,"td"),t._uU(21),t.qZA(),t.TgZ(22,"td"),t._uU(23),t.qZA(),t.TgZ(24,"td")(25,"span",71),t._uU(26),t.qZA()(),t.TgZ(27,"td")(28,"a",72),t._UZ(29,"img",73),t.qZA(),t.YNc(30,E,2,1,"a",74),t.YNc(31,R,2,0,"a",75),t.qZA()()}if(2&h){const r=u.$implicit,l=u.index,o=t.oxw(2);t.xp6(3),t.Q6J("ngModel",o.selectedRows[l]),t.xp6(3),t.Oqu(l+1),t.xp6(2),t.Oqu(null==r?null:r.material_inward_no),t.xp6(2),t.MGl("routerLink","//purchase/material-InwardDetails/",r.id,""),t.xp6(1),t.Oqu(null==r||null==r.party?null:r.party.name),t.xp6(2),t.Oqu(null==r||null==r.purchase_order?null:r.purchase_order.order_no),t.xp6(2),t.Oqu(t.xi3(16,15,null==r?null:r.po_date,"dd-MMMM-yyyy")),t.xp6(3),t.Oqu(t.xi3(19,18,null==r?null:r.material_inward_date,"dd-MMMM-yyyy")),t.xp6(3),t.Oqu(null==r?null:r.shipping_note),t.xp6(2),t.Oqu(null==r?null:r.recieved_by),t.xp6(2),t.Q6J("ngClass",t.kEZ(21,k,"Completed"===(null==r?null:r.status),"Inprogress"===(null==r?null:r.status),"Draft"===(null==r?null:r.status))),t.xp6(1),t.Oqu(null==r?null:r.status),t.xp6(2),t.MGl("routerLink","//purchase/material-InwardDetails/",r.id,""),t.xp6(2),t.Q6J("ngIf",o.isEdit),t.xp6(1),t.Q6J("ngIf",o.isDelete)}}const j=function(h,u){return{itemsPerPage:h,currentPage:u}};function Y(h,u){if(1&h&&(t.TgZ(0,"tbody"),t.YNc(1,F,32,25,"tr",66),t.ALo(2,"paginate"),t.ALo(3,"orderBy"),t.qZA()),2&h){const r=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,t.Dn7(3,4,r.filteredData,r.key,r.reverse),t.WLB(8,j,r.itemsPerPage,r.p)))}}function G(h,u){1&h&&(t.TgZ(0,"tbody")(1,"tr")(2,"td",79)(3,"p",80),t._uU(4,"Data not available"),t.qZA()()()())}function Q(h,u){1&h&&t._UZ(0,"mat-progress-bar",81)}function H(h,u){if(1&h){const r=t.EpF();t.TgZ(0,"div",4)(1,"div",82)(2,"div",83),t._uU(3," Show per page "),t.TgZ(4,"select",84,85),t.NdJ("ngModelChange",function(o){t.CHM(r);const p=t.oxw();return t.KtG(p.itemsPerPage=o)})("change",function(){t.CHM(r);const o=t.MAs(5),p=t.oxw();return t.KtG(p.changePg(o.value))}),t.TgZ(6,"option",86),t._uU(7,"10"),t.qZA(),t.TgZ(8,"option",87),t._uU(9,"20"),t.qZA(),t.TgZ(10,"option",88),t._uU(11,"30"),t.qZA(),t.TgZ(12,"option",89),t._uU(13,"50"),t.qZA(),t.TgZ(14,"option",90),t._uU(15,"100"),t.qZA(),t.TgZ(16,"option",91),t._uU(17,"All"),t.qZA()()()(),t.TgZ(18,"div",92)(19,"div",93)(20,"pagination-controls",94),t.NdJ("pageChange",function(o){t.CHM(r);const p=t.oxw();return t.KtG(p.p=o)}),t.qZA(),t.TgZ(21,"div",95),t._uU(22),t.qZA()()()()}if(2&h){const r=t.oxw();t.xp6(4),t.Q6J("ngModel",r.itemsPerPage),t.xp6(18),t.lnq("Showing ",r.itemsPerPage," to ",null==r.tableData?null:r.tableData.length," of ",r.p," entries ")}}let K=(()=>{class h{constructor(r,l,o,p,f){this.purchaseService=r,this.cs=l,this.datepipe=o,this.dashboardservice=p,this.commonService=f,this.dtOptions={},this.initChecked=!1,this.p=1,this.pageSize=10,this.itemsPerPage=10,this.minDate="",this.maxDate="",this.dueMinDate="",this.dueMaxDate="",this.materialDate=new s.NI(""),this.poDate=new s.NI(""),this.loader=!0,this.isAdmin=!1,this.allSelected=!1,this.select=!1,this.key="id",this.reverse=!0,this.branchList=[],this.filteredBranchList=[],this.searchBranch="",this.searchVariant="",this.selectData=[],this.selectedCategoryIds=[]}confirmText(r,l){m().fire({title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",buttonsStyling:!0,customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-danger ml-1"}}).then(o=>{o.isConfirmed&&this.purchaseService.deleteMaterial(l).subscribe(p=>{this.delRes=p,this.delRes.success?(this.ngOnInit(),m().fire({icon:"success",title:"Deleted!",text:this.delRes.msg}),this.tableData.splice(r,1)):m().fire({icon:"error",title:"Not Deleted!",text:this.delRes.error})})})}isActive(r,l){m().fire({title:"Are you sure?",text:"Do you want to Deactivate this material inward!",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Deactivate it!",buttonsStyling:!0,customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-danger ml-1"}}).then(o=>{o.isConfirmed&&(this.purchaseService.MaterialIsActive(l,"").subscribe(p=>{this.delRes=p,this.delRes.success&&this.ngOnInit()}),m().fire({icon:"success",title:"Deactivate!",text:"Material Inward Is Deactivate Successfully."}))})}Active(r,l){m().fire({title:"Are you sure?",text:"Do you want to Active this Material Inward!",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Active it!",buttonsStyling:!0,customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-danger ml-1"}}).then(o=>{o.isConfirmed&&(this.purchaseService.MaterialIsActive(l,"").subscribe(p=>{this.delRes=p,this.delRes.success&&this.ngOnInit()}),m().fire({icon:"success",title:"Active!",text:this.delRes.msg}))})}ngOnInit(){if(localStorage.getItem("financialYear")){let l=localStorage.getItem("financialYear");console.warn(JSON.parse(l));let o=JSON.parse(l);this.getPurchaseMaterial(o)}this.cs.userDetails$.subscribe(l=>{this.isAdmin="admin"==l.role}),this.cs.userDetails$.subscribe(l=>{this.isAdmin="admin"==l.role}),this.cs.userDetails$.subscribe(l=>{this.userDetails=l,this.userDetails?.permission?.map(p=>{"master"===p.content_type.app_label&&"materialinward"===p.content_type.model&&"add_materialinward"==p.codename?this.isAdd=p.codename:"master"===p.content_type.app_label&&"materialinward"===p.content_type.model&&"change_materialinward"==p.codename?this.isEdit=p.codename:"master"===p.content_type.app_label&&"materialinward"===p.content_type.model&&"delete_materialinward"==p.codename&&(this.isDelete=p.codename)})}),this.getBranch();const r=localStorage.getItem("financialYear");this.purchasematerialDateValidation(r),this.poDateValidation(r)}getPurchaseMaterial(r){console.log(r);const l=JSON.stringify(this.selectData);console.log(l),console.log(l?.length),this.purchaseService.getMaterialFY(r,this.selectData).subscribe(o=>{this.tableData=o,this.loader=!1,this.selectedRows=new Array(this.tableData.length).fill(!1),this.filteredData=this.tableData.slice(),this.filterData()})}selectAlll(){this.selectedRows.fill(this.allSelected)}selectAll(r){this.tableData.forEach(r?l=>{l.isSelected=!1}:l=>{l.isSelected=!0})}deleteId(r){this.purchaseService.deleteMaterial(r).subscribe(l=>{this.delRes=l})}search(){if(""===this.titlee)this.ngOnInit();else{const r=this.titlee.toLocaleLowerCase();this.filteredData=this.filteredData.filter(l=>l?.party?.name.toLocaleLowerCase().includes(r))}}purchasematerialDateValidation(r){const l=this.materialDate,{formattedMinDate:o,formattedMaxDate:p}=this.commonService.setMinMaxDates(l,r);this.minDate=o,this.maxDate=p}poDateValidation(r){const l=this.poDate,{formattedMinDate:o,formattedMaxDate:p}=this.commonService.setMinMaxDates(l,r);this.dueMinDate=o,this.dueMaxDate=p}sort(r){this.key=r,this.reverse=!this.reverse}formatDate(r){return this.datepipe.transform(r,"yyyy-MM-dd")||""}generatePDF(){const r=new g.default;r.setFontSize(15),r.setTextColor(33,43,54),r.text("Material Inward",10,10),e()(r,{html:"#mytable",theme:"grid",headStyles:{fillColor:[255,159,67]},columns:[{header:"Sr No."},{header:"Supplier Name "},{header:"Purchase Order"},{header:"PO Date"},{header:"Material Inward Date"},{header:"Material Inward No"},{header:"Shipping Note"},{header:"Recieved By"},{header:"Status"},{header:"Is Active"}]}),r.save("materialInward.pdf")}generatePDFAgain(){const r=new g.default;r.setFontSize(12),r.setTextColor(33,43,54),r.text("Material Inward List",82,10),r.text("",10,15),e()(r,{head:[["#","Supplier Name ","Purchase Order","PO Date","Material Inward Date","Material Inward No","Shipping Note","Recieved By","Status"]],body:this.tableData.map((o,p)=>[p+1,o.party?.name,o.purchase_order?.order_no,this.formatDate(o.po_date),this.formatDate(o.material_inward_date),o.material_inward_no,o.shipping_note,o.recieved_by,o.status]),theme:"grid",headStyles:{fillColor:[255,159,67]},startY:15}),r.save("Material Inward.pdf")}getVisibleDataFromTable(){const r=[],l=document.getElementById("mytable"),o=l.querySelector("thead tr"),p=l.querySelectorAll("tbody tr"),f=[];return o.querySelectorAll("th").forEach(_=>{const M=_.textContent.trim();"Is Active"!==M&&"Action"!==M&&f.push(M)}),r.push(f),p.forEach(_=>{const M=[];_.querySelectorAll("td").forEach(A=>{M.push(A.textContent.trim())}),r.push(M)}),r}exportToExcel(){const r=this.getVisibleDataFromTable(),l=a.P6.aoa_to_sheet(r),o=a.P6.book_new();a.P6.book_append_sheet(o,l,"Sheet1");const p=a.cW(o,{bookType:"xlsx",type:"array"}),f=new Blob([p],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,n.saveAs)(f,"materialInward.xlsx")}printTable(){const r=document.getElementById("mytable"),p=document.querySelector(".titl").outerHTML,f=r.cloneNode(!0),_=f.querySelector("th.thone:nth-child(11)");_&&_.remove();const M=f.querySelector("th.thone:last-child");M&&M.remove(),f.querySelectorAll("tr").forEach(x=>{const S=x.querySelector("td:nth-child(11)");S&&S.remove();const q=x.querySelector("td:last-child");q&&q.remove()});const lt=f.outerHTML,ot="<style>.spaced-title { margin-top: 80px; }</style>"+p.replace("titl","spaced-title")+lt,pt=document.body.innerHTML;window.addEventListener("afterprint",()=>{console.log("afterprint"),window.location.reload()}),document.body.innerHTML=ot,window.print(),document.body.innerHTML=pt}filterData(){let r=this.tableData.slice();if(this.materialDate.value){const l=new Date(this.materialDate.value).toISOString().split("T")[0];r=r.filter(o=>new Date(o?.material_inward_date).toISOString().split("T")[0]===l)}if(this.poDate.value){const l=new Date(this.poDate.value).toISOString().split("T")[0];r=r.filter(o=>new Date(o?.po_date).toISOString().split("T")[0]===l)}if(this.selectedPurchaseNo){const l=this.selectedPurchaseNo.toLowerCase();r=r.filter(o=>o?.recieved_by.toLowerCase().includes(l))}this.statusFilter&&(r=r.filter(l=>l?.status===this.statusFilter),console.log(this.statusFilter)),this.filteredData=r}clearFilters(){this.selectedPurchaseNo=null,this.materialDate.setValue(""),this.statusFilter=null,this.poDate.setValue(""),this.filterData()}changePg(r){console.log(r),-1==r&&(this.itemsPerPage=this.tableData.length)}getBranch(){this.dashboardservice.getBranch().subscribe(r=>{this.branchList=r,this.filteredBranchList=[...this.branchList]})}filterBranch(){this.filteredBranchList=""===this.searchBranch.trim()?[...this.branchList]:this.branchList.filter(r=>r.title.toLowerCase().includes(this.searchBranch.toLowerCase()))}SelectedBranch(r,l){if(l)console.log(r),this.selectData.push(r),console.log(this.selectData,"selected data"),this.searchVariant="",this.ngOnInit();else{const o=this.selectData.findIndex(p=>p==r);console.log(o),-1!==o&&this.selectData.splice(o,1),this.ngOnInit(),console.log(this.selectData)}}}return h.\u0275fac=function(r){return new(r||h)(t.Y36(i.x),t.Y36(w.J),t.Y36(d.uU),t.Y36(D.s),t.Y36($.R))},h.\u0275cmp=t.Xpm({type:h,selectors:[["app-material-inward"]],decls:118,vars:16,consts:[[1,"page-header"],[1,"page-title"],[1,"titl"],[1,"page-btn"],[1,"row"],[1,"col-lg-3","col-sm-6","col-12","d-flex"],["class","form-group w-100",4,"ngIf"],["routerLink","//purchase/addmaterial-Inward","class","btn btn-added",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"table-top"],[1,"search-set"],[1,"search-path"],["id","filter_search",1,"btn","btn-filter"],["src","assets/img/icons/filter.svg","alt","img"],["src","assets/img/icons/closes.svg","alt","img"],[1,"search-input"],[1,"btn","btn-searchset"],["src","assets/img/icons/search-white.svg","alt","img"],[1,"dataTables_filter"],["type","search","placeholder","Search Supplier",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"wordset"],["data-bs-toggle","tooltip","data-bs-placement","top","title","pdf",3,"click"],["src","assets/img/icons/pdf.svg","alt","img"],["data-bs-toggle","tooltip","data-bs-placement","top","title","excel",3,"click"],["src","assets/img/icons/excel.svg","alt","img"],["data-bs-toggle","tooltip","data-bs-placement","top","title","print",3,"click"],["src","assets/img/icons/printer.svg","alt","img"],["id","filter_inputs",1,"card","mb-0"],[1,"card-body","pb-0"],[1,"col-lg-12","col-sm-12"],[1,"col-lg-3","col-sm-6","col-12"],[1,"form-group"],["type","date",3,"formControl","change"],["type","search","placeholder","search Recieved By",1,"search",3,"ngModel","ngModelChange"],[1,"form-select",3,"ngModel","ngModelChange","change"],["value","","selected","","disabled",""],["value","Draft"],["value","Inprogress"],["value","Completed"],[1,"form-group","d-flex","justify-content-end"],[1,"btn","btn-filters","p-4",2,"width","10%",3,"click"],[1,"table-responsive"],["id","mytable",1,"table","datanew"],[1,"thone",3,"click"],[1,"checkboxs","mb-0","d-inline",3,"click"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"checkmarks"],[1,"fa","fa-sort"],[4,"ngIf"],[1,"progressbar"],["mode","indeterminate","class","progressbar",4,"ngIf"],["class","row",4,"ngIf"],[1,"form-group","w-100"],[1,"dropdown"],["type","button","type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","button"],[1,"dropdown-menu",2,"width","100%","max-height","300px","overflow-y","auto"],["type","text","placeholder","search category",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["class","dropdown-item",4,"ngFor","ngForOf"],[1,"d-flex"],[1,"dropdown-item"],["type","checkbox",2,"margin-right","5px",3,"value","checked","id","change"],["categoryValue",""],[2,"margin-bottom","0",3,"for","click"],["routerLink","//purchase/addmaterial-Inward",1,"btn","btn-added"],["src","assets/img/icons/plus.svg","alt","img"],[4,"ngFor","ngForOf"],[1,"checkboxs"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"productimgname"],[2,"line-height","3",3,"routerLink"],[1,"badges",3,"ngClass"],[1,"me-1",3,"routerLink"],["src","assets/img/icons/eye.svg","alt","img"],["class","me-1",3,"routerLink",4,"ngIf"],["class","me-1 confirm-text",3,"click",4,"ngIf"],["src","assets/img/icons/edit.svg","alt","img"],[1,"me-1","confirm-text",3,"click"],["src","assets/img/icons/delete.svg","alt","img"],["colspan","10"],[1,"center-textt"],["mode","indeterminate",1,"progressbar"],[1,"col-lg-4","col-sm-4","col-12","mt-2"],[1,"entries"],[1,"pagination",3,"ngModel","ngModelChange","change"],["v",""],["value","10"],["value","20"],["value","30"],["value","50"],["value","100"],["value","-1"],[1,"col-lg-8","col-sm-8","col-12","mt-2"],[1,"f-right"],[3,"pageChange"],[1,"entries","f-right"]],template:function(r,l){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),t._uU(3,"MATERIAL INWARD LIST"),t.qZA(),t.TgZ(4,"h6"),t._uU(5,"Manage your Material Inward"),t.qZA()(),t.TgZ(6,"div",3)(7,"div",4)(8,"div",5),t.YNc(9,L,11,5,"div",6),t.qZA()(),t.YNc(10,J,3,0,"a",7),t.qZA()(),t.TgZ(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"a",13),t._UZ(17,"img",14),t.TgZ(18,"span"),t._UZ(19,"img",15),t.qZA()()(),t.TgZ(20,"div",16)(21,"a",17),t._UZ(22,"img",18),t.qZA(),t.TgZ(23,"div",19)(24,"label")(25,"input",20),t.NdJ("ngModelChange",function(p){return l.titlee=p})("ngModelChange",function(){return l.search()}),t.qZA()()()()(),t.TgZ(26,"div",21)(27,"div",21)(28,"ul")(29,"li")(30,"a",22),t.NdJ("click",function(){return l.generatePDFAgain()}),t._UZ(31,"img",23),t.qZA()(),t.TgZ(32,"li")(33,"a",24),t.NdJ("click",function(){return l.exportToExcel()}),t._UZ(34,"img",25),t.qZA()(),t.TgZ(35,"li")(36,"a",26),t.NdJ("click",function(){return l.printTable()}),t._UZ(37,"img",27),t.qZA()()()()()(),t.TgZ(38,"div",28)(39,"div",29)(40,"div",4)(41,"div",30)(42,"div",4)(43,"div",31)(44,"div",32)(45,"label"),t._uU(46,"Material Inward Date"),t.qZA(),t.TgZ(47,"input",33),t.NdJ("change",function(){return l.filterData()}),t.qZA()()(),t.TgZ(48,"div",31)(49,"div",32)(50,"label"),t._uU(51,"PO Date"),t.qZA(),t.TgZ(52,"input",33),t.NdJ("change",function(){return l.filterData()}),t.qZA()()(),t.TgZ(53,"div",31)(54,"div",32)(55,"label"),t._uU(56,"Recieved By"),t.qZA(),t.TgZ(57,"input",34),t.NdJ("ngModelChange",function(p){return l.selectedPurchaseNo=p})("ngModelChange",function(){return l.filterData()}),t.qZA()()(),t.TgZ(58,"div",31)(59,"div",32)(60,"label"),t._uU(61,"Select Status"),t.qZA(),t.TgZ(62,"select",35),t.NdJ("ngModelChange",function(p){return l.statusFilter=p})("change",function(){return l.filterData()}),t.TgZ(63,"option",36),t._uU(64,"Select Status"),t.qZA(),t.TgZ(65,"option",37),t._uU(66,"Draft"),t.qZA(),t.TgZ(67,"option",38),t._uU(68,"Inprogress"),t.qZA(),t.TgZ(69,"option",39),t._uU(70,"Completed"),t.qZA()()()()(),t.TgZ(71,"div",40)(72,"a",41),t.NdJ("click",function(){return l.clearFilters()}),t._uU(73,"Clear Filter"),t.qZA()()()()()(),t.TgZ(74,"div",42)(75,"table",43)(76,"thead")(77,"tr")(78,"th",44),t.NdJ("click",function(){return l.sort("id")}),t.TgZ(79,"label",45),t.NdJ("click",function(){return l.selectAll(l.initChecked)}),t.TgZ(80,"input",46),t.NdJ("ngModelChange",function(p){return l.allSelected=p})("change",function(){return l.selectAlll()}),t.qZA(),t._UZ(81,"span",47),t.qZA(),t._UZ(82,"i",48),t.qZA(),t.TgZ(83,"th",44),t.NdJ("click",function(){return l.sort("id")}),t._uU(84,"Sr.No."),t._UZ(85,"i",48),t.qZA(),t.TgZ(86,"th",44),t.NdJ("click",function(){return l.sort("id")}),t._uU(87,"Material Inward No"),t._UZ(88,"i",48),t.qZA(),t.TgZ(89,"th",44),t.NdJ("click",function(){return l.sort("id")}),t._uU(90,"Supplier Name "),t._UZ(91,"i",48),t.qZA(),t.TgZ(92,"th",44),t.NdJ("click",function(){return l.sort("id")}),t._uU(93,"Purchase Order "),t._UZ(94,"i",48),t.qZA(),t.TgZ(95,"th",44),t.NdJ("click",function(){return l.sort("id")}),t._uU(96,"PO Date"),t._UZ(97,"i",48),t.qZA(),t.TgZ(98,"th",44),t.NdJ("click",function(){return l.sort("id")}),t._uU(99,"Material Inward Date"),t._UZ(100,"i",48),t.qZA(),t.TgZ(101,"th",44),t.NdJ("click",function(){return l.sort("id")}),t._uU(102,"Shipping Note "),t._UZ(103,"i",48),t.qZA(),t.TgZ(104,"th",44),t.NdJ("click",function(){return l.sort("id")}),t._uU(105,"Recieved By"),t._UZ(106,"i",48),t.qZA(),t.TgZ(107,"th",44),t.NdJ("click",function(){return l.sort("id")}),t._uU(108,"Status "),t._UZ(109,"i",48),t.qZA(),t.TgZ(110,"th",44),t.NdJ("click",function(){return l.sort("id")}),t._uU(111,"Action "),t._UZ(112,"i",48),t.qZA()()(),t.YNc(113,Y,4,11,"tbody",49),t.YNc(114,G,5,0,"tbody",49),t.qZA(),t.TgZ(115,"div",50),t.YNc(116,Q,1,0,"mat-progress-bar",51),t.qZA(),t.YNc(117,H,23,4,"div",52),t.qZA()()()),2&r&&(t.xp6(9),t.Q6J("ngIf",l.isAdmin),t.xp6(1),t.Q6J("ngIf",l.isAdd),t.xp6(15),t.Q6J("ngModel",l.titlee),t.xp6(22),t.Q6J("formControl",l.materialDate),t.uIk("min",l.minDate)("max",l.maxDate),t.xp6(5),t.Q6J("formControl",l.poDate),t.uIk("min",l.dueMinDate)("max",l.dueMaxDate),t.xp6(5),t.Q6J("ngModel",l.selectedPurchaseNo),t.xp6(5),t.Q6J("ngModel",l.statusFilter),t.xp6(18),t.Q6J("ngModel",l.allSelected),t.xp6(33),t.Q6J("ngIf",(null==l.filteredData?null:l.filteredData.length)>=0),t.xp6(1),t.Q6J("ngIf",0===(null==l.filteredData?null:l.filteredData.length)&&!l.loader),t.xp6(2),t.Q6J("ngIf",l.loader),t.xp6(1),t.Q6J("ngIf",!l.loader))},dependencies:[d.mk,d.sg,d.O5,v.yS,s.YN,s.Kr,s.Fj,s.Wl,s.EJ,s.JJ,s.On,U.LS,I.pW,s.oH,d.uU,U._s,C.T],styles:["input[type=date][_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;padding:10px 15px;border-radius:5px}.button[_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:421%;font-size:14px;font-weight:500;color:#637381;display:flex;padding:10px 15px;border-radius:5px;justify-content:space-between;align-items:center;background:white}"]}),h})();var W=c(30597);const P=JSON.parse(localStorage.getItem("auth"));let V;P&&P.map(u=>{"master"===u.content_type.app_label&&"materialinward"===u.content_type.model&&"view_materialinward"==u.codename&&(V=u.codename)});const z=[{path:"",component:K,canActivate:[W.l],data:{allowedRoles:["view_materialinward"]}}];let X=(()=>{class h{}return h.\u0275fac=function(r){return new(r||h)},h.\u0275mod=t.oAB({type:h}),h.\u0275inj=t.cJS({imports:[v.Bz.forChild(z),v.Bz]}),h})();var tt=c(87078),et=c(96134),it=c(43189),at=c(90455),rt=c(30906),nt=c(8468);let st=(()=>{class h{}return h.\u0275fac=function(r){return new(r||h)},h.\u0275mod=t.oAB({type:h}),h.\u0275inj=t.cJS({providers:[d.uU],imports:[d.ez,X,tt.T,s.u5,rt.ZU,et.ii.forRoot(),it.h,U.JX,C.l,at.rP,I.Cv,nt.I]}),h})()},30597:(Z,y,c)=>{c.d(y,{l:()=>T});var d=c(94650),v=c(4392),b=c(97185),m=c(42917),g=c(80927);let T=(()=>{class e{constructor(n,s,t,i,w){this.router=n,this.Arout=s,this.toastr=t,this.profileService=i,this.coreService=w}canActivate(n,s){const t=JSON.parse(localStorage.getItem("auth"));if(this.profileService.userDetails$.subscribe(i=>{this.userDetails=i,this.permissions=this.userDetails?.permission}),t){const i=n.data.allowedRoles;console.log(i,"allowedRoles");const w=t.some(D=>i.includes(D.codename));if(console.log(w),this.coreService.getProfile().subscribe(D=>{this.userDetails=D,this.profileService.setUserDetails(this.userDetails);const $=D?.permission,U=this.profileService.getUserDetails();(!U||U.length!==$.length)&&(this.profileService.setUserPermission($),window.location.reload())}),w)return!0}return this.toastr.error("User have Not Permission to Access This page"),this.router.navigate(["/dashboard"]),!1}}return e.\u0275fac=function(n){return new(n||e)(d.LFG(v.F0),d.LFG(v.gz),d.LFG(b._W),d.LFG(m.J),d.LFG(g.p))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);