"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[2113],{2113:(E,u,o)=>{o.r(u),o.d(u,{ForcastingDashboardModule:()=>q});var m=o(36895),f=o(89299),r=o(24006),t=o(94650),b=o(60843),v=o(97185),g=o(99602),c=o(59549),y=o(6205);const O=["chart"];function _(a,l){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA()()),2&a){const n=l.$implicit;t.xp6(2),t.Oqu(null==n?null:n.employee_name),t.xp6(2),t.Oqu(null==n?null:n.assigned_target),t.xp6(2),t.Oqu(null==n?null:n.achieved_target),t.xp6(2),t.Oqu(null==n?null:n.variation_amount),t.xp6(2),t.Oqu(null==n?null:n["variation_%"]),t.xp6(2),t.Oqu(null==n?null:n["%_achieved"])}}function M(a,l){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA()()),2&a){const n=l.$implicit;t.xp6(2),t.Oqu(null==n?null:n.name),t.xp6(2),t.Oqu(null==n?null:n.no_of_invoices),t.xp6(2),t.Oqu(null==n?null:n.no_of_sale_return),t.xp6(2),t.Oqu(null==n?null:n.invoices_value),t.xp6(2),t.Oqu(null==n?null:n.sale_return_value),t.xp6(2),t.Oqu(null==n?null:n.sale_value)}}const Z=[{path:"",component:(()=>{class a{constructor(n,e,i){this.dashboardService=n,this.datePipe=e,this.toastr=i,this.departMentList=[],this.employeeList=[],this.achieveList=[],this.top10List=[]}ngOnInit(){const n=new Date,d=(n.getMonth(),n.getFullYear(),new Date(n));d.setDate(n.getDate()-29);const s=this.formatDate(d),p=this.formatDate(n);this.departmentForm=new r.cw({start:new r.NI(s),end:new r.NI(p)}),this.departmentStartDate=this.departmentForm.value?.start,this.departmentEndDate=this.departmentForm.value?.end,this.employeeForm=new r.cw({start:new r.NI(s),end:new r.NI(p)}),this.employeeStartDate=this.employeeForm.value?.start,this.employeeEndDate=this.employeeForm.value?.end,this.getEmployeeTarget(),this.getDepartmentWiseTarget(),this.targetEmployee=new r.cw({start:new r.NI(s),end:new r.NI(p)}),this.achieveStartDate=this.targetEmployee.value?.start,this.achieveEndDate=this.targetEmployee.value?.end,this.getAchieveTarget(),this.topEmployee=new r.cw({start:new r.NI(s),end:new r.NI(p)}),this.top10StartDate=this.topEmployee.value?.start,this.top10EndDate=this.topEmployee.value?.end,this.getTop10Target()}getSelectedDepartmentSalesDates(){console.log(this.departmentForm.value);const n=this.datePipe.transform(this.departmentForm.value.start,"yyyy-MM-dd"),e=this.datePipe.transform(this.departmentForm.value.end,"yyyy-MM-dd");console.log(n),console.log(e),this.departmentStartDate=n,this.departmentEndDate=e,this.getDepartmentWiseTarget()}getDepartmentWiseTarget(){this.dashboardService.getDepartmentWiseTarget(this.departmentStartDate,this.departmentEndDate).subscribe(n=>{this.departMentList=n?.departments_wise_targets,this.departmentChartOptions={series:[{name:"Forcasted",data:this.departMentList.map(e=>e.forcasted?.toFixed(2))},{name:"Achieved",data:this.departMentList.map(e=>e.achieved?.toFixed(2))}],chart:{type:"bar",height:350,stacked:!0,toolbar:{show:!0},zoom:{enabled:!0}},responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],plotOptions:{bar:{horizontal:!1}},xaxis:{type:"category",categories:this.departMentList.map(e=>e.department)},legend:{position:"top",offsetY:0},fill:{opacity:1},dataLabels:{enabled:!1,style:{colors:["#333"]},offsetX:30}}})}getSelectedEmployeeDates(){console.log(this.employeeForm.value);const n=this.datePipe.transform(this.employeeForm.value.start,"yyyy-MM-dd"),e=this.datePipe.transform(this.employeeForm.value.end,"yyyy-MM-dd");console.log(n),console.log(e),this.employeeStartDate=n,this.employeeEndDate=e,this.getEmployeeTarget()}getEmployeeTarget(){this.dashboardService.getEmployeeTargetGraph(this.employeeStartDate,this.employeeEndDate).subscribe(n=>{this.employeeList=n?.data,this.employeeChartOptions={series:[{name:"Assigned Target",data:this.employeeList.map(e=>e.assigned_target?.toFixed(2))},{name:"Achieved Target",data:this.employeeList.map(e=>e.achieved_target?.toFixed(2))}],chart:{type:"bar",height:350,stacked:!0,toolbar:{show:!0},zoom:{enabled:!0}},responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],plotOptions:{bar:{horizontal:!1}},xaxis:{type:"category",categories:this.employeeList.map(e=>e.employee_name)},legend:{position:"top",offsetY:0},fill:{opacity:1},dataLabels:{enabled:!1,style:{colors:["#333"]},offsetX:30}}})}getSelectedAchieveDates(){console.log(this.targetEmployee.value);const n=this.datePipe.transform(this.targetEmployee.value.start,"yyyy-MM-dd"),e=this.datePipe.transform(this.targetEmployee.value.end,"yyyy-MM-dd");console.log(n),console.log(e),this.achieveStartDate=n,this.achieveEndDate=e,this.getAchieveTarget()}getAchieveTarget(){this.dashboardService.getEployeeTargetAchieved(this.achieveStartDate,this.achieveEndDate).subscribe(n=>{this.achieveList=n?.data},n=>{this.toastr.error(n.message)})}getSelectedTop10Dates(){console.log(this.topEmployee.value);const n=this.datePipe.transform(this.topEmployee.value.start,"yyyy-MM-dd"),e=this.datePipe.transform(this.topEmployee.value.end,"yyyy-MM-dd");console.log(n),console.log(e),this.top10StartDate=n,this.top10EndDate=e,this.getTop10Target()}getTop10Target(){this.dashboardService.getEmployeeTop10(this.top10StartDate,this.top10EndDate).subscribe(n=>{this.top10List=n?.data},n=>{this.toastr.error(n.message)})}formatDate(n){return this.datePipe.transform(n,"yyyy-MM-dd")||""}formatDateMonth(n){const[e,i,d]=n.split("/"),p=new Date(`${d}-${i}-${e}`);return this.datePipe.transform(p,"dd MMM")||""}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(b.s),t.Y36(m.uU),t.Y36(v._W))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-forcasting-dashboard"]],viewQuery:function(n,e){if(1&n&&t.Gf(O,5),2&n){let i;t.iGM(i=t.CRH())&&(e.chart=i.first)}},decls:110,vars:32,consts:[[1,"row","mx-2"],[1,"col-lg-6","col-sm-6","col-12","d-flex","align-items-center"],[2,"font-size","30px","font-weight","600"],[1,"col-lg-2","col-sm-2","col-12"],[1,"col-lg-4","col-sm-4","col-12"],[1,"row"],[1,"col-lg-6","col-sm-12","col-12","d-flex"],[1,"card","flex-fill"],[1,"card-header","pb-0","d-flex","justify-content-between","align-items-center"],[1,"card-title","mb-0"],[2,"width","40%","padding-right","3%"],[3,"formGroup","rangePicker"],["matStartDate","","placeholder","Start date","formControlName","start",1,"mat-input",3,"dateChange"],[1,"mat-input-placeholder-wrapper"],[1,"mat-input-placeholder"],["matEndDate","","placeholder","End date","formControlName","end",1,"mat-input",3,"dateChange"],["matSuffix","",2,"font-size","x-large",3,"for"],["dailySalesPicker",""],[1,"card-body"],[3,"series","chart","dataLabels","plotOptions","responsive","xaxis","legend","fill"],["employeeTargetPicker",""],[3,"series","chart","dataLabels","plotOptions","yaxis","legend","fill","stroke","tooltip","xaxis"],[2,"width","43%","padding-right","3%"],["recievablePicker",""],[1,"card-body","table-container"],[1,"table-responsive","dataview"],[1,"table","datatable"],[4,"ngFor","ngForOf"],["payavablePicker",""]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t._uU(3,"Forcasting & Salesman"),t.qZA()(),t._UZ(4,"div",3)(5,"div",4),t.qZA(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"h5",9),t._uU(11,"Department Wise Target"),t.qZA(),t.TgZ(12,"mat-form-field",10)(13,"mat-date-range-input",11)(14,"input",12),t.NdJ("dateChange",function(){return e.getSelectedDepartmentSalesDates()}),t.qZA(),t.TgZ(15,"span",13)(16,"span",14),t._uU(17,"to"),t.qZA()(),t.TgZ(18,"input",15),t.NdJ("dateChange",function(){return e.getSelectedDepartmentSalesDates()}),t.qZA()(),t._UZ(19,"mat-datepicker-toggle",16)(20,"mat-date-range-picker",null,17),t.qZA()(),t.TgZ(22,"div",18),t._UZ(23,"apx-chart",19),t.qZA()()(),t.TgZ(24,"div",6)(25,"div",7)(26,"div",8)(27,"h5",9),t._uU(28,"Employee Target"),t.qZA(),t.TgZ(29,"mat-form-field",10)(30,"mat-date-range-input",11)(31,"input",12),t.NdJ("dateChange",function(){return e.getSelectedEmployeeDates()}),t.qZA(),t.TgZ(32,"span",13)(33,"span",14),t._uU(34,"to"),t.qZA()(),t.TgZ(35,"input",15),t.NdJ("dateChange",function(){return e.getSelectedEmployeeDates()}),t.qZA()(),t._UZ(36,"mat-datepicker-toggle",16)(37,"mat-date-range-picker",null,20),t.qZA()(),t.TgZ(39,"div",18),t._UZ(40,"apx-chart",21),t.qZA()()()(),t.TgZ(41,"div",5)(42,"div",6)(43,"div",7)(44,"div",8)(45,"h5",9),t._uU(46,"Employee Targets Achievements"),t.qZA(),t.TgZ(47,"mat-form-field",22)(48,"mat-date-range-input",11)(49,"input",12),t.NdJ("dateChange",function(){return e.getSelectedAchieveDates()}),t.qZA(),t.TgZ(50,"span",13)(51,"span",14),t._uU(52,"to"),t.qZA()(),t.TgZ(53,"input",15),t.NdJ("dateChange",function(){return e.getSelectedAchieveDates()}),t.qZA()(),t._UZ(54,"mat-datepicker-toggle",16)(55,"mat-date-range-picker",null,23),t.qZA()(),t.TgZ(57,"div",24)(58,"div",25)(59,"table",26)(60,"thead")(61,"tr")(62,"th"),t._uU(63,"Employee Name"),t.qZA(),t.TgZ(64,"th"),t._uU(65,"Assigned Target "),t.qZA(),t.TgZ(66,"th"),t._uU(67,"Achieved Target"),t.qZA(),t.TgZ(68,"th"),t._uU(69,"Variation Amount"),t.qZA(),t.TgZ(70,"th"),t._uU(71,"Variation %"),t.qZA(),t.TgZ(72,"th"),t._uU(73,"% Achieved "),t.qZA()()(),t.TgZ(74,"tbody"),t.YNc(75,_,13,6,"tr",27),t.qZA()()()()()(),t.TgZ(76,"div",6)(77,"div",7)(78,"div",8)(79,"h5",9),t._uU(80,"Top 10 Employee"),t.qZA(),t.TgZ(81,"mat-form-field",22)(82,"mat-date-range-input",11)(83,"input",12),t.NdJ("dateChange",function(){return e.getSelectedTop10Dates()}),t.qZA(),t.TgZ(84,"span",13)(85,"span",14),t._uU(86,"to"),t.qZA()(),t.TgZ(87,"input",15),t.NdJ("dateChange",function(){return e.getSelectedTop10Dates()}),t.qZA()(),t._UZ(88,"mat-datepicker-toggle",16)(89,"mat-date-range-picker",null,28),t.qZA()(),t.TgZ(91,"div",24)(92,"div",25)(93,"table",26)(94,"thead")(95,"tr")(96,"th"),t._uU(97,"Name"),t.qZA(),t.TgZ(98,"th"),t._uU(99,"No.Of Invoices "),t.qZA(),t.TgZ(100,"th"),t._uU(101,"No.Of Sale Return"),t.qZA(),t.TgZ(102,"th"),t._uU(103,"Invoices Value"),t.qZA(),t.TgZ(104,"th"),t._uU(105,"Sale Return Value"),t.qZA(),t.TgZ(106,"th"),t._uU(107,"Sale Value"),t.qZA()()(),t.TgZ(108,"tbody"),t.YNc(109,M,13,6,"tr",27),t.qZA()()()()()()()),2&n){const i=t.MAs(21),d=t.MAs(38),s=t.MAs(56),p=t.MAs(90);t.xp6(13),t.Q6J("formGroup",e.departmentForm)("rangePicker",i),t.xp6(6),t.Q6J("for",i),t.xp6(4),t.Q6J("series",null==e.departmentChartOptions?null:e.departmentChartOptions.series)("chart",null==e.departmentChartOptions?null:e.departmentChartOptions.chart)("dataLabels",null==e.departmentChartOptions?null:e.departmentChartOptions.dataLabels)("plotOptions",null==e.departmentChartOptions?null:e.departmentChartOptions.plotOptions)("responsive",null==e.departmentChartOptions?null:e.departmentChartOptions.responsive)("xaxis",null==e.departmentChartOptions?null:e.departmentChartOptions.xaxis)("legend",null==e.departmentChartOptions?null:e.departmentChartOptions.legend)("fill",null==e.departmentChartOptions?null:e.departmentChartOptions.fill),t.xp6(7),t.Q6J("formGroup",e.employeeForm)("rangePicker",d),t.xp6(6),t.Q6J("for",d),t.xp6(4),t.Q6J("series",null==e.employeeChartOptions?null:e.employeeChartOptions.series)("chart",null==e.employeeChartOptions?null:e.employeeChartOptions.chart)("dataLabels",null==e.employeeChartOptions?null:e.employeeChartOptions.dataLabels)("plotOptions",null==e.employeeChartOptions?null:e.employeeChartOptions.plotOptions)("yaxis",null==e.employeeChartOptions?null:e.employeeChartOptions.yaxis)("legend",null==e.employeeChartOptions?null:e.employeeChartOptions.legend)("fill",null==e.employeeChartOptions?null:e.employeeChartOptions.fill)("stroke",null==e.employeeChartOptions?null:e.employeeChartOptions.stroke)("tooltip",null==e.employeeChartOptions?null:e.employeeChartOptions.tooltip)("xaxis",null==e.employeeChartOptions?null:e.employeeChartOptions.xaxis),t.xp6(8),t.Q6J("formGroup",e.targetEmployee)("rangePicker",s),t.xp6(6),t.Q6J("for",s),t.xp6(21),t.Q6J("ngForOf",e.achieveList),t.xp6(7),t.Q6J("formGroup",e.topEmployee)("rangePicker",p),t.xp6(6),t.Q6J("for",p),t.xp6(21),t.Q6J("ngForOf",e.top10List)}},dependencies:[m.sg,r.Fj,r.JJ,r.JL,r.sg,r.u,g.nW,g.wx,g.zY,g.By,g._g,c.KE,c.R9,y.x],styles:[".dash-imgs[_ngcontent-%COMP%]{height:42px;width:42px;background:#1881B0;border-radius:50%;color:#fff;display:flex;align-items:center;justify-content:center}.dash-imgs[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px}.dash-count[_ngcontent-%COMP%]{min-height:auto!important;padding:10px 15px!important;cursor:pointer}.dash-count[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}.text_18[_ngcontent-%COMP%]{font-size:18px}.blue_box[_ngcontent-%COMP%]{background-color:#1881b0;color:#fff;padding:0 15px;border-radius:5px;cursor:pointer}.accordion-button[_ngcontent-%COMP%]:not(.collapsed){color:#000;background-color:transparent;box-shadow:none}.right_body[_ngcontent-%COMP%]{padding:0}.accordion-item[_ngcontent-%COMP%]{background-color:transparent}.blue_list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #eee;cursor:pointer}.blue_list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#1881b0;color:#fff;transition:.3s}.blue_list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   .blue_box[_ngcontent-%COMP%]{background-color:#fff;color:#000}.example-form-field[_ngcontent-%COMP%]{margin:0 8px 5px 0}.mat-form-field[_ngcontent-%COMP%]{display:inline-block;position:relative;text-align:left}.mat-form-field[_ngcontent-%COMP%]{width:63%;padding-left:8%;padding-top:1%;font-size:inherit;font-weight:400;line-height:1.125;font-family:Roboto,Helvetica Neue,sans-serif;letter-spacing:normal}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:1.25em}.mat-form-field-wrapper[_ngcontent-%COMP%]{position:relative}.mat-form-field-flex[_ngcontent-%COMP%]{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-infix[_ngcontent-%COMP%]{padding:.5em 0;border-top:.84375em solid rgba(0,0,0,0)}.mat-form-field-infix[_ngcontent-%COMP%]{display:block;position:relative;flex:auto;min-width:0;width:180px}.mat-form-field-type-mat-date-range-input[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{width:200px}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:.4375em 0}.mat-form-field-label-wrapper[_ngcontent-%COMP%]{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}.mat-form-field-label-wrapper[_ngcontent-%COMP%]{top:-.84375em;padding-top:.84375em}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{height:1px}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{background-color:#0000006b}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-underline[_ngcontent-%COMP%]{bottom:1.25em}.mat-form-field-underline[_ngcontent-%COMP%]{position:absolute;width:100%;pointer-events:none;transform:scale3d(1,1.0001,1)}.mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-ripple[_ngcontent-%COMP%]{top:0;height:2px;overflow:hidden}.mat-form-field-ripple[_ngcontent-%COMP%]{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(.5);opacity:0;transition:background-color .3s cubic-bezier(.55,0,.55,.2)}.mat-form-field-ripple[_ngcontent-%COMP%]{background-color:#000000de}.mat-form-field-prefix[_ngcontent-%COMP%], .mat-form-field-suffix[_ngcontent-%COMP%]{font-size:x-large;white-space:nowrap;flex:none;position:relative}.barchart[_ngcontent-%COMP%]{height:350px}#chart[_ngcontent-%COMP%]{max-width:650px;margin:35px auto}.mat-select[_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;display:flex;padding:10px 15px;border-radius:5px;justify-content:space-between;align-items:center}.chartcontainer[_ngcontent-%COMP%]{width:500px;height:500px}.container[_ngcontent-%COMP%]{height:550px;box-shadow:2px 2px 4px 1px #d3d3d3}.chart[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:stretch;padding:20px}select[_ngcontent-%COMP%], .input[_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], input[type=datetime-local][_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;padding:10px 15px;border-radius:5px}.ng-invalid.ng-dirty.is-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.th[_ngcontent-%COMP%]{background:#EEF0F8;font-family:Poppins;font-style:normal;font-weight:500;font-size:18px;color:#3b3b3b;border-right:2px solid white;border-bottom:2px solid white;margin:0 auto;width:43%}.td[_ngcontent-%COMP%]{background-color:#f2f4f3;font-family:Poppins;font-style:normal;font-weight:400;font-size:16px;color:#3b3b3b;border-right:2px solid white;border-bottom:2px solid white;margin:0 auto;width:57%}.table-container[_ngcontent-%COMP%]{height:335px}.table-responsive[_ngcontent-%COMP%]{overflow:auto;-webkit-overflow-scrolling:touch}.dataview[_ngcontent-%COMP%]{height:100%}.card-header[_ngcontent-%COMP%]{padding-top:10px}"]}),a})()}];let T=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[f.Bz.forChild(Z),f.Bz]}),a})();var x=o(87078),C=o(86323),h=o(92642),P=o(3238),D=o(95113),A=o(64155),w=o(8468);const F={User:h.n5m,UserCheck:h.uS3,FileText:h.acj,File:h.$BE};let q=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[m.uU],imports:[m.ez,T,x.T,C.p.pick(F),w.I,g.FA,c.lN,P.XK,D.LD,A.vQ,y.X,C.p]}),a})()}}]);