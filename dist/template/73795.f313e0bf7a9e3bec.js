"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[73795],{25062:(M,P,n)=>{n.d(P,{y:()=>r});var d=n(92340),c=n(94650),u=n(80529);let r=(()=>{class m{constructor(t){this.http=t,this.apiUrl=`${d.N.api}`}UpdateDefaultAddress(t){return this.http.post(this.apiUrl+"/pv-api/make_default_address/",t)}GetUsedPoints(t){return this.http.get(`${this.apiUrl+"/pv-api/total_use_point/?user_id="}${t}`)}getSupplier(){return this.http.get(this.apiUrl+"/pv-api/supplier/")}getSupplierById(t){return this.http.get(`${this.apiUrl+"/pv-api/supplier/?id="}${t}`)}SupplierIsActive(t,e){return this.http.patch(`${this.apiUrl+"/pv-api/supplier/?id="}${t}`,e)}addSupplier(t){return this.http.post(this.apiUrl+"/pv-api/supplier/",t)}updateSupplier(t,e){return this.http.put(`${this.apiUrl+"/pv-api/supplier/?id="}${e}`,t)}deleteSupplier(t){return this.http.delete(`${this.apiUrl+"/pv-api/supplier/?id="}${t}`)}getVendor(){return this.http.get(this.apiUrl+"/pv-api/vendor/")}getVendorById(t){return this.http.get(`${this.apiUrl+"/pv-api/vendor/?id="}${t}`)}VendorIsActive(t,e){return this.http.patch(`${this.apiUrl+"/pv-api/vendor/?id="}${t}`,e)}addVendor(t){return this.http.post(this.apiUrl+"/pv-api/vendor/",t)}updateVendor(t,e){return this.http.put(`${this.apiUrl+"/pv-api/vendor/?id="}${e}`,t)}deleteVendor(t){return this.http.delete(`${this.apiUrl+"/pv-api/vendor/?id="}${t}`)}getPaymentTerms(){return this.http.get(this.apiUrl+"/pv-api/payment_terms/")}getPaymentTermsById(t){return this.http.get(`${this.apiUrl+"/pv-api/payment_terms/?id="}${t}`)}PaymentTermsIsActive(t,e){return this.http.patch(`${this.apiUrl+"/pv-api/payment_terms/?id="}${t}`,e)}addPaymentTerms(t){return this.http.post(this.apiUrl+"/pv-api/payment_terms/",t)}updatePaymentTerms(t,e){return this.http.put(`${this.apiUrl+"/pv-api/payment_terms/?id="}${e}`,t)}deletePaymentTerms(t){return this.http.delete(`${this.apiUrl+"/pv-api/payment_terms/?id="}${t}`)}getTypeOfGst(){return this.http.get(this.apiUrl+"/pv-api/types_of_gst/")}getTransport(){return this.http.get(this.apiUrl+"/pv-api/transport/")}getTransportById(t){return this.http.get(`${this.apiUrl+"/pv-api/transport/?id="}${t}`)}TransportIsActive(t,e){return this.http.patch(`${this.apiUrl+"/pv-api/transport/?id="}${t}`,e)}addTransport(t){return this.http.post(this.apiUrl+"/pv-api/transport/",t)}updateTransport(t,e){return this.http.put(`${this.apiUrl+"/pv-api/transport/?id="}${e}`,t)}deleteTransport(t){return this.http.delete(`${this.apiUrl+"/pv-api/transport/?id="}${t}`)}getEmployee(){return this.http.get(this.apiUrl+"/pv-api/employee/")}getEmployeeById(t){return this.http.get(`${this.apiUrl+"/pv-api/employee/?id="}${t}`)}EmployeeIsActive(t,e){return this.http.patch(`${this.apiUrl+"/pv-api/employee/?id="}${t}`,e)}addEmployee(t){return this.http.post(this.apiUrl+"/pv-api/employee/",t)}updateEmployee(t,e){return this.http.put(`${this.apiUrl+"/pv-api/employee/?id="}${e}`,t)}deleteEmployee(t){return this.http.delete(`${this.apiUrl+"/pv-api/employee/?id="}${t}`)}getPermission(){return this.http.get(this.apiUrl+"/pv-api/permissions/")}getCustomer(){return this.http.get(this.apiUrl+"/pv-api/customer/")}getCustomerById(t){return this.http.get(`${this.apiUrl+"/pv-api/customer/?id="}${t}`)}CustomerIsActive(t,e){return this.http.patch(`${this.apiUrl+"/pv-api/customer/?id="}${t}`,e)}addCustomer(t){return this.http.post(this.apiUrl+"/pv-api/customer/",t)}updateCustomer(t,e){return this.http.put(`${this.apiUrl+"/pv-api/customer/?id="}${e}`,t)}deleteCustomer(t){return this.http.delete(`${this.apiUrl+"/pv-api/customer/?id="}${t}`)}getUser(){return this.http.get(this.apiUrl+"/pv-api/user/")}getUserById(t){return this.http.get(`${this.apiUrl+"/pv-api/user/?id="}${t}`)}UserIsActive(t,e){return this.http.patch(`${this.apiUrl+"/pv-api/user/?id="}${t}`,e)}addUser(t){return this.http.post(this.apiUrl+"/pv-api/user/",t)}updateUser(t,e){return this.http.put(`${this.apiUrl+"/pv-api/user/?id="}${e}`,t)}deleteUser(t){return this.http.delete(`${this.apiUrl+"/pv-api/user/?id="}${t}`)}getPermissionGroup(){return this.http.get(this.apiUrl+"/pv-api/group/")}getPermissionGroupById(t){return this.http.get(`${this.apiUrl+"/pv-api/group/?id="}${t}`)}addPermissionGroup(t){return this.http.post(this.apiUrl+"/pv-api/group/",t)}updatePermissionGroup(t,e){return this.http.put(`${this.apiUrl+"/pv-api/group/?group_id="}${e}`,t)}deletePermissionGroup(t){return this.http.delete(`${this.apiUrl+"/pv-api/group/?group_id="}${t}`)}getDealer(){return this.http.get(this.apiUrl+"/pv-api/dealer/")}getDealerById(t){return this.http.get(`${this.apiUrl+"/pv-api/dealer/?id="}${t}`)}DealerIsActive(t,e){return this.http.patch(`${this.apiUrl+"/pv-api/dealer/?id="}${t}`,e)}addDealer(t){return this.http.post(this.apiUrl+"/pv-api/dealer/",t)}updateDealer(t,e){return this.http.put(`${this.apiUrl+"/pv-api/dealer/?id="}${e}`,t)}deleteDealer(t){return this.http.delete(`${this.apiUrl+"/pv-api/dealer/?id="}${t}`)}getBranch(){return this.http.get(this.apiUrl+"/pv-api/branch/")}productVariant(){return this.http.get(this.apiUrl+"/pv-api/product_variant/")}searchProduct(t){return this.http.get(this.apiUrl+"/pv-api/variant-search/?search="+t)}getTerms(){return this.http.get(this.apiUrl+"/pv-api/terms/")}getTermsById(t){return this.http.get(`${this.apiUrl+"/pv-api/terms/?id="}${t}`)}TermsIsActive(t,e){return this.http.patch(`${this.apiUrl+"/pv-api/terms/?id="}${t}`,e)}addTerms(t){return this.http.post(this.apiUrl+"/pv-api/terms/",t)}updateTerms(t,e){return this.http.put(`${this.apiUrl+"/pv-api/terms/?id="}${e}`,t)}deleteTerms(t){return this.http.delete(`${this.apiUrl+"/pv-api/terms/?id="}${t}`)}getVoucherType(){return this.http.get(this.apiUrl+"/pv-api/voucher-type/")}getDepartment(){return this.http.get(this.apiUrl+"/pv-api/department/")}getDepartmentById(t){return this.http.get(`${this.apiUrl+"/pv-api/department/?id="}${t}`)}DepartmentIsActive(t,e){return this.http.patch(`${this.apiUrl+"/pv-api/department/?id="}${t}`,e)}addDepartment(t){return this.http.post(this.apiUrl+"/pv-api/department/",t)}updateDepartment(t,e){return this.http.put(`${this.apiUrl+"/pv-api/department/?id="}${e}`,t)}deleteDepartment(t){return this.http.delete(`${this.apiUrl+"/pv-api/department/?id="}${t}`)}getCreditLimitByUserId(t){return this.http.get(`${this.apiUrl+"/pv-api/get_credit_limit/?user_by_credit_id="}${t}`)}}return m.\u0275fac=function(t){return new(t||m)(c.LFG(u.eN))},m.\u0275prov=c.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},73795:(M,P,n)=>{n.r(P),n.d(P,{UpdatePermissionGroupModule:()=>D});var d=n(36895),c=n(4392),u=n(24006),r=n(94650),m=n(25062),C=n(97185);function t(o,l){if(1&o){const i=r.EpF();r.TgZ(0,"div")(1,"div",28)(2,"input",32),r.NdJ("change",function(a){r.CHM(i);const h=r.oxw(3);return r.KtG(h.onCheckChange(a))}),r.qZA(),r.TgZ(3,"label",30),r._uU(4),r.qZA()()()}if(2&o){const i=l.$implicit,p=r.oxw(3);r.xp6(2),r.Q6J("id","permission_"+(null==i?null:i.id))("checked",i.selected)("value",i.id)("checked",p.permissions.includes(i.id)),r.xp6(1),r.Q6J("for","permission_"+(null==i?null:i.id)),r.xp6(1),r.Oqu(null==i?null:i.name)}}function e(o,l){if(1&o){const i=r.EpF();r.TgZ(0,"div",26)(1,"h4",27),r._uU(2),r.qZA(),r.TgZ(3,"div",28)(4,"input",29),r.NdJ("change",function(a){const v=r.CHM(i).$implicit,_=r.oxw().index,$=r.oxw();return r.KtG($.selectAllPermissions(v.permissions,_,v.model_name,a))}),r.qZA(),r.TgZ(5,"label",30),r._uU(6,"Select all"),r.qZA()(),r.YNc(7,t,5,6,"div",31),r.qZA()}if(2&o){const i=l.$implicit,p=r.oxw().index;r.xp6(2),r.Oqu(null==i?null:i.model_name),r.xp6(2),r.Q6J("id","selectAll_"+p+"_"+i.model_name),r.xp6(1),r.Q6J("for","selectAll_"+p+"_"+i.model_name),r.xp6(2),r.Q6J("ngForOf",null==i?null:i.permissions)}}function s(o,l){if(1&o&&(r.TgZ(0,"div",18)(1,"div",19)(2,"div",20)(3,"h2",21)(4,"button",22),r._uU(5),r.ALo(6,"titlecase"),r.qZA()(),r.TgZ(7,"div",23)(8,"div",24),r.YNc(9,e,8,4,"div",25),r.qZA()()()()()),2&o){const i=l.$implicit,p=l.index;r.xp6(4),r.uIk("data-bs-target","#collapse"+p)("aria-expanded",!1)("aria-controls","collapse"+p)("id","heading"+p),r.xp6(1),r.Oqu(r.lcZ(6,8,i.content_type.app_label)),r.xp6(2),r.Q6J("id","collapse"+p),r.uIk("aria-labelledby","heading"+p),r.xp6(2),r.Q6J("ngForOf",null==i?null:i.model)}}function A(o,l){1&o&&(r.TgZ(0,"button",33),r._uU(1,"Submit"),r.qZA())}function y(o,l){1&o&&(r.TgZ(0,"button",34),r._UZ(1,"span",35),r._uU(2,"\xa0 Submit"),r.qZA())}let U=(()=>{class o{constructor(i,p,a,h,v,_){this.contactService=i,this.fb=p,this.toastr=a,this.Arout=h,this.router=v,this.location=_,this.permissions=[],this.selectedSubcat=0,this.loaders=!1}ngOnInit(){this.id=this.Arout.snapshot.paramMap.get("id"),this.permissionForm=this.fb.group({group_name:new u.NI(""),permissions:new u.Oe([])}),this.contactService.getPermissionGroupById(this.id).subscribe(i=>{this.gName=i.Group,this.permissionForm.patchValue({group_name:i.Group}),this.permissions=[],i.data.forEach(p=>{p.model.forEach(a=>{a.permissions.forEach(h=>{this.permissions.push(h.id)})})})}),this.getPermissionGroup()}selectAllPermissions(i,p,a,h){const v=h.target.checked,_=this.permissionForm.get("permissions");for(let $ of i)if($.selected=v,v)this.isPermissionSelected($.id)||(_.push(new u.NI($.id)),this.selectedSubcat++);else if(this.isPermissionSelected($.id)){const T=_.controls.findIndex(G=>G.value===$.id);-1!==T&&(_.removeAt(T),this.selectedSubcat--)}}isPermissionSelected(i){return this.permissionForm.get("permissions").controls.some(a=>a.value===i)}getPermissionGroup(){this.contactService.getPermission().subscribe(i=>{this.groupList=i?.data,this.groupList.forEach(p=>{let a=[];a=p?.model,a.forEach(h=>{h.permissions.map(v=>{this.permissions.includes(v.id)&&this.permissionForm.get("permissions").push(new u.NI(v.id))})})})})}onCheckChange(i){const p=this.permissionForm.get("permissions");if(i.target.checked)p.push(new u.NI(parseInt(i.target.value))),this.selectedSubcat++;else{let a=0;p.controls.forEach(h=>{if(h.value==i.target.value)return p.removeAt(a),void this.selectedSubcat--;a++})}}submit(){if(this.permissionForm.valid){this.loaders=!0;var i=new FormData;const p=this.permissionForm.get("permissions")?.value.filter(a=>null!==a);i.append("permissions",JSON.stringify(p)),this.contactService.updatePermissionGroup(i,this.id).subscribe(a=>{this.loaders=!1,this.addRes=a,"Group updated successfully"==this.addRes.msg&&(this.toastr.success(this.addRes.msg),this.loaders=!1,this.permissionForm.reset(),this.location.back())},a=>{})}else this.permissionForm.markAllAsTouched(),this.toastr.error("Please Fill All The Required Fields")}}return o.\u0275fac=function(i){return new(i||o)(r.Y36(m.y),r.Y36(u.qu),r.Y36(C._W),r.Y36(c.gz),r.Y36(c.F0),r.Y36(d.Ye))},o.\u0275cmp=r.Xpm({type:o,selectors:[["app-update-permission-group"]],decls:27,vars:4,consts:[[1,"page-header"],[1,"page-title"],[1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],["type","text","placeholder","User Role Name","formControlName","group_name","readonly","",1,"form-control","w-30"],["id","pills-tab","role","tablist",1,"nav","nav-pills","mb-4","mt-3"],["role","presentation",1,"nav-item"],["id","pills-home-tab","data-bs-toggle","pill","data-bs-target","#pills-home","type","button","role","tab","aria-controls","pills-home","aria-selected","true",1,"nav-link","active"],["id","pills-profile-tab","data-bs-toggle","pill","data-bs-target","#pills-profile","type","button","role","tab","aria-controls","pills-profile","aria-selected","false",1,"nav-link"],["id","pills-tabContent",1,"tab-content"],["id","pills-home","role","tabpanel","aria-labelledby","pills-home-tab",1,"tab-pane","fade","show","active"],["class","heading",4,"ngFor","ngForOf"],["id","pills-profile","role","tabpanel","aria-labelledby","pills-profile-tab",1,"tab-pane","fade"],[1,"col-lg-12"],["class","btn btn-submit me-2",4,"ngIf"],["class","btn btn-submit me-2","type","submit","disabled","",4,"ngIf"],["routerLink","//settings/permissionGroup",1,"btn","btn-cancel"],[1,"heading"],["id","accordionExample",1,"accordion"],[1,"accordion-item"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse",1,"accordion-button","collapsed"],["data-bs-parent","#accordionExample",1,"accordion-collapse","collapse",3,"id"],[1,"row","w-100","m-0"],["class","col-sm-3 mb-3",4,"ngFor","ngForOf"],[1,"col-sm-3","mb-3"],[1,"f-18","mb-2"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"id","change"],[1,"form-check-label",3,"for"],[4,"ngFor","ngForOf"],["type","checkbox","formArrayName","permissions",1,"form-check-input",3,"id","checked","value","change"],[1,"btn","btn-submit","me-2"],["type","submit","disabled","",1,"btn","btn-submit","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(i,p){1&i&&(r.TgZ(0,"div",0)(1,"div",1)(2,"h4"),r._uU(3,"User Role"),r.qZA(),r.TgZ(4,"h6"),r._uU(5,"Manage your User Roles"),r.qZA()()(),r.TgZ(6,"div",2)(7,"div",3)(8,"form",4),r.NdJ("ngSubmit",function(){return p.submit()}),r._UZ(9,"input",5),r.TgZ(10,"ul",6)(11,"li",7)(12,"button",8),r._uU(13,"User Role Details"),r.qZA()(),r.TgZ(14,"li",7)(15,"button",9),r._uU(16,"Report Details"),r.qZA()()(),r.TgZ(17,"div",10)(18,"div",11)(19,"div"),r.YNc(20,s,10,10,"div",12),r.qZA()(),r._UZ(21,"div",13),r.TgZ(22,"div",14),r.YNc(23,A,2,0,"button",15),r.YNc(24,y,3,0,"button",16),r.TgZ(25,"a",17),r._uU(26,"Cancel"),r.qZA()()()()()()),2&i&&(r.xp6(8),r.Q6J("formGroup",p.permissionForm),r.xp6(12),r.Q6J("ngForOf",p.groupList),r.xp6(3),r.Q6J("ngIf",!p.loaders),r.xp6(1),r.Q6J("ngIf",p.loaders))},dependencies:[d.sg,d.O5,c.yS,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,u.CE,d.rS],styles:[".w-30[_ngcontent-%COMP%]{width:20%}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background:transparent;color:#f63;font-weight:500;border-bottom:2px solid #ff6633;border-radius:0;font-size:16px}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:16px;color:#f63}.orangeb-btn[_ngcontent-%COMP%]{padding:5px 10px;border:2px solid #ff6633;background:transparent;color:#f63;border-radius:5px;font-weight:500}.orangeb-btn[_ngcontent-%COMP%]:hover{background-color:#f63;color:#fff;transition:.3s}.accordion-item[_ngcontent-%COMP%]{border:1px solid #EEEEEE}.accordion-button[_ngcontent-%COMP%]{font-size:17px;font-weight:500;padding:15px 20px}.accordion-button[_ngcontent-%COMP%]:not(.collapsed){background-color:#f9d9cc;color:#f63}.accordion-button.collapsed[_ngcontent-%COMP%]:after{width:30px;background-repeat:no-repeat;height:30px;background-size:auto}.accordion-button[_ngcontent-%COMP%]:not(.collapsed):after{transform:rotate(-180deg);width:30px;background-repeat:no-repeat;height:30px;background-size:auto}.accordion-body[_ngcontent-%COMP%]{color:#201e1f;font-size:20px}.accordion[_ngcontent-%COMP%]{margin-bottom:30px}.text-p[_ngcontent-%COMP%]{color:#483d53;font-size:15px;font-weight:400}.form-control[_ngcontent-%COMP%]:focus{border-color:#faddd1;outline:0;box-shadow:0 0 0 .25rem #ff8e5f63}.btn-close[_ngcontent-%COMP%]:focus{border-color:#faddd1;outline:0;box-shadow:0 0 0 .25rem #ff8e5f63}.form-check-input[_ngcontent-%COMP%]:focus{border-color:#faddd1;box-shadow:0 0 0 .25rem #ff8e5f63}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#f63;border-color:#f63}.accordion-button[_ngcontent-%COMP%]:focus{border-color:#faddd1;box-shadow:0 0 0 .25rem #ff8e5f63}.accordion-collapse[_ngcontent-%COMP%]{padding:15px}.f-18[_ngcontent-%COMP%]{font-size:18px;font-weight:500}@media (max-width: 765px){.purple-text[_ngcontent-%COMP%]{font-size:15px}.accordion-button[_ngcontent-%COMP%]{padding:10px 15px}.text-p[_ngcontent-%COMP%]{font-size:11px}.heading[_ngcontent-%COMP%]{width:100%}.accordion-button[_ngcontent-%COMP%], .accordion-body[_ngcontent-%COMP%]{font-size:12px}.accordion-button[_ngcontent-%COMP%]:not(.collapsed):after{width:20px;height:20px}.accordion-button.collapsed[_ngcontent-%COMP%]:after{width:20px;height:20px}}"]}),o})();var x=n(30597);const f=JSON.parse(localStorage.getItem("auth"));let g;f&&f.map(l=>{"auth"===l.content_type.app_label&&"group"===l.content_type.model&&"change_group"==l.codename&&(g=l.codename)});const b=[{path:"",component:U,canActivate:[x.l],data:{allowedRoles:["change_group"]}}];let O=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({imports:[c.Bz.forChild(b),c.Bz]}),o})();var S=n(8468);let D=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({imports:[d.ez,O,S.I]}),o})()},30597:(M,P,n)=>{n.d(P,{l:()=>C});var d=n(94650),c=n(4392),u=n(97185),r=n(42917),m=n(80927);let C=(()=>{class t{constructor(s,A,y,U,x){this.router=s,this.Arout=A,this.toastr=y,this.profileService=U,this.coreService=x}canActivate(s,A){const y=JSON.parse(localStorage.getItem("auth"));if(this.profileService.userDetails$.subscribe(U=>{this.userDetails=U,this.permissions=this.userDetails?.permission}),y){const U=s.data.allowedRoles,x=y.some(g=>U.includes(g.codename));let f=this.coreService.profileData$.value;if(f&&f.username){this.userDetails=f,this.profileService.setUserDetails(this.userDetails),this.profileService.ProfileData$.next(f);const g=f?.permission,b=this.profileService.getUserDetails();(!b||b.length!==g.length)&&(this.profileService.setUserPermission(g),window.location.reload())}else this.coreService.getProfile().subscribe(g=>{this.userDetails=g,this.profileService.setUserDetails(this.userDetails),this.profileService.ProfileData$.next(g);const b=g?.permission,O=this.profileService.getUserDetails();(!O||O.length!==b.length)&&(this.profileService.setUserPermission(b),window.location.reload())});if(x)return!0}return this.toastr.error("User have Not Permission to Access This page"),this.router.navigate(["/dashboard"]),!1}}return t.\u0275fac=function(s){return new(s||t)(d.LFG(c.F0),d.LFG(c.gz),d.LFG(u._W),d.LFG(r.J),d.LFG(m.p))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);