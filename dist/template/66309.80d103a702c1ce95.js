"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[66309],{66309:(U,b,s)=>{s.r(b),s.d(b,{AddaccountModule:()=>J});var c=s(36895),d=s(4392),i=s(24006),e=s(94650),v=s(80927),A=s(97185);function u(t,a){1&t&&(e.TgZ(0,"span",29),e._uU(1,"Enter Title/Mobile No. "),e.qZA())}function T(t,a){if(1&t&&(e.TgZ(0,"option",30),e._uU(1),e.qZA()),2&t){const o=a.$implicit;e.Q6J("value",o.title),e.uIk("data-id",o.id),e.xp6(1),e.Oqu(o.title)}}function p(t,a){1&t&&(e.TgZ(0,"span",29),e._uU(1,"Select Type of Account"),e.qZA())}function y(t,a){if(1&t&&(e.TgZ(0,"option",30),e._uU(1),e.qZA()),2&t){const o=a.$implicit;e.s9C("value",null==o?null:o.id),e.xp6(1),e.Oqu(null==o?null:o.title)}}function _(t,a){1&t&&(e.TgZ(0,"span",29),e._uU(1,"Select Account Sub Type "),e.qZA())}function g(t,a){1&t&&(e.TgZ(0,"span",29),e._uU(1,",Data Not Available please (Select Another Account Type)"),e.qZA())}function f(t,a){1&t&&(e.TgZ(0,"span",31),e._uU(1,"Select Balance Type"),e.qZA())}function m(t,a){1&t&&(e.TgZ(0,"span",32),e._uU(1," Enter your Balance"),e.qZA())}function r(t,a){1&t&&(e.TgZ(0,"button",33),e._uU(1,"Submit"),e.qZA())}function h(t,a){1&t&&(e.TgZ(0,"button",34),e._UZ(1,"span",35),e._uU(2,"\xa0 Submit"),e.qZA())}const l=function(t){return{"is-invalid":t}};let I=(()=>{class t{constructor(o,n,Z,C){this.fb=o,this.coreService=n,this.toastr=Z,this.router=C,this.dateError=null,this.loaders=!1}get f(){return this.accountForm.controls}ngOnInit(){this.accountForm=this.fb.group({title:new i.NI("",[i.kI.required]),accounts_type:new i.NI("",[i.kI.required]),account_subtype:new i.NI("",[i.kI.required]),opening_balance:new i.NI(0,[i.kI.required,i.kI.pattern(/^[0-9]*$/)]),opening_balance_type:new i.NI("",[i.kI.required]),account_id:new i.NI("")}),this.getCity(),this.getCountry(),this.getState(),this.getAccountType()}getCountry(){this.coreService.countryList().subscribe(o=>{this.country=o})}getState(){this.coreService.stateList().subscribe(o=>{})}selectState(o){this.coreService.getStateByCountryId(o).subscribe(n=>{this.state=n})}getCity(){this.coreService.getCity().subscribe(o=>{this.city=o})}selectCity(o){this.coreService.getCityByStateId(o).subscribe(n=>{this.city=n})}getAccountType(){this.coreService.accountType().subscribe(o=>{this.accountType=o})}getAccountSubType(o){this.coreService.getAccountTypeById(o).subscribe(n=>{this.accountSubTypeLsit=n,console.log(this.accountSubTypeLsit)})}submit(){this.accountForm.valid?(this.loaders=!0,this.coreService.addAccount(this.accountForm.value).subscribe(o=>{this.loaders=!1,this.addRes=o,this.addRes.success?(this.toastr.success(this.addRes.msg),this.accountForm.reset(),this.router.navigate(["//account/accountlist"])):this.loaders=!1},o=>{this.loaders=!1,this.toastr.error(o.error?.account_id[0],"Account Id"),(o.error.anniversary||o.error.birthday||o.error.credit_days)&&(this.dateError="Date (format:dd/mm/yyyy)",setTimeout(()=>{this.dateError=""},2e3))})):(this.accountForm.markAllAsTouched(),this.toastr.error("Please Fill All The Required Fields"))}get title(){return this.accountForm.get("title")}get opening_balance(){return this.accountForm.get("opening_balance")}get opening_balance_type(){return this.accountForm.get("opening_balance_type")}get account_subtype(){return this.accountForm.get("account_subtype")}get accounts_type(){return this.accountForm.get("accounts_type")}get account_id(){return this.accountForm.get("account_id")}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(i.qu),e.Y36(v.p),e.Y36(A._W),e.Y36(d.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-addaccount"]],decls:60,vars:26,consts:[[1,"page-header"],[1,"page-title"],[1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-4","col-sm-4","col-12"],[1,"form-group"],["type","text","formControlName","title","placeholder","Enter Title/Mobile No.","id","title",3,"ngClass"],["class","text-danger",4,"ngIf"],["formControlName","accounts_type","required","","id","accounts_type",3,"ngClass","change"],["accountValue",""],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","account_subtype","required","","id","account_subtype",3,"ngClass"],[1,"col-lg-6","col-sm-6","col-12"],[1,"form-group","row"],[1,"col-lg-12"],[1,"input-group"],["formControlName","opening_balance_type","required","","id","opening_balance_type",1,"border","hov",3,"ngClass"],["value","","selected","","disabled","",1,"unhov"],["value","Cr",1,"unhov"],["value","Dr",1,"unhov"],["class","text-danger d-block",4,"ngIf"],["type","text","formControlName","opening_balance","placeholder","Enter Opening Balance","id","opening_balance",3,"ngClass"],["class","text-danger ml-5 pl-5",4,"ngIf"],["type","submit","class","btn btn-submit me-2",4,"ngIf"],["class","btn btn-submit me-2","type","submit","disabled","",4,"ngIf"],["routerLink","//account/accountlist",1,"btn","btn-cancel"],[1,"text-danger"],[3,"value"],[1,"text-danger","d-block"],[1,"text-danger","ml-5","pl-5"],["type","submit",1,"btn","btn-submit","me-2"],["type","submit","disabled","",1,"btn","btn-submit","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,n){if(1&o){const Z=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"h4"),e._uU(3," Add Account"),e.qZA(),e.TgZ(4,"h6"),e._uU(5,"Create new Account "),e.qZA()()(),e.TgZ(6,"div",2)(7,"div",3)(8,"form",4),e.NdJ("ngSubmit",function(){return n.submit()}),e.TgZ(9,"div",5)(10,"div",6)(11,"div",7)(12,"label"),e._uU(13,"Title/Mobile No.*"),e.qZA(),e._UZ(14,"input",8),e.YNc(15,u,2,0,"span",9),e.qZA()(),e.TgZ(16,"div",6)(17,"div",7)(18,"label"),e._uU(19,"Select Account Type*"),e.qZA(),e.TgZ(20,"select",10,11),e.NdJ("change",function(){e.CHM(Z);const M=e.MAs(21);return e.KtG(n.getAccountSubType(M.value))}),e.TgZ(22,"option",12),e._uU(23,"Accounts Type"),e.qZA(),e.YNc(24,T,2,3,"option",13),e.qZA(),e.YNc(25,p,2,0,"span",9),e.qZA()(),e.TgZ(26,"div",6)(27,"div",7)(28,"label"),e._uU(29,"Select Account Sub Type*"),e.qZA(),e.TgZ(30,"select",14)(31,"option",12),e._uU(32,"Select Account Sub Type"),e.qZA(),e.YNc(33,y,2,2,"option",13),e.qZA(),e.YNc(34,_,2,0,"span",9),e._UZ(35,"br"),e.YNc(36,g,2,0,"span",9),e.qZA()(),e.TgZ(37,"div",15)(38,"div",16)(39,"div",17)(40,"label"),e._uU(41,"Select Opening Balance*"),e.qZA(),e.TgZ(42,"div",18)(43,"div")(44,"select",19)(45,"option",20),e._uU(46,"Balance Type"),e.qZA(),e.TgZ(47,"option",21),e._uU(48,"Cr"),e.qZA(),e.TgZ(49,"option",22),e._uU(50,"Dr"),e.qZA()(),e.YNc(51,f,2,0,"span",23),e.qZA(),e.TgZ(52,"div"),e._UZ(53,"input",24),e.YNc(54,m,2,0,"span",25),e.qZA()()()()(),e.TgZ(55,"div",17),e.YNc(56,r,2,0,"button",26),e.YNc(57,h,3,0,"button",27),e.TgZ(58,"a",28),e._uU(59,"Cancel"),e.qZA()()()()()()}2&o&&(e.xp6(8),e.Q6J("formGroup",n.accountForm),e.xp6(6),e.Q6J("ngClass",e.VKq(16,l,n.f.title.touched&&n.f.title.invalid)),e.xp6(1),e.Q6J("ngIf",n.title&&n.title.invalid&&n.title.touched),e.xp6(5),e.Q6J("ngClass",e.VKq(18,l,n.f.accounts_type.touched&&n.f.accounts_type.invalid)),e.xp6(4),e.Q6J("ngForOf",n.accountType),e.xp6(1),e.Q6J("ngIf",n.accounts_type&&n.accounts_type.invalid&&n.accounts_type.touched),e.xp6(5),e.Q6J("ngClass",e.VKq(20,l,n.f.account_subtype.touched&&n.f.account_subtype.invalid)),e.xp6(3),e.Q6J("ngForOf",n.accountSubTypeLsit),e.xp6(1),e.Q6J("ngIf",n.account_subtype&&n.account_subtype.invalid&&n.account_subtype.touched),e.xp6(2),e.Q6J("ngIf",0==(null==n.accountSubTypeLsit?null:n.accountSubTypeLsit.length)),e.xp6(8),e.Q6J("ngClass",e.VKq(22,l,n.f.opening_balance_type.touched&&n.f.opening_balance_type.invalid)),e.xp6(7),e.Q6J("ngIf",n.opening_balance_type&&n.opening_balance_type.invalid&&n.opening_balance_type.touched),e.xp6(2),e.Q6J("ngClass",e.VKq(24,l,n.f.opening_balance.touched&&n.f.opening_balance.invalid)),e.xp6(1),e.Q6J("ngIf",n.opening_balance&&n.opening_balance.invalid&&n.opening_balance.touched),e.xp6(2),e.Q6J("ngIf",!n.loaders),e.xp6(1),e.Q6J("ngIf",n.loaders))},dependencies:[c.mk,c.sg,c.O5,d.yS,i._Y,i.YN,i.Kr,i.Fj,i.EJ,i.JJ,i.JL,i.Q7,i.sg,i.u],styles:[".ng-dirty.ng-invalid.is-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}select[_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;padding:10px 15px;border-radius:5px}textarea[_ngcontent-%COMP%]{height:40px}"]}),t})();var D=s(30597);const S=JSON.parse(localStorage.getItem("auth"));let q;S&&S.permission&&S.permission.map(a=>{"master"===a.content_type.app_label&&"account"===a.content_type.model&&"add_account"==a.codename&&(q=a.codename)});const F=[{path:"",component:I,canActivate:[D.l],data:{allowedRoles:["add_account"]}}];let N=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.Bz.forChild(F),d.Bz]}),t})();var E=s(30906);let J=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.ez,N,E.ZU,i.u5,i.UX]}),t})()},30597:(U,b,s)=>{s.d(b,{l:()=>A});var c=s(94650),d=s(4392),i=s(97185),e=s(42917),v=s(80927);let A=(()=>{class u{constructor(p,y,_,g,f){this.router=p,this.Arout=y,this.toastr=_,this.profileService=g,this.coreService=f}canActivate(p,y){const _=JSON.parse(localStorage.getItem("auth"));if(this.profileService.userDetails$.subscribe(g=>{this.userDetails=g,this.permissions=this.userDetails?.permission}),_){const g=p.data.allowedRoles,f=_.some(r=>g.includes(r.codename));let m=this.coreService.profileData$.value;if(m&&m.username){this.userDetails=m,this.profileService.setUserDetails(this.userDetails),this.profileService.ProfileData$.next(m);const r=m?.permission,h=this.profileService.getUserDetails();(!h||h.length!==r.length)&&(this.profileService.setUserPermission(r),window.location.reload())}else this.coreService.getProfile().subscribe(r=>{this.userDetails=r,this.profileService.setUserDetails(this.userDetails),this.profileService.ProfileData$.next(r);const h=r?.permission,l=this.profileService.getUserDetails();(!l||l.length!==h.length)&&(this.profileService.setUserPermission(h),window.location.reload())});if(f)return!0}return this.toastr.error("User have Not Permission to Access This page"),this.router.navigate(["/dashboard"]),!1}}return u.\u0275fac=function(p){return new(p||u)(c.LFG(d.F0),c.LFG(d.gz),c.LFG(i._W),c.LFG(e.J),c.LFG(v.p))},u.\u0275prov=c.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);