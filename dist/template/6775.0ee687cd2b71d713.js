"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[6775],{6775:(Me,_,p)=>{p.r(_),p.d(_,{PaymentModule:()=>Se});var d=p(6895),l=p(8996),u=p(529),r=p(4006),y=p(9300),v=p(1884),h=p(8372),g=p(8505),f=p(3900),P=p(262),x=p(8746),e=p(4650),Z=p(4440),A=p(7185),T=p(1809),q=p(4270),b=p(927),s=p(7957),F=p(3238);const C=["tabGroup"];function N(a,n){if(1&a&&(e.TgZ(0,"div",20),e._UZ(1,"input",21),e.TgZ(2,"label",22),e._uU(3),e.qZA()()),2&a){const t=n.$implicit;e.xp6(1),e.Q6J("value",t.value),e.xp6(2),e.Oqu(t.label)}}function I(a,n){1&a&&(e.TgZ(0,"div"),e._uU(1," Voucher Type is required. "),e.qZA())}function k(a,n){if(1&a&&(e.TgZ(0,"div",23),e.YNc(1,I,2,0,"div",24),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.voucher_type.errors?null:t.voucher_type.errors.required)}}function J(a,n){if(1&a&&(e.TgZ(0,"div",20),e._UZ(1,"input",25),e.TgZ(2,"label",22),e._uU(3),e.qZA()()),2&a){const t=n.$implicit;e.xp6(1),e.Q6J("value",t.value),e.xp6(2),e.Oqu(t.label)}}function V(a,n){1&a&&(e.TgZ(0,"div"),e._uU(1," Payment Type is required. "),e.qZA())}function U(a,n){if(1&a&&(e.TgZ(0,"div",23),e.YNc(1,V,2,0,"div",24),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.payment_type.errors?null:t.payment_type.errors.required)}}function Q(a,n){if(1&a&&(e.TgZ(0,"div",2)(1,"div",3)(2,"label",4),e._uU(3,"Select Payment Type"),e.qZA(),e.TgZ(4,"div",6),e.YNc(5,J,4,2,"div",7),e.qZA()(),e.YNc(6,U,2,1,"div",8),e.qZA()),2&a){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.paymentType),e.xp6(1),e.Q6J("ngIf",t.payment_type.invalid&&(t.payment_type.dirty||t.payment_type.touched))}}function S(a,n){if(1&a&&(e.TgZ(0,"option",29),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function Y(a,n){1&a&&(e.TgZ(0,"div"),e._uU(1," Payment Mode is required. "),e.qZA())}function w(a,n){if(1&a&&(e.TgZ(0,"div",23),e.YNc(1,Y,2,0,"div",24),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.payment_mode.errors?null:t.payment_mode.errors.required)}}function M(a,n){if(1&a&&(e.TgZ(0,"div",11)(1,"div",3)(2,"label"),e._uU(3,"Payment Mode"),e.qZA(),e.TgZ(4,"select",26)(5,"option",27),e._uU(6,"-- Select Payment Mode --"),e.qZA(),e.YNc(7,S,2,2,"option",28),e.qZA()(),e.YNc(8,w,2,1,"div",8),e.qZA()),2&a){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",t.paymentMode),e.xp6(1),e.Q6J("ngIf",t.payment_mode.invalid&&(t.payment_mode.dirty||t.payment_mode.touched))}}function O(a,n){if(1&a&&(e.TgZ(0,"option",29),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.Q6J("value",null==t?null:t.id),e.xp6(1),e.Oqu(null==t?null:t.dueAmount)}}function B(a,n){1&a&&(e.TgZ(0,"div"),e._uU(1," Selecting Sales is required. "),e.qZA())}function E(a,n){if(1&a&&(e.TgZ(0,"div",23),e.YNc(1,B,2,0,"div",24),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.receipt_sales.errors?null:t.receipt_sales.errors.required)}}function L(a,n){if(1&a&&(e.TgZ(0,"div",11)(1,"div",3)(2,"label"),e._uU(3,"Select Sales"),e.qZA(),e.TgZ(4,"select",30)(5,"option",27),e._uU(6,"-- Select Sales --"),e.qZA(),e.YNc(7,O,2,2,"option",28),e.qZA()(),e.YNc(8,E,2,1,"div",8),e.qZA()),2&a){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",t.receiptSales),e.xp6(1),e.Q6J("ngIf",t.receipt_sales.invalid&&(t.receipt_sales.dirty||t.receipt_sales.touched))}}function R(a,n){1&a&&(e.TgZ(0,"div"),e._uU(1," Amount is required. "),e.qZA())}function j(a,n){if(1&a&&(e.TgZ(0,"div",23),e.YNc(1,R,2,0,"div",24),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.amount_receipt.errors?null:t.amount_receipt.errors.required)}}function G(a,n){1&a&&(e.TgZ(0,"mat-option",36),e._uU(1,"Please Enter 3 or more characters"),e.qZA())}function $(a,n){1&a&&(e.TgZ(0,"mat-option",36),e._uU(1,"Loading..."),e.qZA())}function D(a,n){if(1&a&&(e.TgZ(0,"mat-option",36),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Oqu(t.cusErrorMsg)}}function H(a,n){if(1&a&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&a){const t=n.$implicit,i=e.oxw(2);e.Q6J("value",t),e.xp6(1),e.hij(" ",i.displayCus(t)," ")}}function W(a,n){1&a&&(e.TgZ(0,"div"),e._uU(1," Customer is required. "),e.qZA())}function z(a,n){if(1&a&&(e.TgZ(0,"div",23),e.YNc(1,W,2,0,"div",24),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.customer_receipt.errors?null:t.customer_receipt.errors.required)}}function K(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",31)(1,"div",3)(2,"label"),e._uU(3,"Customer"),e.qZA(),e._UZ(4,"input",32),e.TgZ(5,"mat-autocomplete",33,34),e.NdJ("optionSelected",function(c){e.CHM(t);const o=e.oxw();return e.KtG(o.optionSelectedReceipt(c))}),e.YNc(7,G,2,0,"mat-option",35),e.YNc(8,$,2,0,"mat-option",35),e.YNc(9,D,2,1,"mat-option",35),e.YNc(10,H,2,2,"mat-option",28),e.qZA()(),e.YNc(11,z,2,1,"div",8),e.qZA()}if(2&a){const t=e.MAs(6),i=e.oxw();e.xp6(4),e.Q6J("formControl",i.receiptPaymentForm.get("customer_receipt"))("matAutocomplete",t),e.xp6(1),e.Q6J("displayWith",i.displayCus),e.xp6(2),e.Q6J("ngIf",(null==i.receiptPaymentForm.get("customer_receipt").value?null:i.receiptPaymentForm.get("customer_receipt").value.length)<3),e.xp6(1),e.Q6J("ngIf",i.cusIsLoading),e.xp6(1),e.Q6J("ngIf",i.cusErrorMsg),e.xp6(1),e.Q6J("ngForOf",i.filteredCustomer2),e.xp6(1),e.Q6J("ngIf",i.customer_receipt.invalid&&(i.customer_receipt.dirty||i.customer_receipt.touched))}}function X(a,n){1&a&&(e.TgZ(0,"mat-option",36),e._uU(1,"Please Enter 3 or more characters"),e.qZA())}function ee(a,n){1&a&&(e.TgZ(0,"mat-option",36),e._uU(1,"Loading..."),e.qZA())}function te(a,n){if(1&a&&(e.TgZ(0,"mat-option",36),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Oqu(t.cusErrorMsg)}}function ae(a,n){if(1&a&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&a){const t=n.$implicit,i=e.oxw(2);e.Q6J("value",t),e.xp6(1),e.hij(" ",i.displayParty(t)," ")}}function ie(a,n){1&a&&(e.TgZ(0,"div"),e._uU(1," Party is required. "),e.qZA())}function ne(a,n){if(1&a&&(e.TgZ(0,"div",23),e.YNc(1,ie,2,0,"div",24),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.party_receipt.errors?null:t.party_receipt.errors.required)}}function re(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",31)(1,"div",3)(2,"label"),e._uU(3,"Party"),e.qZA(),e._UZ(4,"input",37),e.TgZ(5,"mat-autocomplete",33,38),e.NdJ("optionSelected",function(c){e.CHM(t);const o=e.oxw();return e.KtG(o.optionSelectedParty(c))}),e.YNc(7,X,2,0,"mat-option",35),e.YNc(8,ee,2,0,"mat-option",35),e.YNc(9,te,2,1,"mat-option",35),e.YNc(10,ae,2,2,"mat-option",28),e.qZA()(),e.YNc(11,ne,2,1,"div",8),e.qZA()}if(2&a){const t=e.MAs(6),i=e.oxw();e.xp6(4),e.Q6J("formControl",i.receiptPaymentForm.get("party_receipt"))("matAutocomplete",t),e.xp6(1),e.Q6J("displayWith",i.displayParty),e.xp6(2),e.Q6J("ngIf",(null==i.receiptPaymentForm.get("party_receipt").value?null:i.receiptPaymentForm.get("party_receipt").value.length)<3),e.xp6(1),e.Q6J("ngIf",i.partyIsLoading),e.xp6(1),e.Q6J("ngIf",i.partyErrorMsg),e.xp6(1),e.Q6J("ngForOf",i.filteredParty),e.xp6(1),e.Q6J("ngIf",i.party_receipt.invalid&&(i.party_receipt.dirty||i.party_receipt.touched))}}function oe(a,n){if(1&a&&(e.TgZ(0,"option",29),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(null==t?null:t.name)}}function pe(a,n){1&a&&(e.TgZ(0,"div"),e._uU(1," Payment Account is required. "),e.qZA())}function ce(a,n){if(1&a&&(e.TgZ(0,"div",23),e.YNc(1,pe,2,0,"div",24),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.payment_account_receipt.errors?null:t.payment_account_receipt.errors.required)}}function me(a,n){1&a&&(e.TgZ(0,"div"),e._uU(1," UPI ID is required. "),e.qZA())}function de(a,n){if(1&a&&(e.TgZ(0,"div",23),e.YNc(1,me,2,0,"div",24),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.upi_id_receipt.errors?null:t.upi_id_receipt.errors.required)}}function se(a,n){if(1&a&&(e.TgZ(0,"div",11)(1,"div",3)(2,"label"),e._uU(3,"UPI Id"),e.qZA(),e._UZ(4,"input",41),e.qZA(),e.YNc(5,de,2,1,"div",8),e.qZA()),2&a){const t=e.oxw(2);e.xp6(5),e.Q6J("ngIf",t.upi_id_receipt.invalid&&(t.upi_id_receipt.dirty||t.upi_id_receipt.touched))}}function _e(a,n){1&a&&(e.TgZ(0,"div"),e._uU(1," Account No is required. "),e.qZA())}function le(a,n){if(1&a&&(e.TgZ(0,"div",23),e.YNc(1,_e,2,0,"div",24),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.receipt_account_no.errors?null:t.receipt_account_no.errors.required)}}function ue(a,n){if(1&a&&(e.TgZ(0,"div",11)(1,"div",3)(2,"label"),e._uU(3,"Account No"),e.qZA(),e._UZ(4,"input",42),e.qZA(),e.YNc(5,le,2,1,"div",8),e.qZA()),2&a){const t=e.oxw(2);e.xp6(5),e.Q6J("ngIf",t.receipt_account_no.invalid&&(t.receipt_account_no.dirty||t.receipt_account_no.touched))}}function ye(a,n){if(1&a&&(e.TgZ(0,"div",1)(1,"div",11)(2,"div",3)(3,"label"),e._uU(4,"Payment Account"),e.qZA(),e.TgZ(5,"select",39)(6,"option",40),e._uU(7,"Select Payment Account"),e.qZA(),e.YNc(8,oe,2,2,"option",28),e.qZA()(),e.YNc(9,ce,2,1,"div",8),e.qZA(),e.YNc(10,se,6,1,"div",10),e.YNc(11,ue,6,1,"div",10),e.qZA()),2&a){const t=e.oxw();e.xp6(8),e.Q6J("ngForOf",t.companyBankList),e.xp6(1),e.Q6J("ngIf",t.payment_account_receipt.invalid&&(t.payment_account_receipt.dirty||t.payment_account_receipt.touched)),e.xp6(1),e.Q6J("ngIf","UPI"===t.receiptPaymentForm.get("payment_mode").value&&"expense"!==t.receiptPaymentForm.get("voucher_type").value),e.xp6(1),e.Q6J("ngIf","Bank"===t.receiptPaymentForm.get("payment_mode").value)}}function ve(a,n){1&a&&(e.TgZ(0,"div"),e._uU(1," Customer Bank Name is required. "),e.qZA())}function he(a,n){if(1&a&&(e.TgZ(0,"div",23),e.YNc(1,ve,2,0,"div",24),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.receipt_customer_bank_name.errors?null:t.receipt_customer_bank_name.errors.required)}}function ge(a,n){1&a&&(e.TgZ(0,"div"),e._uU(1," Card Payment Amount is required. "),e.qZA())}function fe(a,n){if(1&a&&(e.TgZ(0,"div",23),e.YNc(1,ge,2,0,"div",24),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.receipt_card_payment_amount.errors?null:t.receipt_card_payment_amount.errors.required)}}function Pe(a,n){1&a&&(e.TgZ(0,"div"),e._uU(1," Card Holder Name is required. "),e.qZA())}function xe(a,n){if(1&a&&(e.TgZ(0,"div",23),e.YNc(1,Pe,2,0,"div",24),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.receipt_card_holder_name.errors?null:t.receipt_card_holder_name.errors.required)}}function Ze(a,n){1&a&&(e.TgZ(0,"div"),e._uU(1," Card Transaction No. is required. "),e.qZA())}function Ae(a,n){if(1&a&&(e.TgZ(0,"div",23),e.YNc(1,Ze,2,0,"div",24),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.receipt_cart_transactions_no.errors?null:t.receipt_cart_transactions_no.errors.required)}}function Te(a,n){if(1&a&&(e.TgZ(0,"div",1)(1,"div",11)(2,"div",3)(3,"label"),e._uU(4,"Customer Bank Name"),e.qZA(),e._UZ(5,"input",43),e.qZA(),e.YNc(6,he,2,1,"div",8),e.qZA(),e.TgZ(7,"div",11)(8,"div",3)(9,"label"),e._uU(10,"Card Payment Amount"),e.qZA(),e._UZ(11,"input",44),e.qZA(),e.YNc(12,fe,2,1,"div",8),e.qZA(),e.TgZ(13,"div",11)(14,"div",3)(15,"label"),e._uU(16,"Card Holder Name"),e.qZA(),e._UZ(17,"input",45),e.qZA(),e.YNc(18,xe,2,1,"div",8),e.qZA(),e.TgZ(19,"div",11)(20,"div",3)(21,"label"),e._uU(22,"Card Transaction No"),e.qZA(),e._UZ(23,"input",46),e.qZA(),e.YNc(24,Ae,2,1,"div",8),e.qZA()()),2&a){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",t.receipt_customer_bank_name.invalid&&(t.receipt_customer_bank_name.dirty||t.receipt_customer_bank_name.touched)),e.xp6(6),e.Q6J("ngIf",t.receipt_card_payment_amount.invalid&&(t.receipt_card_payment_amount.dirty||t.receipt_card_payment_amount.touched)),e.xp6(6),e.Q6J("ngIf",t.receipt_card_holder_name.invalid&&(t.receipt_card_holder_name.dirty||t.receipt_card_holder_name.touched)),e.xp6(6),e.Q6J("ngIf",t.receipt_cart_transactions_no.invalid&&(t.receipt_cart_transactions_no.dirty||t.receipt_cart_transactions_no.touched))}}function qe(a,n){1&a&&(e.TgZ(0,"div"),e._uU(1," Non GST is required. "),e.qZA())}function be(a,n){if(1&a&&(e.TgZ(0,"div",23),e.YNc(1,qe,2,0,"div",24),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.expense_non_gst.errors?null:t.expense_non_gst.errors.required)}}function Fe(a,n){if(1&a&&(e.TgZ(0,"div",1)(1,"div",11)(2,"div",47)(3,"label"),e._UZ(4,"input",48),e._uU(5," Non GST "),e.qZA()(),e.YNc(6,be,2,1,"div",8),e.qZA()()),2&a){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",t.expense_non_gst.invalid&&(t.expense_non_gst.dirty||t.expense_non_gst.touched))}}function Ce(a,n){1&a&&(e.TgZ(0,"div"),e._uU(1," Remark is required. "),e.qZA())}function Ne(a,n){if(1&a&&(e.TgZ(0,"div",23),e.YNc(1,Ce,2,0,"div",24),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.receipt_remark.errors?null:t.receipt_remark.errors.required)}}const Ie=[{path:"",component:(()=>{class a{constructor(t,i,c,o,m,Ye,we){this.billHoldService=t,this.fb=i,this.toastr=c,this.syncService=o,this.http=m,this.cartService=Ye,this.coreService=we,this.voucherType=[{id:1,label:"Sales",value:"sales"},{id:2,label:"Purchase",value:"purchase"},{id:3,label:"Expense",value:"expense"},{id:4,label:"Cash in Hand",value:"cash in hand"}],this.paymentType=[{id:1,label:"Advance Payment",value:"Advance"},{id:2,label:"Against Bill",value:"Against Bill"}],this.paymentMode=[{id:1,label:"UPI",value:"UPI"},{id:2,label:"Card",value:"Card"},{id:3,label:"Cash",value:"Cash"},{id:4,label:"Bank",value:"Bank"}],this.receiptSales=[],this.companyBankList=[],this.partyIsLoading=!1,this.cusMinLengthTerm=3,this.cusIsLoading=!1,this.customerAutoCompleteControl2=new r.NI("")}ngOnInit(){this.recieptForm=this.fb.group({customer:new r.NI("",[r.kI.required]),receipt_method:new r.NI("",[r.kI.required]),payment_mode:new r.NI("",[r.kI.required]),amount:new r.NI("",[r.kI.required]),description:new r.NI("",[r.kI.required]),bill_no:new r.NI("",[r.kI.required]),card_detail:new r.NI("",[r.kI.required]),bank_detail:new r.NI("",[r.kI.required]),upi_detail:new r.NI("",[r.kI.required])});const c={headers:new u.WM({"Content-Type":"application/json",Authorization:"Token 4d586523c3dbbc989192bec34006e72a4edebf00"})};this.receiptPaymentForm=this.fb.group({voucher_type:["",[r.kI.required]],payment_type:[""],payment_mode:[""],receipt_sales:[""],amount_receipt:[""],customer_receipt:[""],party_receipt:[""],receipt_remark:[""],payment_account:[""],upi_id:[""],customer_bank_name:[""],card_payment_amount:[""],card_holder_name:[""],cart_transactions_no:[""],account_no:[""],non_gst:[!1]}),this.receiptPaymentForm.get("voucher_type").valueChanges.subscribe(o=>{"sales"===o?(this.receiptPaymentForm.get("payment_type").setValue(this.paymentType[0].value),this.receiptPaymentForm.get("payment_type").setValidators(r.kI.required),this.receiptPaymentForm.get("payment_mode").setValidators(r.kI.required),this.receiptPaymentForm.get("customer_receipt").setValidators(r.kI.required),this.receiptPaymentForm.get("amount_receipt").setValidators(r.kI.required),this.receiptPaymentForm.get("payment_account").setValidators(r.kI.required),this.receiptPaymentForm.get("receipt_remark").setValidators(r.kI.required)):"purchase"===o?(this.receiptPaymentForm.get("payment_type").setValue(this.paymentType[0].value),this.receiptPaymentForm.get("payment_type").setValidators(r.kI.required),this.receiptPaymentForm.get("payment_mode").setValidators(r.kI.required),this.receiptPaymentForm.get("party_receipt").setValidators(r.kI.required),this.receiptPaymentForm.get("receipt_remark").setValidators(r.kI.required),this.receiptPaymentForm.get("amount_receipt").setValidators(r.kI.required),this.receiptPaymentForm.get("payment_account").setValidators(r.kI.required)):"expense"===o?(this.receiptPaymentForm.get("upi_id").clearValidators(),this.receiptPaymentForm.get("payment_account").setValidators(r.kI.required),this.receiptPaymentForm.get("receipt_remark").setValidators(r.kI.required),this.receiptPaymentForm.get("non_gst").setValidators(r.kI.required),this.receiptPaymentForm.get("party_receipt").setValidators(r.kI.required),this.receiptPaymentForm.get("amount_receipt").setValidators(r.kI.required)):(this.receiptPaymentForm.get("payment_type").clearValidators(),this.receiptPaymentForm.get("payment_mode").clearValidators(),this.receiptPaymentForm.get("customer_receipt").clearValidators(),this.receiptPaymentForm.get("amount_receipt").clearValidators(),this.receiptPaymentForm.get("payment_account").clearValidators(),this.receiptPaymentForm.get("receipt_remark").clearValidators()),this.receiptPaymentForm.get("party_receipt").updateValueAndValidity(),this.receiptPaymentForm.get("non_gst").updateValueAndValidity(),this.receiptPaymentForm.get("payment_type").updateValueAndValidity(),this.receiptPaymentForm.get("payment_mode").updateValueAndValidity(),this.receiptPaymentForm.get("payment_account").updateValueAndValidity(),this.receiptPaymentForm.get("customer_receipt").updateValueAndValidity(),this.receiptPaymentForm.get("receipt_remark").updateValueAndValidity(),this.receiptPaymentForm.get("amount_receipt").updateValueAndValidity()}),this.receiptPaymentForm.get("payment_type").valueChanges.subscribe(o=>{this.receiptPaymentForm.get("payment_mode").setValue(this.paymentMode[0].value),"Against Bill"===o?this.receiptPaymentForm.get("receipt_sales").setValidators(r.kI.required):this.receiptPaymentForm.get("receipt_sales").clearValidators(),this.receiptPaymentForm.get("receipt_sales").updateValueAndValidity()}),this.receiptPaymentForm.get("payment_mode").valueChanges.subscribe(o=>{"UPI"===o?(this.receiptPaymentForm.get("upi_id").setValidators(r.kI.required),this.receiptPaymentForm.get("payment_account").setValidators(r.kI.required)):"Card"===o?(this.receiptPaymentForm.get("customer_bank_name").setValidators(r.kI.required),this.receiptPaymentForm.get("card_payment_amount").setValidators(r.kI.required),this.receiptPaymentForm.get("card_holder_name").setValidators(r.kI.required),this.receiptPaymentForm.get("cart_transactions_no").setValidators(r.kI.required),this.receiptPaymentForm.get("payment_account").setValidators(r.kI.required)):"Bank"===o?this.receiptPaymentForm.get("account_no").setValidators(r.kI.required):(this.receiptPaymentForm.get("upi_id").clearValidators(),this.receiptPaymentForm.get("payment_account").clearValidators(),this.receiptPaymentForm.get("customer_bank_name").clearValidators(),this.receiptPaymentForm.get("card_payment_amount").clearValidators(),this.receiptPaymentForm.get("card_holder_name").clearValidators(),this.receiptPaymentForm.get("cart_transactions_no").clearValidators(),this.receiptPaymentForm.get("account_no").clearValidators()),this.receiptPaymentForm.get("upi_id").updateValueAndValidity(),this.receiptPaymentForm.get("payment_account").updateValueAndValidity(),this.receiptPaymentForm.get("customer_bank_name").updateValueAndValidity(),this.receiptPaymentForm.get("card_payment_amount").updateValueAndValidity(),this.receiptPaymentForm.get("card_holder_name").updateValueAndValidity(),this.receiptPaymentForm.get("cart_transactions_no").updateValueAndValidity(),this.receiptPaymentForm.get("account_no").updateValueAndValidity()}),this.receiptPaymentForm.get("customer_receipt").valueChanges.pipe((0,y.h)(o=>null!==o&&o?.length>=this.cusMinLengthTerm),(0,v.x)(),(0,h.b)(100),(0,g.b)(()=>{this.cusErrorMsg="",this.filteredCustomer2=[],this.cusIsLoading=!0}),(0,f.w)(o=>this.http.get(`https://pv.greatfuturetechno.com/pv-api/pos/customer_filter/?search=${o}`,c).pipe((0,P.K)(m=>(console.log("err catch",m),this.cusErrorMsg="No Customer Found",this.cusIsLoading=!1,[])),(0,x.x)(()=>{this.cusIsLoading=!1,console.log("search",o)})))).subscribe(o=>{console.log("data",o),o.length>0?(console.log("data",o),this.filteredCustomer2=o):(this.filteredCustomer2=[],this.cusErrorMsg="No Customers Found")}),this.receiptPaymentForm.get("party_receipt").valueChanges.pipe((0,y.h)(o=>null!==o&&o?.length>=this.cusMinLengthTerm),(0,v.x)(),(0,h.b)(100),(0,g.b)(()=>{this.partyErrorMsg="",this.filteredParty=[],this.partyIsLoading=!0}),(0,f.w)(o=>this.http.get(`https://pv.greatfuturetechno.com/pv-api/pos/party_filter/?search=${o}`,c).pipe((0,P.K)(m=>(console.log("err catch",m),this.partyErrorMsg="No Party Found",this.partyIsLoading=!1,[])),(0,x.x)(()=>{this.partyIsLoading=!1,console.log("search",o)})))).subscribe(o=>{console.log("data",o),o.length>0?(console.log("data",o),this.filteredParty=o):(this.filteredParty=[],this.partyErrorMsg="No Party Found")}),this.cartService.getCompanyBank().subscribe({next:o=>{console.log(o,"company bank"),this.companyBankList=o},error:o=>{console.log("company bank",o)}})}optionSelectedParty(t){}optionSelectedReceipt(t){this.cartService.getReceiptDueOrder(t.option.value.id).subscribe({next:c=>{console.log(c,"receipt sales"),this.receiptSales=c},error:c=>{console.log("receipt sales",c)}})}displayCus(t){return t?t.mobile_no:""}displayParty(t){return t?t.mobile_no:""}get voucher_type(){return this.receiptPaymentForm.get("voucher_type")}get payment_type(){return this.receiptPaymentForm.get("payment_type")}get payment_mode(){return this.receiptPaymentForm.get("payment_mode")}get receipt_sales(){return this.receiptPaymentForm.get("receipt_sales")}get amount_receipt(){return this.receiptPaymentForm.get("amount_receipt")}get customer_receipt(){return this.receiptPaymentForm.get("customer_receipt")}get receipt_remark(){return this.receiptPaymentForm.get("receipt_remark")}get party_receipt(){return this.receiptPaymentForm.get("party_receipt")}get receipt_customer_bank_name(){return this.receiptPaymentForm.get("customer_bank_name")}get receipt_card_payment_amount(){return this.receiptPaymentForm.get("card_payment_amount")}get receipt_card_holder_name(){return this.receiptPaymentForm.get("card_holder_name")}get receipt_cart_transactions_no(){return this.receiptPaymentForm.get("cart_transactions_no")}get receipt_account_no(){return this.receiptPaymentForm.get("account_no")}get expense_non_gst(){return this.receiptPaymentForm.get("non_gst")}get upi_id_receipt(){return this.receiptPaymentForm.get("upi_id")}get transaction_id_receipt(){return this.receiptPaymentForm.get("transaction_id")}get payment_account_receipt(){return this.receiptPaymentForm.get("payment_account")}receiptFormSubmit(){if(this.receiptPaymentForm.invalid)return console.log("invalid"),void Object.keys(this.receiptPaymentForm.controls).forEach(t=>{this.receiptPaymentForm.controls[t].markAsTouched()});"sales"===this.voucher_type.value?this.formSubmitReceipt():"purchase"===this.voucher_type.value?this.formSubmitPurchase():this.formSubmitExpense()}formSubmitExpense(){let t=new FormData;t.append("party",this.party_receipt?.value?.id),t.append("amount",this.amount_receipt.value),t.append("remarks",this.receipt_remark.value),t.append("non_gst",this.expense_non_gst.value),t.append("payment_account",this.payment_account_receipt.value),this.cartService.expensePayment(t).subscribe({next:i=>{console.log("response receipt",i),i.isSuccess?(this.toastr.success(i.msg),this.receiptPaymentForm.reset(),document.querySelector(".receiptModalClose").click(),this.expense_non_gst.value(!1)):this.toastr.error(i.msg)},error:i=>{console.log(i),this.toastr.error(i.message)}})}formSubmitPurchase(){let t=new FormData;if("UPI"===this.payment_mode.value){let i={upi_no:Number(this.upi_id_receipt.value),payment_account:Number(this.payment_account_receipt.value)};"Advance"==this.payment_type.value?(t.append("party",this.party_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",""),t.append("card_detail",""),t.append("bank_detail",""),t.append("upi_detail",JSON.stringify(i))):(t.append("party",this.party_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",this.receipt_sales.value),t.append("card_detail",""),t.append("bank_detail",""),t.append("upi_detail",JSON.stringify(i)))}else if("Bank"===this.payment_mode.value){let i={payment_account:Number(this.payment_account_receipt.value),account_no:this.receipt_account_no.value};"Advance"==this.payment_type.value?(t.append("party",this.party_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",""),t.append("card_detail",""),t.append("bank_detail",JSON.stringify(i)),t.append("upi_detail","")):(t.append("party",this.party_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",this.receipt_sales.value),t.append("card_detail",""),t.append("bank_detail",JSON.stringify(i)),t.append("upi_detail",""))}else if("Card"===this.payment_mode.value){let i={payment_account:Number(this.payment_account_receipt.value),customer_bank_name:this.receipt_customer_bank_name.value,card_payment_amount:this.receipt_card_payment_amount.value,card_holder_name:this.receipt_card_holder_name.value,cart_transactions_no:this.receipt_cart_transactions_no.value};"Advance"==this.payment_type.value?(t.append("party",this.party_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",""),t.append("card_detail",JSON.stringify(i)),t.append("bank_detail",""),t.append("upi_detail","")):(t.append("party",this.party_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",this.receipt_sales.value),t.append("card_detail",JSON.stringify(i)),t.append("bank_detail",""),t.append("upi_detail",""))}else"Advance"==this.payment_type.value?(t.append("party",this.party_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",""),t.append("card_detail",""),t.append("bank_detail",""),t.append("upi_detail","")):(t.append("party",this.party_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",this.receipt_sales.value),t.append("card_detail",""),t.append("bank_detail",""),t.append("upi_detail",""));this.cartService.purchasePayment(t).subscribe({next:i=>{console.log("response receipt",i),i.isSuccess?(this.toastr.success(i.msg),this.receiptPaymentForm.reset(),document.querySelector(".receiptModalClose").click()):this.toastr.error(i.msg)},error:i=>{console.log(i),this.toastr.error(i.message)}})}formSubmitReceipt(){let t=new FormData;if("UPI"===this.payment_mode.value){let i={upi_no:Number(this.upi_id_receipt.value),payment_account:Number(this.payment_account_receipt.value)};"Advance"==this.payment_type.value?(t.append("customer",this.customer_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",""),t.append("card_detail",""),t.append("bank_detail",""),t.append("upi_detail",JSON.stringify(i))):(t.append("customer",this.customer_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",this.receipt_sales.value),t.append("card_detail",""),t.append("bank_detail",""),t.append("upi_detail",JSON.stringify(i)))}else if("Bank"===this.payment_mode.value){let i={payment_account:Number(this.payment_account_receipt.value),account_no:this.receipt_account_no.value};"Advance"==this.payment_type.value?(t.append("customer",this.customer_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",""),t.append("card_detail",""),t.append("bank_detail",JSON.stringify(i)),t.append("upi_detail","")):(t.append("customer",this.customer_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",this.receipt_sales.value),t.append("card_detail",""),t.append("bank_detail",JSON.stringify(i)),t.append("upi_detail",""))}else if("Card"===this.payment_mode.value){let i={payment_account:Number(this.payment_account_receipt.value),customer_bank_name:this.receipt_customer_bank_name.value,card_payment_amount:this.receipt_card_payment_amount.value,card_holder_name:this.receipt_card_holder_name.value,cart_transactions_no:this.receipt_cart_transactions_no.value};"Advance"==this.payment_type.value?(t.append("customer",this.customer_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",""),t.append("card_detail",JSON.stringify(i)),t.append("bank_detail",""),t.append("upi_detail","")):(t.append("customer",this.customer_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",this.receipt_sales.value),t.append("card_detail",JSON.stringify(i)),t.append("bank_detail",""),t.append("upi_detail",""))}else"Advance"==this.payment_type.value?(t.append("customer",this.customer_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",""),t.append("card_detail",""),t.append("bank_detail",""),t.append("upi_detail","")):(t.append("customer",this.customer_receipt?.value?.id),t.append("receipt_method",this.payment_type.value),t.append("payment_mode",this.payment_mode.value),t.append("amount",this.amount_receipt.value),t.append("description",this.receipt_remark.value),t.append("bill_no",this.receipt_sales.value),t.append("card_detail",""),t.append("bank_detail",""),t.append("upi_detail",""));this.cartService.receiptPayment(t).subscribe({next:i=>{console.log("response receipt",i),i.isSuccess?(this.toastr.success(i.msg),this.receiptPaymentForm.reset(),document.querySelector(".receiptModalClose").click()):this.toastr.error(i.msg)},error:i=>{console.log(i),this.toastr.error(i.message)}})}saveAndNext(){}isFormValid(){}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Z.u),e.Y36(r.qu),e.Y36(A._W),e.Y36(T.r),e.Y36(u.eN),e.Y36(q.v),e.Y36(b.p))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-payment"]],viewQuery:function(t,i){if(1&t&&e.Gf(C,5),2&t){let c;e.iGM(c=e.CRH())&&(i.tabGroup=c.first)}},decls:38,vars:13,consts:[[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-12"],[1,"form-group"],[1,"d-block"],[1,"row","justify-center"],[1,"radio-payments-modal-wrapper","d-flex","justify-content-around"],["class","form-check",4,"ngFor","ngForOf"],["class","alert alert-danger",4,"ngIf"],["class","col-sm-12",4,"ngIf"],["class","col-sm-6",4,"ngIf"],[1,"col-sm-6"],["type","number","formControlName","amount_receipt","placeholder","Enter Amount",1,"form-control"],["class","col-sm-8",4,"ngIf"],["class","row",4,"ngIf"],[1,"form-group","mb-0"],["type","text","formControlName","receipt_remark","placeholder","Enter Remark",1,"form-control"],[1,"row","mt-2"],[1,"col-sm-12","d-flex","justify-content-center"],["type","submit",1,"btn","btn-dark","modal2BtnPos"],[1,"form-check"],["type","radio","formControlName","voucher_type",1,"form-check-input",3,"value"],[1,"form-check-label"],[1,"alert","alert-danger"],[4,"ngIf"],["type","radio","formControlName","payment_type",1,"form-check-input",3,"value"],["formControlName","payment_mode",1,"form-select"],["disabled","","selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formControlName","receipt_sales",1,"form-select"],[1,"col-sm-8"],["type","text","placeholder","Search for a Customer",1,"form-control",3,"formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["autoReceipt","matAutocomplete"],["class","is-loading",4,"ngIf"],[1,"is-loading"],["type","text","placeholder","Search for a Party",1,"form-control",3,"formControl","matAutocomplete"],["partyReceipt","matAutocomplete"],["formControlName","payment_account",1,"form-select"],["value","","disabled","","selected",""],["type","text","placeholder","UPI ID","formControlName","upi_id",1,"form-control"],["type","text","placeholder","Account No","formControlName","account_no",1,"form-control"],["type","text","placeholder","Customer Bank Name","formControlName","customer_bank_name",1,"form-control"],["type","number","placeholder","Card Payment Amount","formControlName","card_payment_amount",1,"form-control"],["type","text","placeholder","Card Holder Name","formControlName","card_holder_name",1,"form-control"],["type","number","placeholder","Card Transaction No","formControlName","cart_transactions_no",1,"form-control"],[1,"checkbox"],["type","checkbox","formControlName","non_gst"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return i.receiptFormSubmit()}),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Select Voucher Type"),e.qZA(),e.TgZ(6,"div",5)(7,"div",2)(8,"div",6),e.YNc(9,N,4,2,"div",7),e.qZA()()()(),e.YNc(10,k,2,1,"div",8),e.qZA()(),e.TgZ(11,"div",1),e.YNc(12,Q,7,2,"div",9),e.YNc(13,M,9,2,"div",10),e.YNc(14,L,9,2,"div",10),e.TgZ(15,"div",11)(16,"div",3)(17,"label"),e._uU(18,"Amount"),e.qZA(),e._UZ(19,"input",12),e.qZA(),e.YNc(20,j,2,1,"div",8),e.qZA(),e.TgZ(21,"div",1),e.YNc(22,K,12,8,"div",13),e.YNc(23,re,12,8,"div",13),e.qZA()(),e.YNc(24,ye,12,4,"div",14),e.YNc(25,Te,25,4,"div",14),e.YNc(26,Fe,7,1,"div",14),e.TgZ(27,"div",1)(28,"div",2)(29,"div",15)(30,"label"),e._uU(31,"Remark"),e.qZA(),e._UZ(32,"input",16),e.qZA(),e.YNc(33,Ne,2,1,"div",8),e.qZA()(),e.TgZ(34,"div",17)(35,"div",18)(36,"button",19),e._uU(37,"Save"),e.qZA()()()()),2&t&&(e.Q6J("formGroup",i.receiptPaymentForm),e.xp6(9),e.Q6J("ngForOf",i.voucherType),e.xp6(1),e.Q6J("ngIf",i.voucher_type.invalid&&(i.voucher_type.dirty||i.voucher_type.touched)),e.xp6(2),e.Q6J("ngIf","sales"===i.receiptPaymentForm.get("voucher_type").value||"purchase"===i.receiptPaymentForm.get("voucher_type").value),e.xp6(1),e.Q6J("ngIf","sales"===i.receiptPaymentForm.get("voucher_type").value||"purchase"===i.receiptPaymentForm.get("voucher_type").value),e.xp6(1),e.Q6J("ngIf","Against Bill"===i.receiptPaymentForm.get("payment_type").value),e.xp6(6),e.Q6J("ngIf",i.amount_receipt.invalid&&(i.amount_receipt.dirty||i.amount_receipt.touched)),e.xp6(2),e.Q6J("ngIf","sales"===i.receiptPaymentForm.get("voucher_type").value),e.xp6(1),e.Q6J("ngIf","purchase"===i.receiptPaymentForm.get("voucher_type").value||"expense"===i.receiptPaymentForm.get("voucher_type").value),e.xp6(1),e.Q6J("ngIf","Cash"!==i.receiptPaymentForm.get("payment_mode").value),e.xp6(1),e.Q6J("ngIf","Card"===i.receiptPaymentForm.get("payment_mode").value),e.xp6(1),e.Q6J("ngIf","expense"===i.receiptPaymentForm.get("voucher_type").value),e.xp6(7),e.Q6J("ngIf",i.receipt_remark.invalid&&(i.receipt_remark.dirty||i.receipt_remark.touched)))},dependencies:[d.sg,d.O5,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.Wl,r.EJ,r._,r.JJ,r.JL,r.oH,r.sg,r.u,s.XC,s.ZL,F.ey]}),a})()}];let ke=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[l.Bz.forChild(Ie),l.Bz]}),a})();var Je=p(4144),Ve=p(9549),Ue=p(3848),Qe=p(7392);let Se=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[d.ez,ke,r.u5,r.UX,s.Bb,Ve.lN,Je.c,Qe.Ps,Ue.Nh]}),a})()}}]);