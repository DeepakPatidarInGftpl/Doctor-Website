"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[2918],{72918:(T,C,c)=>{c.r(C),c.d(C,{EditbrandModule:()=>Q});var d=c(96814),g=c(74408),n=c(56223),t=c(19212),A=c(44293),Z=c(58763),h=c(41789);function G(o,s){1&o&&(t.TgZ(0,"span",30),t._uU(1,"Enter Brand "),t.qZA())}function m(o,s){1&o&&(t.TgZ(0,"span",30),t._uU(1,"Enter code "),t.qZA())}function f(o,s){1&o&&(t.TgZ(0,"span",30),t._uU(1,"Enter discount (ex-1-100) "),t.qZA())}const l=o=>({"is-invalid":o});function p(o,s){if(1&o){const r=t.EpF();t.TgZ(0,"a",31)(1,"input",32,33),t.NdJ("change",function(e){t.CHM(r);const a=t.oxw();return t.KtG(a.onCheckCategory(e))}),t.qZA(),t.TgZ(3,"label",34),t.NdJ("click",function(e){t.CHM(r);const a=t.oxw();return t.KtG(a.onLabelClick(e))}),t._uU(4),t.qZA()()}if(2&o){const r=s.$implicit,i=s.index,e=t.oxw();t.xp6(1),t.Q6J("value",r.id)("checked",e.selectCat.includes(r.id)||e.selectedCategoryIds.includes(r.id))("ngClass",t.VKq(6,l,e.f.category.touched&&e.f.category.invalid))("id","checkboxCat-"+i),t.xp6(2),t.Q6J("for","checkboxCat-"+i),t.xp6(1),t.Oqu(r.title)}}function _(o,s){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const r=t.oxw();t.xp6(1),t.Oqu(r.selectedCat+" Category Selected")}}function y(o,s){1&o&&(t.TgZ(0,"span",30),t._uU(1,"Select Category "),t.qZA())}function S(o,s){if(1&o){const r=t.EpF();t.TgZ(0,"a",31)(1,"input",35),t.NdJ("change",function(e){t.CHM(r);const a=t.oxw();return t.KtG(a.onCheckSize(e))}),t.qZA(),t.TgZ(2,"label",34),t.NdJ("click",function(e){t.CHM(r);const a=t.oxw();return t.KtG(a.onLabelClick(e))}),t._uU(3),t.qZA()()}if(2&o){const r=s.$implicit,i=s.index,e=t.oxw();t.xp6(1),t.Q6J("value",r.id)("ngClass",t.VKq(6,l,e.f.subcategory_group.touched&&e.f.subcategory_group.invalid))("id","checkbox-"+i)("checked",e.subcatGroup.includes(r.id)||e.selectedSubCategoryGroupIds.includes(r.id)),t.xp6(1),t.Q6J("for","checkbox-"+i),t.xp6(1),t.Oqu(r.title)}}function v(o,s){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const r=t.oxw();t.xp6(1),t.Oqu(r.selectedSubCatGrp+" Subcategory group Selected")}}function M(o,s){1&o&&(t.TgZ(0,"span",30),t._uU(1,"Select subcategory group "),t.qZA())}function w(o,s){if(1&o){const r=t.EpF();t.TgZ(0,"a",31)(1,"input",36),t.NdJ("change",function(e){t.CHM(r);const a=t.oxw();return t.KtG(a.onCheckChange(e))}),t.qZA(),t.TgZ(2,"label",34),t.NdJ("click",function(e){t.CHM(r);const a=t.oxw();return t.KtG(a.onLabelClick(e))}),t._uU(3),t.qZA()()}if(2&o){const r=s.$implicit,i=s.index,e=t.oxw();t.xp6(1),t.Q6J("value",r.id)("checked",e.selectSubcat.includes(r.id)||e.selectedSubCategoryIds.includes(null==r?null:r.id))("ngClass",t.VKq(6,l,e.f.subcategory.touched&&e.f.subcategory.invalid))("id","checkboxSub-"+i),t.xp6(1),t.Q6J("for","checkboxSub-"+i),t.xp6(1),t.Oqu(r.title)}}function I(o,s){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const r=t.oxw();t.xp6(1),t.Oqu(r.selectedSubcat+" Subcategory Selected")}}function F(o,s){1&o&&(t.TgZ(0,"span",30),t._uU(1,"Select subcategory "),t.qZA())}function E(o,s){1&o&&(t.TgZ(0,"span",30),t._uU(1,"Select image"),t.qZA())}function J(o,s){if(1&o&&t._UZ(0,"img",37),2&o){const r=t.oxw();t.Q6J("src",r.url,t.LSH)}}function L(o,s){if(1&o&&t._UZ(0,"img",37),2&o){const r=t.oxw();t.Q6J("src",r.imgUrl+(null==r.updateData?null:r.updateData.image),t.LSH)}}function O(o,s){1&o&&(t.TgZ(0,"button",38),t._uU(1,"Submit"),t.qZA())}function q(o,s){1&o&&(t.TgZ(0,"button",39),t._UZ(1,"span",40),t._uU(2,"\xa0Submit"),t.qZA())}const x=()=>({standalone:!0}),k=[{path:"",component:(()=>{class o{get f(){return this.brandForm.controls}constructor(r,i,e,a,u,b){this.coreService=r,this.fb=i,this.Arout=e,this.toastr=a,this.router=u,this.cs=b,this.show=!1,this.imgUrl="https://pv.greatfuturetechno.com",this.dropdownList=[],this.selectedItems=[],this.dropdownSettings={},this.subcatGroup=[],this.selectSubcat=[],this.selectCat=[],this.categoryList=[],this.filteredCategoryList=[],this.searchCategory="",this.selectedCat=0,this.selectedCategoryIds=[],this.subcatGroupList=[],this.filteredSubCategoryGroupList=[],this.searchSubCategoryGroup="",this.selectedSubCategoryGroupIds=[],this.subcatbySubcatGroup=[],this.filteredSubCategoryList=[],this.searchSubCategory="",this.selectedSubcat=0,this.selectedSubCategoryIds=[],this.selectedSubCatGrp=0,this.loaders=!1}ngOnInit(){this.id=this.Arout.snapshot.paramMap.get("id"),this.brandForm=new n.cw({title:new n.NI("",[n.kI.required]),code:new n.NI(""),image:new n.NI(""),discount:new n.NI("",[n.kI.pattern(/^(100|[0-9]{1,2})$/)]),category:new n.Oe([]),subcategory_group:new n.Oe([],[n.kI.required]),subcategory:new n.Oe([],[n.kI.required])}),this.dropdownSettings={singleSelection:!1,idField:"id",textField:"product_title",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!0},this.coreService.getbrandById(this.id).subscribe(r=>{this.url="",this.id==r.id&&(this.updateData=r,this.subcatId=r.subcategory_group[0].id,this.subcatGroup=r?.subcategory_group.map(i=>i.id),this.selectSubcat=r?.subcategory.map(i=>i.id),this.selectCat=r?.category.map(i=>i?.id),this.brandForm.patchValue({title:r.title,code:r.code,discount:r.discount}),r?.category.length>0&&this.getSubcatGroupByCategory(this.selectCat),this.getSubcategoryBySubcatGroup(this.subcatGroup),this.getCategory())})}onItemSelect(r){this.brandForm.get("variant").push(new n.NI(r.id))}onItemDeselect(r){let i=this.brandForm.get("variant");const e=i.controls.findIndex(a=>a.value===r.id);-1!==e&&i.removeAt(e)}onSelectAll(r){let i=this.brandForm.get("variant");r.forEach(e=>{i.push(new n.NI(e.id))})}onDeselectAll(r){this.brandForm.get("variant").clear()}getCategory(){this.coreService.getCategory().subscribe(r=>{this.categoryList=r,this.filteredCategoryList=[...this.categoryList],this.categoryList.map(i=>{this.selectedCat=this.selectCat.length,this.selectCat.includes(i.id)&&this.brandForm.get("category").push(new n.NI(i.id))})})}filterCategory(){this.filteredCategoryList=""===this.searchCategory.trim()?[...this.categoryList]:this.categoryList.filter(r=>r.title.toLowerCase().includes(this.searchCategory.toLowerCase()))}onCheckCategory(r){const i=this.brandForm.get("category");if(r.target.checked)i.push(new n.NI(parseInt(r.target.value))),this.check=i,this.selectedCat++,this.selectedCategoryIds=i.value,this.getSubcatGroupByCategory(i.value);else{let e=0;i.controls.forEach(a=>{if(a.value==r.target.value)return i.removeAt(e),this.selectedCat--,void this.getSubcatGroupByCategory(i.value);e++})}}getSubcatGroupByCategory(r){const i=JSON.stringify(r);this.coreService.getSubcategoryGroupByCategoryid(i).subscribe(e=>{this.subcatGroupList=e,this.filteredSubCategoryGroupList=[...this.subcatGroupList],this.subcatGroupList.map(a=>{this.selectedSubCatGrp=this.subcatGroup.length,this.subcatGroup.includes(a.id)&&this.brandForm.get("subcategory_group").push(new n.NI(a.id))})})}filterSubCategoryGroup(){this.filteredSubCategoryGroupList=""===this.searchSubCategoryGroup.trim()?[...this.subcatGroupList]:this.subcatGroupList.filter(r=>r.title.toLowerCase().includes(this.searchSubCategoryGroup.toLowerCase()))}onSelect(r){const i=r.target.files[0];if(i){const e=new FileReader;e.readAsDataURL(i),e.onload=()=>{this.url=e.result}}this.brandForm.patchValue({image:i}),this.brandForm.get("image")?.updateValueAndValidity()}getSubcatGroup(){this.coreService.getSubcategoryGroup().subscribe(r=>{this.subcatGroupList=r,this.subcatGroupList.map(i=>{this.subcatGroup.includes(i.id)&&this.brandForm.get("subcategory_group").push(new n.NI(i.id))})})}onCheckSize(r){const i=this.brandForm.get("subcategory_group");if(r.target.checked)i.push(new n.NI(parseInt(r.target.value))),this.check=i,this.selectedSubCatGrp++,this.getSubcategoryBySubcatGroup(i.value),this.selectedSubCategoryGroupIds=i.value;else{let e=0;i.controls.forEach(a=>{if(a.value==r.target.value)return i.removeAt(e),this.selectedSubCatGrp--,void this.getSubcategoryBySubcatGroup(i.value);e++})}}getSubcategoryBySubcatGroup(r){const i=JSON.stringify(r);this.coreService.getSubcategoryBySubcatGroupid(i).subscribe(e=>{this.subcatbySubcatGroup=this.filterDuplicates(e),this.filteredSubCategoryList=[...this.subcatbySubcatGroup],this.subcatbySubcatGroup.map(a=>{this.selectedSubcat=this.selectSubcat.length,this.selectSubcat.includes(a.id)&&this.brandForm.get("subcategory").push(new n.NI(a.id))})})}filterDuplicates(r){const i={},e=[];for(const a of r)i[a.id]||(i[a.id]=!0,e.push(a));return e}filterSubCategory(){this.filteredSubCategoryList=""===this.searchSubCategory.trim()?[...this.subcatbySubcatGroup]:this.subcatbySubcatGroup.filter(r=>r.title.toLowerCase().includes(this.searchSubCategory.toLowerCase()))}onCheckChange(r){const i=this.brandForm.get("subcategory");if(r.target.checked)i.push(new n.NI(parseInt(r.target.value))),this.check=i,this.selectedSubcat++,this.selectedSubCategoryIds=i.value;else{let e=0;i.controls.forEach(a=>{if(a.value==r.target.value)return i.removeAt(e),void this.selectedSubcat--;e++})}}update(){var r=new FormData;const i=Array.from(new Set(this.brandForm.get("category")?.value)),e=Array.from(new Set(this.brandForm.get("subcategory_group")?.value)),a=Array.from(new Set(this.brandForm.get("subcategory")?.value));if(r.append("title",this.brandForm.get("title")?.value),r.append("code",this.brandForm.get("code")?.value),r.append("discount",this.brandForm.get("discount")?.value),r.append("category",JSON.stringify(i)),r.append("subcategory_group",JSON.stringify(e)),r.append("subcategory",JSON.stringify(a)),this.brandForm.valid){this.loaders=!0;const u=this.brandForm.get("image")?.value;u&&u instanceof File?(r.append("image",u),this.coreService.updatebrand(r,this.id).subscribe(b=>{this.addRes=b,this.addRes.success?(this.loaders=!1,this.toastr.success(this.addRes.msg),this.router.navigate(["//product/brandlist"]),this.updateData="",this.url="",this.brandForm.reset(),this.selectedSubcat=0,this.selectedSubCatGrp=0):this.loaders=!1},b=>{})):this.coreService.updatebrand(r,this.id).subscribe(b=>{this.addRes=b,this.addRes.success&&(this.loaders=!1,this.updateData="",this.url="",this.toastr.success(this.addRes.msg),this.router.navigate(["//product/brandlist"]),this.brandForm.reset(),this.selectedSubcat=0,this.selectedSubCatGrp=0)},b=>{})}else this.brandForm.markAllAsTouched(),this.toastr.error("Please Fill All The Required Fields")}get title(){return this.brandForm.get("title")}get image(){return this.brandForm.get("image")}get code(){return this.brandForm.get("code")}get subcategory_group(){return this.brandForm.get("subcategory_group")}get subcategory(){return this.brandForm.get("subcategory")}get discount(){return this.brandForm.get("discount")}get category(){return this.brandForm.get("category")}onLabelClick(r){r.stopPropagation()}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(A.p),t.Y36(n.qu),t.Y36(g.gz),t.Y36(Z._W),t.Y36(g.F0),t.Y36(h.J))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-editbrand"]],decls:92,vars:36,consts:[[1,"page-header"],[1,"page-title"],[1,"card"],[1,"card-body"],[1,"row"],[3,"formGroup","ngSubmit"],[1,"col-lg-6","col-sm-6","col-12"],[1,"form-group"],["type","text","formControlName","title","id","title",3,"ngClass"],["class","text-danger",4,"ngIf"],["type","text","formControlName","code","id","code",3,"ngClass"],["type","text","formControlName","discount","id","discount",3,"ngClass"],[1,"dropdown"],["type","button","type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","button"],[1,"dropdown-menu",2,"width","100%","max-height","300px","overflow-y","auto"],["type","text","placeholder","search category",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["class","dropdown-item",4,"ngFor","ngForOf"],[4,"ngIf"],["type","text","placeholder","search subcategory group",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["type","text","placeholder","search subcategory",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"col-lg-6"],[1,"image-upload"],["type","file","formControlName","image",3,"change"],[1,"image-uploads"],["src","assets/img/icons/upload.svg","alt","img"],["alt","","class","p_img",3,"src",4,"ngIf"],[1,"col-lg-12"],["class","btn btn-submit me-2",4,"ngIf"],["class","btn btn-submit me-2","type","submit","disabled","",4,"ngIf"],["routerLink","//product/brandlist",1,"btn","btn-cancel"],[1,"text-danger"],[1,"dropdown-item"],["type","checkbox","formArrayName","category",2,"margin-right","5px",3,"value","checked","ngClass","id","change"],["categoryValue",""],[2,"margin-bottom","0",3,"for","click"],["type","checkbox","formArrayName","subcategory_group",2,"margin-right","5px",3,"value","ngClass","id","checked","change"],["type","checkbox","formArrayName","subcategory",2,"margin-right","5px",3,"value","checked","ngClass","id","change"],["alt","",1,"p_img",3,"src"],[1,"btn","btn-submit","me-2"],["type","submit","disabled","",1,"btn","btn-submit","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3,"Brand Edit"),t.qZA(),t.TgZ(4,"h6"),t._uU(5,"Update your Brand"),t.qZA()()(),t.TgZ(6,"div",2)(7,"div",3)(8,"div",4)(9,"form",5),t.NdJ("ngSubmit",function(){return e.update()}),t.TgZ(10,"div",4)(11,"div",6)(12,"div",7)(13,"label"),t._uU(14,"Brand*"),t.qZA(),t._UZ(15,"input",8),t.YNc(16,G,2,0,"span",9),t.qZA()(),t.TgZ(17,"div",6)(18,"div",7)(19,"label"),t._uU(20,"Code"),t.qZA(),t._UZ(21,"input",10),t.YNc(22,m,2,0,"span",9),t.qZA()(),t.TgZ(23,"div",6)(24,"div",7)(25,"label"),t._uU(26,"Discount %"),t.qZA(),t._UZ(27,"input",11),t.YNc(28,f,2,0,"span",9),t.qZA()(),t.TgZ(29,"div",6)(30,"div",7)(31,"label"),t._uU(32,"Category"),t.qZA(),t.TgZ(33,"div",12)(34,"button",13),t._uU(35,"Select Category"),t.qZA(),t.TgZ(36,"ul",14)(37,"li")(38,"input",15),t.NdJ("ngModelChange",function(u){return e.searchCategory=u})("ngModelChange",function(){return e.filterCategory()}),t.qZA()(),t.TgZ(39,"li"),t.YNc(40,p,5,8,"a",16),t.qZA()()(),t.YNc(41,_,2,1,"p",17)(42,y,2,0,"span",9),t.qZA()(),t.TgZ(43,"div",6)(44,"div",7)(45,"label"),t._uU(46,"Subcategory group"),t.qZA(),t.TgZ(47,"div",12)(48,"button",13),t._uU(49,"Select Subcategory group"),t.qZA(),t.TgZ(50,"ul",14)(51,"li")(52,"input",18),t.NdJ("ngModelChange",function(u){return e.searchSubCategoryGroup=u})("ngModelChange",function(){return e.filterSubCategoryGroup()}),t.qZA()(),t.TgZ(53,"li"),t.YNc(54,S,4,8,"a",16),t.qZA()()(),t.YNc(55,v,2,1,"p",17)(56,M,2,0,"span",9),t.qZA()(),t.TgZ(57,"div",6)(58,"div",7)(59,"label"),t._uU(60,"SubCategory*"),t.qZA(),t.TgZ(61,"div",12)(62,"button",13),t._uU(63,"Select Subcategory"),t.qZA(),t.TgZ(64,"ul",14)(65,"li")(66,"input",19),t.NdJ("ngModelChange",function(u){return e.searchSubCategory=u})("ngModelChange",function(){return e.filterSubCategory()}),t.qZA()(),t.TgZ(67,"li"),t.YNc(68,w,4,8,"a",16),t.qZA()()(),t.YNc(69,I,2,1,"p",17)(70,F,2,0,"span",9),t.qZA()(),t.TgZ(71,"div",6)(72,"div",7)(73,"label"),t._uU(74," Brand Image*"),t.qZA(),t.TgZ(75,"div",4)(76,"div",20)(77,"div",21)(78,"input",22),t.NdJ("change",function(u){return e.onSelect(u)}),t.qZA(),t.TgZ(79,"div",23),t._UZ(80,"img",24),t.TgZ(81,"h4"),t._uU(82,"Drag and drop a file to upload"),t.qZA()(),t.YNc(83,E,2,0,"span",9),t.qZA()(),t.TgZ(84,"div",20),t.YNc(85,J,1,1,"img",25)(86,L,1,1,"img",25),t.qZA()()()(),t.TgZ(87,"div",26),t.YNc(88,O,2,0,"button",27)(89,q,3,0,"button",28),t.TgZ(90,"a",29),t._uU(91,"Cancel"),t.qZA()()()()()()()),2&i&&(t.xp6(9),t.Q6J("formGroup",e.brandForm),t.xp6(6),t.Q6J("ngClass",t.VKq(27,l,e.f.title.touched&&e.f.title.invalid)),t.xp6(1),t.Q6J("ngIf",e.title&&e.title.invalid&&e.title.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(29,l,e.f.code.touched&&e.f.code.invalid)),t.xp6(1),t.Q6J("ngIf",e.code&&e.code.invalid&&e.code.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(31,l,e.f.discount.touched&&e.f.discount.invalid)),t.xp6(1),t.Q6J("ngIf",e.discount&&e.discount.invalid&&e.discount.touched),t.xp6(10),t.Q6J("ngModel",e.searchCategory)("ngModelOptions",t.DdM(33,x)),t.xp6(2),t.Q6J("ngForOf",e.filteredCategoryList),t.xp6(1),t.Q6J("ngIf",e.selectedCat>0),t.xp6(1),t.Q6J("ngIf",e.category&&e.category.invalid&&e.category.touched),t.xp6(10),t.Q6J("ngModel",e.searchSubCategoryGroup)("ngModelOptions",t.DdM(34,x)),t.xp6(2),t.Q6J("ngForOf",e.filteredSubCategoryGroupList),t.xp6(1),t.Q6J("ngIf",e.selectedSubCatGrp>0),t.xp6(1),t.Q6J("ngIf",e.subcategory_group&&e.subcategory_group.invalid&&e.subcategory_group.touched),t.xp6(10),t.Q6J("ngModel",e.searchSubCategory)("ngModelOptions",t.DdM(35,x)),t.xp6(2),t.Q6J("ngForOf",e.filteredSubCategoryList),t.xp6(1),t.Q6J("ngIf",e.selectedSubcat>0),t.xp6(1),t.Q6J("ngIf",e.subcategory&&e.subcategory.invalid&&e.subcategory.touched),t.xp6(13),t.Q6J("ngIf",e.image&&e.image.invalid&&e.image.touched),t.xp6(2),t.Q6J("ngIf",e.url),t.xp6(1),t.Q6J("ngIf",!e.url),t.xp6(2),t.Q6J("ngIf",!e.loaders),t.xp6(1),t.Q6J("ngIf",e.loaders))},dependencies:[d.mk,d.sg,d.O5,g.rH,n._Y,n.Fj,n.JJ,n.JL,n.On,n.sg,n.u,n.CE],styles:['.table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){border-top:none!important}.labelSize[_ngcontent-%COMP%]{display:flex;align-items:center}.entries[_ngcontent-%COMP%]{font-size:12px;color:#5e5873;font-weight:600}.labelSize[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid #ced4da;width:80px;height:30px;padding:0;border-radius:3px}.thone[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{float:unset;margin-left:5px}@media (max-width: 765px){.thone[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{float:inherit;margin-top:0}}.fa-sort[_ngcontent-%COMP%]:before{content:"\\f0dc";right:.5em;color:#babfc7;font-size:12px;opacity:1}.ng-dirty.ng-invalid.is-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}select[_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], input[type=button][_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;padding:10px 15px;border-radius:5px}.button[_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;display:flex;padding:10px 15px;border-radius:5px;justify-content:space-between;align-items:center;background:white}.p_img[_ngcontent-%COMP%]{margin-right:3rem!important;height:100px}']})}return o})(),canActivate:[c(1971).l],data:{allowedRoles:["change_brands"]}}];let D=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#r=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(k),g.Bz]})}return o})();var P=c(16047);let Q=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#r=this.\u0275inj=t.cJS({imports:[d.ez,D,P.I]})}return o})()},1971:(T,C,c)=>{c.d(C,{l:()=>Z});var d=c(19212),g=c(74408),n=c(58763),t=c(41789),A=c(44293);let Z=(()=>{class h{constructor(m,f,l,p,_){this.router=m,this.Arout=f,this.toastr=l,this.profileService=p,this.coreService=_}canActivate(m,f){const l=JSON.parse(localStorage.getItem("auth"));if(this.profileService.userDetails$.subscribe(p=>{this.userDetails=p,this.permissions=this.userDetails?.permission}),l){const p=m.data.allowedRoles;console.log(p,"allowedRoles");const _=l.some(y=>p.includes(y.codename));if(console.log(_),this.coreService.getProfile().subscribe(y=>{this.userDetails=y,this.profileService.setUserDetails(this.userDetails);const S=y?.permission,v=this.profileService.getUserDetails();(!v||v.length!==S.length)&&(this.profileService.setUserPermission(S),window.location.reload())}),_)return!0}return this.toastr.error("User have Not Permission to Access This page"),this.router.navigate(["/dashboard"]),!1}static#t=this.\u0275fac=function(f){return new(f||h)(d.LFG(g.F0),d.LFG(g.gz),d.LFG(n._W),d.LFG(t.J),d.LFG(A.p))};static#e=this.\u0275prov=d.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()}}]);