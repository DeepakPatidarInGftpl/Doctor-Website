"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[94431],{35337:(A,P,d)=>{d.d(P,{D:()=>L});var x=d(96166),m=d(12983),w=d.n(m),E=d(61135),D=d(94650),v=d(36895),S=d(42917);let L=(()=>{class h{constructor(t,f){this._date_pipe=t,this._com=f,this.loaderPdf=new E.X(!1)}generatePdf(t){this.loaderPdf.next(!0),this._com.loadImage().then(f=>{const e=new x.default("p","mm","a4"),a=document.createElement("canvas"),_=a.getContext("2d");a.width=200,a.height=200,_.clearRect(0,0,200,200),_.drawImage(f,0,0,200,200);const M=a.toDataURL("image/png",.9),$=this._date_pipe.transform(t.Fist_date,"dd-MMMM-yyyy"),I=this._date_pipe.transform(t.Secouand_date,"dd-MMMM-yyyy"),F=[t.thead1],O=[t.tbody1],N=[t.table2head],R=t.foot2,G=R.length;let T=21;if("Goods Received"===t.Type||"New Stock Transfer"===t.Type||"Stock Transfer Request"===t.Type?T=13:"Invoice"===t.Type||"Purchase Return"===t.Type?T=18:"Scrap Entry"===t.Type&&(T=28),(o=>{const r=t.table2body.length%o,s=o-r;if(0!==r)for(let c=0;c<s;c++)t.table2body.push([])})(T),"Countra Voucher"!==t.Type&&"Debit Note"!==t.Type&&"Credit Note"!==t.Type){const o="Goods Received"===t.Type?99:"Scrap Entry"===t.Type?47:92;e.autoTable({head:N,body:t.table2body,foot:R,startY:o,margin:{top:o},headStyles:{fontSize:7,textColor:[0,0,0],fillColor:[255,202,153]},bodyStyles:{fillColor:[255,255,255],fontSize:8},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:7,halign:"left"},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:r=>{const{cell:s,table:c}=r,{x:y,y:l,width:n,height:g}=s;if(e.setDrawColor(0,0,0),e.setLineWidth(r.column.index===c.columns.length-1?.2:.4),e.line(s.x+s.width,s.y,s.x+s.width,s.y+s.height),"head"===r.section&&(r.row.index<=2&&(e.setLineWidth(.2),e.line(s.x,s.y,s.x+s.width,s.y)),4===r.column.index&&(e.setLineWidth(0),e.line(s.x+s.width,s.y,s.x+s.width,s.y+s.height))),"foot"===r.section){const z="Invoice"===t.Type||"Goods Received"===t.Type||"New Stock Transfer"===t.Type||"Stock Transfer Request"===t.Type;(0===r.row.index||1===r.row.index||r.row.index===G-1||z&&2===r.row.index)&&(e.setLineWidth(.2),e.line(y,l,y+n,l),e.line(y,l+g,y+n,l+g))}0===r.column.index&&(e.setLineWidth(.2),e.line(s.x,s.y,s.x,s.y+s.height))}})}("Goods Received"===t.Type||"New Stock Transfer"===t.Type||"Stock Transfer Request"===t.Type&&t.show)&&e.autoTable({head:t.Thead3,body:t.Tbody3,foot:t.Tfoot3,startY:e.lastAutoTable.finalY+2,headStyles:{fontSize:7,textColor:[0,0,0],fillColor:[255,202,153]},bodyStyles:{fillColor:[255,255,255],fontSize:8},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:7,halign:"left"},margin:{top:e.lastAutoTable.finalY+2},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:o=>{const{cell:i,table:r}=o,{x:s,y:c,width:y,height:l}=i;o.column.index==r.columns.length-1?(e.setDrawColor(0,0,0),e.setLineWidth(.2),e.line(i.x+i.width,i.y,i.x+i.width,i.y+i.height)):(e.setDrawColor(0,0,0),e.setLineWidth(.4),e.line(i.x+i.width,i.y,i.x+i.width,i.y+i.height)),"head"===o.section&&((0==o.row.index||1==o.row.index)&&(e.setDrawColor(0,0,0),e.setLineWidth(.2),e.line(i.x,i.y,i.x+i.width,i.y)),2==o.row.index&&(e.setDrawColor(0,0,0),e.setLineWidth(.2),e.line(i.x,i.y,i.x+i.width,i.y)),4===o.column.index&&(e.setDrawColor(0,0,0),e.setLineWidth(0),e.line(i.x+i.width,i.y,i.x+i.width,i.y+i.height))),"foot"===o.section&&((0===o.row.index||1===o.row.index||o.row.index===G-1)&&(e.setDrawColor(0,0,0),e.setLineWidth(.2),e.line(s,c,s+y,c),e.line(s,c+l,s+y,c+l)),("Invoice"===t.Type||"Goods Received"===t.Type&&2===o.row.index)&&(e.setDrawColor(0,0,0),e.setLineWidth(.2),e.line(s,c,s+y,c),e.line(s,c+l,s+y,c+l))),0==o.column.index&&(e.setDrawColor(0,0,0),e.setLineWidth(.2),e.line(i.x,i.y,i.x,i.y+i.height))}});const W=e.getNumberOfPages();for(let o=1;o<=W;o++){if(e.setPage(o),e.setFontSize(9),e.setFontSize(8),o===W){const l="Scrap Entry"===t.Type?278.4:t.table2body.length>=20?276.4:275.5;e.text(`${t.company_name} - Proudly coded`,16,l),e.setTextColor(24,129,176),e.text("by GFTPL",60,l),e.setTextColor(0,0,0),e.text("Thank You For The Business",157,l)}else e.text("Continued on next page",t.table2body.length>=20?160:190,t.table2body.length>=20?280.5:275);let i=14;e.addImage(M,"PNG",i,8,31,10),e.setFontSize(18),e.setTextColor(256,112,8),e.text(`${t.company_name}`,51,15),e.setTextColor(256,112,8),e.setTextColor(0,0,0),e.setFontSize(9),e.text(`GST ${t.company_gst}`,i,23),e.text(`${t.top_left_address_line1}`,i,27),e.text(`${t.top_left_address_line2}`,i,31),e.text(`Phone: ${t.top_left_phone}`,i,39),e.text(`Email: ${t.top_left_email}`,i,35),"Scrap Entry"!==t.Type&&(e.setTextColor(256,112,8),e.setFontSize(11),e.text("BILLING ADDRESS",i,48),e.setTextColor(0,0,0),e.setFontSize(9),e.text(`${t.company_name}`,i,55),e.text(`${t.BILLING_ADDRESS.address_line_1} ,${t.BILLING_ADDRESS.address_line_2}`,i,59),e.text(`${t.BILLING_ADDRESS.address_line_3}`,i,63),e.text(`Phone: ${t.BILLING_ADDRESS.phone}`,i,67),e.text(`${t.BILLING_ADDRESS.email}`,i,71)),e.setTextColor(0,0,0),e.setFontSize("Stock Transfer Request"===t.Type?16:19),e.text(`${t.Type}`,145,14),e.setDrawColor(0,0,0),e.setLineWidth(.2),e.line(197,17,142,17),e.setFontSize(7),e.text(`${t.Type} date : ${$}`,144,20),e.line(197,22,142,22),e.text(`${t.Type} no: ${t.order_no}`,144,25),e.line(197,27,142,27),e.text(`Page : ${o}`,144,30),e.line(197,32,142,32);let r=32;I&&(e.text(`Expiry Date : ${I}`,145,35),e.line(197,37,142,37),r=37),e.line(142,r,142,17),e.line(197,r,197,17);let s=159;"Scrap Entry"!==t.Type&&(e.setTextColor(256,112,8),e.setFontSize(11),e.text("SHIPPING ADDRESS",s,48),e.setTextColor(0,0,0),e.setFontSize(9),e.text(`${t.company_name}`,s,55),e.text(`${t.SHIPPING_ADDRESS.address_line_1} ,${t.SHIPPING_ADDRESS.address_line_2}`,s,59),e.text(`${t.SHIPPING_ADDRESS.address_line_3}`,s,63),e.text(`Phone: ${t.SHIPPING_ADDRESS.phone}`,s,67),e.text(`${t.SHIPPING_ADDRESS.email}`,s,71));const c=e.internal.pageSize.getWidth(),y=5;e.setDrawColor(224,224,224),e.setLineWidth(.2),e.line(y,42,c-y,42),w()(e,{head:F,body:"Scrap Entry"==t.Type?t.tbody1:O,startY:75,headStyles:{fontSize:"Goods Received"===t.Type?8:"Expense Voucher"===t.Type?7:9,textColor:[0,0,0],fillColor:[255,202,153]},alternateRowStyles:{fillColor:[255,255,255]},styles:{lineWidth:0,fillColor:void 0,halign:"center"},didDrawCell:l=>{if("body"===l.section||"head"===l.section){const{cell:n,table:g}=l;e.setDrawColor(0,0,0),e.setLineWidth(.2),0==l.row.index&&e.line(n.x,n.y,n.x+n.width,n.y),l.row.index==g.body.length-1&&e.line(n.x,n.y+n.height,n.x+n.width,n.y+n.height),0==l.column.index&&e.line(n.x,n.y,n.x,n.y+n.height),l.column.index==g.columns.length-1&&e.line(n.x+n.width,n.y,n.x+n.width,n.y+n.height)}}}),e.setDrawColor(0,0,0),e.setLineWidth(.2),"Goods Received"===t.Type?e.line(14,108.3,196,108.3):"Scrap Entry"==t.Type?e.line(14,53.5,196,53.5):"Countra Voucher"!==t.Type&&"Debit Note"!==t.Type&&"Credit Note"!==t.Type&&e.line(14,98.5,196,98.5)}e.save(`${t.Type}.pdf`,{returnPromise:!0}).then(()=>{setTimeout(()=>{this.loaderPdf.next(!1)},1e3)})})}set_address(t){let f={},e={};return t.address.map(a=>{"Billing"==a?.address_type&&a?.is_default?e={res:a}:"Shipping"==a.address_type&&a?.is_default&&(f={res:a})}),{fast_obj:e,secound_obj:f}}getBadgeClass(t){switch(t){case"Pending":return"pending-status-badge";case"Paid":return"approve-status-badge";default:return""}}}return h.\u0275fac=function(t){return new(t||h)(D.LFG(v.uU),D.LFG(S.J))},h.\u0275prov=D.Yz7({token:h,factory:h.\u0275fac}),h})()},30597:(A,P,d)=>{d.d(P,{l:()=>v});var x=d(94650),m=d(4392),w=d(97185),E=d(42917),D=d(80927);let v=(()=>{class S{constructor(h,C,t,f,e){this.router=h,this.Arout=C,this.toastr=t,this.profileService=f,this.coreService=e}canActivate(h,C){const t=JSON.parse(localStorage.getItem("auth"));if(this.profileService.userDetails$.subscribe(f=>{this.userDetails=f,this.permissions=this.userDetails?.permission}),t){const f=h.data.allowedRoles,e=t.some(_=>f.includes(_.codename));let a=this.coreService.profileData$.value;if(a&&a.username){this.userDetails=a,this.profileService.setUserDetails(this.userDetails),this.profileService.ProfileData$.next(a);const _=a?.permission,p=this.profileService.getUserDetails();(!p||p.length!==_.length)&&(this.profileService.setUserPermission(_),window.location.reload())}else this.coreService.getProfile().subscribe(_=>{this.userDetails=_,this.profileService.setUserDetails(this.userDetails),this.profileService.ProfileData$.next(_);const p=_?.permission,u=this.profileService.getUserDetails();(!u||u.length!==p.length)&&(this.profileService.setUserPermission(p),window.location.reload())});if(e)return!0}return this.toastr.error("User have Not Permission to Access This page"),this.router.navigate(["/dashboard"]),!1}}return S.\u0275fac=function(h){return new(h||S)(x.LFG(m.F0),x.LFG(m.gz),x.LFG(w._W),x.LFG(E.J),x.LFG(D.p))},S.\u0275prov=x.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})()}}]);