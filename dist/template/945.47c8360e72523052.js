"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[945],{60945:(C,f,o)=>{o.r(f),o.d(f,{AddMembershipModule:()=>I});var a=o(36895),l=o(89299),s=o(24006),e=o(94650),v=o(72266),A=o(97185);function p(t,r){1&t&&(e.TgZ(0,"span",20),e._uU(1,"Enter your Title "),e.qZA())}function Z(t,r){1&t&&(e.TgZ(0,"span",20),e._uU(1,"Enter your Points per 100 "),e.qZA())}function u(t,r){1&t&&(e.TgZ(0,"span",20),e._uU(1,"Enter your Purchase From"),e.qZA())}function g(t,r){1&t&&(e.TgZ(0,"span",20),e._uU(1,"Enter Purchase To"),e.qZA())}function h(t,r){1&t&&(e.TgZ(0,"span",20),e._uU(1,"Select Validity of Points "),e.qZA())}function m(t,r){1&t&&(e.TgZ(0,"span",20),e._uU(1,"Enter your Maximum Redemption Points "),e.qZA())}function c(t,r){1&t&&(e.TgZ(0,"button",21),e._uU(1,"Submit"),e.qZA())}function _(t,r){1&t&&(e.TgZ(0,"button",22),e._UZ(1,"span",23),e._uU(2,"\xa0 Submit"),e.qZA())}const d=function(t){return{"is-invalid":t}},y=[{path:"",component:(()=>{class t{constructor(n,i,M,F){this.fb=n,this.hrmService=i,this.toastr=M,this.router=F,this.dateError=null,this.loader=!1}get f(){return this.membershipForm.controls}ngOnInit(){this.membershipForm=this.fb.group({title:new s.NI("",[s.kI.required]),points_per_100:new s.NI("",[s.kI.required]),purchase_from:new s.NI("",[s.kI.required]),purchase_to:new s.NI(""),validity_of_points:new s.NI("",[s.kI.required]),maximum_redemption_points:new s.NI("",[s.kI.required])})}submit(){this.membershipForm.valid?(this.loader=!0,this.hrmService.addMembership(this.membershipForm.value).subscribe(n=>{this.addRes=n,this.addRes.success?(this.loader=!1,this.toastr.success(this.addRes.msg),this.membershipForm.reset(),this.router.navigate(["//settings/membership"])):this.loader=!1},n=>{this.loader=!1})):(this.membershipForm.markAllAsTouched(),this.toastr.error("Please Fill All The Required Fields"))}get title(){return this.membershipForm.get("title")}get points_per_100(){return this.membershipForm.get("points_per_100")}get purchase_from(){return this.membershipForm.get("purchase_from")}get purchase_to(){return this.membershipForm.get("purchase_to")}get validity_of_points(){return this.membershipForm.get("validity_of_points")}get maximum_redemption_points(){return this.membershipForm.get("maximum_redemption_points")}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(s.qu),e.Y36(v.z),e.Y36(A._W),e.Y36(l.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-membership"]],decls:51,vars:27,consts:[[1,"page-header"],[1,"page-title"],[1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-3","col-sm-3","col-12"],[1,"form-group"],["type","text","formControlName","title","placeholder","Enter title","id","title",3,"ngClass"],["class","text-danger",4,"ngIf"],["type","text","formControlName","points_per_100","placeholder","Enter Points Per 100","id","points_per_100",3,"ngClass"],["type","text","formControlName","purchase_from","placeholder","Enter Mobile No.","id","Purchase From",3,"ngClass"],["type","text","formControlName","purchase_to","placeholder","Enter Valid Purchase To","id","purchase_to",3,"ngClass"],["type","date","formControlName","validity_of_points","placeholder","Enter Validity of Points","id","Validity of Points",3,"ngClass"],[1,"col-lg-4","col-sm-4","col-12"],["type","text","formControlName","maximum_redemption_points","placeholder","Enter Maximum Redemption Points","id","maximum_redemption_points",3,"ngClass"],[1,"col-lg-12"],["class","btn btn-submit me-2",4,"ngIf"],["class","btn btn-submit me-2","type","submit","disabled","",4,"ngIf"],["routerLink","//settings/membership",1,"btn","btn-cancel"],[1,"text-danger"],[1,"btn","btn-submit","me-2"],["type","submit","disabled","",1,"btn","btn-submit","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4"),e._uU(3," Add Membership"),e.qZA(),e.TgZ(4,"h6"),e._uU(5,"Create new Membership "),e.qZA()()(),e.TgZ(6,"div",2)(7,"div",3)(8,"form",4),e.NdJ("ngSubmit",function(){return i.submit()}),e.TgZ(9,"div",5)(10,"div",6)(11,"div",7)(12,"label"),e._uU(13,"Title*"),e.qZA(),e._UZ(14,"input",8),e.YNc(15,p,2,0,"span",9),e.qZA()(),e.TgZ(16,"div",6)(17,"div",7)(18,"label"),e._uU(19,"Points Per 100*"),e.qZA(),e._UZ(20,"input",10),e.YNc(21,Z,2,0,"span",9),e.qZA()(),e.TgZ(22,"div",6)(23,"div",7)(24,"label"),e._uU(25,"Purchase From*"),e.qZA(),e._UZ(26,"input",11),e.YNc(27,u,2,0,"span",9),e.qZA()(),e.TgZ(28,"div",6)(29,"div",7)(30,"label"),e._uU(31,"Purchase To"),e.qZA(),e._UZ(32,"input",12),e.YNc(33,g,2,0,"span",9),e.qZA()(),e.TgZ(34,"div",6)(35,"div",7)(36,"label"),e._uU(37,"Validity of Points*"),e.qZA(),e._UZ(38,"input",13),e.YNc(39,h,2,0,"span",9),e.qZA()(),e.TgZ(40,"div",14)(41,"div",7)(42,"label"),e._uU(43,"Maximum Redemption Points*"),e.qZA(),e._UZ(44,"input",15),e.YNc(45,m,2,0,"span",9),e.qZA()(),e.TgZ(46,"div",16),e.YNc(47,c,2,0,"button",17),e.YNc(48,_,3,0,"button",18),e.TgZ(49,"a",19),e._uU(50,"Cancel"),e.qZA()()()()()()),2&n&&(e.xp6(8),e.Q6J("formGroup",i.membershipForm),e.xp6(6),e.Q6J("ngClass",e.VKq(15,d,i.f.title.touched&&i.f.title.invalid)),e.xp6(1),e.Q6J("ngIf",i.title&&i.title.invalid&&i.title.touched),e.xp6(5),e.Q6J("ngClass",e.VKq(17,d,i.f.points_per_100.touched&&i.f.points_per_100.invalid)),e.xp6(1),e.Q6J("ngIf",i.points_per_100&&i.points_per_100.invalid&&i.points_per_100.touched),e.xp6(5),e.Q6J("ngClass",e.VKq(19,d,i.f.purchase_from.touched&&i.f.purchase_from.invalid)),e.xp6(1),e.Q6J("ngIf",i.purchase_from&&i.purchase_from.invalid&&i.purchase_from.touched),e.xp6(5),e.Q6J("ngClass",e.VKq(21,d,i.f.purchase_to.touched&&i.f.purchase_to.invalid)),e.xp6(1),e.Q6J("ngIf",i.purchase_to&&i.purchase_to.invalid&&i.purchase_to.touched),e.xp6(5),e.Q6J("ngClass",e.VKq(23,d,i.f.validity_of_points.touched&&i.f.validity_of_points.invalid)),e.xp6(1),e.Q6J("ngIf",i.validity_of_points&&i.validity_of_points.invalid&&i.validity_of_points.touched),e.xp6(5),e.Q6J("ngClass",e.VKq(25,d,i.f.maximum_redemption_points.touched&&i.f.maximum_redemption_points.invalid)),e.xp6(1),e.Q6J("ngIf",i.maximum_redemption_points&&i.maximum_redemption_points.invalid&&i.maximum_redemption_points.touched),e.xp6(2),e.Q6J("ngIf",!i.loader),e.xp6(1),e.Q6J("ngIf",i.loader))},dependencies:[a.mk,a.O5,l.yS,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:[".ng-dirty.ng-invalid.is-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}select[_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], input[type=button][_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;padding:10px 15px;border-radius:5px}"]}),t})(),canActivate:[o(30597).l],data:{allowedRoles:["add_membership"]}}];let P=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.Bz.forChild(y),l.Bz]}),t})();var U=o(8468);let I=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[a.ez,P,U.I]}),t})()},30597:(C,f,o)=>{o.d(f,{l:()=>A});var a=o(94650),l=o(89299),s=o(97185),e=o(42917),v=o(80927);let A=(()=>{class p{constructor(u,g,h,m,c){this.router=u,this.Arout=g,this.toastr=h,this.profileService=m,this.coreService=c}canActivate(u,g){const h=JSON.parse(localStorage.getItem("auth"));if(this.profileService.userDetails$.subscribe(m=>{this.userDetails=m,this.permissions=this.userDetails?.permission}),h){const m=u.data.allowedRoles;console.log(m,"allowedRoles");const c=h.some(_=>m.includes(_.codename));if(console.log(c),this.coreService.getProfile().subscribe(_=>{this.userDetails=_,this.profileService.setUserDetails(this.userDetails);const d=_?.permission,b=this.profileService.getUserDetails();(!b||b.length!==d.length)&&(this.profileService.setUserPermission(d),window.location.reload())}),c)return!0}return this.toastr.error("User have Not Permission to Access This page"),this.router.navigate(["/dashboard"]),!1}}return p.\u0275fac=function(u){return new(u||p)(a.LFG(l.F0),a.LFG(l.gz),a.LFG(s._W),a.LFG(e.J),a.LFG(v.p))},p.\u0275prov=a.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);