"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[4939],{53506:(I,A,p)=>{p.d(A,{x:()=>S});var _=p(92340),f=p(94650),l=p(80529);let S=(()=>{class v{constructor(e){this.http=e,this.apiUrl=`${_.N.api}`}getBranch(){throw new Error("Method not implemented.")}getSupplier(e){return this.http.get(this.apiUrl+"/pv-api/supplier/?search="+e)}getPurchaseFY(e,n){console.log(n,"branch"),console.log(n.length,"branch");let s=this.apiUrl+"/pv-api/purchase_order/";const c=[];if(e&&c.push(`financial_year=${e}`),n&&n.length>0){const u=JSON.stringify(n);console.log(u),console.log(u?.length),c.push(`branch=${u}`)}return c.length>0&&(s+="?"+c.join("&")),this.http.get(s)}getPurchase(){return this.http.get(this.apiUrl+"/pv-api/purchase_order/")}addPurchase(e){return this.http.post(this.apiUrl+"/pv-api/purchase_order/",e)}getPurchaseById(e){return this.http.get(`${this.apiUrl+"/pv-api/purchase_order/?id="}${e}`)}PurchaseIsActive(e,n){return this.http.patch(`${this.apiUrl+"/pv-api/purchase_order/?id="}${e}`,n)}updatePurchase(e,n){return this.http.put(`${this.apiUrl+"/pv-api/purchase_order/?id="}${n}`,e)}deletePurchase(e){return this.http.delete(`${this.apiUrl+"/pv-api/purchase_order/?id="}${e}`)}searchProduct(e){return this.http.get(this.apiUrl+"/pv-api/product_search/?search="+e)}productVariant(){return this.http.get(this.apiUrl+"/pv-api/product_variant/")}getMaterialFY(e,n){console.log(n,"branch"),console.log(n.length,"branch");let s=this.apiUrl+"/pv-api/material_inward/";const c=[];if(e&&c.push(`financial_year=${e}`),n&&n.length>0){const u=JSON.stringify(n);console.log(u),console.log(u?.length),c.push(`branch=${u}`)}return c.length>0&&(s+="?"+c.join("&")),this.http.get(s)}getMaterial(){return this.http.get(this.apiUrl+"/pv-api/material_inward/")}addMaterial(e){return this.http.post(this.apiUrl+"/pv-api/material_inward/",e)}getMaterialById(e){return this.http.get(`${this.apiUrl+"/pv-api/material_inward/?id="}${e}`)}MaterialIsActive(e,n){return this.http.patch(`${this.apiUrl+"/pv-api/material_inward/?id="}${e}`,n)}updateMaterial(e,n){return this.http.put(`${this.apiUrl+"/pv-api/material_inward/?id="}${n}`,e)}deleteMaterial(e){return this.http.delete(`${this.apiUrl+"/pv-api/material_inward/?id="}${e}`)}getPurchaseBillFY(e,n){console.log(n,"branch"),console.log(n.length,"branch");let s=this.apiUrl+"/pv-api/purchase_bill/";const c=[];if(e&&c.push(`financial_year=${e}`),n&&n.length>0){const u=JSON.stringify(n);console.log(u),console.log(u?.length),c.push(`branch=${u}`)}return c.length>0&&(s+="?"+c.join("&")),this.http.get(s)}getPurchaseBill(){return this.http.get(this.apiUrl+"/pv-api/purchase_bill/")}addPurchaseBill(e){return this.http.post(this.apiUrl+"/pv-api/purchase_bill/",e)}getPurchaseBillById(e){return this.http.get(`${this.apiUrl+"/pv-api/purchase_bill/?id="}${e}`)}PurchaseBillIsActive(e,n){return this.http.patch(`${this.apiUrl+"/pv-api/purchase_bill/?id="}${e}`,n)}updatePurchaseBill(e,n){return this.http.put(`${this.apiUrl+"/pv-api/purchase_bill/?id="}${n}`,e)}deletePurchaseBill(e){return this.http.delete(`${this.apiUrl+"/pv-api/purchase_bill/?id="}${e}`)}getDebitNotes(e,n){console.log(n,"branch"),console.log(n.length,"branch");let s=this.apiUrl+"/pv-api/debit_note/";const c=[];if(e&&c.push(`financial_year=${e}`),n&&n.length>0){const u=JSON.stringify(n);console.log(u),console.log(u?.length),c.push(`branch=${u}`)}return c.length>0&&(s+="?"+c.join("&")),this.http.get(s)}addDebitNotes(e){return this.http.post(this.apiUrl+"/pv-api/debit_note/",e)}getDebitNotesById(e){return this.http.get(`${this.apiUrl+"/pv-api/debit_note/?id="}${e}`)}DebitNotesIsActive(e,n){return this.http.patch(`${this.apiUrl+"/pv-api/debit_note/?id="}${e}`,n)}updateDebitNotes(e,n){return this.http.put(`${this.apiUrl+"/pv-api/debit_note/?id="}${n}`,e)}deleteDebitNotes(e){return this.http.delete(`${this.apiUrl+"/pv-api/debit_note/?id="}${e}`)}getSearchProductById(e){return this.http.get(`${this.apiUrl+"/pv-api/variant-search/?search="}${e}`)}getSearchProduct(){return this.http.get(this.apiUrl+"/pv-api/variant-search/")}getPurchaseOrderPrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=PurchaseOrder")}getPurchaseBillPrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=PurchaseBill")}getDebitNotePrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=PurchaseReturn")}getMaterialInwardPrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=MaterialInward")}productBySupplier(){return this.http.get(this.apiUrl+"/pv-api/purchase_product_filter/")}getAdditionalCharge(){return this.http.get(this.apiUrl+"/pv-api/pos/additional_charge_pos/")}getTax(){return this.http.get(this.apiUrl+"/pv-api/tax/")}getPurchaseReturnfy(e,n){console.log(n,"branch"),console.log(n.length,"branch");let s=this.apiUrl+"/pv-api/purchase_return/";const c=[];if(e&&c.push(`financial_year=${e}`),n&&n.length>0){const u=JSON.stringify(n);console.log(u),console.log(u?.length),c.push(`branch=${u}`)}return c.length>0&&(s+="?"+c.join("&")),this.http.get(s)}getPurchaseReturn(){return this.http.get(this.apiUrl+"/pv-api/purchase_return/")}addPurchaseReturn(e){return this.http.post(this.apiUrl+"/pv-api/purchase_return/",e)}getPurchaseReturnById(e){return this.http.get(`${this.apiUrl+"/pv-api/purchase_return/?id="}${e}`)}PurchaseReturnIsActive(e,n){return this.http.patch(`${this.apiUrl+"/pv-api/purchase_return/?id="}${e}`,n)}updatePurchaseReturn(e,n){return this.http.put(`${this.apiUrl+"/pv-api/purchase_return/?id="}${n}`,e)}deletePurchaseReturn(e){return this.http.delete(`${this.apiUrl+"/pv-api/purchase_return/?id="}${e}`)}filterVariant(e,n,s,c){let u=this.apiUrl+"/pv-api/purchase_product_filter/";const g=[];return e&&g.push(`supplier=${e}`),n&&g.push(`category=${n}`),s&&g.push(`subcategory=${s}`),c&&g.push(`search=${c}`),g.length>0&&(u+="?"+g.join("&")),this.http.get(u)}}return v.\u0275fac=function(e){return new(e||v)(f.LFG(l.eN))},v.\u0275prov=f.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},84939:(I,A,p)=>{p.r(A),p.d(A,{AddScrapEntryModule:()=>W});var _=p(36895),f=p(89299),l=p(24006),S=p(68675),v=p(54004),t=p(94650),e=p(72170),n=p(80927),s=p(97185),c=p(53506),u=p(71071),g=p(47957),U=p(3238),y=p(59549),x=p(44144);function Z(i,d){1&i&&(t.TgZ(0,"span",25),t._uU(1,"Select Date"),t.qZA())}function N(i,d){if(1&i&&(t.TgZ(0,"option",26),t._uU(1),t.qZA()),2&i){const r=d.$implicit;t.s9C("value",r.id),t.xp6(1),t.Oqu(r.prefix)}}function T(i,d){1&i&&(t.TgZ(0,"span",25),t._uU(1,"Enter Voucher Series "),t.qZA())}function F(i,d){1&i&&(t.TgZ(0,"span",25),t._uU(1,"Enter Updater Name"),t.qZA())}function $(i,d){if(1&i){const r=t.EpF();t.TgZ(0,"span",27),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.addCart(0))}),t._uU(1,"Add Cart+"),t.qZA()}}function M(i,d){if(1&i){const r=t.EpF();t.O4$(),t.TgZ(0,"svg",49),t.NdJ("click",function(){t.CHM(r);const o=t.oxw().index,h=t.oxw();return t.KtG(h.addCart(o+1))}),t._UZ(1,"path",31)(2,"path",50),t.qZA()}}function w(i,d){if(1&i){const r=t.EpF();t.TgZ(0,"mat-option",52),t.NdJ("onSelectionChange",function(){t.CHM(r);const o=t.oxw().$implicit,h=t.oxw(2).index,m=t.oxw();return t.KtG(m.oncheckVariant(o,h))}),t._uU(1),t.qZA()}if(2&i){const r=t.oxw().$implicit;t.Q6J("value",(null==r?null:r.product_title)+" "+(null==r?null:r.variant_name)),t.xp6(1),t.hij(" ",(null==r?null:r.product_title)+" "+(null==r?null:r.variant_name)," ")}}function O(i,d){if(1&i&&(t.ynx(0),t.YNc(1,w,2,2,"mat-option",51),t.BQk()),2&i){const r=d.$implicit;t.xp6(1),t.Q6J("ngIf",1==r.is_active)}}function J(i,d){if(1&i&&(t.ynx(0),t.YNc(1,O,2,1,"ng-container",20),t.BQk()),2&i){const r=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",r.variantList)}}function q(i,d){1&i&&(t.TgZ(0,"mat-option",53),t._uU(1,"Loading..."),t.qZA())}function L(i,d){1&i&&(t.TgZ(0,"mat-option",26)(1,"a",54),t._uU(2,"+add Product"),t.qZA()()),2&i&&t.Q6J("value","No data found")}function D(i,d){1&i&&(t.TgZ(0,"mat-option",55),t._uU(1," Please Enter 3 or more characters "),t.qZA())}function B(i,d){1&i&&(t.TgZ(0,"span",56),t._uU(1,"Enter Unit"),t.qZA())}function Y(i,d){1&i&&(t.TgZ(0,"span",56),t._uU(1,"Enter QTY"),t.qZA())}function Q(i,d){if(1&i){const r=t.EpF();t.ynx(0),t.TgZ(1,"tr",28)(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td")(5,"div")(6,"div",29),t.O4$(),t.TgZ(7,"svg",30),t.NdJ("click",function(){const h=t.CHM(r).index,m=t.oxw();return t.KtG(m.removeCart(h))}),t._UZ(8,"path",31)(9,"path",32),t.qZA()(),t.YNc(10,M,3,0,"svg",33),t.qZA()(),t.kcU(),t.TgZ(11,"td")(12,"input",34,35),t.NdJ("keyup",function(){const h=t.CHM(r).index,m=t.MAs(13),C=t.oxw();return t.KtG(C.getVariant(m.value,h,"barcode"))})("blur",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.hideSearch())}),t.qZA()(),t.TgZ(14,"td",36)(15,"div",37)(16,"mat-form-field",38)(17,"input",39),t.NdJ("input",function(o){const m=t.CHM(r).index,C=t.oxw();return t.KtG(C.getVariant(o.target.value,m,""))}),t.qZA(),t.TgZ(18,"mat-autocomplete",null,40),t.YNc(20,J,2,1,"ng-container",41),t.YNc(21,q,2,0,"mat-option",42),t.YNc(22,L,3,1,"mat-option",43),t.YNc(23,D,2,0,"mat-option",44),t.qZA()()()(),t.TgZ(24,"td"),t._UZ(25,"input",45),t.YNc(26,B,2,0,"span",46),t.qZA(),t.TgZ(27,"td"),t._UZ(28,"input",47),t.YNc(29,Y,2,0,"span",46),t.qZA(),t.TgZ(30,"td"),t._UZ(31,"input",48),t.qZA()(),t.BQk()}if(2&i){const r=d.index,a=t.MAs(19),o=t.oxw();t.xp6(1),t.Q6J("formGroupName",r),t.xp6(2),t.Oqu(r+1+"."),t.xp6(7),t.Q6J("ngIf",o.isLastCart(r)),t.xp6(2),t.Q6J("value",void 0!==o.barcode[r]?o.barcode[r]:""),t.uIk("data-index",r),t.xp6(5),t.Q6J("formControl",o.myControl)("matAutocomplete",a),t.xp6(3),t.Q6J("ngIf",(null==o.myControl.value?null:o.myControl.value.length)>=1&&(null==o.myControl.value?null:o.myControl.value.length)>0),t.xp6(1),t.Q6J("ngIf",o.isSearch),t.xp6(1),t.Q6J("ngIf",0===(null==o.variantList?null:o.variantList.length)&&!o.isSearch),t.xp6(1),t.Q6J("ngIf",(null==o.myControl.value?null:o.myControl.value.length)<3),t.xp6(3),t.Q6J("ngIf",o.unit(r)&&o.unit(r).invalid&&o.unit(r).touched),t.xp6(3),t.Q6J("ngIf",o.qty(r)&&o.qty(r).invalid&&o.qty(r).touched)}}function R(i,d){1&i&&(t.TgZ(0,"button",57),t._uU(1,"Submit"),t.qZA())}function G(i,d){1&i&&(t.TgZ(0,"button",58),t._UZ(1,"span",59),t._uU(2," \xa0 Submit"),t.qZA())}const P=function(i){return{"is-invalid":i}},K=[{path:"",component:(()=>{class i{constructor(r,a,o,h,m,C,E){this.fb=r,this.saleService=a,this.coreService=o,this.toastrService=h,this.purchaseService=m,this.transactionService=C,this.router=E,this.productControl=new l.NI(""),this.filteredOptions=[],this.filteredItemCode=[],this.isCart=!1,this.productList=[],this.isSearch=!1,this.loader=!1,this.variantList=[],this.myControl=new l.NI(""),this.barcode=[]}get f(){return this.scrapEntryForm.controls}ngOnInit(){const r=(new Date).toLocaleString("en-CA",{timeZone:"America/Vancouver"}).split(",")[0];this.scrapEntryForm=this.fb.group({voucher_no:new l.NI("",[l.kI.required]),date:new l.NI(r,[l.kI.required]),updater_name:new l.NI("",[l.kI.required]),cart_item:this.fb.array([])}),this.addCart(0),this.getProduct(),this.getPrefix(),this.ManageNameControl(0),this.ManageItemCodeControl(0)}getPrefix(){this.transactionService.getScrapEntryVoucherPrefix().subscribe(r=>{console.log(r),r.success?(this.prefixNo=r?.data,this.scrapEntryForm.get("voucher_no").patchValue(this.prefixNo[0]?.id)):this.toaster.error(r.msg)},r=>{this.toastrService.error(r.error.msg)})}cart(){return this.fb.group({barcode:new l.NI("",[l.kI.required]),item_code:new l.NI("",[l.kI.required]),item_name:new l.NI("",[l.kI.required]),unit:new l.NI("",[l.kI.required]),qty:new l.NI(1,[l.kI.required]),reason:new l.NI("")})}getCart(){return this.scrapEntryForm.get("cart_item")}addCart(r){this.getCart().push(this.cart()),this.scrapEntryForm?.value?.cart_item?.length>0&&(this.ManageNameControl(r),this.ManageItemCodeControl(r)),this.isCart=!1}addCart2(r){const a=this.scrapEntryForm?.get("cart_item");this.getCart()?.push(this.cart()),this.ManageNameControl(a?.length-1),this.ManageItemCodeControl(a?.length-1)}removeCart(r){this.getCart().removeAt(r),0==this.scrapEntryForm?.value?.cart_item?.length&&(this.isCart=!0)}get voucher_no(){return this.scrapEntryForm.get("voucher_no")}get date(){return this.scrapEntryForm.get("date")}get updater_name(){return this.scrapEntryForm.get("updater_name")}unit(r){return this.getCart().controls[r].get("unit")}qty(r){return this.getCart().controls[r].get("qty")}item_name(r){return this.getCart().controls[r].get("item_name")}item_code(r){return this.getCart().controls[r].get("item_code")}getProduct(){this.coreService.getProducts().subscribe(r=>{console.log(r,"user"),this.productList=r})}ManageNameControl(r){console.log("index",r);var a=this.scrapEntryForm?.get("cart_item");this.filteredOptions[r]=a.at(r)?.get("item_name")?.valueChanges.pipe((0,S.O)(""),(0,v.U)(o=>this._filter5(o)))}_filter5(r){const a=r?.toLowerCase();return this.productList?.filter(o=>0===o?.title?.toLowerCase().indexOf(a))}ManageItemCodeControl(r){console.log("index",r);var a=this.scrapEntryForm?.get("cart_item");console.log(a,"arrayControl"),this.filteredItemCode[r]=a.at(r)?.get("item_code")?.valueChanges.pipe((0,S.O)(""),(0,v.U)(o=>this._filter6(o))),console.log(this.filteredItemCode)}_filter6(r){const a=r?.toLowerCase();return this.productList?.filter(o=>0===o?.item_code?.toLowerCase().indexOf(a))}isLastCart(r){return r===this.getCart().controls.length-1}oncheckVariant(r,a){console.log(r);const o=r.id;this.barcode[a]=r.sku,this.scrapEntryForm.get("cart_item").at(a).patchValue({barcode:o,item_code:r?.sku,item_name:r?.product_title,unit:r?.product?.unit?.title})}submit(){if(console.log(this.scrapEntryForm.value),this.scrapEntryForm.valid){this.loader=!0;let r=new FormData;r.append("date",this.scrapEntryForm.get("date")?.value),r.append("voucher_no",this.scrapEntryForm.get("voucher_no")?.value),r.append("updater_name",this.scrapEntryForm.get("updater_name")?.value);const a=this.scrapEntryForm.get("cart_item"),o=[];a.controls.forEach(h=>{const m=h,C={};Object.keys(m.controls).forEach(E=>{const b=m.controls[E];C[E]=isNaN(b.value)?b.value:parseFloat(b.value)}),o.push(C)}),r.append("cart_item",JSON.stringify(o)),this.transactionService.addScrapEntry(r).subscribe(h=>{console.log(h),h.success?(this.loader=!1,this.toastrService.success(h.msg),this.router.navigate(["/transaction/scarp-entry-list"])):(this.loader=!1,this.toastrService.error(h.msg))},h=>{this.loader=!1,this.toastrService.error(h.message)})}else this.scrapEntryForm.markAllAsTouched(),this.toastrService.error("Please Submit Required Field")}getVariant(r){this.transactionService.searchProduct(r).subscribe(a=>{console.log(a),this.isSearch=!1,this.variantList=a,console.log(this.variantList),this.myControl.setValue(a[0].product_title)})}}return i.\u0275fac=function(r){return new(r||i)(t.Y36(l.qu),t.Y36(e.M),t.Y36(n.p),t.Y36(s._W),t.Y36(c.x),t.Y36(u.p),t.Y36(f.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-scrap-entry"]],decls:62,vars:15,consts:[[1,"page-header"],[1,"page-title"],["id","purchaseForm",1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-3","col-sm-4","col-12"],[1,"form-group"],["type","date","formControlName","date",3,"ngClass"],["class","text-danger",4,"ngIf"],["formControlName","voucher_no"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","updater_name","placeholder","Enter Updater Name",3,"ngClass"],[1,"card"],[1,"table-responsive"],[1,"table","datanew"],["colspan","3"],["class","debitIntoCart",3,"click",4,"ngIf"],["formArrayName","cart_item"],[4,"ngFor","ngForOf"],[1,"col-lg-12"],["routerLink","//transaction/scarp-entry-list",1,"btn","btn-cancel"],["class","btn btn-submit me-2",4,"ngIf"],["class","btn btn-submit me-2","type","submit","disabled","",4,"ngIf"],[1,"text-danger"],[3,"value"],[1,"debitIntoCart",3,"click"],[3,"formGroupName"],[1,"me-2"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x-circle",2,"color","red",3,"click"],["d","M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["style","color:green","xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","class","bi bi-plus-circle","viewBox","0 0 16 16",3,"click",4,"ngIf"],["type","text","placeholder","Search Barcode",1,"input",3,"value","keyup","blur"],["id",""],["colspan","1"],[1,"form-group",2,"margin-bottom","0"],[1,"w-100",2,"padding","0","width","100%","min-width","100%","border-top","none"],["type","text","placeholder","Search Product","aria-label","Search Products","matInput","",2,"box-sizing","border-box",3,"formControl","matAutocomplete","input"],["autos","matAutocomplete"],[4,"ngIf"],["style","color:#FF9F43",4,"ngIf"],[3,"value",4,"ngIf"],["class","is-loading",4,"ngIf"],["type","text","placeholder","Enter Unit","formControlName","unit","readonly","",1,"input"],["class","text-danger d-block",4,"ngIf"],["type","number","placeholder","Enter Qty","formControlName","qty",1,"input"],["type","text","placeholder","Enter Reason","formControlName","reason",1,"input"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-plus-circle",2,"color","green",3,"click"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"],["style","color:#FF9F43",3,"value","onSelectionChange",4,"ngIf"],[2,"color","#FF9F43",3,"value","onSelectionChange"],[2,"color","#FF9F43"],["routerLink","//product/addproduct",2,"color","#FF9F43"],[1,"is-loading"],[1,"text-danger","d-block"],[1,"btn","btn-submit","me-2"],["type","submit","disabled","",1,"btn","btn-submit","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(r,a){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3,"Scrap Entry Add"),t.qZA(),t.TgZ(4,"h6"),t._uU(5,"Add/Update Scrap Entry"),t.qZA()()(),t.TgZ(6,"div",2)(7,"div",3)(8,"form",4),t.NdJ("ngSubmit",function(){return a.submit()}),t.TgZ(9,"div",5)(10,"div",6)(11,"div",7)(12,"label"),t._uU(13,"Date*"),t.qZA(),t._UZ(14,"input",8),t.YNc(15,Z,2,0,"span",9),t.qZA()(),t.TgZ(16,"div",6)(17,"div",7)(18,"label"),t._uU(19,"Voucher Series*"),t.qZA(),t.TgZ(20,"select",10)(21,"option",11),t._uU(22,"Select Voucher Series"),t.qZA(),t.YNc(23,N,2,2,"option",12),t.qZA(),t.YNc(24,T,2,0,"span",9),t.qZA()(),t.TgZ(25,"div",6)(26,"div",7)(27,"label"),t._uU(28,"Updater Name*"),t.qZA(),t._UZ(29,"input",13),t.YNc(30,F,2,0,"span",9),t.qZA()()(),t.TgZ(31,"div",14)(32,"div",3)(33,"div",15)(34,"table",16)(35,"thead")(36,"tr")(37,"th"),t._uU(38,"#"),t.qZA(),t._UZ(39,"th"),t.TgZ(40,"th"),t._uU(41,"Item Code"),t.qZA(),t.TgZ(42,"th"),t._uU(43,"Item Name"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"Unit"),t.qZA(),t.TgZ(46,"th"),t._uU(47,"QTY"),t.qZA(),t.TgZ(48,"th"),t._uU(49,"Reason"),t.qZA(),t._UZ(50,"th"),t.qZA(),t.TgZ(51,"tr")(52,"th",17),t.YNc(53,$,2,0,"span",18),t.qZA()()(),t.TgZ(54,"tbody"),t.ynx(55,19),t.YNc(56,Q,32,13,"ng-container",20),t.BQk(),t.qZA()()()()(),t.TgZ(57,"div",21)(58,"a",22),t._uU(59,"Cancel"),t.qZA(),t.YNc(60,R,2,0,"button",23),t.YNc(61,G,3,0,"button",24),t.qZA()()()()),2&r&&(t.xp6(8),t.Q6J("formGroup",a.scrapEntryForm),t.xp6(6),t.Q6J("ngClass",t.VKq(11,P,a.f.date.touched&&a.f.date.invalid)),t.xp6(1),t.Q6J("ngIf",a.date&&a.date.invalid&&a.date.touched),t.xp6(8),t.Q6J("ngForOf",a.prefixNo),t.xp6(1),t.Q6J("ngIf",a.voucher_no&&a.voucher_no.invalid&&a.voucher_no.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(13,P,a.f.updater_name.touched&&a.f.updater_name.invalid)),t.xp6(1),t.Q6J("ngIf",a.updater_name&&a.updater_name.invalid&&a.updater_name.touched),t.xp6(23),t.Q6J("ngIf",a.isCart),t.xp6(3),t.Q6J("ngForOf",a.getCart().controls),t.xp6(4),t.Q6J("ngIf",!a.loader),t.xp6(1),t.Q6J("ngIf",a.loader))},dependencies:[_.mk,_.sg,_.O5,f.yS,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.JL,l.oH,l.sg,l.u,l.x0,l.CE,g.XC,g.ZL,U.ey,y.KE,x.Nt],styles:[".mat-autocomplete-trigger.mat-input-element.mat-form-field-autofill-control.ng-tns-c116-0.ng-untouched.ng-pristine.ng-valid.cdk-text-field-autofill-monitored.is-invalid[_ngcontent-%COMP%], .mat-autocomplete-trigger.form-control.ng-pristine.ng-invalid.ng-touched[_ngcontent-%COMP%], .input.ng-pristine.ng-invalid.ng-touched[_ngcontent-%COMP%], .ng-dirty.ng-invalid.is-invalid.ng-touched[_ngcontent-%COMP%], .ng-pristine.ng-invalid.is-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}select[_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], input[type=datetime-local][_ngcontent-%COMP%], .input[_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;padding:10px 15px;border-radius:5px}"]}),i})(),canActivate:[p(30597).l],data:{allowedRoles:["add_scarpentry"]}}];let j=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[f.Bz.forChild(K),f.Bz]}),i})();var z=p(8468);let W=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[_.ez,j,z.I,g.Bb,y.lN,x.c]}),i})()},30597:(I,A,p)=>{p.d(A,{l:()=>t});var _=p(94650),f=p(89299),l=p(97185),S=p(42917),v=p(80927);let t=(()=>{class e{constructor(s,c,u,g,U){this.router=s,this.Arout=c,this.toastr=u,this.profileService=g,this.coreService=U}canActivate(s,c){const u=JSON.parse(localStorage.getItem("auth"));if(this.profileService.userDetails$.subscribe(g=>{this.userDetails=g,this.permissions=this.userDetails?.permission}),u){const g=s.data.allowedRoles;console.log(g,"allowedRoles");const U=u.some(y=>g.includes(y.codename));if(console.log(U),this.coreService.getProfile().subscribe(y=>{this.userDetails=y,this.profileService.setUserDetails(this.userDetails);const x=y?.permission,Z=this.profileService.getUserDetails();(!Z||Z.length!==x.length)&&(this.profileService.setUserPermission(x),window.location.reload())}),U)return!0}return this.toastr.error("User have Not Permission to Access This page"),this.router.navigate(["/dashboard"]),!1}}return e.\u0275fac=function(s){return new(s||e)(_.LFG(f.F0),_.LFG(f.gz),_.LFG(l._W),_.LFG(S.J),_.LFG(v.p))},e.\u0275prov=_.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);