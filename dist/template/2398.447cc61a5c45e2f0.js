"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[2398],{2398:(O,T,c)=>{c.r(T),c.d(T,{TaxSlabsModule:()=>J});var d=c(6895),S=c(1728),r=c(433),C=c(5226),_=c.n(C),t=c(1571),i=c(927);function a(o,l){if(1&o&&(t.TgZ(0,"option",26),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.title," ")}}function u(o,l){1&o&&(t.TgZ(0,"span",27),t._uU(1,"Select Category "),t.qZA())}const g=function(o){return{"is-invalid":o}};function s(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"a",28)(1,"input",29),t.NdJ("change",function(p){t.CHM(e);const m=t.oxw();return t.KtG(m.onCheckChange(p))}),t.qZA(),t._uU(2),t.qZA()}if(2&o){const e=l.$implicit,n=t.oxw();t.xp6(1),t.Q6J("value",e.id)("ngClass",t.VKq(3,g,n.f.subcategory.touched&&n.f.subcategory.invalid)),t.xp6(1),t.hij(" ",e.title," ")}}function b(o,l){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.selectedSubcat+" Subcategory Selected")}}function h(o,l){1&o&&(t.TgZ(0,"span",27),t._uU(1,"Select subcategory "),t.qZA())}function x(o,l){if(1&o&&(t.TgZ(0,"option",26),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.title," ")}}function f(o,l){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr",30)(2,"td"),t._UZ(3,"input",31),t.qZA(),t.TgZ(4,"td"),t._UZ(5,"input",32),t.qZA(),t.TgZ(6,"td")(7,"select",33)(8,"option",10),t._uU(9,"Select tax"),t.qZA(),t.YNc(10,x,2,2,"option",11),t.qZA(),t.TgZ(11,"button",34),t.NdJ("click",function(){const m=t.CHM(e).index,F=t.oxw();return t.KtG(F.removeAmount(m))}),t._uU(12,"\u2212"),t.qZA()()(),t.BQk()}if(2&o){const e=l.index,n=t.oxw();t.xp6(1),t.Q6J("formGroupName",e),t.xp6(9),t.Q6J("ngForOf",n.taxList)}}const y=[{path:"",component:(()=>{class o{constructor(e,n){this.fb=e,this.coreService=n,this.p=1,this.pageSize=10,this.tableData=[{id:1,subcatg:"Shirt",subcat:"Top",amount:[{from:50,to:100,tax:5},{from:100,to:200,tax:5}]},{id:1,subcatg:"Paint",subcat:"shirt",amount:[{from:500,to:1e3,tax:5},{from:1e3,to:2e3,tax:5}]}],this.initChecked=!1,this.selectSubcat=[],this.selectedSubcat=0,this.key="id",this.reverse=!1}get f(){return this.taxSlabForm.controls}confirmText(e,n){_().fire({title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",buttonsStyling:!0,customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-danger ml-1"}}).then(p=>{p.isConfirmed&&(this.coreService.deleteProductSubcategory(n).subscribe(m=>{this.delRes=m,"Product Subcategory Deleted successfully"==this.delRes.msg&&this.ngOnInit()}),_().fire({icon:"success",title:"Deleted!",text:"Your file has been deleted."}),this.tableData.splice(e,1))})}ngOnInit(){this.taxSlabForm=this.fb.group({subcategory_group:new r.NI("",[r.kI.required]),subcategory:new r.Oe([],[r.kI.required]),amount:this.fb.array([])}),this.addAmount(),this.getSubcateGroup(),this.getTax()}selectAll(e){this.tableData.forEach(e?n=>{n.isSelected=!1}:n=>{n.isSelected=!0})}amount(){return this.fb.group({from_amount:"",to_amount:"",tax:""})}getAmount(){return this.taxSlabForm.get("amount")}addAmount(){this.getAmount().push(this.amount())}removeAmount(e){this.getAmount().removeAt(e)}get subcategory_group(){return this.taxSlabForm.get("subcategory_group")}get subcategory(){return this.taxSlabForm.get("subcategory")}get tax(){return this.taxSlabForm.get("tax")}getSubcateGroup(){this.coreService.getSubcategoryGroup().subscribe(e=>{console.log(e),this.subcatGroupList=e})}getTax(){this.coreService.gettaxd().subscribe(e=>{console.log(e),this.taxList=e,console.log(this.taxList)})}getSubcategoryBySubcatGroup(e){this.coreService.getSubcategoryBySubcatGroup(e).subscribe(n=>{console.log(n.subcategories),this.subcatbySubcatGroup=n.subcategories,setTimeout(()=>{this.subcatbySubcatGroup.map(p=>{console.log(this.selectSubcat.includes(p.id),"subcategory"),this.selectSubcat.includes(p.id)&&this.taxSlabForm.get("subcategory").push(new r.NI(p.id))})},2e3)})}onCheckChange(e){const n=this.taxSlabForm.get("subcategory");if(e.target.checked)n.push(new r.NI(parseInt(e.target.value))),this.check=n,this.selectedSubcat++;else{let p=0;n.controls.forEach(m=>{if(m.value==e.target.value)return n.removeAt(p),void this.selectedSubcat--;p++})}}submit(){console.log(this.taxSlabForm.value)}search(){""==this.titlee?this.ngOnInit():this.tableData=this.tableData.filter(e=>(console.log(e),console.log(e.title.toLocaleLowerCase()),console.log(e.title.match(this.titlee)),e.title.match(this.titlee)))}sort(e){this.key=e,this.reverse=!this.reverse}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.qu),t.Y36(i.p))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tax-slabs"]],decls:55,vars:10,consts:[[1,"page-header"],[1,"page-title"],[1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-4","col-sm-4","col-12"],[1,"form-group"],["formControlName","subcategory_group","required","","id","subcategory_group",1,"w-100","h-100","border",3,"ngClass","change"],["category_idValue","","categoryValue",""],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"dropdown"],["type","button","type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","button"],[1,"dropdown-menu",2,"width","100%"],["class","dropdown-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-lg-8","col-sm-8","col-12"],[1,"table"],["formArrayName","amount"],[4,"ngFor","ngForOf"],[1,"w-100"],[3,"click"],[1,"col-lg-12"],[1,"btn","btn-submit","me-2"],[3,"value"],[1,"text-danger"],[1,"dropdown-item"],["type","checkbox","formArrayName","subcategory",2,"margin-right","5px",3,"value","ngClass","change"],[3,"formGroupName"],["type","text","formControlName","from_amount","placeholder","ex-100",1,"form-control","inp"],["type","text","formControlName","to_amount","placeholder","ex-1000",1,"form-control","inp"],["formControlName","tax",1,"inp"],[1,"btn",2,"background","#FF9F43",3,"click"]],template:function(e,n){if(1&e){const p=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3,"Tax Slab ADD"),t.qZA(),t.TgZ(4,"h6"),t._uU(5,"Create new Tax Slab"),t.qZA()()(),t.TgZ(6,"div",2)(7,"div",3)(8,"form",4),t.NdJ("ngSubmit",function(){return n.submit()}),t.TgZ(9,"div",5)(10,"div",2)(11,"div",3)(12,"div",5)(13,"div",6)(14,"div",7)(15,"label"),t._uU(16,"Subcategory Group*"),t.qZA(),t.TgZ(17,"select",8,9),t.NdJ("change",function(){t.CHM(p);const F=t.MAs(19);return t.KtG(n.getSubcategoryBySubcatGroup(F.value))}),t.TgZ(20,"option",10),t._uU(21,"select subcategory group"),t.qZA(),t.YNc(22,a,2,2,"option",11),t.qZA(),t.YNc(23,u,2,0,"span",12),t.qZA()(),t.TgZ(24,"div",6)(25,"div",7)(26,"label"),t._uU(27,"SubCategory*"),t.qZA(),t.TgZ(28,"div",13)(29,"button",14),t._uU(30,"Select Subcategory"),t.qZA(),t.TgZ(31,"ul",15)(32,"li"),t.YNc(33,s,3,5,"a",16),t.qZA()()(),t.YNc(34,b,2,1,"p",17),t.YNc(35,h,2,0,"span",12),t.qZA()(),t.TgZ(36,"div",18)(37,"table",19)(38,"thead")(39,"tr")(40,"th"),t._uU(41,"From Amount"),t.qZA(),t.TgZ(42,"th"),t._uU(43,"To Amount"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"Tax"),t.qZA()()(),t.TgZ(46,"tbody"),t.ynx(47,20),t.YNc(48,f,13,2,"ng-container",21),t.BQk(),t.TgZ(49,"div",22)(50,"span",23),t.NdJ("click",function(){return n.addAmount()}),t._uU(51,"add more"),t.qZA()()()()(),t.TgZ(52,"div",24)(53,"button",25),t._uU(54,"Submit"),t.qZA()()()()()()()()()}2&e&&(t.xp6(8),t.Q6J("formGroup",n.taxSlabForm),t.xp6(9),t.Q6J("ngClass",t.VKq(8,g,n.f.subcategory_group.touched&&n.f.subcategory_group.invalid)),t.xp6(5),t.Q6J("ngForOf",n.subcatGroupList),t.xp6(1),t.Q6J("ngIf",n.subcategory_group&&n.subcategory_group.invalid&&n.subcategory_group.touched),t.xp6(10),t.Q6J("ngForOf",n.subcatbySubcatGroup),t.xp6(1),t.Q6J("ngIf",n.selectedSubcat>0),t.xp6(1),t.Q6J("ngIf",n.subcategory&&n.subcategory.invalid&&n.subcategory.touched),t.xp6(13),t.Q6J("ngForOf",n.getAmount().controls))},dependencies:[d.mk,d.sg,d.O5,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.Q7,r.sg,r.u,r.x0,r.CE],styles:['.ng-dirty.ng-invalid.is-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}select[_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], input[type=button][_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;padding:10px 15px;border-radius:5px}.button[_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;display:flex;padding:10px 15px;border-radius:5px;justify-content:space-between;align-items:center;background-color:#fff}.table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){border-top:none!important}.labelSize[_ngcontent-%COMP%]{display:flex;align-items:center}.entries[_ngcontent-%COMP%]{font-size:12px;color:#5e5873;font-weight:600;float:left;margin-top:10px}.labelSize[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid #ced4da;width:80px;height:30px;padding:0;border-radius:3px}.thone[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{float:right;margin-top:4px}@media (max-width: 765px){.thone[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{float:inherit;margin-top:0}}.fa-sort[_ngcontent-%COMP%]:before{content:"\\f0dc";right:.5em;color:#babfc7;font-size:12px;opacity:1}.inp[_ngcontent-%COMP%]{border:none}']}),o})()}];let A=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[S.Bz.forChild(y),S.Bz]}),o})();var Z=c(906),M=c(5415),w=c(3189),N=c(4333),P=c(4040);let J=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.ez,A,Z.ZU,r.u5,r.UX,M.T,w.h,N.JX,P.l]}),o})()},5415:(O,T,c)=>{c.d(T,{G:()=>r,T:()=>_});var d=c(1571),r=function(){function t(i,a,u){this.el=i,this.vcr=a,this.renderer=u,this.dtOptions={}}return t.prototype.ngOnInit=function(){var i=this;this.dtTrigger?this.dtTrigger.subscribe(function(a){i.displayTable(a)}):this.displayTable(null)},t.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},t.prototype.displayTable=function(i){var a=this;i&&(this.dtOptions=i),this.dtInstance=new Promise(function(u,g){Promise.resolve(a.dtOptions).then(function(s){0===Object.keys(s).length&&0===$("tbody tr",a.el.nativeElement).length?g("Both the table and dtOptions cannot be empty"):setTimeout(function(){var h={rowCallback:function(x,f,v){if(s.columns){var y=s.columns;a.applyNgPipeTransform(x,y),a.applyNgRefTemplate(x,y,f)}s.rowCallback&&s.rowCallback(x,f,v)}};h=Object.assign({},s,h),a.dt=$(a.el.nativeElement).DataTable(h),u(a.dt)})})})},t.prototype.applyNgPipeTransform=function(i,a){a.filter(function(g){return g.ngPipeInstance&&!g.ngTemplateRef}).forEach(function(g){var s=g.ngPipeInstance,b=g.ngPipeArgs||[],h=a.findIndex(function(y){return y.data===g.data}),x=i.childNodes.item(h),f=$(x).text(),v=s.transform.apply(s,function(t,i,a){if(a||2===arguments.length)for(var s,u=0,g=i.length;u<g;u++)(s||!(u in i))&&(s||(s=Array.prototype.slice.call(i,0,u)),s[u]=i[u]);return t.concat(s||Array.prototype.slice.call(i))}([f],b,!1));$(x).text(v)})},t.prototype.applyNgRefTemplate=function(i,a,u){var g=this;a.filter(function(b){return b.ngTemplateRef&&!b.ngPipeInstance}).forEach(function(b){var h=b.ngTemplateRef,x=h.ref,f=h.context,v=a.findIndex(function(M){return M.data===b.data}),y=i.childNodes.item(v);$(y).html("");var A=Object.assign({},f,f?.userData,{adtData:u}),Z=g.vcr.createEmbeddedView(x,A);g.renderer.appendChild(y,Z.rootNodes[0])})},t.\u0275fac=function(a){return new(a||t)(d.Y36(d.SBq),d.Y36(d.s_b),d.Y36(d.Qsj))},t.\u0275dir=d.lG2({type:t,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),t}(),C=c(6895),_=function(){function t(){}return t.forRoot=function(){return{ngModule:t}},t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[C.ez]}),t}()}}]);