"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[62398],{62398:(A,T,o)=>{o.r(T),o.d(T,{TaxSlabsModule:()=>K});var d=o(36895),v=o(4392),i=o(24006),t=o(94650),r=o(80927),u=o(97185),l=o(59549),p=o(3238),c=o(47957),b=o(44144);function h(a,s){if(1&a&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.Q6J("value",null==e?null:e.title)("disabled",!0),t.xp6(1),t.Oqu(null==e?null:e.title)}}function m(a,s){if(1&a&&(t.ynx(0),t.YNc(1,h,2,3,"mat-option",23),t.BQk()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.taxSlabList)}}function x(a,s){1&a&&(t.TgZ(0,"mat-option",25),t._uU(1,"Please Enter 3 or more characters"),t.qZA())}function _(a,s){1&a&&(t.TgZ(0,"mat-error",26),t._uU(1,"TaxSlab name is required"),t.qZA())}function g(a,s){if(1&a&&(t.TgZ(0,"option",40),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.tax_percentage+"%"," ")}}function S(a,s){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr",33)(2,"td"),t._UZ(3,"input",34),t.qZA(),t.TgZ(4,"td"),t._UZ(5,"input",35),t.qZA(),t.TgZ(6,"td")(7,"select",36)(8,"option",37),t._uU(9,"Select tax"),t.qZA(),t.YNc(10,g,2,2,"option",38),t.qZA()(),t.TgZ(11,"td")(12,"button",39),t.NdJ("click",function(){const y=t.CHM(e).index,W=t.oxw(2);return t.KtG(W.removeAmount(y))}),t._uU(13,"\u2212"),t.qZA()()(),t.BQk()}if(2&a){const e=s.index,n=t.oxw(2);t.xp6(1),t.Q6J("formGroupName",e),t.xp6(9),t.Q6J("ngForOf",n.taxList)}}function C(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",27)(1,"table",28)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"From Amount"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"To Amount"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Tax"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"\xa0"),t.qZA()()(),t.TgZ(12,"tbody"),t.ynx(13,29),t.YNc(14,S,14,2,"ng-container",30),t.BQk(),t.qZA()(),t.TgZ(15,"div",31)(16,"span",32),t.NdJ("click",function(){t.CHM(e);const f=t.oxw();return t.KtG(f.addAmount())}),t._uU(17,"+ Add more"),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(14),t.Q6J("ngForOf",e.getAmount().controls)}}function M(a,s){if(1&a&&(t.TgZ(0,"option",40),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.tax_percentage+"%","")}}function O(a,s){if(1&a&&(t.ynx(0),t.TgZ(1,"tr",33)(2,"td",41)(3,"select",42)(4,"option",37),t._uU(5,"Select Tax"),t.qZA(),t.YNc(6,M,2,2,"option",38),t.qZA()()(),t.BQk()),2&a){const e=s.index,n=t.oxw(2);t.xp6(1),t.Q6J("formGroupName",e),t.xp6(5),t.Q6J("ngForOf",n.taxList)}}function Z(a,s){if(1&a&&(t.TgZ(0,"div",27)(1,"table",28)(2,"thead")(3,"tr",41)(4,"th"),t._uU(5,"Tax"),t.qZA()()(),t.TgZ(6,"tbody"),t.ynx(7,29),t.YNc(8,O,7,2,"ng-container",30),t.BQk(),t.qZA()()()),2&a){const e=t.oxw();t.xp6(8),t.Q6J("ngForOf",e.getAmount().controls)}}function F(a,s){1&a&&(t.TgZ(0,"button",43),t._uU(1,"Submit"),t.qZA())}function D(a,s){1&a&&(t.TgZ(0,"button",44),t._UZ(1,"span",45),t._uU(2,"\xa0 Submit"),t.qZA())}const E=function(a){return{"is-invalid":a}};let I=(()=>{class a{constructor(e,n,f,y){this.fb=e,this.coreService=n,this.router=f,this.toastrService=y,this.taxSlabCtrl=new i.NI("",[i.kI.required]),this.isTax=!1,this.isAddmoreTax=!1,this.subcatbySubcatGroup=[],this.filteredSubcategory=[],this.searchTerm="",this.selectSubcat=[],this.selectedSubcat=0,this.selectedSubCategoryIds=[],this.loaders=!1}get f(){return this.taxSlabForm.controls}ngOnInit(){this.taxSlabForm=this.fb.group({slab_title:new i.NI(""),variable_tax:new i.NI("",[i.kI.required]),amount_tax_slabs:this.fb.array([])}),this.addAmount(),this.getTaxSlabList(),this.getTax(),this.isAddmoreTax=1==this.isTax,this.taxSlabCtrl.valueChanges.subscribe(e=>{console.log(e),this._filterBrands(e)})}getTaxSlabList(){this.coreService.gettaxd().subscribe(e=>{this.taxSlabList=e,this.allTaxSlabData=e})}_filterBrands(e){const n=e?.toLowerCase();this.taxSlabList=this.allTaxSlabData.filter(f=>f?.title?.toLowerCase().includes(n))}toggle(){this.isTax=!this.isTax,1==this.isTax?this.isAddmoreTax=!0:(this.isAddmoreTax=!1,console.log("false"))}amount_tax_slabs(){return this.fb.group(1==this.isTax?{from_amount:"",to_amount:"",tax:""}:{tax:""})}getAmount(){return this.taxSlabForm.get("amount_tax_slabs")}addAmount(){this.getAmount().push(this.amount_tax_slabs())}removeAmount(e){this.getAmount().removeAt(e)}get slab_title(){return this.taxSlabForm.get("slab_title")}get variable_tax(){return this.taxSlabForm.get("variable_tax")}get tax(){return this.taxSlabForm.get("tax")}getSubcateGroup(){this.coreService.getSubcategoryGroup().subscribe(e=>{this.subcatGroupList=e})}getTax(){this.coreService.gettaxd().subscribe(e=>{this.taxList=e})}getSubcategoryBySubcatGroup(e){this.coreService.getSubcategoryBySubcatGroup(e).subscribe(n=>{this.subcatbySubcatGroup=n.subcategories,this.filteredSubcategory=[...this.subcatbySubcatGroup],setTimeout(()=>{this.subcatbySubcatGroup.map(f=>{this.selectSubcat.includes(f.id)&&this.taxSlabForm.get("subcategory").push(new i.NI(f.id))})},1e3)})}filterSubcategory(){this.filteredSubcategory=""===this.searchTerm.trim()?[...this.subcatbySubcatGroup]:this.subcatbySubcatGroup.filter(e=>e.title.toLowerCase().includes(this.searchTerm.toLowerCase()))}onCheckChange(e){const n=this.taxSlabForm.get("subcategory");if(e.target.checked)n.push(new i.NI(parseInt(e.target.value))),this.check=n,this.selectedSubCategoryIds=n.value,this.selectedSubcat++;else{let f=0;n.controls.forEach(y=>{if(y.value==e.target.value)return n.removeAt(f),void this.selectedSubcat--;f++})}}submit(){this.taxSlabForm.valid&&this.taxSlabCtrl.value?(this.taxSlabForm.get("slab_title").setValue(this.taxSlabCtrl.value),this.loaders=!0,this.coreService.addTaxSlab(this.taxSlabForm.value).subscribe(e=>{this.addRes=e,this.addRes.success&&(this.loaders=!1,this.toastrService.success(this.addRes.msg),this.taxSlabCtrl.reset(),this.taxSlabCtrl.markAsPristine(),this.router.navigate(["product/taxSlabList"]))})):(this.taxSlabForm.markAllAsTouched(),this.loaders=!1,this.toastrService.error("Please Fill All The Required Fields"))}onLabelClick(e){e.stopPropagation()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(i.qu),t.Y36(r.p),t.Y36(v.F0),t.Y36(u._W))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-tax-slabs"]],decls:36,vars:16,consts:[[1,"page-header","justify-content-center"],[1,"page-title"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"card"],[1,"card-body"],[1,"row","form-card"],[1,"col-lg-4","col-sm-4","col-12"],[1,"form-group"],[1,"w-100",2,"padding","0","width","100%","min-width","100%","border-top","none"],["type","text","placeholder","Search TaxSlab","aria-label","TaxSlab","matInput","",2,"box-sizing","border-box",3,"formControl","matAutocomplete","ngClass"],["auto","matAutocomplete"],[4,"ngIf"],["class","is-loading",4,"ngIf"],["class","mt-3 error-msg",4,"ngIf"],[1,"d-flex",2,"margin-top","2rem"],["type","checkbox","formControlName","variable_tax",3,"id","ngModel","click"],[1,"d_flex",2,"margin-bottom","0","margin-left","5px",3,"for"],["class","col-lg-8 col-sm-8 col-12",4,"ngIf"],[1,"col-lg-8","text-end","mt-5"],["class","btn btn-submit me-2",4,"ngIf"],["class","btn btn-submit me-2","type","submit","disabled","",4,"ngIf"],["routerLink","//product/taxSlabList",1,"btn","btn-cancel"],["style","color:#FF9F43",3,"value","disabled",4,"ngFor","ngForOf"],[2,"color","#FF9F43",3,"value","disabled"],[1,"is-loading"],[1,"mt-3","error-msg"],[1,"col-lg-8","col-sm-8","col-12"],[1,"table","amt-table"],["formArrayName","amount_tax_slabs"],[4,"ngFor","ngForOf"],[1,"w-100","text-right"],[1,"addMore",3,"click"],[3,"formGroupName"],["type","text","formControlName","from_amount","placeholder","ex-100",1,"form-control","inp"],["type","text","formControlName","to_amount","placeholder","ex-1000",1,"form-control","inp"],["formControlName","tax",1,"inp"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn",2,"background","#FF9F43",3,"click"],[3,"value"],[1,"text-center"],["formControlName","tax",1,"inp",2,"width","30%"],[1,"btn","btn-submit","me-2"],["type","submit","disabled","",1,"btn","btn-submit","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3,"Tax Slab Add"),t.qZA(),t.TgZ(4,"h6"),t._uU(5,"Create new Tax Slab"),t.qZA()()(),t.TgZ(6,"form",2),t.NdJ("ngSubmit",function(){return n.submit()}),t.TgZ(7,"div",3)(8,"div",4)(9,"div",5)(10,"div",6)(11,"div",7)(12,"div",8)(13,"label"),t._uU(14,"Title*"),t.qZA(),t.TgZ(15,"mat-form-field",9),t._UZ(16,"input",10),t.TgZ(17,"mat-autocomplete",null,11),t.YNc(19,m,2,1,"ng-container",12),t.ynx(20),t.YNc(21,x,2,0,"mat-option",13),t.BQk(),t.qZA(),t.YNc(22,_,2,0,"mat-error",14),t.qZA()()(),t.TgZ(23,"div",7)(24,"div",8)(25,"div",15)(26,"input",16),t.NdJ("click",function(){return n.toggle()}),t.qZA(),t.TgZ(27,"label",17),t._uU(28,"Variable Tax"),t.qZA()()()(),t.YNc(29,C,18,1,"div",18),t.YNc(30,Z,9,1,"div",18),t.TgZ(31,"div",19),t.YNc(32,F,2,0,"button",20),t.YNc(33,D,3,0,"button",21),t.TgZ(34,"a",22),t._uU(35,"Cancel"),t.qZA()()()()()()()),2&e){const f=t.MAs(18);t.xp6(6),t.Q6J("formGroup",n.taxSlabForm),t.xp6(10),t.Q6J("formControl",n.taxSlabCtrl)("matAutocomplete",f)("ngClass",t.VKq(14,E,n.taxSlabCtrl.touched&&n.taxSlabCtrl.invalid)),t.xp6(3),t.Q6J("ngIf",(null==n.taxSlabCtrl.value?null:n.taxSlabCtrl.value.length)>2),t.xp6(2),t.Q6J("ngIf",(null==n.taxSlabCtrl.value?null:n.taxSlabCtrl.value.length)<3),t.xp6(1),t.Q6J("ngIf",n.taxSlabCtrl.touched&&n.taxSlabCtrl.invalid),t.xp6(4),t.Q6J("id","checkboxMeasure-")("ngModel",n.isTax),t.xp6(1),t.Q6J("for","checkboxMeasure-"),t.xp6(2),t.Q6J("ngIf",n.isAddmoreTax),t.xp6(1),t.Q6J("ngIf",!n.isAddmoreTax),t.xp6(2),t.Q6J("ngIf",!n.loaders),t.xp6(1),t.Q6J("ngIf",n.loaders)}},dependencies:[d.mk,d.sg,d.O5,v.yS,i._Y,i.YN,i.Kr,i.Fj,i.Wl,i.EJ,i.JJ,i.JL,i.oH,i.sg,i.u,i.x0,i.CE,l.TO,l.KE,p.ey,c.XC,c.ZL,b.Nt],styles:['.ng-dirty.ng-invalid.is-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}select[_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], input[type=button][_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;padding:10px 15px;border-radius:5px}.button[_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;display:flex;padding:10px 15px;border-radius:5px;justify-content:space-between;align-items:center;background-color:#fff}.table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){border-top:none!important}.labelSize[_ngcontent-%COMP%]{display:flex;align-items:center}.entries[_ngcontent-%COMP%]{font-size:12px;color:#5e5873;font-weight:600;float:left;margin-top:10px}.labelSize[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid #ced4da;width:80px;height:30px;padding:0;border-radius:3px}.thone[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{float:right;margin-top:4px}@media (max-width: 765px){.thone[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{float:inherit;margin-top:0}}.fa-sort[_ngcontent-%COMP%]:before{content:"\\f0dc";right:.5em;color:#babfc7;font-size:12px;opacity:1}.inp[_ngcontent-%COMP%]{border:none}.amt-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#EEF0F8}.amt-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#FAFBFE}.addMore[_ngcontent-%COMP%]{color:#ff9f43;font-size:20px;font-weight:500;float:right}.form-card[_ngcontent-%COMP%]{width:100%;margin:auto;justify-content:center}']}),a})();var U=o(30597);const P=JSON.parse(localStorage.getItem("auth"));let N;P&&P.map(s=>{"product"===s.content_type.app_label&&"taxslabs"===s.content_type.model&&"add_taxslabs"==s.codename&&(N=s.codename)});const L=[{path:"",component:I,canActivate:[U.l],data:{allowedRoles:["add_taxslabs"]}}];let J=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[v.Bz.forChild(L),v.Bz]}),a})();var G=o(30906),R=o(87078),w=o(43189),B=o(54333),Q=o(54040),Y=o(95113),k=o(56709);let K=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[d.ez,J,G.ZU,i.u5,i.UX,R.T,w.h,B.JX,Q.l,Y.LD,k.p9,c.Bb,l.lN,b.c]}),a})()},30597:(A,T,o)=>{o.d(T,{l:()=>u});var d=o(94650),v=o(4392),i=o(97185),t=o(42917),r=o(80927);let u=(()=>{class l{constructor(c,b,h,m,x){this.router=c,this.Arout=b,this.toastr=h,this.profileService=m,this.coreService=x}canActivate(c,b){const h=JSON.parse(localStorage.getItem("auth"));if(this.profileService.userDetails$.subscribe(m=>{this.userDetails=m,this.permissions=this.userDetails?.permission}),h){const m=c.data.allowedRoles,x=h.some(g=>m.includes(g.codename));let _=this.coreService.profileData$.value;if(_&&_.username){this.userDetails=_,this.profileService.setUserDetails(this.userDetails),this.profileService.ProfileData$.next(_);const g=_?.permission,S=this.profileService.getUserDetails();(!S||S.length!==g.length)&&(this.profileService.setUserPermission(g),window.location.reload())}else this.coreService.getProfile().subscribe(g=>{this.userDetails=g,this.profileService.setUserDetails(this.userDetails),this.profileService.ProfileData$.next(g);const S=g?.permission,C=this.profileService.getUserDetails();(!C||C.length!==S.length)&&(this.profileService.setUserPermission(S),window.location.reload())});if(x)return!0}return this.toastr.error("User have Not Permission to Access This page"),this.router.navigate(["/dashboard"]),!1}}return l.\u0275fac=function(c){return new(c||l)(d.LFG(v.F0),d.LFG(v.gz),d.LFG(i._W),d.LFG(t.J),d.LFG(r.p))},l.\u0275prov=d.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},87078:(A,T,o)=>{o.d(T,{G:()=>d.G,T:()=>v.T});var d=o(10008),v=o(33861)},10008:(A,T,o)=>{o.d(T,{G:()=>i});var d=o(94650),i=function(){function t(r,u,l){this.el=r,this.vcr=u,this.renderer=l,this.dtOptions={}}return t.prototype.ngOnInit=function(){var r=this;this.dtTrigger?this.dtTrigger.subscribe(function(u){r.displayTable(u)}):this.displayTable(null)},t.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},t.prototype.displayTable=function(r){var u=this;r&&(this.dtOptions=r),this.dtInstance=new Promise(function(l,p){Promise.resolve(u.dtOptions).then(function(c){0===Object.keys(c).length&&0===$("tbody tr",u.el.nativeElement).length?p("Both the table and dtOptions cannot be empty"):setTimeout(function(){var h={rowCallback:function(m,x,_){if(c.columns){var g=c.columns;u.applyNgPipeTransform(m,g),u.applyNgRefTemplate(m,g,x)}c.rowCallback&&c.rowCallback(m,x,_)}};h=Object.assign({},c,h),u.dt=$(u.el.nativeElement).DataTable(h),l(u.dt)})})})},t.prototype.applyNgPipeTransform=function(r,u){u.filter(function(p){return p.ngPipeInstance&&!p.ngTemplateRef}).forEach(function(p){var c=p.ngPipeInstance,b=p.ngPipeArgs||[],h=u.findIndex(function(g){return g.data===p.data}),m=r.childNodes.item(h),x=$(m).text(),_=c.transform.apply(c,function(t,r,u){if(u||2===arguments.length)for(var c,l=0,p=r.length;l<p;l++)(c||!(l in r))&&(c||(c=Array.prototype.slice.call(r,0,l)),c[l]=r[l]);return t.concat(c||Array.prototype.slice.call(r))}([x],b,!1));$(m).text(_)})},t.prototype.applyNgRefTemplate=function(r,u,l){var p=this;u.filter(function(b){return b.ngTemplateRef&&!b.ngPipeInstance}).forEach(function(b){var h=b.ngTemplateRef,m=h.ref,x=h.context,_=u.findIndex(function(M){return M.data===b.data}),g=r.childNodes.item(_);$(g).html("");var S=Object.assign({},x,x?.userData,{adtData:l}),C=p.vcr.createEmbeddedView(m,S);p.renderer.appendChild(g,C.rootNodes[0])})},t.\u0275fac=function(u){return new(u||t)(d.Y36(d.SBq),d.Y36(d.s_b),d.Y36(d.Qsj))},t.\u0275dir=d.lG2({type:t,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),t}()},33861:(A,T,o)=>{o.d(T,{T:()=>t});var d=o(36895),i=(o(10008),o(94650)),t=function(){function r(){}return r.forRoot=function(){return{ngModule:r}},r.\u0275fac=function(l){return new(l||r)},r.\u0275mod=i.oAB({type:r}),r.\u0275inj=i.cJS({imports:[d.ez]}),r}()}}]);