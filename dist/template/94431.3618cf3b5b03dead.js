"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[94431],{35337:(X,Y,u)=>{u.d(Y,{D:()=>H});var P=u(96166),A=u(12983),$=u.n(A),K=u(61135),W=u(94650),b=u(36895),I=u(42917);let H=(()=>{class C{constructor(i,p){this._date_pipe=i,this._com=p,this.loaderPdf=new K.X(!1)}generatePdf(i){this.loaderPdf.next(!0),this._com.loadImage().then(p=>{const e=new P.default("p","mm","a4"),x=document.createElement("canvas"),_=x.getContext("2d");x.width=200,x.height=200,_.clearRect(0,0,200,200),_.drawImage(p,0,0,200,200);const F=x.toDataURL("image/png",.9),k=this._date_pipe.transform(i.Fist_date,"dd-MMMM-yyyy"),N=this._date_pipe.transform(i.Secouand_date,"dd-MMMM-yyyy"),V=[i.thead1],J=[i.tbody1],O=[i.table2head],U=i.foot2,z=U.length;let R=21;if("Goods Received"===i.Type||"New Stock Transfer"===i.Type||"Stock Transfer Request"===i.Type?R=13:"Invoice"===i.Type||"Purchase Return"===i.Type?R=18:"Scrap Entry"===i.Type&&(R=28),(c=>{const y=i.table2body.length%c,l=c-y;if(0!==y)for(let g=0;g<l;g++)i.table2body.push([])})(R),"Countra Voucher"!==i.Type&&"Debit Note"!==i.Type&&"Credit Note"!==i.Type){const c="Goods Received"===i.Type?99:"Scrap Entry"===i.Type?47:92;e.autoTable({head:O,body:i.table2body,foot:U,startY:c,margin:{top:c},headStyles:{fontSize:7,textColor:[0,0,0],fillColor:[255,202,153]},bodyStyles:{fillColor:[255,255,255],fontSize:8},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:7,halign:"left"},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:y=>{const{cell:l,table:g}=y,{x:w,y:f,width:h,height:n}=l;if(e.setDrawColor(0,0,0),e.setLineWidth(y.column.index===g.columns.length-1?.2:.4),e.line(l.x+l.width,l.y,l.x+l.width,l.y+l.height),"head"===y.section&&(y.row.index<=2&&(e.setLineWidth(.2),e.line(l.x,l.y,l.x+l.width,l.y)),4===y.column.index&&(e.setLineWidth(0),e.line(l.x+l.width,l.y,l.x+l.width,l.y+l.height))),"foot"===y.section){const S="Invoice"===i.Type||"Goods Received"===i.Type||"New Stock Transfer"===i.Type||"Stock Transfer Request"===i.Type;(0===y.row.index||1===y.row.index||y.row.index===z-1||S&&2===y.row.index)&&(e.setLineWidth(.2),e.line(w,f,w+h,f),e.line(w,f+n,w+h,f+n))}0===y.column.index&&(e.setLineWidth(.2),e.line(l.x,l.y,l.x,l.y+l.height))}})}("Goods Received"===i.Type||"New Stock Transfer"===i.Type||"Stock Transfer Request"===i.Type&&i.show)&&e.autoTable({head:i.Thead3,body:i.Tbody3,foot:i.Tfoot3,startY:e.lastAutoTable.finalY+2,headStyles:{fontSize:7,textColor:[0,0,0],fillColor:[255,202,153]},bodyStyles:{fillColor:[255,255,255],fontSize:8},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:7,halign:"left"},margin:{top:e.lastAutoTable.finalY+2},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:c=>{const{cell:o,table:y}=c,{x:l,y:g,width:w,height:f}=o;c.column.index==y.columns.length-1?(e.setDrawColor(0,0,0),e.setLineWidth(.2),e.line(o.x+o.width,o.y,o.x+o.width,o.y+o.height)):(e.setDrawColor(0,0,0),e.setLineWidth(.4),e.line(o.x+o.width,o.y,o.x+o.width,o.y+o.height)),"head"===c.section&&((0==c.row.index||1==c.row.index)&&(e.setDrawColor(0,0,0),e.setLineWidth(.2),e.line(o.x,o.y,o.x+o.width,o.y)),2==c.row.index&&(e.setDrawColor(0,0,0),e.setLineWidth(.2),e.line(o.x,o.y,o.x+o.width,o.y)),4===c.column.index&&(e.setDrawColor(0,0,0),e.setLineWidth(0),e.line(o.x+o.width,o.y,o.x+o.width,o.y+o.height))),"foot"===c.section&&((0===c.row.index||1===c.row.index||c.row.index===z-1)&&(e.setDrawColor(0,0,0),e.setLineWidth(.2),e.line(l,g,l+w,g),e.line(l,g+f,l+w,g+f)),("Invoice"===i.Type||"Goods Received"===i.Type&&2===c.row.index)&&(e.setDrawColor(0,0,0),e.setLineWidth(.2),e.line(l,g,l+w,g),e.line(l,g+f,l+w,g+f))),0==c.column.index&&(e.setDrawColor(0,0,0),e.setLineWidth(.2),e.line(o.x,o.y,o.x,o.y+o.height))}});const B=e.getNumberOfPages();for(let c=1;c<=B;c++){if(e.setPage(c),e.setFontSize(9),e.setFontSize(8),c===B){const f="Scrap Entry"===i.Type?278.4:i.table2body.length>=20?276.4:275.5;e.text(`${i.company_name} - Proudly coded`,16,f),e.setTextColor(24,129,176),e.text("by GFTPL",60,f),e.setTextColor(0,0,0),e.text("Thank You For The Business",157,f)}else e.text("Continued on next page",i.table2body.length>=20?160:190,i.table2body.length>=20?280.5:275);let o=14;e.addImage(F,"PNG",o,8,31,10),e.setFontSize(18),e.setTextColor(256,112,8),e.text(`${i.company_name}`,51,15),e.setTextColor(256,112,8),e.setTextColor(0,0,0),e.setFontSize(9),e.text(`GST ${i.company_gst}`,o,23),e.text(`${i.top_left_address_line1}`,o,27),e.text(`${i.top_left_address_line2}`,o,31),e.text(`Phone: ${i.top_left_phone}`,o,39),e.text(`Email: ${i.top_left_email}`,o,35),"Scrap Entry"!==i.Type&&(e.setTextColor(256,112,8),e.setFontSize(11),e.text("BILLING ADDRESS",o,48),e.setTextColor(0,0,0),e.setFontSize(9),e.text(`${i.company_name}`,o,55),e.text(`${i.BILLING_ADDRESS.address_line_1} ,${i.BILLING_ADDRESS.address_line_2}`,o,59),e.text(`${i.BILLING_ADDRESS.address_line_3}`,o,63),e.text(`Phone: ${i.BILLING_ADDRESS.phone}`,o,67),e.text(`${i.BILLING_ADDRESS.email}`,o,71)),e.setTextColor(0,0,0),e.setFontSize("Stock Transfer Request"===i.Type?16:19),e.text(`${i.Type}`,145,14),e.setDrawColor(0,0,0),e.setLineWidth(.2),e.line(197,17,142,17),e.setFontSize(7),e.text(`${i.Type} date : ${k}`,144,20),e.line(197,22,142,22),e.text(`${i.Type} no: ${i.order_no}`,144,25),e.line(197,27,142,27),e.text(`Page : ${c}`,144,30),e.line(197,32,142,32);let y=32;N&&(e.text(`Expiry Date : ${N}`,145,35),e.line(197,37,142,37),y=37),e.line(142,y,142,17),e.line(197,y,197,17);let l=159;"Scrap Entry"!==i.Type&&(e.setTextColor(256,112,8),e.setFontSize(11),e.text("SHIPPING ADDRESS",l,48),e.setTextColor(0,0,0),e.setFontSize(9),e.text(`${i.company_name}`,l,55),e.text(`${i.SHIPPING_ADDRESS.address_line_1} ,${i.SHIPPING_ADDRESS.address_line_2}`,l,59),e.text(`${i.SHIPPING_ADDRESS.address_line_3}`,l,63),e.text(`Phone: ${i.SHIPPING_ADDRESS.phone}`,l,67),e.text(`${i.SHIPPING_ADDRESS.email}`,l,71));const g=e.internal.pageSize.getWidth(),w=5;e.setDrawColor(224,224,224),e.setLineWidth(.2),e.line(w,42,g-w,42),$()(e,{head:V,body:"Scrap Entry"==i.Type?i.tbody1:J,startY:75,headStyles:{fontSize:"Goods Received"===i.Type?8:"Expense Voucher"===i.Type?7:9,textColor:[0,0,0],fillColor:[255,202,153]},alternateRowStyles:{fillColor:[255,255,255]},styles:{lineWidth:0,fillColor:void 0,halign:"center"},didDrawCell:f=>{if("body"===f.section||"head"===f.section){const{cell:h,table:n}=f;e.setDrawColor(0,0,0),e.setLineWidth(.2),0==f.row.index&&e.line(h.x,h.y,h.x+h.width,h.y),f.row.index==n.body.length-1&&e.line(h.x,h.y+h.height,h.x+h.width,h.y+h.height),0==f.column.index&&e.line(h.x,h.y,h.x,h.y+h.height),f.column.index==n.columns.length-1&&e.line(h.x+h.width,h.y,h.x+h.width,h.y+h.height)}}}),e.setDrawColor(0,0,0),e.setLineWidth(.2),"Goods Received"===i.Type?e.line(14,108.3,196,108.3):"Scrap Entry"==i.Type?e.line(14,53.5,196,53.5):"Countra Voucher"!==i.Type&&"Debit Note"!==i.Type&&"Credit Note"!==i.Type&&e.line(14,98.5,196,98.5)}e.save(`${i.Type}.pdf`,{returnPromise:!0}).then(()=>{setTimeout(()=>{this.loaderPdf.next(!1)},1e3)})})}generateNewPdf(i){this.loaderPdf.next(!0),this._com.loadImage().then(p=>{const e=new P.default("p","mm","a4"),x=document.createElement("canvas"),_=x.getContext("2d");x.width=200,x.height=200,_.clearRect(0,0,200,200),_.drawImage(p,0,0,200,200);const F=x.toDataURL("image/png",.9),k=i.table3head,N=[i.table2head],V=i.table3body,J=i.tbody1,O=i.foot2,U=i.table4head,z=i.table4body,R=i.table4foot,B=O.length,c=z.length,o=R.length;(n=>{const S=i.table2body.length%2,d=2-S;if(0!==S)for(let r=0;r<d;r++)i.table2body.push([])})(),e.autoTable({head:N,body:i.table2body,foot:O,startY:90,margin:{top:90},headStyles:{fontSize:8,textColor:[0,0,0],fillColor:[255,255,255]},bodyStyles:{fillColor:[255,255,255],fontSize:8,textColor:[0,0,0]},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:8,fontStyle:"normal"},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:n=>{const{cell:t,table:S}=n,{x:d,y:r,width:a,height:s}=t;if(e.setDrawColor(0,0,0),"body"===n.section||"head"===n.section){const E=0===n.row.index,D=1===n.row.index,L=0===n.column.index,v=n.column.index===S.columns.length-1;L||v||E||D?(e.setLineWidth(.2),(E||D)&&(e.line(t.x,t.y,t.x+t.width,t.y),e.line(t.x,t.y+t.height,t.x+t.width,t.y+t.height)),L&&e.line(t.x,t.y,t.x,t.y+t.height),v&&e.line(t.x+t.width,t.y,t.x+t.width,t.y+t.height)):t.styles.lineWidth=0}if("foot"===n.section){e.setLineWidth(.2);const E=0===n.row.index,D=n.row.index===B-1,L=0===n.column.index,v=n.column.index===n.table.columns.length-1;if(5===t.colSpan&&0===n.row.index&&0===n.column.index){t.styles.lineWidth=0,E&&e.line(d,r,d+a,r),D&&e.line(d,r+s,d+a,r+s),L&&e.line(d,r,d,r+s),v&&e.line(d+a,r,d+a,r+s);try{const G=new Image;G.src=F,console.log(G.src),e.addImage(F,"PNG",d+86,r+16,34,10)}catch(G){console.error("Error loading image:",G)}}else 3===t.colSpan?(e.line(d,r,d+a,r),e.setLineWidth(.2),e.line(d,r,d,r+s),e.line(d,r+s,d+a,r+s)):2===t.colSpan&&(e.line(d,r,d+a,r),e.setLineWidth(.2),e.line(d,r+s,d+a,r+s),e.line(d+a,r,d+a,r+s))}}}),e.autoTable({head:k,body:V,startY:e.lastAutoTable.finalY+-1,headStyles:{fontSize:8,textColor:[0,0,0],fillColor:[255,255,255]},bodyStyles:{fillColor:[255,255,255],fontSize:8},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:8,halign:"left"},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:n=>{const{cell:t,table:S}=n,{x:d,y:r,width:a,height:s}=t;e.setDrawColor(0,0,0),("body"===n.section||"head"===n.section)&&(e.setLineWidth(.2),e.line(d,r,d,r+s),e.line(d+a,r,d+a,r+s),e.line(d,r,d+a,r),e.line(d,r+s,d+a,r+s)),(0===n.column.index||1===n.column.index||n.column.index===S.columns.length)&&(e.setLineWidth(.2),e.line(t.x,t.y,t.x,t.y+t.height),e.line(t.x+t.width,t.y,t.x+t.width,t.y+t.height))}}),e.autoTable({head:U,body:z,foot:R,startY:e.lastAutoTable.finalY+-1,headStyles:{fontSize:9,textColor:[0,0,0],fillColor:[255,255,255]},bodyStyles:{fillColor:[255,255,255],fontSize:9,textColor:[0,0,0]},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:9},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:n=>{const{cell:t,table:S}=n,{x:d,y:r,width:a,height:s}=t;if(e.setDrawColor(0,0,0),("head"===n.section||"body"===n.section)&&((0===n.row.index||n.row.index===c)&&(e.setLineWidth(.2),e.line(d,r,d+a,r),e.line(d,r+s,d+a,r+s)),e.setLineWidth(.2),e.line(t.x+t.width,t.y,t.x+t.width,t.y+t.height),(0===n.column.index||n.column.index===S.columns.length-1)&&(e.setLineWidth(.2),e.line(t.x,t.y,t.x,t.y+t.height),e.line(t.x+t.width,t.y,t.x+t.width,t.y+t.height))),"foot"===n.section){const E=0===n.row.index,D=n.row.index===o-1,L=0===n.column.index,v=n.column.index===S.columns.length-1;L||v||E||D?(e.setLineWidth(.2),E&&e.line(t.x,t.y,t.x+t.width,t.y),D&&e.line(t.x,t.y+t.height,t.x+t.width,t.y+t.height),L&&e.line(t.x,t.y,t.x,t.y+t.height),v&&e.line(t.x+t.width,t.y,t.x+t.width,t.y+t.height),e.setLineWidth(.2),e.line(t.x+t.width,t.y,t.x+t.width,t.y+t.height)):t.styles.lineWidth=0}}});const h=e.getNumberOfPages();for(let n=1;n<=h;n++){if(e.setPage(n),e.setFontSize(9),e.setFontSize(8),n===h){const a="Scrap Entry"===i.Type?220.4:i.table2body.length>=2?218.4:217.5;e.setTextColor(24,129,176),e.setTextColor(0,0,0),e.setFont(void 0,"bold"),e.text("Thank You For The Business",85,a)}else e.text("Continued on next page",i.table2body.length>=2?160:190,i.table2body.length>=2?280.5:275);let t=14;e.setFontSize(16),e.setTextColor(0,0,0),e.setFont(void 0,"bold"),e.text(`${i.company_name.toUpperCase()}`,t,15),e.setTextColor(256,112,8),e.setTextColor(0,0,0),e.setFontSize(9),e.setFont(void 0,"normal"),e.text(`${i.top_left_address_line1}`,t,19),e.text(`${i.top_left_address_line2}`,t,23),e.setFont(void 0,"bold"),e.text(`GSTIN: ${i.company_gst}`,t,27),e.text(`MOBILE: ${i.top_left_phone}, EMAIL Id: ${i.top_left_email}`,t,31);let S=156;e.setTextColor(135,206,235),e.setFont(void 0,"bold"),e.setFontSize(16),e.text("TAX INVOICE",190,14,{align:"right"}),e.setFontSize(9),e.setTextColor(0,0,0),e.text("ORIGINAL FOR RECIPIENT ",190,18,{align:"right"}),e.addImage(F,"PNG",S,20,34,10);const d=e.internal.pageSize.getWidth(),r=14;e.setDrawColor(0,0,0),e.setLineWidth(.2),e.line(r,40,d-r,40),$()(e,{body:J,startY:40,headStyles:{fontSize:8,textColor:[0,0,0],fillColor:[255,202,153]},bodyStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:8,fontStyle:"normal"},footStyles:{fillColor:[255,255,255],textColor:[0,0,0],fontSize:8},alternateRowStyles:{fillColor:[255,255,255]},didDrawCell:a=>{const{cell:s,table:E}=a,{x:D,y:L,width:v}=s;e.setDrawColor(0,0,0),e.line(s.x+s.width,s.y,s.x+s.width,s.y+s.height),"body"===a.section&&(8===s.colSpan&&(s.styles.lineWidth=0,(0===a.column.index||a.column.index===E.columns.length-1)&&(e.line(s.x,s.y,s.x,s.y+s.height),e.line(s.x+s.width,s.y,s.x+s.width,s.y+s.height))),(2===a.cell.colSpan||[0,1,2,3].includes(a.row.index))&&8!==s.colSpan&&(e.setFont(void 0,"bold"),e.setLineWidth(0),e.line(D,L,D+v,L)))}})}e.save(`${i.Type}.pdf`,{returnPromise:!0}).then(()=>{setTimeout(()=>{this.loaderPdf.next(!1)},1e3)})})}set_address(i){let p={},e={};return i.address.map(x=>{"Billing"==x?.address_type&&x?.is_default?e={res:x}:"Shipping"==x.address_type&&x?.is_default&&(p={res:x})}),{fast_obj:e,secound_obj:p}}getBadgeClass(i){switch(i){case"Pending":return"pending-status-badge";case"Paid":return"approve-status-badge";default:return""}}}return C.\u0275fac=function(i){return new(i||C)(W.LFG(b.uU),W.LFG(I.J))},C.\u0275prov=W.Yz7({token:C,factory:C.\u0275fac}),C})()},30597:(X,Y,u)=>{u.d(Y,{l:()=>b});var P=u(94650),A=u(4392),$=u(97185),K=u(42917),W=u(80927);let b=(()=>{class I{constructor(C,M,i,p,e){this.router=C,this.Arout=M,this.toastr=i,this.profileService=p,this.coreService=e}canActivate(C,M){const i=JSON.parse(localStorage.getItem("auth"));if(this.profileService.userDetails$.subscribe(p=>{this.userDetails=p,this.permissions=this.userDetails?.permission}),i){const p=C.data.allowedRoles,e=i.some(_=>p.includes(_.codename));let x=this.coreService.profileData$.value;if(x&&x.username){this.userDetails=x,this.profileService.setUserDetails(this.userDetails),this.profileService.ProfileData$.next(x);const _=x?.permission,m=this.profileService.getUserDetails();(!m||m.length!==_.length)&&(this.profileService.setUserPermission(_),window.location.reload())}else this.coreService.getProfile().subscribe(_=>{this.userDetails=_,this.profileService.setUserDetails(this.userDetails),this.profileService.ProfileData$.next(_);const m=_?.permission,T=this.profileService.getUserDetails();(!T||T.length!==m.length)&&(this.profileService.setUserPermission(m),window.location.reload())});if(e)return!0}return this.toastr.error("User have Not Permission to Access This page"),this.router.navigate(["/dashboard"]),!1}}return I.\u0275fac=function(C){return new(C||I)(P.LFG(A.F0),P.LFG(A.gz),P.LFG($._W),P.LFG(K.J),P.LFG(W.p))},I.\u0275prov=P.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})()}}]);