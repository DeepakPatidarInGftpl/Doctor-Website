"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[2730],{2730:(G,y,c)=>{c.r(y),c.d(y,{EditbrandModule:()=>Q});var d=c(36895),l=c(88996),n=c(24006),t=c(94650),A=c(80927),Z=c(97185),g=c(42917);function x(i,s){1&i&&(t.TgZ(0,"span",30),t._uU(1,"Enter Brand "),t.qZA())}function h(i,s){1&i&&(t.TgZ(0,"span",30),t._uU(1,"Enter code "),t.qZA())}function C(i,s){1&i&&(t.TgZ(0,"span",30),t._uU(1,"Enter discount (ex-1-100) "),t.qZA())}const u=function(i){return{"is-invalid":i}};function p(i,s){if(1&i){const r=t.EpF();t.TgZ(0,"a",31)(1,"input",32,33),t.NdJ("change",function(o){t.CHM(r);const a=t.oxw();return t.KtG(a.onCheckCategory(o))}),t.qZA(),t.TgZ(3,"label",34),t.NdJ("click",function(o){t.CHM(r);const a=t.oxw();return t.KtG(a.onLabelClick(o))}),t._uU(4),t.qZA()()}if(2&i){const r=s.$implicit,e=s.index,o=t.oxw();t.xp6(1),t.Q6J("value",r.id)("checked",o.selectCat.includes(r.id)||o.selectedCategoryIds.includes(r.id))("ngClass",t.VKq(6,u,o.f.category.touched&&o.f.category.invalid))("id","checkboxCat-"+e),t.xp6(2),t.Q6J("for","checkboxCat-"+e),t.xp6(1),t.Oqu(r.title)}}function f(i,s){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const r=t.oxw();t.xp6(1),t.Oqu(r.selectedCat+" Category Selected")}}function _(i,s){1&i&&(t.TgZ(0,"span",30),t._uU(1,"Select Category "),t.qZA())}function S(i,s){if(1&i){const r=t.EpF();t.TgZ(0,"a",31)(1,"input",35),t.NdJ("change",function(o){t.CHM(r);const a=t.oxw();return t.KtG(a.onCheckSize(o))}),t.qZA(),t.TgZ(2,"label",34),t.NdJ("click",function(o){t.CHM(r);const a=t.oxw();return t.KtG(a.onLabelClick(o))}),t._uU(3),t.qZA()()}if(2&i){const r=s.$implicit,e=s.index,o=t.oxw();t.xp6(1),t.Q6J("value",r.id)("ngClass",t.VKq(6,u,o.f.subcategory_group.touched&&o.f.subcategory_group.invalid))("id","checkbox-"+e)("checked",o.subcatGroup.includes(r.id)||o.selectedSubCategoryGroupIds.includes(r.id)),t.xp6(1),t.Q6J("for","checkbox-"+e),t.xp6(1),t.Oqu(r.title)}}function v(i,s){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const r=t.oxw();t.xp6(1),t.Oqu(r.selectedSubCatGrp+" Subcategory group Selected")}}function M(i,s){1&i&&(t.TgZ(0,"span",30),t._uU(1,"Select subcategory group "),t.qZA())}function E(i,s){if(1&i){const r=t.EpF();t.TgZ(0,"a",31)(1,"input",36),t.NdJ("change",function(o){t.CHM(r);const a=t.oxw();return t.KtG(a.onCheckChange(o))}),t.qZA(),t.TgZ(2,"label",34),t.NdJ("click",function(o){t.CHM(r);const a=t.oxw();return t.KtG(a.onLabelClick(o))}),t._uU(3),t.qZA()()}if(2&i){const r=s.$implicit,e=s.index,o=t.oxw();t.xp6(1),t.Q6J("value",r.id)("checked",o.selectSubcat.includes(r.id)||o.selectedSubCategoryIds.includes(null==r?null:r.id))("ngClass",t.VKq(6,u,o.f.subcategory.touched&&o.f.subcategory.invalid))("id","checkboxSub-"+e),t.xp6(1),t.Q6J("for","checkboxSub-"+e),t.xp6(1),t.Oqu(r.title)}}function w(i,s){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const r=t.oxw();t.xp6(1),t.Oqu(r.selectedSubcat+" Subcategory Selected")}}function I(i,s){1&i&&(t.TgZ(0,"span",30),t._uU(1,"Select subcategory "),t.qZA())}function F(i,s){1&i&&(t.TgZ(0,"span",30),t._uU(1,"Select image"),t.qZA())}function J(i,s){if(1&i&&t._UZ(0,"img",37),2&i){const r=t.oxw();t.Q6J("src",r.url,t.LSH)}}function L(i,s){if(1&i&&t._UZ(0,"img",37),2&i){const r=t.oxw();t.Q6J("src",r.imgUrl+(null==r.updateData?null:r.updateData.image),t.LSH)}}function N(i,s){1&i&&(t.TgZ(0,"button",38),t._uU(1,"Submit"),t.qZA())}function O(i,s){1&i&&(t.TgZ(0,"button",39),t._UZ(1,"span",40),t._uU(2,"\xa0Submit"),t.qZA())}const T=function(){return{standalone:!0}},k=[{path:"",component:(()=>{class i{constructor(r,e,o,a,b,m){this.coreService=r,this.fb=e,this.Arout=o,this.toastr=a,this.router=b,this.cs=m,this.show=!1,this.imgUrl="https://pv.greatfuturetechno.com",this.dropdownList=[],this.selectedItems=[],this.dropdownSettings={},this.subcatGroup=[],this.selectSubcat=[],this.selectCat=[],this.categoryList=[],this.filteredCategoryList=[],this.searchCategory="",this.selectedCat=0,this.selectedCategoryIds=[],this.subcatGroupList=[],this.filteredSubCategoryGroupList=[],this.searchSubCategoryGroup="",this.selectedSubCategoryGroupIds=[],this.subcatbySubcatGroup=[],this.filteredSubCategoryList=[],this.searchSubCategory="",this.selectedSubcat=0,this.selectedSubCategoryIds=[],this.selectedSubCatGrp=0,this.loaders=!1}get f(){return this.brandForm.controls}ngOnInit(){this.id=this.Arout.snapshot.paramMap.get("id"),this.brandForm=new n.cw({title:new n.NI("",[n.kI.required]),code:new n.NI(""),image:new n.NI(""),discount:new n.NI("",[n.kI.pattern(/^(100|[0-9]{1,2})$/)]),category:new n.Oe([]),subcategory_group:new n.Oe([],[n.kI.required]),subcategory:new n.Oe([],[n.kI.required])}),this.dropdownSettings={singleSelection:!1,idField:"id",textField:"product_title",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!0},this.coreService.getbrandById(this.id).subscribe(r=>{this.url="",this.id==r.id&&(this.updateData=r,this.subcatId=r.subcategory_group[0].id,this.subcatGroup=r?.subcategory_group.map(e=>e.id),this.selectSubcat=r?.subcategory.map(e=>e.id),this.selectCat=r?.category.map(e=>e?.id),this.brandForm.patchValue({title:r.title,code:r.code,discount:r.discount}),r?.category.length>0&&this.getSubcatGroupByCategory(this.selectCat),this.getSubcategoryBySubcatGroup(this.subcatGroup),this.getCategory())})}onItemSelect(r){this.brandForm.get("variant").push(new n.NI(r.id))}onItemDeselect(r){let e=this.brandForm.get("variant");const o=e.controls.findIndex(a=>a.value===r.id);-1!==o&&e.removeAt(o)}onSelectAll(r){let e=this.brandForm.get("variant");r.forEach(o=>{e.push(new n.NI(o.id))})}onDeselectAll(r){this.brandForm.get("variant").clear()}getCategory(){this.coreService.getCategory().subscribe(r=>{this.categoryList=r,this.filteredCategoryList=[...this.categoryList],this.categoryList.map(e=>{this.selectedCat=this.selectCat.length,this.selectCat.includes(e.id)&&this.brandForm.get("category").push(new n.NI(e.id))})})}filterCategory(){this.filteredCategoryList=""===this.searchCategory.trim()?[...this.categoryList]:this.categoryList.filter(r=>r.title.toLowerCase().includes(this.searchCategory.toLowerCase()))}onCheckCategory(r){const e=this.brandForm.get("category");if(r.target.checked)e.push(new n.NI(parseInt(r.target.value))),this.check=e,this.selectedCat++,this.selectedCategoryIds=e.value,this.getSubcatGroupByCategory(e.value);else{let o=0;e.controls.forEach(a=>{if(a.value==r.target.value)return e.removeAt(o),this.selectedCat--,void this.getSubcatGroupByCategory(e.value);o++})}}getSubcatGroupByCategory(r){const e=JSON.stringify(r);this.coreService.getSubcategoryGroupByCategoryid(e).subscribe(o=>{this.subcatGroupList=o,this.filteredSubCategoryGroupList=[...this.subcatGroupList],this.subcatGroupList.map(a=>{this.selectedSubCatGrp=this.subcatGroup.length,this.subcatGroup.includes(a.id)&&this.brandForm.get("subcategory_group").push(new n.NI(a.id))})})}filterSubCategoryGroup(){this.filteredSubCategoryGroupList=""===this.searchSubCategoryGroup.trim()?[...this.subcatGroupList]:this.subcatGroupList.filter(r=>r.title.toLowerCase().includes(this.searchSubCategoryGroup.toLowerCase()))}onSelect(r){const e=r.target.files[0];if(e){const o=new FileReader;o.readAsDataURL(e),o.onload=()=>{this.url=o.result}}this.brandForm.patchValue({image:e}),this.brandForm.get("image")?.updateValueAndValidity()}getSubcatGroup(){this.coreService.getSubcategoryGroup().subscribe(r=>{this.subcatGroupList=r,this.subcatGroupList.map(e=>{this.subcatGroup.includes(e.id)&&this.brandForm.get("subcategory_group").push(new n.NI(e.id))})})}onCheckSize(r){const e=this.brandForm.get("subcategory_group");if(r.target.checked)e.push(new n.NI(parseInt(r.target.value))),this.check=e,this.selectedSubCatGrp++,this.getSubcategoryBySubcatGroup(e.value),this.selectedSubCategoryGroupIds=e.value;else{let o=0;e.controls.forEach(a=>{if(a.value==r.target.value)return e.removeAt(o),this.selectedSubCatGrp--,void this.getSubcategoryBySubcatGroup(e.value);o++})}}getSubcategoryBySubcatGroup(r){const e=JSON.stringify(r);this.coreService.getSubcategoryBySubcatGroupid(e).subscribe(o=>{this.subcatbySubcatGroup=this.filterDuplicates(o),this.filteredSubCategoryList=[...this.subcatbySubcatGroup],this.subcatbySubcatGroup.map(a=>{this.selectedSubcat=this.selectSubcat.length,this.selectSubcat.includes(a.id)&&this.brandForm.get("subcategory").push(new n.NI(a.id))})})}filterDuplicates(r){const e={},o=[];for(const a of r)e[a.id]||(e[a.id]=!0,o.push(a));return o}filterSubCategory(){this.filteredSubCategoryList=""===this.searchSubCategory.trim()?[...this.subcatbySubcatGroup]:this.subcatbySubcatGroup.filter(r=>r.title.toLowerCase().includes(this.searchSubCategory.toLowerCase()))}onCheckChange(r){const e=this.brandForm.get("subcategory");if(r.target.checked)e.push(new n.NI(parseInt(r.target.value))),this.check=e,this.selectedSubcat++,this.selectedSubCategoryIds=e.value;else{let o=0;e.controls.forEach(a=>{if(a.value==r.target.value)return e.removeAt(o),void this.selectedSubcat--;o++})}}update(){var r=new FormData;const e=Array.from(new Set(this.brandForm.get("category")?.value)),o=Array.from(new Set(this.brandForm.get("subcategory_group")?.value)),a=Array.from(new Set(this.brandForm.get("subcategory")?.value));if(r.append("title",this.brandForm.get("title")?.value),r.append("code",this.brandForm.get("code")?.value),r.append("discount",this.brandForm.get("discount")?.value),r.append("category",JSON.stringify(e)),r.append("subcategory_group",JSON.stringify(o)),r.append("subcategory",JSON.stringify(a)),this.brandForm.valid){this.loaders=!0;const b=this.brandForm.get("image")?.value;b&&b instanceof File?(r.append("image",b),this.coreService.updatebrand(r,this.id).subscribe(m=>{this.addRes=m,this.addRes.success?(this.loaders=!1,this.toastr.success(this.addRes.msg),this.router.navigate(["//product/brandlist"]),this.updateData="",this.url="",this.brandForm.reset(),this.selectedSubcat=0,this.selectedSubCatGrp=0):this.loaders=!1},m=>{})):this.coreService.updatebrand(r,this.id).subscribe(m=>{this.addRes=m,this.addRes.success&&(this.loaders=!1,this.updateData="",this.url="",this.toastr.success(this.addRes.msg),this.router.navigate(["//product/brandlist"]),this.brandForm.reset(),this.selectedSubcat=0,this.selectedSubCatGrp=0)},m=>{})}else this.brandForm.markAllAsTouched(),this.toastr.error("Please Fill All The Required Fields")}get title(){return this.brandForm.get("title")}get image(){return this.brandForm.get("image")}get code(){return this.brandForm.get("code")}get subcategory_group(){return this.brandForm.get("subcategory_group")}get subcategory(){return this.brandForm.get("subcategory")}get discount(){return this.brandForm.get("discount")}get category(){return this.brandForm.get("category")}onLabelClick(r){r.stopPropagation()}}return i.\u0275fac=function(r){return new(r||i)(t.Y36(A.p),t.Y36(n.qu),t.Y36(l.gz),t.Y36(Z._W),t.Y36(l.F0),t.Y36(g.J))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-editbrand"]],decls:92,vars:36,consts:[[1,"page-header"],[1,"page-title"],[1,"card"],[1,"card-body"],[1,"row"],[3,"formGroup","ngSubmit"],[1,"col-lg-6","col-sm-6","col-12"],[1,"form-group"],["type","text","formControlName","title","id","title",3,"ngClass"],["class","text-danger",4,"ngIf"],["type","text","formControlName","code","id","code",3,"ngClass"],["type","text","formControlName","discount","id","discount",3,"ngClass"],[1,"dropdown"],["type","button","type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","button"],[1,"dropdown-menu",2,"width","100%","max-height","300px","overflow-y","auto"],["type","text","placeholder","search category",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["class","dropdown-item",4,"ngFor","ngForOf"],[4,"ngIf"],["type","text","placeholder","search subcategory group",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["type","text","placeholder","search subcategory",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"col-lg-6"],[1,"image-upload"],["type","file","formControlName","image",3,"change"],[1,"image-uploads"],["src","assets/img/icons/upload.svg","alt","img"],["alt","","class","p_img",3,"src",4,"ngIf"],[1,"col-lg-12"],["class","btn btn-submit me-2",4,"ngIf"],["class","btn btn-submit me-2","type","submit","disabled","",4,"ngIf"],["routerLink","//product/brandlist",1,"btn","btn-cancel"],[1,"text-danger"],[1,"dropdown-item"],["type","checkbox","formArrayName","category",2,"margin-right","5px",3,"value","checked","ngClass","id","change"],["categoryValue",""],[2,"margin-bottom","0",3,"for","click"],["type","checkbox","formArrayName","subcategory_group",2,"margin-right","5px",3,"value","ngClass","id","checked","change"],["type","checkbox","formArrayName","subcategory",2,"margin-right","5px",3,"value","checked","ngClass","id","change"],["alt","",1,"p_img",3,"src"],[1,"btn","btn-submit","me-2"],["type","submit","disabled","",1,"btn","btn-submit","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(r,e){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3,"Brand Edit"),t.qZA(),t.TgZ(4,"h6"),t._uU(5,"Update your Brand"),t.qZA()()(),t.TgZ(6,"div",2)(7,"div",3)(8,"div",4)(9,"form",5),t.NdJ("ngSubmit",function(){return e.update()}),t.TgZ(10,"div",4)(11,"div",6)(12,"div",7)(13,"label"),t._uU(14,"Brand*"),t.qZA(),t._UZ(15,"input",8),t.YNc(16,x,2,0,"span",9),t.qZA()(),t.TgZ(17,"div",6)(18,"div",7)(19,"label"),t._uU(20,"Code"),t.qZA(),t._UZ(21,"input",10),t.YNc(22,h,2,0,"span",9),t.qZA()(),t.TgZ(23,"div",6)(24,"div",7)(25,"label"),t._uU(26,"Discount %"),t.qZA(),t._UZ(27,"input",11),t.YNc(28,C,2,0,"span",9),t.qZA()(),t.TgZ(29,"div",6)(30,"div",7)(31,"label"),t._uU(32,"Category"),t.qZA(),t.TgZ(33,"div",12)(34,"button",13),t._uU(35,"Select Category"),t.qZA(),t.TgZ(36,"ul",14)(37,"li")(38,"input",15),t.NdJ("ngModelChange",function(a){return e.searchCategory=a})("ngModelChange",function(){return e.filterCategory()}),t.qZA()(),t.TgZ(39,"li"),t.YNc(40,p,5,8,"a",16),t.qZA()()(),t.YNc(41,f,2,1,"p",17),t.YNc(42,_,2,0,"span",9),t.qZA()(),t.TgZ(43,"div",6)(44,"div",7)(45,"label"),t._uU(46,"Subcategory group"),t.qZA(),t.TgZ(47,"div",12)(48,"button",13),t._uU(49,"Select Subcategory group"),t.qZA(),t.TgZ(50,"ul",14)(51,"li")(52,"input",18),t.NdJ("ngModelChange",function(a){return e.searchSubCategoryGroup=a})("ngModelChange",function(){return e.filterSubCategoryGroup()}),t.qZA()(),t.TgZ(53,"li"),t.YNc(54,S,4,8,"a",16),t.qZA()()(),t.YNc(55,v,2,1,"p",17),t.YNc(56,M,2,0,"span",9),t.qZA()(),t.TgZ(57,"div",6)(58,"div",7)(59,"label"),t._uU(60,"SubCategory*"),t.qZA(),t.TgZ(61,"div",12)(62,"button",13),t._uU(63,"Select Subcategory"),t.qZA(),t.TgZ(64,"ul",14)(65,"li")(66,"input",19),t.NdJ("ngModelChange",function(a){return e.searchSubCategory=a})("ngModelChange",function(){return e.filterSubCategory()}),t.qZA()(),t.TgZ(67,"li"),t.YNc(68,E,4,8,"a",16),t.qZA()()(),t.YNc(69,w,2,1,"p",17),t.YNc(70,I,2,0,"span",9),t.qZA()(),t.TgZ(71,"div",6)(72,"div",7)(73,"label"),t._uU(74," Brand Image*"),t.qZA(),t.TgZ(75,"div",4)(76,"div",20)(77,"div",21)(78,"input",22),t.NdJ("change",function(a){return e.onSelect(a)}),t.qZA(),t.TgZ(79,"div",23),t._UZ(80,"img",24),t.TgZ(81,"h4"),t._uU(82,"Drag and drop a file to upload"),t.qZA()(),t.YNc(83,F,2,0,"span",9),t.qZA()(),t.TgZ(84,"div",20),t.YNc(85,J,1,1,"img",25),t.YNc(86,L,1,1,"img",25),t.qZA()()()(),t.TgZ(87,"div",26),t.YNc(88,N,2,0,"button",27),t.YNc(89,O,3,0,"button",28),t.TgZ(90,"a",29),t._uU(91,"Cancel"),t.qZA()()()()()()()),2&r&&(t.xp6(9),t.Q6J("formGroup",e.brandForm),t.xp6(6),t.Q6J("ngClass",t.VKq(27,u,e.f.title.touched&&e.f.title.invalid)),t.xp6(1),t.Q6J("ngIf",e.title&&e.title.invalid&&e.title.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(29,u,e.f.code.touched&&e.f.code.invalid)),t.xp6(1),t.Q6J("ngIf",e.code&&e.code.invalid&&e.code.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(31,u,e.f.discount.touched&&e.f.discount.invalid)),t.xp6(1),t.Q6J("ngIf",e.discount&&e.discount.invalid&&e.discount.touched),t.xp6(10),t.Q6J("ngModel",e.searchCategory)("ngModelOptions",t.DdM(33,T)),t.xp6(2),t.Q6J("ngForOf",e.filteredCategoryList),t.xp6(1),t.Q6J("ngIf",e.selectedCat>0),t.xp6(1),t.Q6J("ngIf",e.category&&e.category.invalid&&e.category.touched),t.xp6(10),t.Q6J("ngModel",e.searchSubCategoryGroup)("ngModelOptions",t.DdM(34,T)),t.xp6(2),t.Q6J("ngForOf",e.filteredSubCategoryGroupList),t.xp6(1),t.Q6J("ngIf",e.selectedSubCatGrp>0),t.xp6(1),t.Q6J("ngIf",e.subcategory_group&&e.subcategory_group.invalid&&e.subcategory_group.touched),t.xp6(10),t.Q6J("ngModel",e.searchSubCategory)("ngModelOptions",t.DdM(35,T)),t.xp6(2),t.Q6J("ngForOf",e.filteredSubCategoryList),t.xp6(1),t.Q6J("ngIf",e.selectedSubcat>0),t.xp6(1),t.Q6J("ngIf",e.subcategory&&e.subcategory.invalid&&e.subcategory.touched),t.xp6(13),t.Q6J("ngIf",e.image&&e.image.invalid&&e.image.touched),t.xp6(2),t.Q6J("ngIf",e.url),t.xp6(1),t.Q6J("ngIf",!e.url),t.xp6(2),t.Q6J("ngIf",!e.loaders),t.xp6(1),t.Q6J("ngIf",e.loaders))},dependencies:[d.mk,d.sg,d.O5,l.yS,n._Y,n.Fj,n.JJ,n.JL,n.On,n.sg,n.u,n.CE],styles:['.table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){border-top:none!important}.labelSize[_ngcontent-%COMP%]{display:flex;align-items:center}.entries[_ngcontent-%COMP%]{font-size:12px;color:#5e5873;font-weight:600}.labelSize[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid #ced4da;width:80px;height:30px;padding:0;border-radius:3px}.thone[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{float:unset;margin-left:5px}@media (max-width: 765px){.thone[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{float:inherit;margin-top:0}}.fa-sort[_ngcontent-%COMP%]:before{content:"\\f0dc";right:.5em;color:#babfc7;font-size:12px;opacity:1}.ng-dirty.ng-invalid.is-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}select[_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], input[type=button][_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;padding:10px 15px;border-radius:5px}.button[_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;display:flex;padding:10px 15px;border-radius:5px;justify-content:space-between;align-items:center;background:white}.p_img[_ngcontent-%COMP%]{margin-right:3rem!important;height:100px}']}),i})(),canActivate:[c(30597).l],data:{allowedRoles:["change_brands"]}}];let D=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[l.Bz.forChild(k),l.Bz]}),i})();var P=c(8468);let Q=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.ez,D,P.I]}),i})()},30597:(G,y,c)=>{c.d(y,{l:()=>Z});var d=c(94650),l=c(88996),n=c(97185),t=c(42917),A=c(80927);let Z=(()=>{class g{constructor(h,C,u,p,f){this.router=h,this.Arout=C,this.toastr=u,this.profileService=p,this.coreService=f}canActivate(h,C){const u=JSON.parse(localStorage.getItem("auth"));if(this.profileService.userDetails$.subscribe(p=>{this.userDetails=p,this.permissions=this.userDetails?.permission}),u){const p=h.data.allowedRoles;console.log(p,"allowedRoles");const f=u.some(_=>p.includes(_.codename));if(console.log(f),this.coreService.getProfile().subscribe(_=>{this.userDetails=_,this.profileService.setUserDetails(this.userDetails);const S=_?.permission,v=this.profileService.getUserDetails();(!v||v.length!==S.length)&&(this.profileService.setUserPermission(S),window.location.reload())}),f)return!0}return this.toastr.error("User have Not Permission to Access This page"),this.router.navigate(["/dashboard"]),!1}}return g.\u0275fac=function(h){return new(h||g)(d.LFG(l.F0),d.LFG(l.gz),d.LFG(n._W),d.LFG(t.J),d.LFG(A.p))},g.\u0275prov=d.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()}}]);