"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[2398],{2398:(O,v,l)=>{l.r(v),l.d(v,{TaxSlabsModule:()=>I});var b=l(6895),S=l(8996),r=l(4006),t=l(4650),C=l(927),i=l(7185);function c(n,s){if(1&n&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.title," ")}}function a(n,s){1&n&&(t.TgZ(0,"span",29),t._uU(1,"Select Category "),t.qZA())}const d=function(n){return{"is-invalid":n}};function p(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"a",30)(1,"input",31),t.NdJ("change",function(g){t.CHM(e);const m=t.oxw();return t.KtG(m.onCheckChange(g))}),t.qZA(),t.TgZ(2,"label",32),t.NdJ("click",function(g){t.CHM(e);const m=t.oxw();return t.KtG(m.onLabelClick(g))}),t._uU(3),t.qZA()()}if(2&n){const e=s.$implicit,o=s.index,g=t.oxw();t.xp6(1),t.Q6J("value",e.id)("ngClass",t.VKq(5,d,g.f.subcategory.touched&&g.f.subcategory.invalid))("id","checkboxSize-"+o),t.xp6(1),t.Q6J("for","checkboxSize-"+o),t.xp6(1),t.Oqu(e.title)}}function u(n,s){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.selectedSubcat+" Subcategory Selected")}}function f(n,s){1&n&&(t.TgZ(0,"span",29),t._uU(1,"Select Sub Category "),t.qZA())}function x(n,s){1&n&&(t.TgZ(0,"span",29),t._uU(1,"Subcategory not available "),t.qZA())}function _(n,s){if(1&n&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.s9C("value",e.id),t.xp6(1),t.hij(" ",e.tax_percentage+"%"," ")}}function h(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr",33)(2,"td"),t._UZ(3,"input",34),t.qZA(),t.TgZ(4,"td"),t._UZ(5,"input",35),t.qZA(),t.TgZ(6,"td")(7,"select",36)(8,"option",11),t._uU(9,"Select tax"),t.qZA(),t.YNc(10,_,2,2,"option",12),t.qZA()(),t.TgZ(11,"td")(12,"button",37),t.NdJ("click",function(){const m=t.CHM(e).index,M=t.oxw();return t.KtG(M.removeAmount(m))}),t._uU(13,"\u2212"),t.qZA()()(),t.BQk()}if(2&n){const e=s.index,o=t.oxw();t.xp6(1),t.Q6J("formGroupName",e),t.xp6(9),t.Q6J("ngForOf",o.taxList)}}function T(n,s){1&n&&(t.TgZ(0,"button",38),t._uU(1,"Submit"),t.qZA())}function y(n,s){1&n&&(t.TgZ(0,"button",39),t._UZ(1,"span",40),t._uU(2," Submit"),t.qZA())}const A=[{path:"",component:(()=>{class n{constructor(e,o,g,m){this.fb=e,this.coreService=o,this.router=g,this.toastrService=m,this.selectSubcat=[],this.selectedSubcat=0,this.loaders=!1}get f(){return this.taxSlabForm.controls}ngOnInit(){this.taxSlabForm=this.fb.group({subcategory_group:new r.NI("",[r.kI.required]),subcategory:new r.Oe([],[r.kI.required]),amount_tax_slabs:this.fb.array([])}),this.addAmount(),this.getSubcateGroup(),this.getTax()}amount_tax_slabs(){return this.fb.group({from_amount:"",to_amount:"",tax:""})}getAmount(){return this.taxSlabForm.get("amount_tax_slabs")}addAmount(){this.getAmount().push(this.amount_tax_slabs())}removeAmount(e){this.getAmount().removeAt(e)}get subcategory_group(){return this.taxSlabForm.get("subcategory_group")}get subcategory(){return this.taxSlabForm.get("subcategory")}get tax(){return this.taxSlabForm.get("tax")}getSubcateGroup(){this.coreService.getSubcategoryGroup().subscribe(e=>{console.log(e),this.subcatGroupList=e})}getTax(){this.coreService.gettaxd().subscribe(e=>{console.log(e),this.taxList=e,console.log(this.taxList)})}getSubcategoryBySubcatGroup(e){this.coreService.getSubcategoryBySubcatGroup(e).subscribe(o=>{console.log(o.subcategories),this.subcatbySubcatGroup=o.subcategories,setTimeout(()=>{this.subcatbySubcatGroup.map(g=>{console.log(this.selectSubcat.includes(g.id),"subcategory"),this.selectSubcat.includes(g.id)&&this.taxSlabForm.get("subcategory").push(new r.NI(g.id))})},2e3)})}onCheckChange(e){const o=this.taxSlabForm.get("subcategory");if(e.target.checked)o.push(new r.NI(parseInt(e.target.value))),this.check=o,this.selectedSubcat++;else{let g=0;o.controls.forEach(m=>{if(m.value==e.target.value)return o.removeAt(g),void this.selectedSubcat--;g++})}}submit(){console.log(this.taxSlabForm.value),this.taxSlabForm.valid?(this.loaders=!0,this.coreService.addTaxSlab(this.taxSlabForm.value).subscribe(e=>{console.log(e),this.addRes=e,"Tax Slabs Created"==this.addRes.msg&&(this.loaders=!1,this.toastrService.success(this.addRes.msg),this.router.navigate(["product/taxSlabList"]))})):(this.taxSlabForm.markAllAsTouched(),console.log("forms invalid"))}onLabelClick(e){e.stopPropagation()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(C.p),t.Y36(S.F0),t.Y36(i._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-tax-slabs"]],decls:56,vars:13,consts:[[1,"page-header","justify-content-center"],[1,"page-title"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"card"],[1,"card-body"],[1,"row","form-card"],[1,"col-lg-4","col-sm-4","col-12"],[1,"form-group"],["formControlName","subcategory_group","required","","id","subcategory_group",1,"w-100","h-100","border",3,"ngClass","change"],["category_idValue","","categoryValue",""],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"dropdown"],["type","button","type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","button"],[1,"dropdown-menu",2,"width","100%"],["class","dropdown-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-lg-8","col-sm-8","col-12"],[1,"table","amt-table"],["formArrayName","amount_tax_slabs"],[4,"ngFor","ngForOf"],[1,"w-100","text-right"],[1,"addMore",3,"click"],[1,"col-lg-8","text-end","mt-5"],["class","btn btn-submit me-2",4,"ngIf"],["class","btn btn-submit me-2","type","submit","disabled","",4,"ngIf"],[3,"value"],[1,"text-danger"],[1,"dropdown-item"],["type","checkbox","formArrayName","subcategory",2,"margin-right","5px",3,"value","ngClass","id","change"],[2,"margin-bottom","0",3,"for","click"],[3,"formGroupName"],["type","text","formControlName","from_amount","placeholder","ex-100",1,"form-control","inp"],["type","text","formControlName","to_amount","placeholder","ex-1000",1,"form-control","inp"],["formControlName","tax",1,"inp"],[1,"btn",2,"background","#FF9F43",3,"click"],[1,"btn","btn-submit","me-2"],["type","submit","disabled","",1,"btn","btn-submit","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,o){if(1&e){const g=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3,"Tax Slab Add"),t.qZA(),t.TgZ(4,"h6"),t._uU(5,"Create new Tax Slab"),t.qZA()()(),t.TgZ(6,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(7,"div",3)(8,"div",4)(9,"div",5)(10,"div",6)(11,"div",7)(12,"div",8)(13,"label"),t._uU(14,"Subcategory Group*"),t.qZA(),t.TgZ(15,"select",9,10),t.NdJ("change",function(){t.CHM(g);const M=t.MAs(17);return t.KtG(o.getSubcategoryBySubcatGroup(M.value))}),t.TgZ(18,"option",11),t._uU(19,"select subcategory group"),t.qZA(),t.YNc(20,c,2,2,"option",12),t.qZA(),t.YNc(21,a,2,0,"span",13),t.qZA()(),t.TgZ(22,"div",7)(23,"div",8)(24,"label"),t._uU(25,"SubCategory*"),t.qZA(),t.TgZ(26,"div",14)(27,"button",15),t._uU(28,"Select Subcategory"),t.qZA(),t.TgZ(29,"ul",16)(30,"li"),t.YNc(31,p,4,7,"a",17),t.qZA()()(),t.YNc(32,u,2,1,"p",18),t.YNc(33,f,2,0,"span",13),t.YNc(34,x,2,0,"span",13),t.qZA()(),t.TgZ(35,"div",19)(36,"table",20)(37,"thead")(38,"tr")(39,"th"),t._uU(40,"From Amount"),t.qZA(),t.TgZ(41,"th"),t._uU(42,"To Amount"),t.qZA(),t.TgZ(43,"th"),t._uU(44,"Tax"),t.qZA(),t.TgZ(45,"th"),t._uU(46,"\xa0"),t.qZA()()(),t.TgZ(47,"tbody"),t.ynx(48,21),t.YNc(49,h,14,2,"ng-container",22),t.BQk(),t.qZA()(),t.TgZ(50,"div",23)(51,"span",24),t.NdJ("click",function(){return o.addAmount()}),t._uU(52,"+ Add more"),t.qZA()()(),t.TgZ(53,"div",25),t.YNc(54,T,2,0,"button",26),t.YNc(55,y,3,0,"button",27),t.qZA()()()()()()}2&e&&(t.xp6(6),t.Q6J("formGroup",o.taxSlabForm),t.xp6(9),t.Q6J("ngClass",t.VKq(11,d,o.f.subcategory_group.touched&&o.f.subcategory_group.invalid)),t.xp6(5),t.Q6J("ngForOf",o.subcatGroupList),t.xp6(1),t.Q6J("ngIf",o.subcategory_group&&o.subcategory_group.invalid&&o.subcategory_group.touched),t.xp6(10),t.Q6J("ngForOf",o.subcatbySubcatGroup),t.xp6(1),t.Q6J("ngIf",o.selectedSubcat>0),t.xp6(1),t.Q6J("ngIf",o.subcategory&&o.subcategory.invalid&&o.subcategory.touched&&(null==o.subcatbySubcatGroup?null:o.subcatbySubcatGroup.length)>0),t.xp6(1),t.Q6J("ngIf",o.subcategory_group&&o.subcategory_group.touched&&(null==o.subcatbySubcatGroup?null:o.subcatbySubcatGroup.length)<=0),t.xp6(15),t.Q6J("ngForOf",o.getAmount().controls),t.xp6(5),t.Q6J("ngIf",!o.loaders),t.xp6(1),t.Q6J("ngIf",o.loaders))},dependencies:[b.mk,b.sg,b.O5,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.Q7,r.sg,r.u,r.x0,r.CE],styles:['.ng-dirty.ng-invalid.is-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}select[_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], input[type=button][_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;padding:10px 15px;border-radius:5px}.button[_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;display:flex;padding:10px 15px;border-radius:5px;justify-content:space-between;align-items:center;background-color:#fff}.table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){border-top:none!important}.labelSize[_ngcontent-%COMP%]{display:flex;align-items:center}.entries[_ngcontent-%COMP%]{font-size:12px;color:#5e5873;font-weight:600;float:left;margin-top:10px}.labelSize[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid #ced4da;width:80px;height:30px;padding:0;border-radius:3px}.thone[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{float:right;margin-top:4px}@media (max-width: 765px){.thone[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{float:inherit;margin-top:0}}.fa-sort[_ngcontent-%COMP%]:before{content:"\\f0dc";right:.5em;color:#babfc7;font-size:12px;opacity:1}.inp[_ngcontent-%COMP%]{border:none}.amt-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#EEF0F8}.amt-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#FAFBFE}.addMore[_ngcontent-%COMP%]{color:#ff9f43;font-size:20px;font-weight:500;float:right}.form-card[_ngcontent-%COMP%]{width:100%;margin:auto;justify-content:center}']}),n})()}];let Z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[S.Bz.forChild(A),S.Bz]}),n})();var N=l(906),P=l(5415),w=l(3189),J=l(4333),G=l(4040),U=l(4385),q=l(6709);let I=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[b.ez,Z,N.ZU,r.u5,r.UX,P.T,w.h,J.JX,G.l,U.LD,q.p9]}),n})()},5415:(O,v,l)=>{l.d(v,{G:()=>r,T:()=>C});var b=l(4650),r=function(){function i(c,a,d){this.el=c,this.vcr=a,this.renderer=d,this.dtOptions={}}return i.prototype.ngOnInit=function(){var c=this;this.dtTrigger?this.dtTrigger.subscribe(function(a){c.displayTable(a)}):this.displayTable(null)},i.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},i.prototype.displayTable=function(c){var a=this;c&&(this.dtOptions=c),this.dtInstance=new Promise(function(d,p){Promise.resolve(a.dtOptions).then(function(u){0===Object.keys(u).length&&0===$("tbody tr",a.el.nativeElement).length?p("Both the table and dtOptions cannot be empty"):setTimeout(function(){var x={rowCallback:function(_,h,T){if(u.columns){var y=u.columns;a.applyNgPipeTransform(_,y),a.applyNgRefTemplate(_,y,h)}u.rowCallback&&u.rowCallback(_,h,T)}};x=Object.assign({},u,x),a.dt=$(a.el.nativeElement).DataTable(x),d(a.dt)})})})},i.prototype.applyNgPipeTransform=function(c,a){a.filter(function(p){return p.ngPipeInstance&&!p.ngTemplateRef}).forEach(function(p){var u=p.ngPipeInstance,f=p.ngPipeArgs||[],x=a.findIndex(function(y){return y.data===p.data}),_=c.childNodes.item(x),h=$(_).text(),T=u.transform.apply(u,function(i,c,a){if(a||2===arguments.length)for(var u,d=0,p=c.length;d<p;d++)(u||!(d in c))&&(u||(u=Array.prototype.slice.call(c,0,d)),u[d]=c[d]);return i.concat(u||Array.prototype.slice.call(c))}([h],f,!1));$(_).text(T)})},i.prototype.applyNgRefTemplate=function(c,a,d){var p=this;a.filter(function(f){return f.ngTemplateRef&&!f.ngPipeInstance}).forEach(function(f){var x=f.ngTemplateRef,_=x.ref,h=x.context,T=a.findIndex(function(Z){return Z.data===f.data}),y=c.childNodes.item(T);$(y).html("");var F=Object.assign({},h,h?.userData,{adtData:d}),A=p.vcr.createEmbeddedView(_,F);p.renderer.appendChild(y,A.rootNodes[0])})},i.\u0275fac=function(a){return new(a||i)(b.Y36(b.SBq),b.Y36(b.s_b),b.Y36(b.Qsj))},i.\u0275dir=b.lG2({type:i,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),i}(),t=l(6895),C=function(){function i(){}return i.forRoot=function(){return{ngModule:i}},i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=b.oAB({type:i}),i.\u0275inj=b.cJS({imports:[t.ez]}),i}()}}]);