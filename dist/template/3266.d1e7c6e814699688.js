"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[3266],{73266:(E,q,u)=>{u.r(q),u.d(q,{EditproductModule:()=>Mt});var g=u(36895),C=u(89299),s=u(24006),Z=u(32728),z=u(3512),t=u(94650),m=u(80927),U=u(97185),h=u(3848),S=u(97392);const y=["tabGroups"];function f(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Enter Article No. "),t.qZA())}function T(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Enter Product Name"),t.qZA())}function x(i,a){if(1&i&&(t.TgZ(0,"option",80),t._uU(1),t.qZA()),2&i){const o=a.$implicit;t.s9C("value",o.id),t.xp6(1),t.hij(" ",o.title," ")}}function N(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Select category "),t.qZA())}function M(i,a){if(1&i&&(t.TgZ(0,"option",80),t._uU(1),t.qZA()),2&i){const o=a.$implicit;t.s9C("value",o.id),t.xp6(1),t.hij(" ",o.title," ")}}function P(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Select Subcategory Group "),t.qZA())}function J(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Subcategory Group not available "),t.qZA())}function k(i,a){if(1&i&&(t.TgZ(0,"option",80),t._uU(1),t.qZA()),2&i){const o=a.$implicit;t.s9C("value",o.id),t.xp6(1),t.hij(" ",o.title,"")}}function w(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Select Sub Category "),t.qZA())}function G(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Subcategory not available "),t.qZA())}function Q(i,a){if(1&i&&(t.TgZ(0,"option",80),t._uU(1),t.qZA()),2&i){const o=a.$implicit;t.s9C("value",o.id),t.xp6(1),t.hij(" ",o.title," ")}}function L(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Select Brand "),t.qZA())}function B(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Brands not available "),t.qZA())}function V(i,a){if(1&i&&(t.TgZ(0,"option",80),t._uU(1),t.qZA()),2&i){const o=a.$implicit;t.s9C("value",o.id),t.xp6(1),t.hij(" ",o.hsn_code," ")}}function D(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Select HSN Code "),t.qZA())}function Y(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"HSN Code not available "),t.qZA())}const d=function(i){return{"is-invalid":i}};function K(i,a){if(1&i){const o=t.EpF();t.TgZ(0,"a",81)(1,"input",82),t.NdJ("change",function(r){const c=t.CHM(o).$implicit,l=t.oxw();return t.KtG(l.onCheckColor(r,c.id,c.title))}),t.qZA(),t.TgZ(2,"label",83),t.NdJ("click",function(r){t.CHM(o);const n=t.oxw();return t.KtG(n.onLabelClick(r))}),t._uU(3),t.qZA()()}if(2&i){const o=a.$implicit,e=a.index,r=t.oxw();t.xp6(1),t.Q6J("value",o.id)("checked",r.colors.includes(o.id)||r.selectedColorId.includes(o.id))("ngClass",t.VKq(6,d,r.f.color.touched&&r.f.color.invalid))("id","checkbox-"+e),t.xp6(1),t.Q6J("for","checkbox-"+e),t.xp6(1),t.Oqu(o.title)}}function R(i,a){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const o=t.oxw();t.xp6(1),t.Oqu(o.selectedColor+" Colors Selected")}}function $(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Select Color "),t.qZA())}function H(i,a){if(1&i){const o=t.EpF();t.TgZ(0,"a",81)(1,"input",84),t.NdJ("change",function(r){const c=t.CHM(o).$implicit,l=t.oxw();return t.KtG(l.onCheckSize(r,c.id,c.title))}),t.qZA(),t.TgZ(2,"label",83),t.NdJ("click",function(r){t.CHM(o);const n=t.oxw();return t.KtG(n.onLabelClick(r))}),t._uU(3),t.qZA()()}if(2&i){const o=a.$implicit,e=a.index,r=t.oxw();t.xp6(1),t.Q6J("value",o.id)("checked",r.sizes.includes(o.id)||r.selectedSizeId.includes(o.id))("ngClass",t.VKq(6,d,r.f.size.touched&&r.f.size.invalid))("id","checkboxSize-"+e),t.xp6(1),t.Q6J("for","checkboxSize-"+e),t.xp6(1),t.Oqu(o.title)}}function j(i,a){if(1&i&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&i){const o=t.oxw();t.xp6(1),t.Oqu(o.selectedSize+" Size Selected")}}function W(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Select Size "),t.qZA())}function X(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Select Product Store "),t.qZA())}function tt(i,a){if(1&i&&(t.TgZ(0,"option",80),t._uU(1),t.qZA()),2&i){const o=a.$implicit;t.s9C("value",o.id),t.xp6(1),t.hij("",o.title," ")}}function et(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Select Unit "),t.qZA())}function ot(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Select Product or Service "),t.qZA())}function rt(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Enter Return Time"),t.qZA())}function it(i,a){if(1&i&&(t.TgZ(0,"option",80),t._uU(1),t.qZA()),2&i){const o=a.$implicit;t.s9C("value",o.id),t.xp6(1),t.Oqu(null==o?null:o.slab_title)}}function nt(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Select Sale Tax"),t.qZA())}function at(i,a){if(1&i&&(t.TgZ(0,"option",80),t._uU(1),t.qZA()),2&i){const o=a.$implicit;t.s9C("value",o.id),t.xp6(1),t.Oqu(null==o?null:o.slab_title)}}function st(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Select Purchase Tax"),t.qZA())}function ct(i,a){if(1&i&&(t.TgZ(0,"option",80),t._uU(1),t.qZA()),2&i){const o=a.$implicit;t.s9C("value",o.id),t.xp6(1),t.Oqu(null==o?null:o.title)}}function lt(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Select Product Label"),t.qZA())}function ut(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function dt(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Enter Description "),t.qZA())}function pt(i,a){if(1&i&&(t.TgZ(0,"option",80),t._uU(1),t.qZA()),2&i){const o=a.$implicit;t.s9C("value",o.id),t.xp6(1),t.hij(" ",o.title," ")}}function gt(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"tr",85)(2,"td",86)(3,"div",87)(4,"div",88),t._UZ(5,"input",89),t.TgZ(6,"label"),t._uU(7),t.qZA()(),t.TgZ(8,"div",90)(9,"select",91)(10,"option",21),t._uU(11,"Select Feature"),t.qZA(),t.YNc(12,pt,2,2,"option",22),t.qZA()()()()(),t.BQk()),2&i){const o=a.index,e=t.oxw();t.xp6(1),t.Q6J("formGroupName",o),t.xp6(4),t.Q6J("readonly",!0),t.xp6(2),t.Oqu(null==e.featureGrpBysubcatGroupList||null==e.featureGrpBysubcatGroupList.feature_group[o]?null:e.featureGrpBysubcatGroupList.feature_group[o].title),t.xp6(5),t.Q6J("ngForOf",e.featureList[o])}}function ht(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Enter Variant name"),t.qZA())}function _t(i,a){1&i&&(t.TgZ(0,"span",79),t._uU(1,"Enter Variant size"),t.qZA())}function mt(i,a){if(1&i){const o=t.EpF();t.ynx(0),t.TgZ(1,"tr",85)(2,"td",71),t._UZ(3,"input",92),t.qZA(),t.TgZ(4,"td"),t._UZ(5,"input",93),t.YNc(6,ht,2,0,"span",17),t.qZA(),t.TgZ(7,"td"),t._UZ(8,"input",94),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"input",94)(11,"br"),t.YNc(12,_t,2,0,"span",17),t.qZA(),t.TgZ(13,"td"),t._UZ(14,"input",95),t.qZA(),t.TgZ(15,"td"),t.O4$(),t.TgZ(16,"svg",96),t.NdJ("click",function(){const n=t.CHM(o).index,c=t.oxw();return t.KtG(c.removeVariant(n))}),t._UZ(17,"path",97)(18,"path",98),t.qZA()()(),t.BQk()}if(2&i){const o=a.index,e=t.oxw();let r,n;t.xp6(1),t.Q6J("formGroupName",o),t.xp6(2),t.Q6J("ngModel",e.productNamme)("readonly",!0),t.xp6(2),t.Q6J("readonly",!0),t.xp6(1),t.Q6J("ngIf",(null==(r=e.getvariant_name(o))?null:r.invalid)&&(null==(r=e.getvariant_name(o))?null:r.touched)),t.xp6(2),t.Q6J("value",void 0!==e.varntColor[o]?e.varntColor[o]:"")("readonly",!0),t.xp6(2),t.Q6J("value",void 0!==e.varntSize[o]?e.varntSize[o]:"")("readonly",!0),t.xp6(2),t.Q6J("ngIf",(null==(n=e.getvariant_size(o))?null:n.invalid)&&(null==(n=e.getvariant_size(o))?null:n.touched)),t.xp6(2),t.Q6J("ngModel",e.getSku(o))}}function ft(i,a){if(1&i&&(t.TgZ(0,"option",80),t._uU(1),t.qZA()),2&i){const o=a.$implicit;t.s9C("value",o.id),t.xp6(1),t.hij("",o.title," ")}}function bt(i,a){if(1&i&&t._UZ(0,"img",111),2&i){const o=t.oxw().index,e=t.oxw();t.Q6J("src",e.url[o],t.LSH)}}function Ct(i,a){if(1&i&&t._UZ(0,"img",112),2&i){const o=t.oxw().index,e=t.oxw();t.Q6J("src",e.imgUrl+(null==e.updateData[o]?null:e.updateData[o].image),t.LSH)}}function vt(i,a){if(1&i){const o=t.EpF();t.ynx(0),t.TgZ(1,"tr",85)(2,"td")(3,"select",99)(4,"option",21),t._uU(5,"Color"),t.qZA(),t.YNc(6,ft,2,2,"option",22),t.qZA()(),t.TgZ(7,"td")(8,"div",100),t.YNc(9,bt,1,1,"img",101),t.YNc(10,Ct,1,1,"img",102),t.TgZ(11,"div",103)(12,"input",104),t.NdJ("change",function(r){const c=t.CHM(o).index,l=t.oxw();return t.KtG(l.onImageSelected(r,c))}),t.qZA(),t.TgZ(13,"div",105)(14,"h4",106),t._uU(15,"Upload"),t.qZA(),t.O4$(),t.TgZ(16,"svg",107),t._UZ(17,"path",108)(18,"path",109),t.qZA()()()()(),t.kcU(),t.TgZ(19,"td")(20,"div",100)(21,"button",110),t.NdJ("click",function(){const n=t.CHM(o).index,c=t.oxw();return t.KtG(c.removeProductImage(n))}),t._uU(22,"Clear"),t.qZA(),t.TgZ(23,"button",66),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.addproductImage())}),t._uU(24,"Add"),t.qZA()()()(),t.BQk()}if(2&i){const o=a.index,e=t.oxw();t.xp6(1),t.Q6J("formGroupName",o),t.xp6(5),t.Q6J("ngForOf",e.colorTitle),t.xp6(1),t.Akn("width:30%"),t.xp6(2),t.Q6J("ngIf",e.url[o]),t.xp6(1),t.Q6J("ngIf",!e.url[o]&&(null==e.updateData[o]?null:e.updateData[o].image))}}function Zt(i,a){1&i&&(t.TgZ(0,"button",113),t._uU(1,"Save & Create New"),t.qZA())}function yt(i,a){1&i&&(t.TgZ(0,"button",114),t._UZ(1,"span",115),t._uU(2," \xa0 Save & Create New"),t.qZA())}const O=function(){return{standalone:!0}};let Tt=(()=>{class i{constructor(o,e,r,n,c,l){this.coreService=o,this.router=e,this.fb=r,this.toastr=n,this.Aroute=c,this.location=l,this.measurable=!1,this.colors=[],this.sizes=[],this.colorTitle=[],this.colorId=[],this.sizeTitle=[],this.sizeId=[],this.ischeck=!0,this.uncheck=!1,this.editordoc=z.Z,this.toolbar=[["bold","italic"],["underline","strike"],["code","blockquote"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["align_left","align_center","align_right","align_justify"]],this.imgUrl="https://pv.greatfuturetechno.com",this.updateData=[],this.arraySubCat=[],this.colorList=[],this.searchColor="",this.sizeList=[],this.searchSize="",this.featureList=[],this.selectedColor=0,this.selectColor=[],this.selectedColorId=[],this.selectedSize=0,this.selectSize=[],this.selectedSizeId=[],this.varantArray=[],this.varntColor=[],this.varntSize=[],this.selectedVariant=0,this.loader=!1,this.currentSizes=[],this.currentColors=[],this.currentVariants=[],this.liveColor=[],this.url=[],this.p_img=[],this.Show=!0,this.variantProducts=[],this.isOnline=!1}selectTab(o){this.tabGroup.selectedIndex=o}get f(){return this.productForm.controls}get doc(){return this.productForm.get("description")}ngOnInit(){this.editor=new Z.ML,this.id=this.Aroute.snapshot.paramMap.get("id"),this.productForm=this.fb.group({title:new s.NI("",[s.kI.required]),category:new s.NI("",[s.kI.required]),subcategory_group:new s.NI("",[s.kI.required]),subcategory:new s.NI("",[s.kI.required]),brand:new s.NI("",[s.kI.required]),color:new s.Oe([],[s.kI.required]),size:new s.Oe([],[s.kI.required]),product_store:new s.NI("",[s.kI.required]),unit:new s.NI("",[s.kI.required]),purchase_tax_including:new s.NI(""),sale_tax_including:new s.NI(""),is_measurable:new s.NI(""),sales_tax_including:new s.NI(""),is_active:new s.NI(""),description:new s.NI(""),return_time:new s.NI("",[s.kI.required,s.kI.pattern(/^[0-9]*$/)]),cod_available:new s.NI("",[s.kI.required]),product_or_service:new s.NI("",[s.kI.required]),sale_tax:new s.NI("",[s.kI.required]),purchase_tax:new s.NI("",[s.kI.required]),product_features:this.fb.array([]),variant_product:this.fb.array([]),product_images:this.fb.array([]),hsncode:new s.NI(""),product_label:new s.NI("",[s.kI.required]),article_no:new s.NI("")}),this.coreService.getProductById(this.id).subscribe(o=>{if(this.id==o.id){this.editRes=o,this.colors=o.color.map(r=>r.id),this.sizes=o.size.map(r=>r.id),this.colorTitle=o.color.map(r=>r),this.colorId=o.color.map(r=>r.id),this.sizeTitle=o.size.map(r=>r),this.sizeId=o.size.map(r=>r.id),this.coloList=o.color,this.selectColor=o.variant_product.map(r=>r.color).filter(Boolean),this.selectSize=o.variant_product.map(r=>r.size).filter(Boolean),this.productForm.patchValue({title:o.title,description:o.description,product_store:o.product_store,style_code:o.style_code,is_measurable:o.is_measurable,purchase_tax_including:o.purchase_tax_including,sale_tax_including:o.sale_tax_including,is_active:o.is_active,category:o.category.id,subcategory_group:o?.subcategory_group?.id,subcategory:o?.subcategory?.id,brand:o.brand?.id,hsncode:o?.hsncode?o?.hsncode?.id:"",unit:o.unit.id,return_time:o?.return_time,cod_available:o?.cod_available,product_or_service:o?.product_or_service,purchase_tax:o?.purchase_tax?.id,sale_tax:o?.sale_tax?.id,product_label:o?.product_label?.id,article_no:o.article_no?o?.article_no:""}),this.productForm.setControl("product_features",this.udateFeature(this.editRes?.product_feature_product));const e=this.productForm.get("product_images");e.clear(),o.product_images.length<=0?this.addproductImage():o.product_images.forEach((r,n)=>{this.updateData[n]=r;const c=this.fb.group({product_colour:r.product_colour||"",image:"",id:r.id||""});e.push(c)}),this.getSubcategoryGroupByCategory(o.category.id),this.oncheck(o.subcategory_group.id),this.getFeaturegroupBySubcategory(o?.subcategory.id,""),this.checkSubact(o.subcategory.id),this.updatedVariants=this.editRes.variant_product,this.variantLive(),this.editRes.product_images&&(this.updateImages=this.editRes.product_images)}}),this.addproductImage(),this.getCategory(),this.getSubCategory(),this.getBrand(),this.getFeatureSubCat(),this.getSubcatGroup(),this.getColor(),this.getSize(),this.getUnit(),this.getUnitConversion(),this.getTaxSlab(),this.getFeatureGroup(),this.getProductLabel()}onSelectionChange(o,e){this.arraySubCat.push(o.id),e.checked?this.colors.push(o.id):this.colors=this.colors.filter(r=>r!==o.id)}udateFeature(o){let e=new s.Oe([]);return o.forEach(r=>{console.log(r),e.push(this.fb.group({id:r.id,feature_group:r?.feature_group?.id,feature:r.feature.id}))}),e}updateImage(o){let e=new s.Oe([]);return o.forEach(r=>{e.push(this.fb.group({product_colour:r.product_colour,id:r.id}))}),e}features(){return this.fb.group({id:"",feature_group:"",feature:""})}getFeature(){return this.productForm.get("product_features")}addFeature(){this.getFeature().push(this.features())}removeAmount(o){this.getFeature().removeAt(o)}variants(){return this.fb.group({product_title:"",variant_name:new s.NI("",[s.kI.required]),variant_size:new s.NI("",[s.kI.required]),variant_color:"",sku:new s.NI("")})}getVarinatsForm(){return this.productForm.get("variant_product")}addVariant(){this.getVarinatsForm().push(this.variants())}removeVariant(o){this.getVarinatsForm().removeAt(o)}productImage(){return this.fb.group({id:"",product_colour:"",image:""})}getproductImage(){return this.productForm.get("product_images")}addproductImage(){this.getproductImage().push(this.productImage())}removeProductImage(o){this.getproductImage().removeAt(o)}getCategory(){this.coreService.getCategory().subscribe(o=>{this.categoryList=o})}getSubCategory(){this.coreService.getSubcategory().subscribe(o=>{this.subcatList=o})}getBrand(){this.coreService.getBrand().subscribe(o=>{this.brandList=o})}getFeatureSubCat(){this.coreService.getFuature_groupD().subscribe(o=>{this.featureSubCatList=o})}getSubcatGroup(){this.coreService.getSubcategoryGroup().subscribe(o=>{this.subcatGroupList=o})}getSubcategoryGroupByCategory(o){this.coreService.getSubcatGraoupByCategory(o).subscribe(e=>{this.subcatGroupByCategory=e})}getTaxSlab(){this.coreService.getTaxSlab().subscribe(o=>{this.taxSlabList=o})}getColor(){this.coreService.getColor().subscribe(o=>{this.colorList=o,this.filteredColorData=this.colorList.slice(),this.filterColorData(),setTimeout(()=>{this.colorList.map(e=>{this.selectedColor=this.colors.length,this.colors.includes(e.id)&&this.productForm.get("color").push(new s.NI(e.id))})},2e3)})}filterColorData(){let o=this.colorList.slice();if(this.searchColor){const e=this.searchColor.toLowerCase();o=o.filter(r=>r?.title.toLowerCase().includes(e))}this.filteredColorData=o}getSize(){this.coreService.getSize().subscribe(o=>{this.sizeList=o,this.filteredSizeData=this.sizeList.slice(),this.filterSizeData(),setTimeout(()=>{this.sizeList.map(e=>{this.selectedSize=this.sizes.length,this.sizes.includes(e.id)&&this.productForm.get("size").push(new s.NI(e.id))})},1e3)})}filterSizeData(){let o=this.sizeList.slice();if(this.searchSize){const e=this.searchSize.toLowerCase();o=o.filter(r=>r?.title.toLowerCase().includes(e))}this.filteredSizeData=o}getUnit(){this.coreService.getUnit().subscribe(o=>{this.unitList=o})}getUnitConversion(){this.coreService.getunitconversion().subscribe(o=>{this.unitConversionList=o})}getSubcategoryByCategory(o){this.coreService.getSubcategoryByCategory(o).subscribe(e=>{this.subcatbyCategory=e})}selectBrand(o){this.coreService.getBrandBySubcategory(o).subscribe(e=>{this.brandBySubcat=e})}getFeatureData(){this.coreService.getfeature().subscribe(o=>{})}getFeatureByFeaturegroup(o,e){this.coreService.getFeatureByFeaturegroup(o).subscribe(r=>{this.featureList[e]=r,console.log(this.featureList[e])})}getFeatureGroup(){this.coreService.getFeatureGroup().subscribe(o=>{this.featureGroupList=o})}getHsncodeBySubcategory(o){this.coreService.getHsnCodeBySubcategory(o).subscribe(e=>{this.hsncodeBysubcatList=e})}getTaxslabBySubcategory(o){this.coreService.getTaxslabBySubcategory(o).subscribe(e=>{this.taxSlabBysubcatList=e})}getProductLabel(){this.coreService.getProductLabel().subscribe(o=>{this.labelList=o})}getFeaturegroupBySubcategory(o,e){console.log(e),this.coreService.getFeaturegroupBySubcategory(o).subscribe(r=>{if(console.log(r),this.featureGrpBysubcatGroupList=r,e){this.productForm.get("product_features").clear();for(let c=0;c<this.featureGrpBysubcatGroupList.feature_group.length;c++)this.addFeature(),this.getFeatureByFeaturegroup(this.featureGrpBysubcatGroupList.feature_group[c].id,c);this.featureGrpBysubcatGroupList.feature_group.forEach((c,l)=>{this.productForm.get("product_features").at(l).patchValue({feature_group:c.id})})}else for(let n=0;n<this.featureGrpBysubcatGroupList.feature_group.length;n++)this.getFeatureByFeaturegroup(this.featureGrpBysubcatGroupList.feature_group[n].id,n)})}getSubcategoryBySubcategoryGroup(o){this.coreService.getSubcategoryBySubcatGroup(o).subscribe(e=>{this.subcatbySubCategoryGroup=e.subcategories})}oncheck(o){this.getSubcategoryBySubcategoryGroup(o)}checkSubact(o){this.selectBrand(o),this.getHsncodeBySubcategory(o)}onCheckColor(o,e,r){const n=this.productForm.get("color");if(o.target.checked)n.push(new s.NI(parseInt(o.target.value))),this.checkcolor=n,this.selectedColor++,this.selectedColorId=n.value;else{let c=0;n.controls.forEach(l=>{if(l.value==o.target.value)return n.removeAt(c),void this.selectedColor--;c++})}if(0===this.colorTitle.length)this.colorTitle.push({id:e,title:r}),this.selectColor.push({id:e,title:r});else{const c=this.colorTitle.find(l=>l.id===e&&l.title===r);c?(this.colorTitle=this.colorTitle.filter(l=>l!==c),this.selectColor=this.selectColor.filter(l=>l!==c)):(this.colorTitle.push({id:e,title:r}),this.selectColor.push({id:e,title:r}))}this.variantLive()}onCheckSize(o,e,r){let n=this.productForm.get("size");if(o.target.checked)n.push(new s.NI(parseInt(o.target.value))),this.check=n,this.selectedSize++,this.selectedSizeId=n.value;else{let c=0;n.controls.forEach(l=>{if(l.value==o.target.value)return n.removeAt(c),void this.selectedSize--;c++})}if(0===this.sizeTitle.length)this.sizeTitle.push({id:e,title:r}),this.selectSize.push({id:e,title:r});else{const c=this.sizeTitle.find(l=>l.id===e&&l.title===r);c?(this.sizeTitle=this.sizeTitle.filter(l=>l!==c),this.selectSize=this.selectSize.filter(l=>l!==c)):(this.sizeTitle.push({id:e,title:r}),this.selectSize.push({id:e,title:r}))}this.variantLive()}variantLive(){if(this.varantArray=[],this.colorTitle.length>0&&0==this.sizeTitle.length)for(let r=0;r<this.colorTitle.length;r++)this.varantArray.push({color:this.colorTitle[r]}),this.productColor=this.colorTitle[r];else if(this.sizeTitle.length>0&&0==this.colorTitle.length)for(let r=0;r<this.sizeTitle.length;r++)this.varantArray.push({size:this.sizeTitle[r]});else for(let r=0;r<this.sizeTitle.length;r++)for(let n=0;n<this.colorTitle.length;n++)this.varantArray.push({size:this.sizeTitle[r],color:this.colorTitle[n]});this.productForm.get("variant_product").clear();for(let r=0;r<this.varantArray.length;r++)this.getVarinatsForm().push(this.variants());const e=this.productForm.get("variant_product");this.varantArray.map((r,n)=>{e.at(n).patchValue({variant_name:null==r.color?.title?r.size?.title:null==r.size?.title?r.color?.title:`${r.color?.title} - ${r.size?.title}`,variant_color:null==r?.color?.id?r?.color?.id:`${r?.color?.id}`,variant_size:null==r?.size?.id?r?.size?.id:`${r?.size?.id}`})}),this.varantArray.forEach((r,n)=>{this.varntColor[n]=null==r?.color?.title?r?.color?.title:`${r?.color?.title}`,this.varntSize[n]=null==r?.size?.title?r?.size?.title:`${r?.size?.title}`}),this.updatedVariants.map((r,n)=>{e.at(n)})}onCheckVariant(o){const e=this.productForm.get("variant");if(o.target.checked)e.push(new s.NI(parseInt(o.target.value))),this.check=e,this.selectedVariant++;else{let r=0;e.controls.forEach(n=>{if(n.value==o.target.value)return e.removeAt(r),void this.selectedVariant--;r++})}}submit(){let o=new FormData;o.append("title",this.productForm.get("title")?.value),o.append("category",this.productForm.get("category")?.value),o.append("subcategory",this.productForm.get("subcategory")?.value),o.append("brand",this.productForm.get("brand")?.value),o.append("subcategory_group",this.productForm.get("subcategory_group")?.value),o.append("unit",this.productForm.get("unit")?.value),o.append("description",this.productForm.get("description")?.value),o.append("product_store",this.productForm.get("product_store")?.value),o.append("color",JSON.stringify(this.productForm.get("color")?.value)),o.append("size",JSON.stringify(this.productForm.get("size")?.value)),o.append("is_measurable",this.productForm.get("is_measurable")?.value),o.append("purchase_tax_including",this.productForm.get("purchase_tax_including")?.value),o.append("sale_tax_including",this.productForm.get("sale_tax_including")?.value),o.append("is_active",this.productForm.get("is_active")?.value),o.append("return_time",this.productForm.get("return_time")?.value),o.append("cod_available",this.productForm.get("cod_available")?.value),o.append("product_or_service",this.productForm.get("product_or_service")?.value),o.append("sale_tax",this.productForm.get("sale_tax")?.value),o.append("purchase_tax",this.productForm.get("purchase_tax")?.value),o.append("hsncode",this.productForm.get("hsncode")?.value),o.append("product_label",this.productForm.get("product_label")?.value),o.append("article_no",this.productForm.get("article_no")?.value);const e=this.productForm.get("variant_product"),r=[];e.controls.forEach(l=>{const _=l,v={};Object.keys(_.controls).forEach(p=>{v[p]=_.controls[p].value}),r.push(v)}),o.append("variant_product",JSON.stringify(r));const n=this.productForm.get("product_features"),c=[];if(n.controls.forEach(l=>{const _=l,v={};Object.keys(_.controls).forEach(p=>{v[p]=_.controls[p].value}),c.push(v)}),o.append("product_features",JSON.stringify(c)),this.productForm.valid){this.loader=!0;const l=this.productForm.get("product_images"),_=[];l.controls.forEach(p=>{const A=p,b={};if(Object.keys(A.controls).forEach(F=>{b[F]=A.controls[F].value}),""===b.id)delete b.id;else if("string"==typeof b.id){const F=b.id.split("-");b.id=F[0],b.someOtherField=F[1]}_.push(b)});const v=JSON.stringify(_);o.append("product_images",v),this.coreService.updateProduct(o,this.id).subscribe(p=>{p.success?(this.loader=!1,this.toastr.success(p.msg),this.router.navigate(["//product/productlist"])):(this.loader=!1,this.toastr.error(p.error))},p=>{this.toastr.error(p.message)})}else this.toastr.error("Please fill all required fields before proceeding."),this.productForm.markAllAsTouched()}get title(){return this.productForm.get("title")}get category(){return this.productForm.get("category")}get subcategory(){return this.productForm.get("subcategory")}get brand(){return this.productForm.get("brand")}get features_subcategory(){return this.productForm.get("features_subcategory")}get subcategory_group(){return this.productForm.get("subcategory_group")}get unit(){return this.productForm.get("unit")}get unit_conversion(){return this.productForm.get("unit_conversion")}get description(){return this.productForm.get("description")}get product_store(){return this.productForm.get("product_store")}get product_label(){return this.productForm.get("product_label")}get article_no(){return this.productForm.get("article_no")}get color(){return this.productForm.get("color")}get size(){return this.productForm.get("size")}get variant(){return this.productForm.get("variant")}get style_code(){return this.productForm.get("style_code")}get is_measurable(){return this.productForm.get("is_measurable")}get tax_slab(){return this.productForm.get("tax_slab")}get return_time(){return this.productForm.get("return_time")}get product_or_service(){return this.productForm.get("product_or_service")}get purchase_tax(){return this.productForm.get("purchase_tax")}get sale_tax(){return this.productForm.get("sale_tax")}get hsncode(){return this.productForm.get("hsncode")}getvariant_name(o){return this.getVarinatsForm().controls[o].get("variant_name")}getvariant_size(o){return this.getVarinatsForm().controls[o].get("variant_size")}onCheckSizes(o){0==this.currentSizes.length?this.currentSizes.push(o):this.currentSizes.includes(o)?this.currentSizes=this.currentSizes.filter(e=>e!==o):this.currentSizes.push(o),this.variantCheck()}onCheckColors(o){0==this.currentColors.length?this.currentColors.push(o):this.currentColors.includes(o)?this.currentColors=this.currentColors.filter(e=>e!==o):this.currentColors.push(o),this.variantCheck()}variantCheck(){if(this.currentVariants=[],this.currentColors.length>0&&0==this.currentSizes.length)for(let e=0;e<this.currentColors.length;e++)this.currentVariants.push({color:this.currentColors[e]});else if(this.currentSizes.length>0&&0==this.currentColors.length)for(let e=0;e<this.currentSizes.length;e++)this.currentVariants.push({size:this.currentSizes[e]});else for(let e=0;e<this.currentSizes.length;e++)for(let r=0;r<this.currentColors.length;r++)this.currentVariants.push({size:this.currentSizes[e],color:this.currentColors[r]});this.variantForm();const o=this.productForm.get("variant_product");this.currentVariants.map((e,r)=>{o.at(r).patchValue({variant_name:null==e.color?e.size:null==e.size?e.color:`${e.color} - ${e.size}`,variant_color:null==e.color?e.color:`${e.color}`,variant_size:null==e.size?e.size:`${e.size}`})})}variantForm(){this.productForm.get("variant_product").clear();for(let e=0;e<this.currentVariants.length;e++)this.getVarinatsForm().push(this.variants())}selectImg(o){const e=o.target.files[0],n=this.productForm.get("product_images").at(0);n.patchValue({image:e}),n.get("image")?.updateValueAndValidity()}onImageSelected(o,e){const r=o.target.files[0],n=new FileReader;if(r){this.isImage=r,this.Show=!1;const l=new FileReader;l.readAsDataURL(r),l.onload=()=>{this.url[e]=l.result}}const c=this.productForm.get("product_images").at(e);n.onload=()=>{const l=n.result.toString().split(",")[1];c.patchValue({image:l})},n.readAsDataURL(r),c.get("file")?.updateValueAndValidity()}goBack(){this.location.back()}onLabelClick(o){o.stopPropagation()}price(o){this.variantProducts[o]={color:"",size:"",sku:""}}getSku(o){const e=this.variantProducts[o];return e?e.sku:this.updatedVariants[o]?.sku||""}getColors(o){const e=this.variantProducts[o];return e?e.color.id:this.updatedVariants[o]?.color.id||""}getSiz(o){const e=this.variantProducts[o];return e?e.size.id:this.updatedVariants[o]?.size.id||""}saveAndNext(){this.isFormValid()?this.tabGroup.selectedIndex=1:this.toastr.error("Please fill all required fields before proceeding.")}isFormValid(){return this.productForm.markAllAsTouched(),this.productForm.valid}storeOnline(o){"Online"===o?(this.description.setValidators([s.kI.required]),this.isOnline=!0):(this.description.clearValidators(),this.isOnline=!1),this.description.updateValueAndValidity()}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(m.p),t.Y36(C.F0),t.Y36(s.qu),t.Y36(U._W),t.Y36(C.gz),t.Y36(g.Ye))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-editproduct"]],viewQuery:function(o,e){if(1&o&&t.Gf(y,5),2&o){let r;t.iGM(r=t.CRH())&&(e.tabGroup=r.first)}},decls:269,vars:108,consts:[[1,"row","bg"],[1,"card"],[1,"card-body"],[1,"page-header"],[1,"page-title"],[1,"subhead-color",3,"click"],[2,"vertical-align","middle"],[1,"company-details-card","card"],[1,"sub-card","row"],[3,"formGroup","ngSubmit"],["animationDuration","0ms"],["tabGroups",""],["label","General Details"],[1,"row","mt-3"],[1,"col-lg-3","col-sm-4","col-12"],[1,"form-group"],["type","text","placeholder","Article No.","formControlName","article_no",3,"ngClass"],["class","text-danger",4,"ngIf"],["type","text","placeholder","Product Name","formControlName","title",3,"ngClass","ngModel","ngModelChange"],["formControlName","category",1,"form-select",3,"ngClass","change"],["categoryValue",""],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","subcategory_group",1,"form-select",3,"ngClass","change"],["subCategoryGroupValue",""],["formControlName","subcategory",1,"form-select",3,"ngClass","change"],["subcatValue",""],["formControlName","brand",1,"form-select",3,"ngClass"],["formControlName","hsncode",1,"form-select",3,"ngClass"],[1,"dropdown"],["type","button","type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","button"],[1,"dropdown-menu",2,"width","100%","max-height","300px","overflow-y","auto"],["type","text","placeholder","search color",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["class","dropdown-item",4,"ngFor","ngForOf"],[4,"ngIf"],["type","text","placeholder","search size",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["formControlName","product_store",1,"form-select",3,"ngClass","change"],["store",""],["value","Online"],["value","Store"],["value","Both"],["formControlName","unit",1,"form-select",3,"ngClass"],["formControlName","product_or_service",1,"form-select",3,"ngClass"],["value","Product"],["value","Service"],["type","text","formControlName","return_time","placeholder","Return Time",3,"ngClass"],["formControlName","sale_tax",1,"form-select",3,"ngClass"],["formControlName","purchase_tax",1,"form-select",3,"ngClass"],["formControlName","product_label",1,"form-select",3,"ngClass"],[1,"col-lg-6","col-sm-6","col-12"],[1,"d_flex"],["type","checkbox","formControlName","is_active",3,"id","ngModel"],[1,"d_flex",2,"margin-bottom","0","margin-left","5px",3,"for"],[1,"d-flex"],["type","checkbox","formControlName","is_measurable",3,"id"],["type","checkbox","formControlName","cod_available",3,"id","ngModel"],["type","checkbox","formControlName","sale_tax_including",3,"id","ngModel"],["type","checkbox","formControlName","purchase_tax_including",3,"id","ngModel"],[1,"col-lg-12","col-sm-12","col-12"],[3,"editor","toolbar"],["formControlName","description","id","slug",3,"editor"],[1,"table","amt-table"],["formArrayName","product_features"],[4,"ngFor","ngForOf"],[1,"col-lg-12","text-center","my-5"],[1,"btn","btn-cancel"],["type","button",1,"btn","btn-submit","me-2",3,"click"],["label","Varients"],[1,"titl","mx-1","my-1"],[1,"table-responsive","table-bg"],["datatable","",1,"table"],[2,"display","none"],["formArrayName","variant_product"],["label","Image"],[1,"table","amt-table","third-table"],[2,"width","20%"],["formArrayName","product_images"],["class","btn btn-submit me-2",4,"ngIf"],["class","btn btn-submit me-2","type","submit","disabled","",4,"ngIf"],[1,"text-danger"],[3,"value"],[1,"dropdown-item"],["type","checkbox","formArrayName","color",2,"margin-right","5px",3,"value","checked","ngClass","id","change"],[2,"margin-bottom","0",3,"for","click"],["type","checkbox","formArrayName","size",2,"margin-right","5px",3,"value","checked","ngClass","id","change"],[3,"formGroupName"],["colspan","5"],[1,"row"],[1,"col-sm-4"],["type","text","formControlName","feature_group",1,"feature-input",2,"display","none",3,"readonly"],[1,"col-sm-8"],["formControlName","feature",1,"inp"],["type","text","formControlName","product_title",1,"inp",3,"ngModel","readonly"],["type","text","value","RedXl","formControlName","variant_name",1,"inp",3,"readonly"],["type","text",1,"inp",3,"value","readonly"],["type","text","placeholder","0","formControlName","sku",1,"inp",3,"ngModel"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x-circle",2,"color","red",3,"click"],["d","M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["formControlName","product_colour",1,"inp"],[1,"d-flex","align-items-center"],["alt","","class","p-img mx-5",3,"src",4,"ngIf"],["alt","","class","p_img",3,"src",4,"ngIf"],[1,"image-upload"],["type","file","formControlName","image",3,"change"],[1,"image-uploads"],[1,"d-inline","me-2"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-cloud-upload"],["fill-rule","evenodd","d","M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383z"],["fill-rule","evenodd","d","M7.646 4.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V14.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3z"],[1,"btn","btn-cancel","me-2",3,"click"],["alt","",1,"p-img","mx-5",3,"src"],["alt","",1,"p_img",3,"src"],[1,"btn","btn-submit","me-2"],["type","submit","disabled","",1,"btn","btn-submit","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,e){if(1&o){const r=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h6",5),t.NdJ("click",function(){return e.goBack()}),t.TgZ(6,"mat-icon",6),t._uU(7,"keyboard_backspace"),t.qZA(),t._uU(8," Product Edit"),t.qZA(),t.TgZ(9,"h6"),t._uU(10,"Update your product"),t.qZA()()(),t.TgZ(11,"div",7)(12,"div",8)(13,"form",9),t.NdJ("ngSubmit",function(){return e.submit()}),t.TgZ(14,"mat-tab-group",10,11)(16,"mat-tab",12)(17,"div",13)(18,"div",14)(19,"div",15)(20,"label"),t._uU(21,"Article No."),t.qZA(),t._UZ(22,"input",16),t.YNc(23,f,2,0,"span",17),t.qZA()(),t.TgZ(24,"div",14)(25,"div",15)(26,"label"),t._uU(27,"Product Name*"),t.qZA(),t.TgZ(28,"input",18),t.NdJ("ngModelChange",function(c){return e.productNamme=c}),t.qZA(),t.YNc(29,T,2,0,"span",17),t.qZA()(),t.TgZ(30,"div",14)(31,"div",15)(32,"label"),t._uU(33,"Category*"),t.qZA(),t.TgZ(34,"select",19,20),t.NdJ("change",function(){t.CHM(r);const c=t.MAs(35);return t.KtG(e.getSubcategoryGroupByCategory(c.value))}),t.TgZ(36,"option",21),t._uU(37,"Select Category"),t.qZA(),t.YNc(38,x,2,2,"option",22),t.qZA(),t.YNc(39,N,2,0,"span",17),t.qZA()(),t.TgZ(40,"div",14)(41,"div",15)(42,"label"),t._uU(43,"Subcategory Group*"),t.qZA(),t.TgZ(44,"select",23,24),t.NdJ("change",function(){t.CHM(r);const c=t.MAs(45);return t.KtG(e.oncheck(c.value))}),t.TgZ(46,"option",21),t._uU(47,"Select Subcategory Group"),t.qZA(),t.YNc(48,M,2,2,"option",22),t.qZA(),t.YNc(49,P,2,0,"span",17),t.YNc(50,J,2,0,"span",17),t.qZA()(),t.TgZ(51,"div",14)(52,"div",15)(53,"label"),t._uU(54,"Sub Category*"),t.qZA(),t.TgZ(55,"select",25,26),t.NdJ("change",function(){t.CHM(r);const c=t.MAs(56);return t.KtG(e.checkSubact(c.value))})("change",function(c){t.CHM(r);const l=t.MAs(45);return t.KtG(e.getFeaturegroupBySubcategory(l.value,c))}),t.TgZ(57,"option",21),t._uU(58,"Select Sub Category"),t.qZA(),t.YNc(59,k,2,2,"option",22),t.qZA(),t.YNc(60,w,2,0,"span",17),t.YNc(61,G,2,0,"span",17),t.qZA()(),t.TgZ(62,"div",14)(63,"div",15)(64,"label"),t._uU(65,"Brands"),t.qZA(),t.TgZ(66,"select",27)(67,"option",21),t._uU(68,"Select Brand"),t.qZA(),t.YNc(69,Q,2,2,"option",22),t.qZA(),t.YNc(70,L,2,0,"span",17),t.YNc(71,B,2,0,"span",17),t.qZA()(),t.TgZ(72,"div",14)(73,"div",15)(74,"label"),t._uU(75,"HSN Code"),t.qZA(),t.TgZ(76,"select",28)(77,"option",21),t._uU(78,"Select HSN Code"),t.qZA(),t.YNc(79,V,2,2,"option",22),t.qZA(),t.YNc(80,D,2,0,"span",17),t.YNc(81,Y,2,0,"span",17),t.qZA()(),t.TgZ(82,"div",14)(83,"div",15)(84,"label"),t._uU(85,"Colors"),t.qZA(),t.TgZ(86,"div",29)(87,"button",30),t._uU(88,"Select Color"),t.qZA(),t.TgZ(89,"ul",31)(90,"li")(91,"input",32),t.NdJ("ngModelChange",function(c){return e.searchColor=c})("ngModelChange",function(){return e.filterColorData()}),t.qZA()(),t.TgZ(92,"li"),t.YNc(93,K,4,8,"a",33),t.qZA()()(),t.YNc(94,R,2,1,"p",34),t.YNc(95,$,2,0,"span",17),t.qZA()(),t.TgZ(96,"div",14)(97,"div",15)(98,"label"),t._uU(99,"Size*"),t.qZA(),t.TgZ(100,"div",29)(101,"button",30),t._uU(102,"Select Size"),t.qZA(),t.TgZ(103,"ul",31)(104,"li")(105,"input",35),t.NdJ("ngModelChange",function(c){return e.searchSize=c})("ngModelChange",function(){return e.filterSizeData()}),t.qZA()(),t.TgZ(106,"li"),t.YNc(107,H,4,8,"a",33),t.qZA()()(),t.YNc(108,j,2,1,"p",34),t.YNc(109,W,2,0,"span",17),t.qZA()(),t.TgZ(110,"div",14)(111,"div",15)(112,"label"),t._uU(113,"Store*"),t.qZA(),t.TgZ(114,"select",36,37),t.NdJ("change",function(){t.CHM(r);const c=t.MAs(115);return t.KtG(e.storeOnline(c.value))}),t.TgZ(116,"option",21),t._uU(117,"Select Product Store"),t.qZA(),t.TgZ(118,"option",38),t._uU(119,"Online"),t.qZA(),t.TgZ(120,"option",39),t._uU(121,"Store"),t.qZA(),t.TgZ(122,"option",40),t._uU(123,"Both"),t.qZA()(),t.YNc(124,X,2,0,"span",17),t.qZA()(),t.TgZ(125,"div",14)(126,"div",15)(127,"label"),t._uU(128,"Unit*"),t.qZA(),t.TgZ(129,"select",41)(130,"option",21),t._uU(131,"Select unit"),t.qZA(),t.YNc(132,tt,2,2,"option",22),t.qZA(),t.YNc(133,et,2,0,"span",17),t.qZA()(),t.TgZ(134,"div",14)(135,"div",15)(136,"label"),t._uU(137,"Product or Service*"),t.qZA(),t.TgZ(138,"select",42)(139,"option",21),t._uU(140,"Select Product or Service"),t.qZA(),t.TgZ(141,"option",43),t._uU(142,"Product"),t.qZA(),t.TgZ(143,"option",44),t._uU(144,"Service"),t.qZA()(),t.YNc(145,ot,2,0,"span",17),t.qZA()(),t.TgZ(146,"div",14)(147,"div",15)(148,"label"),t._uU(149,"Return Time*"),t.qZA(),t._UZ(150,"input",45),t.YNc(151,rt,2,0,"span",17),t.qZA()(),t.TgZ(152,"div",14)(153,"div",15)(154,"label"),t._uU(155,"Sale Tax*"),t.qZA(),t.TgZ(156,"select",46)(157,"option",21),t._uU(158,"Select Sale Tax"),t.qZA(),t.YNc(159,it,2,2,"option",22),t.qZA(),t.YNc(160,nt,2,0,"span",17),t.qZA()(),t.TgZ(161,"div",14)(162,"div",15)(163,"label"),t._uU(164,"Purchase Tax*"),t.qZA(),t.TgZ(165,"select",47)(166,"option",21),t._uU(167,"Select Sale Tax"),t.qZA(),t.YNc(168,at,2,2,"option",22),t.qZA(),t.YNc(169,st,2,0,"span",17),t.qZA()(),t.TgZ(170,"div",14)(171,"div",15)(172,"label"),t._uU(173,"Product Label*"),t.qZA(),t.TgZ(174,"select",48)(175,"option",21),t._uU(176,"Select Product Label"),t.qZA(),t.YNc(177,ct,2,2,"option",22),t.qZA(),t.YNc(178,lt,2,0,"span",17),t.qZA()(),t.TgZ(179,"div",49)(180,"div",15)(181,"div",50)(182,"div",50),t._UZ(183,"input",51),t.TgZ(184,"label",52),t._uU(185,"Active"),t.qZA()(),t.TgZ(186,"div",53),t._UZ(187,"input",54),t.TgZ(188,"label",52),t._uU(189,"Is Measurable"),t.qZA()(),t.TgZ(190,"div",53),t._UZ(191,"input",55),t.TgZ(192,"label",52),t._uU(193,"Is Cod Available"),t.qZA()()(),t.TgZ(194,"div",50)(195,"div",53),t._UZ(196,"input",56),t.TgZ(197,"label",52),t._uU(198,"Sales Tax Including"),t.qZA()(),t.TgZ(199,"div",53),t._UZ(200,"input",57),t.TgZ(201,"label",52),t._uU(202,"Purchase Tax Including"),t.qZA()()()()(),t.TgZ(203,"div",58)(204,"div",15)(205,"label"),t._uU(206,"Description "),t.YNc(207,ut,2,0,"span",34),t.qZA(),t._UZ(208,"ngx-editor-menu",59)(209,"ngx-editor",60),t.YNc(210,dt,2,0,"span",17),t.qZA()(),t.TgZ(211,"div",49)(212,"table",61)(213,"thead")(214,"tr")(215,"th"),t._uU(216,"Features"),t.qZA()()(),t.TgZ(217,"tbody"),t.ynx(218,62),t.YNc(219,gt,13,4,"ng-container",63),t.BQk(),t.qZA()()(),t.TgZ(220,"div",64)(221,"a",65),t._uU(222,"Clear"),t.qZA(),t.TgZ(223,"button",66),t.NdJ("click",function(){return e.saveAndNext()}),t._uU(224,"Save & Next"),t.qZA()()()(),t.TgZ(225,"mat-tab",67)(226,"p",68),t._uU(227),t.qZA(),t.TgZ(228,"div",69)(229,"table",70)(230,"thead")(231,"tr")(232,"th",71),t._uU(233,"Product "),t.qZA(),t.TgZ(234,"th"),t._uU(235,"Variant "),t.qZA(),t.TgZ(236,"th"),t._uU(237,"Color"),t.qZA(),t.TgZ(238,"th"),t._uU(239,"Size"),t.qZA(),t.TgZ(240,"th"),t._uU(241,"Barcode/SKU"),t.qZA(),t._UZ(242,"th"),t.qZA()(),t.TgZ(243,"tbody"),t.ynx(244,72),t.YNc(245,mt,19,11,"ng-container",63),t.BQk(),t.qZA()()(),t.TgZ(246,"div",64)(247,"a",65),t._uU(248,"Clear"),t.qZA(),t.TgZ(249,"button",66),t.NdJ("click",function(){return e.selectTab(2)}),t._uU(250,"Save & Create New"),t.qZA()()(),t.TgZ(251,"mat-tab",73)(252,"table",74)(253,"thead")(254,"tr")(255,"th",75),t._uU(256,"Colors"),t.qZA(),t.TgZ(257,"th"),t._uU(258,"Image"),t.qZA(),t.TgZ(259,"th"),t._uU(260,"\xa0"),t.qZA()()(),t.TgZ(261,"tbody"),t.ynx(262,76),t.YNc(263,vt,25,6,"ng-container",63),t.BQk(),t.qZA()(),t.TgZ(264,"div",64)(265,"a",65),t._uU(266,"Clear"),t.qZA(),t.YNc(267,Zt,2,0,"button",77),t.YNc(268,yt,3,0,"button",78),t.qZA()()()()()()()()()}2&o&&(t.xp6(13),t.Q6J("formGroup",e.productForm),t.xp6(9),t.Q6J("ngClass",t.VKq(78,d,e.f.article_no.touched&&e.f.article_no.invalid)),t.xp6(1),t.Q6J("ngIf",e.article_no&&e.article_no.invalid&&e.article_no.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(80,d,e.f.title.touched&&e.f.title.invalid))("ngModel",e.productNamme),t.xp6(1),t.Q6J("ngIf",e.title&&e.title.invalid&&e.title.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(82,d,e.f.category.touched&&e.f.category.invalid)),t.xp6(4),t.Q6J("ngForOf",e.categoryList),t.xp6(1),t.Q6J("ngIf",e.category&&e.category.invalid&&e.category.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(84,d,e.f.subcategory_group.touched&&e.f.subcategory_group.invalid)),t.xp6(4),t.Q6J("ngForOf",e.subcatGroupByCategory),t.xp6(1),t.Q6J("ngIf",e.subcategory_group&&e.subcategory_group.invalid&&e.subcategory_group.touched&&(null==e.subcatGroupByCategory?null:e.subcatGroupByCategory.length)>0),t.xp6(1),t.Q6J("ngIf",e.category&&e.category.touched&&(null==e.subcatGroupByCategory?null:e.subcatGroupByCategory.length)<=0),t.xp6(5),t.Q6J("ngClass",t.VKq(86,d,e.f.subcategory.touched&&e.f.subcategory.invalid)),t.xp6(4),t.Q6J("ngForOf",e.subcatbySubCategoryGroup),t.xp6(1),t.Q6J("ngIf",e.subcategory&&e.subcategory.invalid&&e.subcategory.touched&&(null==e.subcatbySubCategoryGroup?null:e.subcatbySubCategoryGroup.length)>0),t.xp6(1),t.Q6J("ngIf",e.subcategory_group&&e.subcategory_group.touched&&(null==e.subcatbySubCategoryGroup?null:e.subcatbySubCategoryGroup.length)<=0),t.xp6(5),t.Q6J("ngClass",t.VKq(88,d,e.f.brand.touched&&e.f.brand.invalid)),t.xp6(3),t.Q6J("ngForOf",e.brandBySubcat),t.xp6(1),t.Q6J("ngIf",e.brand&&e.brand.invalid&&e.brand.touched&&(null==e.brandBySubcat?null:e.brandBySubcat.length)>0),t.xp6(1),t.Q6J("ngIf",e.subcategory&&e.subcategory.touched&&(null==e.brandBySubcat?null:e.brandBySubcat.length)<=0),t.xp6(5),t.Q6J("ngClass",t.VKq(90,d,e.f.hsncode.touched&&e.f.hsncode.invalid)),t.xp6(3),t.Q6J("ngForOf",e.hsncodeBysubcatList),t.xp6(1),t.Q6J("ngIf",e.hsncode&&e.hsncode.invalid&&e.hsncode.touched&&(null==e.hsncodeBysubcatList?null:e.hsncodeBysubcatList.length)>0),t.xp6(1),t.Q6J("ngIf",e.subcategory&&e.subcategory.touched&&(null==e.hsncodeBysubcatList?null:e.hsncodeBysubcatList.length)<=0),t.xp6(10),t.Q6J("ngModel",e.searchColor)("ngModelOptions",t.DdM(92,O)),t.xp6(2),t.Q6J("ngForOf",e.filteredColorData),t.xp6(1),t.Q6J("ngIf",e.selectedColor>0),t.xp6(1),t.Q6J("ngIf",e.color&&e.color.invalid&&e.color.touched),t.xp6(10),t.Q6J("ngModel",e.searchSize)("ngModelOptions",t.DdM(93,O)),t.xp6(2),t.Q6J("ngForOf",e.filteredSizeData),t.xp6(1),t.Q6J("ngIf",e.selectedSize>0),t.xp6(1),t.Q6J("ngIf",e.size&&e.size.invalid&&e.size.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(94,d,e.f.product_store.touched&&e.f.product_store.invalid)),t.xp6(10),t.Q6J("ngIf",e.product_store&&e.product_store.invalid&&e.product_store.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(96,d,e.f.unit.touched&&e.f.unit.invalid)),t.xp6(3),t.Q6J("ngForOf",e.unitList),t.xp6(1),t.Q6J("ngIf",e.unit&&e.unit.invalid&&e.unit.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(98,d,e.f.product_or_service.touched&&e.f.product_or_service.invalid)),t.xp6(7),t.Q6J("ngIf",e.product_or_service&&e.product_or_service.invalid&&e.product_or_service.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(100,d,e.f.return_time.touched&&e.f.return_time.invalid)),t.xp6(1),t.Q6J("ngIf",e.return_time&&e.return_time.invalid&&e.return_time.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(102,d,e.f.sale_tax.touched&&e.f.sale_tax.invalid)),t.xp6(3),t.Q6J("ngForOf",e.taxSlabList),t.xp6(1),t.Q6J("ngIf",e.sale_tax&&e.sale_tax.invalid&&e.sale_tax.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(104,d,e.f.purchase_tax.touched&&e.f.purchase_tax.invalid)),t.xp6(3),t.Q6J("ngForOf",e.taxSlabList),t.xp6(1),t.Q6J("ngIf",e.purchase_tax&&e.purchase_tax.invalid&&e.purchase_tax.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(106,d,e.f.product_label.touched&&e.f.product_label.invalid)),t.xp6(3),t.Q6J("ngForOf",e.labelList),t.xp6(1),t.Q6J("ngIf",e.product_label&&e.product_label.invalid&&e.product_label.touched),t.xp6(5),t.Q6J("id","checkboxActive-")("ngModel",!0),t.xp6(1),t.Q6J("for","checkboxActive-"),t.xp6(3),t.Q6J("id","checkboxMeasure-"),t.xp6(1),t.Q6J("for","checkboxMeasure-"),t.xp6(3),t.Q6J("id","checkboxcod-")("ngModel",!0),t.xp6(1),t.Q6J("for","checkboxcod-"),t.xp6(4),t.Q6J("id","checkboxSale-")("ngModel",!0),t.xp6(1),t.Q6J("for","checkboxSale-"),t.xp6(3),t.Q6J("id","checkboxTax-")("ngModel",!0),t.xp6(1),t.Q6J("for","checkboxTax-"),t.xp6(6),t.Q6J("ngIf",e.isOnline),t.xp6(1),t.Q6J("editor",e.editor)("toolbar",e.toolbar),t.xp6(1),t.Q6J("editor",e.editor),t.xp6(1),t.Q6J("ngIf",e.description&&e.description.invalid&&e.description.touched),t.xp6(9),t.Q6J("ngForOf",e.getFeature().controls),t.xp6(8),t.Oqu(e.productNamme),t.xp6(18),t.Q6J("ngForOf",e.getVarinatsForm().controls),t.xp6(18),t.Q6J("ngForOf",e.getproductImage().controls),t.xp6(4),t.Q6J("ngIf",!e.loader),t.xp6(1),t.Q6J("ngIf",e.loader))},dependencies:[g.mk,g.sg,g.O5,s._Y,s.YN,s.Kr,s.Fj,s.Wl,s.EJ,s.JJ,s.JL,s.On,s.sg,s.u,s.x0,s.CE,Z.tP,Z.Mn,h.SP,h.uX,S.Hw],styles:[".ng-dirty.ng-invalid.is-invalid.ng-touched[_ngcontent-%COMP%], .ng-pristine.ng-invalid.is-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}select[_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], input[type=button][_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;padding:10px 15px;border-radius:5px}.button[_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;display:flex;padding:10px 15px;border-radius:5px;justify-content:space-between;align-items:center;background:white}.bg[_ngcontent-%COMP%]{background-color:#f2f3f9;border:none}.company-details-card[_ngcontent-%COMP%]{padding:30px 50px;border:1px solid #D4DAF7;border-radius:6px}.amt-table[_ngcontent-%COMP%]{border:1px solid #D4DAF7}.amt-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#eef0f8}.amt-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#FAFBFE;border:1px solid #D4DAF7}.amt-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #D4DAF7;padding:5px 10px}.amt-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{align-items:center}.amt-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-sm-8[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background:#FFFFFF;border:1px solid #D4DAF7;border-radius:3px;height:36px;padding:0}.amt-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-sm-4[_ngcontent-%COMP%]{color:#3b3b3b}.d_flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.d_flex[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:50%;font-size:18px;color:#000;margin-bottom:10px}.btn-cancel[_ngcontent-%COMP%]{background:#FFFFFF;border:1px solid #D4DAF7;border-radius:8px;color:#000;margin-right:10px}.table-bg[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#EEF0F8;border:1px solid #fff;padding:15px;color:#3b3b3b;font-weight:400}.inp[_ngcontent-%COMP%]{border:1px solid #9C9C9C;border-radius:4px;height:32px;padding:0 5px}.table-bg[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f2f4f3;border:1px solid #fff;padding:15px}.bi-image[_ngcontent-%COMP%]{width:45px;height:45px;margin-right:15px;color:#9c9c9c}.bi-cloud-upload[_ngcontent-%COMP%]{height:20px;width:20px}.third-table[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]{height:36px;padding:0 10px;font-weight:400}.third-table[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{height:36px;padding:0 10px;font-weight:400;display:flex;align-items:center;justify-content:center}.feature-input[_ngcontent-%COMP%]{margin:0;font-family:inherit;font-size:inherit;line-height:inherit;border:none}.image-upload[_ngcontent-%COMP%]{background:#FF9F43;color:#fff;font-size:14px;width:120px;margin-bottom:0}.image-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{height:36px}.image-upload[_ngcontent-%COMP%]   .image-uploads[_ngcontent-%COMP%]{color:#fff;padding:0;height:36px;display:flex;align-items:center;justify-content:center}.image-uploads[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff}.p-img[_ngcontent-%COMP%]{width:20%;border:2px solid gray;border-radius:20%;margin-right:20px}.svg[_ngcontent-%COMP%]{width:20%;height:20%}.titl[_ngcontent-%COMP%]{color:#201e1f;font-size:18px;font-weight:500;margin-bottom:0}.t-row[_ngcontent-%COMP%]{background-color:#f2f4f3;border:1px solid #fff;text-align:-webkit-center;font-weight:500}.variant_color[_ngcontent-%COMP%], .variant_size[_ngcontent-%COMP%]{width:100px;height:40px;border:1px solid rgba(145,158,171,.32)}.p_img[_ngcontent-%COMP%]{margin-right:2rem!important;height:50px}"]}),i})();var xt=u(30597);const I=JSON.parse(localStorage.getItem("auth"));let At;I&&I.map(a=>{"product"===a.content_type.app_label&&"product"===a.content_type.model&&"change_product"==a.codename&&(At=a.codename)});const St=[{path:"",component:Tt,canActivate:[xt.l],data:{allowedRoles:["change_product"]}}];let Ft=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[C.Bz.forChild(St),C.Bz]}),i})();var qt=u(95113),Nt=u(56709);let Mt=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[g.ez,Ft,s.u5,s.UX,Z.FP,h.Nh,S.Ps,qt.LD,Nt.p9]}),i})()},30597:(E,q,u)=>{u.d(q,{l:()=>t});var g=u(94650),C=u(89299),s=u(97185),Z=u(42917),z=u(80927);let t=(()=>{class m{constructor(h,S,y,f,T){this.router=h,this.Arout=S,this.toastr=y,this.profileService=f,this.coreService=T}canActivate(h,S){const y=JSON.parse(localStorage.getItem("auth"));if(this.profileService.userDetails$.subscribe(f=>{this.userDetails=f,this.permissions=this.userDetails?.permission}),y){const f=h.data.allowedRoles;console.log(f,"allowedRoles");const T=y.some(x=>f.includes(x.codename));if(console.log(T),this.coreService.getProfile().subscribe(x=>{this.userDetails=x,this.profileService.setUserDetails(this.userDetails);const N=x?.permission,M=this.profileService.getUserDetails();(!M||M.length!==N.length)&&(this.profileService.setUserPermission(N),window.location.reload())}),T)return!0}return this.toastr.error("User have Not Permission to Access This page"),this.router.navigate(["/dashboard"]),!1}}return m.\u0275fac=function(h){return new(h||m)(g.LFG(C.F0),g.LFG(C.gz),g.LFG(s._W),g.LFG(Z.J),g.LFG(z.p))},m.\u0275prov=g.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()}}]);