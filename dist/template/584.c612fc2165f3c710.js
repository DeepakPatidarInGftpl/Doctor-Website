"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[584],{40584:(B,u,s)=>{s.r(u),s.d(u,{UpdateCreditNoteModule:()=>y});var l=s(36895),r=s(88996),a=s(24006),t=s(94650),c=s(71071),m=s(80927),f=s(97185);function g(o,i){if(1&o&&(t.TgZ(0,"option",25),t._uU(1),t.qZA()),2&o){const n=i.$implicit;t.s9C("value",null==n?null:n.id),t.xp6(1),t.hij(" ",null==n?null:n.accounts_type,"")}}function N(o,i){1&o&&(t.TgZ(0,"span",26),t._uU(1,"Select Account "),t.qZA())}function h(o,i){1&o&&(t.TgZ(0,"span",26),t._uU(1,"Enter date name "),t.qZA())}function C(o,i){1&o&&(t.TgZ(0,"span",26),t._uU(1,"Enter Credit Note no"),t.qZA())}function b(o,i){1&o&&(t.TgZ(0,"span",26),t._uU(1,"Select Sale Bill No. "),t.qZA())}function Z(o,i){1&o&&(t.TgZ(0,"span",26),t._uU(1,"Enter Reason"),t.qZA())}function _(o,i){1&o&&(t.TgZ(0,"span",26),t._uU(1,"Enter round off"),t.qZA())}function v(o,i){1&o&&(t.TgZ(0,"span",26),t._uU(1,"Enter Tax ex: (1-100)"),t.qZA())}function U(o,i){1&o&&(t.TgZ(0,"span",26),t._uU(1,"Enter total"),t.qZA())}function A(o,i){1&o&&(t.TgZ(0,"span",26),t._uU(1,"Enter Tax"),t.qZA())}function T(o,i){1&o&&(t.TgZ(0,"button",27),t._uU(1,"Submit"),t.qZA())}function q(o,i){1&o&&(t.TgZ(0,"button",28),t._UZ(1,"span",29),t._uU(2,"Submit"),t.qZA())}const d=function(o){return{"is-invalid":o}},I=[{path:"",component:(()=>{class o{constructor(n,e,p,x,V,E){this.fb=n,this.transactionService=e,this.coreService=p,this.toastr=x,this.router=V,this.Aroute=E,this.dateError=null,this.loaders=!1}get f(){return this.debitNoteForm.controls}ngOnInit(){this.id=this.Aroute.snapshot.paramMap.get("id"),this.debitNoteForm=this.fb.group({account:new a.NI("",[a.kI.required]),date:new a.NI("",[a.kI.required]),credit_note_no:new a.NI(""),sale_bill_no:new a.NI(""),reason:new a.NI(""),roundoff:new a.NI(""),tax:new a.NI("",[a.kI.pattern(/^(100|[0-9]{1,2})$/)]),note:new a.NI(""),total:new a.NI(""),status:new a.NI("")}),this.transactionService.getCreditNoteById(this.id).subscribe(n=>{console.log(n),this.debitNoteForm.patchValue(n)}),this.getAccount()}calculateTax(){this.totals=this.taxs?this.amounts+this.amounts*this.taxs/100:this.amounts}getAccount(){this.coreService.getAccount().subscribe(n=>{this.accountList=n})}oncheck(n){console.log(n),this.debitNoteForm.patchValue({party:n})}submit(){this.debitNoteForm.valid?(this.loaders=!0,this.transactionService.updateCreditNote(this.debitNoteForm.value,this.id).subscribe(n=>{this.loaders=!1,this.addRes=n,"True"==this.addRes.Is_Success?(this.toastr.success(this.addRes.msg),this.debitNoteForm.reset(),this.router.navigate(["//transaction/creditnoteList"])):this.loaders=!1},n=>{this.loaders=!1})):this.debitNoteForm.markAllAsTouched()}get account(){return this.debitNoteForm.get("account")}get date(){return this.debitNoteForm.get("date")}get credit_note_no(){return this.debitNoteForm.get("credit_note_no")}get reason(){return this.debitNoteForm.get("reason")}get sale_bill_no(){return this.debitNoteForm.get("sale_bill_no")}get tax(){return this.debitNoteForm.get("tax")}get note(){return this.debitNoteForm.get("note")}get total(){return this.debitNoteForm.get("total")}get roundoff(){return this.debitNoteForm.get("roundoff")}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(a.qu),t.Y36(c.p),t.Y36(m.p),t.Y36(f._W),t.Y36(r.F0),t.Y36(r.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-update-credit-note"]],decls:74,vars:37,consts:[[1,"page-header"],[1,"page-title"],[1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-4","col-md-6","col-12"],[1,"form-group"],["formControlName","account","required","","id","account",1,"w-100","h-100","border",3,"ngClass"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"col-lg-4","col-sm-4","col-12"],["type","date","formControlName","date","id","date",3,"ngClass"],["type","text","formControlName","credit_note_no","id","credit_note_no",3,"ngClass"],["formControlName","sale_bill_no","id","sale_bill_no",1,"w-100","h-100","border",3,"ngClass"],["type","text","formControlName","reason",3,"ngClass"],["type","number","formControlName","roundoff",3,"ngClass"],["type","number","formControlName","tax",3,"ngClass"],["type","number","formControlName","total","id","total",3,"ngClass"],["formControlName","note"],[1,"col-lg-12"],["class","btn btn-submit me-2",4,"ngIf"],["class","btn btn-submit me-2","type","submit","disabled","",4,"ngIf"],["routerLink","//transaction/creditnoteList",1,"btn","btn-cancel","text-white"],[3,"value"],[1,"text-danger"],[1,"btn","btn-submit","me-2"],["type","submit","disabled","",1,"btn","btn-submit","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3,"Update Credit Note"),t.qZA(),t.TgZ(4,"h6"),t._uU(5,"Edit Credit Note "),t.qZA()()(),t.TgZ(6,"div",2)(7,"div",3)(8,"form",4),t.NdJ("ngSubmit",function(){return e.submit()}),t.TgZ(9,"div",5)(10,"div",6)(11,"div",7)(12,"label"),t._uU(13,"Account Name*"),t.qZA(),t.TgZ(14,"select",8)(15,"option",9),t._uU(16,"Select Account"),t.qZA(),t.YNc(17,g,2,2,"option",10),t.qZA(),t.YNc(18,N,2,0,"span",11),t.qZA()(),t.TgZ(19,"div",12)(20,"div",7)(21,"label"),t._uU(22,"Credit Note Date*"),t.qZA(),t._UZ(23,"input",13),t.YNc(24,h,2,0,"span",11),t.qZA()(),t.TgZ(25,"div",12)(26,"div",7)(27,"label"),t._uU(28,"Credit Note No."),t.qZA(),t._UZ(29,"input",14),t.YNc(30,C,2,0,"span",11),t.qZA()(),t.TgZ(31,"div",12)(32,"div",7)(33,"label"),t._uU(34,"Sale Bill*"),t.qZA(),t.TgZ(35,"select",15)(36,"option",9),t._uU(37,"Select Sale Bill"),t.qZA()(),t.YNc(38,b,2,0,"span",11),t.qZA()(),t.TgZ(39,"div",12)(40,"div",7)(41,"label"),t._uU(42,"Reason"),t.qZA(),t._UZ(43,"input",16),t.YNc(44,Z,2,0,"span",11),t.qZA()(),t.TgZ(45,"div",12)(46,"div",7)(47,"label"),t._uU(48,"Round off"),t.qZA(),t._UZ(49,"input",17),t.YNc(50,_,2,0,"span",11),t.qZA()(),t.TgZ(51,"div",12)(52,"div",7)(53,"label"),t._uU(54,"Tax"),t.qZA(),t._UZ(55,"input",18),t.YNc(56,v,2,0,"span",11),t.qZA()(),t.TgZ(57,"div",12)(58,"div",7)(59,"label"),t._uU(60,"Total"),t.qZA(),t._UZ(61,"input",19),t.YNc(62,U,2,0,"span",11),t.qZA()(),t.TgZ(63,"div",12)(64,"div",7)(65,"label"),t._uU(66,"Note"),t.qZA(),t._UZ(67,"textarea",20),t.YNc(68,A,2,0,"span",11),t.qZA()(),t.TgZ(69,"div",21),t.YNc(70,T,2,0,"button",22),t.YNc(71,q,3,0,"button",23),t.TgZ(72,"a",24),t._uU(73,"Cancel"),t.qZA()()()()()()),2&n&&(t.xp6(8),t.Q6J("formGroup",e.debitNoteForm),t.xp6(6),t.Q6J("ngClass",t.VKq(21,d,e.f.account.touched&&e.f.account.invalid)),t.xp6(3),t.Q6J("ngForOf",e.accountList),t.xp6(1),t.Q6J("ngIf",e.account&&e.account.invalid&&e.account.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(23,d,e.f.date.touched&&e.f.date.invalid)),t.xp6(1),t.Q6J("ngIf",e.date&&e.date.invalid&&e.date.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(25,d,e.f.credit_note_no.touched&&e.f.credit_note_no.invalid)),t.xp6(1),t.Q6J("ngIf",e.credit_note_no&&e.credit_note_no.invalid&&e.credit_note_no.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(27,d,e.f.sale_bill_no.touched&&e.f.sale_bill_no.invalid)),t.xp6(3),t.Q6J("ngIf",e.sale_bill_no&&e.sale_bill_no.invalid&&e.sale_bill_no.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(29,d,e.f.reason.touched&&e.f.reason.invalid)),t.xp6(1),t.Q6J("ngIf",e.reason&&e.reason.invalid&&e.reason.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(31,d,e.f.roundoff.touched&&e.f.roundoff.invalid)),t.xp6(1),t.Q6J("ngIf",e.roundoff&&e.roundoff.invalid&&e.roundoff.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(33,d,e.f.tax.touched&&e.f.tax.invalid)),t.xp6(1),t.Q6J("ngIf",e.tax&&e.tax.invalid&&e.tax.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(35,d,e.f.total.touched&&e.f.total.invalid)),t.xp6(1),t.Q6J("ngIf",e.total&&e.total.invalid&&e.total.touched),t.xp6(6),t.Q6J("ngIf",e.tax&&e.tax.invalid&&e.tax.touched),t.xp6(2),t.Q6J("ngIf",!e.loaders),t.xp6(1),t.Q6J("ngIf",e.loaders))},dependencies:[l.mk,l.sg,l.O5,r.yS,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.Q7,a.sg,a.u]}),o})()}];let J=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[r.Bz.forChild(I),r.Bz]}),o})();var F=s(8468),Q=s(47957),S=s(59549),Y=s(44144);let y=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.ez,J,F.I,Q.Bb,S.lN,Y.c]}),o})()}}]);