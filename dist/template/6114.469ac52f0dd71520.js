"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[6114],{25062:(T,g,o)=>{o.d(g,{y:()=>t});var u=o(92340),h=o(94650),n=o(80529);let t=(()=>{class d{constructor(e){this.http=e,this.apiUrl=`${u.N.api}`}getSupplier(){return this.http.get(this.apiUrl+"/pv-api/supplier/")}getSupplierById(e){return this.http.get(`${this.apiUrl+"/pv-api/supplier/?id="}${e}`)}SupplierIsActive(e,r){return this.http.patch(`${this.apiUrl+"/pv-api/supplier/?id="}${e}`,r)}addSupplier(e){return this.http.post(this.apiUrl+"/pv-api/supplier/",e)}updateSupplier(e,r){return this.http.put(`${this.apiUrl+"/pv-api/supplier/?id="}${r}`,e)}deleteSupplier(e){return this.http.delete(`${this.apiUrl+"/pv-api/supplier/?id="}${e}`)}getVendor(){return this.http.get(this.apiUrl+"/pv-api/vendor/")}getVendorById(e){return this.http.get(`${this.apiUrl+"/pv-api/vendor/?id="}${e}`)}VendorIsActive(e,r){return this.http.patch(`${this.apiUrl+"/pv-api/vendor/?id="}${e}`,r)}addVendor(e){return this.http.post(this.apiUrl+"/pv-api/vendor/",e)}updateVendor(e,r){return this.http.put(`${this.apiUrl+"/pv-api/vendor/?id="}${r}`,e)}deleteVendor(e){return this.http.delete(`${this.apiUrl+"/pv-api/vendor/?id="}${e}`)}getPaymentTerms(){return this.http.get(this.apiUrl+"/pv-api/payment_terms/")}getPaymentTermsById(e){return this.http.get(`${this.apiUrl+"/pv-api/payment_terms/?id="}${e}`)}PaymentTermsIsActive(e,r){return this.http.patch(`${this.apiUrl+"/pv-api/payment_terms/?id="}${e}`,r)}addPaymentTerms(e){return this.http.post(this.apiUrl+"/pv-api/payment_terms/",e)}updatePaymentTerms(e,r){return this.http.put(`${this.apiUrl+"/pv-api/payment_terms/?id="}${r}`,e)}deletePaymentTerms(e){return this.http.delete(`${this.apiUrl+"/pv-api/payment_terms/?id="}${e}`)}getTypeOfGst(){return this.http.get(this.apiUrl+"/pv-api/types_of_gst/")}getTransport(){return this.http.get(this.apiUrl+"/pv-api/transport/")}getTransportById(e){return this.http.get(`${this.apiUrl+"/pv-api/transport/?id="}${e}`)}TransportIsActive(e,r){return this.http.patch(`${this.apiUrl+"/pv-api/transport/?id="}${e}`,r)}addTransport(e){return this.http.post(this.apiUrl+"/pv-api/transport/",e)}updateTransport(e,r){return this.http.put(`${this.apiUrl+"/pv-api/transport/?id="}${r}`,e)}deleteTransport(e){return this.http.delete(`${this.apiUrl+"/pv-api/transport/?id="}${e}`)}getEmployee(){return this.http.get(this.apiUrl+"/pv-api/employee/")}getEmployeeById(e){return this.http.get(`${this.apiUrl+"/pv-api/employee/?id="}${e}`)}EmployeeIsActive(e,r){return this.http.patch(`${this.apiUrl+"/pv-api/employee/?id="}${e}`,r)}addEmployee(e){return this.http.post(this.apiUrl+"/pv-api/employee/",e)}updateEmployee(e,r){return this.http.put(`${this.apiUrl+"/pv-api/employee/?id="}${r}`,e)}deleteEmployee(e){return this.http.delete(`${this.apiUrl+"/pv-api/employee/?id="}${e}`)}getPermission(){return this.http.get(this.apiUrl+"/pv-api/permissions/")}getCustomer(){return this.http.get(this.apiUrl+"/pv-api/customer/")}getCustomerById(e){return this.http.get(`${this.apiUrl+"/pv-api/customer/?id="}${e}`)}CustomerIsActive(e,r){return this.http.patch(`${this.apiUrl+"/pv-api/customer/?id="}${e}`,r)}addCustomer(e){return this.http.post(this.apiUrl+"/pv-api/customer/",e)}updateCustomer(e,r){return this.http.put(`${this.apiUrl+"/pv-api/customer/?id="}${r}`,e)}deleteCustomer(e){return this.http.delete(`${this.apiUrl+"/pv-api/customer/?id="}${e}`)}getUser(){return this.http.get(this.apiUrl+"/pv-api/user/")}getUserById(e){return this.http.get(`${this.apiUrl+"/pv-api/user/?id="}${e}`)}UserIsActive(e,r){return this.http.patch(`${this.apiUrl+"/pv-api/user/?id="}${e}`,r)}addUser(e){return this.http.post(this.apiUrl+"/pv-api/user/",e)}updateUser(e,r){return this.http.put(`${this.apiUrl+"/pv-api/user/?id="}${r}`,e)}deleteUser(e){return this.http.delete(`${this.apiUrl+"/pv-api/user/?id="}${e}`)}getPermissionGroup(){return this.http.get(this.apiUrl+"/pv-api/group/")}getPermissionGroupById(e){return this.http.get(`${this.apiUrl+"/pv-api/group/?id="}${e}`)}addPermissionGroup(e){return this.http.post(this.apiUrl+"/pv-api/group/",e)}updatePermissionGroup(e,r){return this.http.put(`${this.apiUrl+"/pv-api/group/?group_id="}${r}`,e)}deletePermissionGroup(e){return this.http.delete(`${this.apiUrl+"/pv-api/group/?group_id="}${e}`)}getDealer(){return this.http.get(this.apiUrl+"/pv-api/dealer/")}getDealerById(e){return this.http.get(`${this.apiUrl+"/pv-api/dealer/?id="}${e}`)}DealerIsActive(e,r){return this.http.patch(`${this.apiUrl+"/pv-api/dealer/?id="}${e}`,r)}addDealer(e){return this.http.post(this.apiUrl+"/pv-api/dealer/",e)}updateDealer(e,r){return this.http.put(`${this.apiUrl+"/pv-api/dealer/?id="}${r}`,e)}deleteDealer(e){return this.http.delete(`${this.apiUrl+"/pv-api/dealer/?id="}${e}`)}getBranch(){return this.http.get(this.apiUrl+"/pv-api/branch/")}productVariant(){return this.http.get(this.apiUrl+"/pv-api/product_variant/")}searchProduct(e){return this.http.get(this.apiUrl+"/pv-api/variant-search/?search="+e)}getTerms(){return this.http.get(this.apiUrl+"/pv-api/terms/")}getTermsById(e){return this.http.get(`${this.apiUrl+"/pv-api/terms/?id="}${e}`)}TermsIsActive(e,r){return this.http.patch(`${this.apiUrl+"/pv-api/terms/?id="}${e}`,r)}addTerms(e){return this.http.post(this.apiUrl+"/pv-api/terms/",e)}updateTerms(e,r){return this.http.put(`${this.apiUrl+"/pv-api/terms/?id="}${r}`,e)}deleteTerms(e){return this.http.delete(`${this.apiUrl+"/pv-api/terms/?id="}${e}`)}getVoucherType(){return this.http.get(this.apiUrl+"/pv-api/voucher-type/")}getDepartment(){return this.http.get(this.apiUrl+"/pv-api/department/")}getDepartmentById(e){return this.http.get(`${this.apiUrl+"/pv-api/department/?id="}${e}`)}DepartmentIsActive(e,r){return this.http.patch(`${this.apiUrl+"/pv-api/department/?id="}${e}`,r)}addDepartment(e){return this.http.post(this.apiUrl+"/pv-api/department/",e)}updateDepartment(e,r){return this.http.put(`${this.apiUrl+"/pv-api/department/?id="}${r}`,e)}deleteDepartment(e){return this.http.delete(`${this.apiUrl+"/pv-api/department/?id="}${e}`)}}return d.\u0275fac=function(e){return new(e||d)(h.LFG(n.eN))},d.\u0275prov=h.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},76114:(T,g,o)=>{o.r(g),o.d(g,{UpdateUserModule:()=>F});var u=o(36895),h=o(4392),n=o(24006),t=o(94650),d=o(25062),f=o(97185);function e(s,l){1&s&&(t.TgZ(0,"span",31),t._uU(1,"Enter your Name "),t.qZA())}function r(s,l){1&s&&(t.TgZ(0,"span",31),t._uU(1,"Enter your Username "),t.qZA())}function i(s,l){1&s&&(t.TgZ(0,"span",31),t._uU(1,"Enter your Mobile No."),t.qZA())}function b(s,l){1&s&&(t.TgZ(0,"span",31),t._uU(1,"Enter Valid Email"),t.qZA())}function v(s,l){1&s&&(t.TgZ(0,"span",31),t._uU(1,"Select User Type"),t.qZA())}function m(s,l){if(1&s&&(t.TgZ(0,"option",32),t._uU(1),t.qZA()),2&s){const a=l.$implicit;t.s9C("value",a.id),t.xp6(1),t.Oqu(a.name)}}function U(s,l){1&s&&(t.TgZ(0,"span",31),t._uU(1,"Select User role"),t.qZA())}function _(s,l){if(1&s&&(t.TgZ(0,"option",32),t._uU(1),t.qZA()),2&s){const a=l.$implicit;t.s9C("value",null==a?null:a.id),t.xp6(1),t.Oqu(null==a?null:a.title)}}function y(s,l){1&s&&(t.TgZ(0,"span",31),t._uU(1,"Select branch"),t.qZA())}function $(s,l){1&s&&(t.TgZ(0,"button",33),t._uU(1,"Submit"),t.qZA())}function A(s,l){1&s&&(t.TgZ(0,"button",34),t._UZ(1,"span",35),t._uU(2," \xa0 Submit"),t.qZA())}const c=function(s){return{"is-invalid":s}};let I=(()=>{class s{constructor(a,p,C,D,M){this.fb=a,this.contactService=p,this.toastr=C,this.router=D,this.Arout=M,this.dateError=null,this.loader=!1}get f(){return this.userForm.controls}ngOnInit(){this.id=this.Arout.snapshot.paramMap.get("id"),this.userForm=this.fb.group({phone_number:new n.NI("",[n.kI.required]),username:new n.NI(""),name:new n.NI(""),email:new n.NI(""),active:new n.NI(""),user_type:new n.NI(""),role:new n.NI(""),branch:new n.NI("")}),this.contactService.getUserById(this.id).subscribe(a=>{this.userForm.patchValue(a),this.userForm.get("branch")?.patchValue(a?.branch?.id),this.userForm.get("user_type")?.patchValue(a?.user_type),this.userForm.get("role")?.patchValue(a?.role)}),this.getBranch(),this.getGroup()}getBranch(){this.contactService.getBranch().subscribe(a=>{this.branchList=a})}getGroup(){this.contactService.getPermissionGroup().subscribe(a=>{this.groupList=a})}submit(){this.userForm.valid?(this.loader=!0,this.contactService.updateUser(this.userForm.value,this.id).subscribe(a=>{this.addRes=a,this.addRes.success?(this.loader=!1,this.toastr.success(this.addRes.msg),this.userForm.reset(),this.router.navigate(["//settings/user"])):(this.loader=!1,this.toastr.error(this.addRes.error),this.addRes.phone_number?this.toastr.error(this.addRes.phone_number):this.addRes.username&&this.toastr.error(this.addRes.username))},a=>{this.loader=!1,this.toastr.error("password",a?.error?.password[0])})):(this.userForm.markAllAsTouched(),this.toastr.error("Please Fill All The Required Fields"))}get mobile_no(){return this.userForm.get("phone_number")}get username(){return this.userForm.get("username")}get email(){return this.userForm.get("email")}get password(){return this.userForm.get("password")}get user_type(){return this.userForm.get("user_type")}get permission_group(){return this.userForm.get("user_permissions")}get name(){return this.userForm.get("name")}get branch(){return this.userForm.get("branch")}get role(){return this.userForm.get("role")}}return s.\u0275fac=function(a){return new(a||s)(t.Y36(n.qu),t.Y36(d.y),t.Y36(f._W),t.Y36(h.F0),t.Y36(h.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-update-user"]],decls:79,vars:36,consts:[[1,"page-header"],[1,"page-title"],[1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-3","col-sm-3","col-12"],[1,"form-group"],["type","text","formControlName","name","placeholder","Enter Name","id","name",3,"ngClass"],["class","text-danger",4,"ngIf"],["type","text","formControlName","username","placeholder","Enter User Name","id","username",3,"ngClass"],["type","text","formControlName","phone_number","placeholder","Enter Mobile No.","id","phone_number","minlength","10","maxlength","10",3,"ngClass"],["type","text","formControlName","email","id","email","placeholder","Enter Valid Email",3,"ngClass"],["formControlName","user_type","id","user_type",3,"ngClass"],["value","","selected","","disabled",""],["value","Supplier"],["value","Vendor"],["value","Employee"],["value","Customer"],["formControlName","role","id","role",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["formControlName","branch","id","branch",3,"ngClass"],[1,"col-lg-3","col-sm-3","col-12","d-flex","align-items-center"],[1,"form-group","mt-4"],[1,"d-flex"],["type","checkbox","formControlName","active",3,"id","ngModel"],[1,"d_flex",2,"margin-bottom","0","margin-left","5px",3,"for"],[1,"col-lg-12"],["class","btn btn-submit me-2",4,"ngIf"],["class","btn btn-submit me-2","type","submit","disabled","",4,"ngIf"],["routerLink","//settings/user",1,"btn","btn-cancel"],[1,"text-danger"],[3,"value"],[1,"btn","btn-submit","me-2"],["type","submit","disabled","",1,"btn","btn-submit","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(a,p){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3,"Update User"),t.qZA(),t.TgZ(4,"h6"),t._uU(5,"Edit Update "),t.qZA()()(),t.TgZ(6,"div",2)(7,"div",3)(8,"form",4),t.NdJ("ngSubmit",function(){return p.submit()}),t.TgZ(9,"div",5)(10,"div",6)(11,"div",7)(12,"label"),t._uU(13,"Name*"),t.qZA(),t._UZ(14,"input",8),t.YNc(15,e,2,0,"span",9),t.qZA()(),t.TgZ(16,"div",6)(17,"div",7)(18,"label"),t._uU(19,"User Name*"),t.qZA(),t._UZ(20,"input",10),t.YNc(21,r,2,0,"span",9),t.qZA()(),t.TgZ(22,"div",6)(23,"div",7)(24,"label"),t._uU(25,"Mobile Number*"),t.qZA(),t._UZ(26,"input",11),t.YNc(27,i,2,0,"span",9),t.qZA()(),t.TgZ(28,"div",6)(29,"div",7)(30,"label"),t._uU(31,"Email"),t.qZA(),t._UZ(32,"input",12),t.YNc(33,b,2,0,"span",9),t.qZA()(),t.TgZ(34,"div",6)(35,"div",7)(36,"label"),t._uU(37,"Select User Type"),t.qZA(),t.TgZ(38,"select",13)(39,"option",14),t._uU(40,"Select User Type"),t.qZA(),t.TgZ(41,"option",15),t._uU(42,"Supplier"),t.qZA(),t.TgZ(43,"option",16),t._uU(44,"Vendor"),t.qZA(),t.TgZ(45,"option",17),t._uU(46,"Employee"),t.qZA(),t.TgZ(47,"option",18),t._uU(48,"Customer"),t.qZA()(),t.YNc(49,v,2,0,"span",9),t.qZA()(),t.TgZ(50,"div",6)(51,"div",7)(52,"label"),t._uU(53,"Select User Role"),t.qZA(),t.TgZ(54,"select",19)(55,"option",14),t._uU(56,"Select User Role"),t.qZA(),t.YNc(57,m,2,2,"option",20),t.qZA(),t.YNc(58,U,2,0,"span",9),t.qZA()(),t.TgZ(59,"div",6)(60,"div",7)(61,"label"),t._uU(62,"Select Branch"),t.qZA(),t.TgZ(63,"select",21)(64,"option",14),t._uU(65,"Select Branch"),t.qZA(),t.YNc(66,_,2,2,"option",20),t.qZA(),t.YNc(67,y,2,0,"span",9),t.qZA()(),t.TgZ(68,"div",22)(69,"div",23)(70,"div",24),t._UZ(71,"input",25),t.TgZ(72,"label",26),t._uU(73,"Active"),t.qZA()()()(),t.TgZ(74,"div",27),t.YNc(75,$,2,0,"button",28),t.YNc(76,A,3,0,"button",29),t.TgZ(77,"a",30),t._uU(78,"Cancel"),t.qZA()()()()()()),2&a&&(t.xp6(8),t.Q6J("formGroup",p.userForm),t.xp6(6),t.Q6J("ngClass",t.VKq(22,c,p.f.name.touched&&p.f.name.invalid)),t.xp6(1),t.Q6J("ngIf",p.name&&p.name.invalid&&p.name.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(24,c,p.f.username.touched&&p.f.username.invalid)),t.xp6(1),t.Q6J("ngIf",p.username&&p.username.invalid&&p.username.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(26,c,p.f.phone_number.touched&&p.f.phone_number.invalid)),t.xp6(1),t.Q6J("ngIf",p.mobile_no&&p.mobile_no.invalid&&p.mobile_no.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(28,c,p.f.email.touched&&p.f.email.invalid)),t.xp6(1),t.Q6J("ngIf",p.email&&p.email.invalid&&p.email.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(30,c,p.f.user_type.touched&&p.f.user_type.invalid)),t.xp6(11),t.Q6J("ngIf",p.user_type&&p.user_type.invalid&&p.user_type.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(32,c,p.f.role.touched&&p.f.role.invalid)),t.xp6(3),t.Q6J("ngForOf",p.groupList),t.xp6(1),t.Q6J("ngIf",p.role&&p.role.invalid&&p.role.touched),t.xp6(5),t.Q6J("ngClass",t.VKq(34,c,p.f.branch.touched&&p.f.branch.invalid)),t.xp6(3),t.Q6J("ngForOf",p.branchList),t.xp6(1),t.Q6J("ngIf",p.branch&&p.branch.invalid&&p.branch.touched),t.xp6(4),t.Q6J("id","checkboxTax-")("ngModel",!0),t.xp6(1),t.Q6J("for","checkboxTax-"),t.xp6(3),t.Q6J("ngIf",!p.loader),t.xp6(1),t.Q6J("ngIf",p.loader))},dependencies:[u.mk,u.sg,u.O5,h.yS,n._Y,n.YN,n.Kr,n.Fj,n.Wl,n.EJ,n.JJ,n.JL,n.wO,n.nD,n.sg,n.u],styles:[".ng-dirty.ng-invalid.is-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}select[_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], input[type=button][_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;padding:10px 15px;border-radius:5px}.button[_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;display:flex;padding:10px 15px;border-radius:5px;justify-content:space-between;align-items:center;background:white}textarea[_ngcontent-%COMP%]{height:40px}"]}),s})();var S=o(30597);const Z=JSON.parse(localStorage.getItem("auth"));let E;Z&&Z.map(l=>{"master"===l.content_type.app_label&&"user"===l.content_type.model&&"change_user"==l.codename&&(E=l.codename)});const N=[{path:"",component:I,canActivate:[S.l],data:{allowedRoles:["change_user"]}}];let P=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[h.Bz.forChild(N),h.Bz]}),s})(),F=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[u.ez,P,n.u5,n.UX]}),s})()},30597:(T,g,o)=>{o.d(g,{l:()=>f});var u=o(94650),h=o(4392),n=o(97185),t=o(42917),d=o(80927);let f=(()=>{class e{constructor(i,b,v,m,U){this.router=i,this.Arout=b,this.toastr=v,this.profileService=m,this.coreService=U}canActivate(i,b){const v=JSON.parse(localStorage.getItem("auth"));if(this.profileService.userDetails$.subscribe(m=>{this.userDetails=m,this.permissions=this.userDetails?.permission}),v){const m=i.data.allowedRoles;console.log(m,"allowedRoles");const U=v.some(_=>m.includes(_.codename));if(console.log(U),this.coreService.getProfile().subscribe(_=>{this.userDetails=_,this.profileService.setUserDetails(this.userDetails);const y=_?.permission,$=this.profileService.getUserDetails();(!$||$.length!==y.length)&&(this.profileService.setUserPermission(y),window.location.reload())}),U)return!0}return this.toastr.error("User have Not Permission to Access This page"),this.router.navigate(["/dashboard"]),!1}}return e.\u0275fac=function(i){return new(i||e)(u.LFG(h.F0),u.LFG(h.gz),u.LFG(n._W),u.LFG(t.J),u.LFG(d.p))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);