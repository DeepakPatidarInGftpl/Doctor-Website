"use strict";(self.webpackChunktemplate=self.webpackChunktemplate||[]).push([[50265],{72170:(N,y,h)=>{h.d(y,{M:()=>S});var g=h(92340),f=h(94650),_=h(80529);let S=(()=>{class C{constructor(o){this.http=o,this.apiUrl=`${g.N.api}`}getSalesOrderfy(o,r){console.log(r,"branch"),console.log(r.length,"branch");let s=this.apiUrl+"/pv-api/sale_order/";const d=[];if(o&&d.push(`financial_year=${o}`),r&&r.length>0){const u=JSON.stringify(r);console.log(u),console.log(u?.length),d.push(`branch=${u}`)}return d.length>0&&(s+="?"+d.join("&")),this.http.get(s)}getSalesOrder(){return this.http.get(this.apiUrl+"/pv-api/sale_order/")}getSalesOrderByUserId(o){return this.http.get(this.apiUrl+"/pv-api/sale_order/?user_id="+o)}getSalesOrderById(o){return this.http.get(`${this.apiUrl+"/pv-api/sale_order/?id="}${o}`)}SalesOrderIsActive(o,r){return this.http.patch(`${this.apiUrl+"/pv-api/sale_order/?id="}${o}`,r)}addSalesOrder(o){return this.http.post(this.apiUrl+"/pv-api/sale_order/",o)}updateSalesOrder(o,r){return this.http.put(`${this.apiUrl+"/pv-api/sale_order/?sale_order_id="}${r}`,o)}deleteSalesOrder(o){return this.http.delete(`${this.apiUrl+"/pv-api/sale_order/?id="}${o}`)}getSalesEstimatefy(o,r){console.log(r,"branch"),console.log(r.length,"branch");let s=this.apiUrl+"/pv-api/estimate/";const d=[];if(o&&d.push(`financial_year=${o}`),r&&r.length>0){const u=JSON.stringify(r);console.log(u),console.log(u?.length),d.push(`branch=${u}`)}return d.length>0&&(s+="?"+d.join("&")),this.http.get(s)}getSalesEstimate(){return this.http.get(this.apiUrl+"/pv-api/estimate/")}getSalesEstimateByUserId(o){return this.http.get(this.apiUrl+"/pv-api/estimate/?user_id="+o)}getSalesEstimateById(o){return this.http.get(`${this.apiUrl+"/pv-api/estimate/?id="}${o}`)}SalesEstimateIsActive(o,r){return this.http.patch(`${this.apiUrl+"/pv-api/estimate/?id="}${o}`,r)}addSalesEstimate(o){return this.http.post(this.apiUrl+"/pv-api/estimate/",o)}updateSalesEstimate(o,r){return this.http.put(`${this.apiUrl+"/pv-api/estimate/?estimate_id="}${r}`,o)}deleteSalesEstimate(o){return this.http.delete(`${this.apiUrl+"/pv-api/estimate/?id="}${o}`)}getSalesBillfyWithProductId(o,r,s){let d=this.apiUrl+"/pv-api/sale_bill/";const u=new URLSearchParams;return u.append("financial_year",o),u.append("product_id",String(r)),u.append("start_date",s.s),u.append("end_date",s.e),this.http.get(d+(u.toString()?"?"+u.toString():""))}getSalesBillfy(o,r){console.log(r,"branch"),console.log(r.length,"branch");let s=this.apiUrl+"/pv-api/sale_bill/";const d=[];if(o&&d.push(`financial_year=${o}`),r&&r.length>0){const u=JSON.stringify(r);console.log(u),console.log(u?.length),d.push(`branch=${u}`)}return d.length>0&&(s+="?"+d.join("&")),this.http.get(s)}getSalesBill(){return this.http.get(this.apiUrl+"/pv-api/sale_bill/")}getSalesBillById(o){return this.http.get(`${this.apiUrl+"/pv-api/sale_bill/?id="}${o}`)}getSalesBillByUserId(o){return this.http.get(`${this.apiUrl+"/pv-api/sale_bill/?user_id="}${o}`)}SalesBillIsActive(o,r){return this.http.patch(`${this.apiUrl+"/pv-api/sale_bill/?id="}${o}`,r)}addSalesBill(o){return this.http.post(this.apiUrl+"/pv-api/sale_bill/",o)}updateSalesBill(o,r){return this.http.put(`${this.apiUrl+"/pv-api/sale_bill/?sale_bill_id="}${r}`,o)}deleteSalesBill(o){return this.http.delete(`${this.apiUrl+"/pv-api/sale_bill/?id="}${o}`)}getSalesMaterialOutwardfy(o,r){console.log(r,"branch"),console.log(r.length,"branch");let s=this.apiUrl+"/pv-api/material_outward/";const d=[];if(o&&d.push(`financial_year=${o}`),r&&r.length>0){const u=JSON.stringify(r);console.log(u),console.log(u?.length),d.push(`branch=${u}`)}return d.length>0&&(s+="?"+d.join("&")),this.http.get(s)}getSalesMaterialOutward(){return this.http.get(this.apiUrl+"/pv-api/material_outward/")}getSalesMaterialOutwardById(o){return this.http.get(`${this.apiUrl+"/pv-api/material_outward/?id="}${o}`)}SalesMaterialOutwardIsActive(o,r){return this.http.patch(`${this.apiUrl+"/pv-api/material_outward/?id="}${o}`,r)}addSalesMaterialOutward(o){return this.http.post(this.apiUrl+"/pv-api/material_outward/",o)}updateSalesMaterialOutward(o,r){return this.http.put(`${this.apiUrl+"/pv-api/material_outward/?material_outward_id="}${r}`,o)}deleteSalesMaterialOutward(o){return this.http.delete(`${this.apiUrl+"/pv-api/material_outward/?id="}${o}`)}getSaleReturnfy(o,r){console.log(r,"branch"),console.log(r.length,"branch");let s=this.apiUrl+"/pv-api/sale_return/";const d=[];if(o&&d.push(`financial_year=${o}`),r&&r.length>0){const u=JSON.stringify(r);console.log(u),console.log(u?.length),d.push(`branch=${u}`)}return d.length>0&&(s+="?"+d.join("&")),this.http.get(s)}getSaleReturn(){return this.http.get(this.apiUrl+"/pv-api/sale_return/")}getSaleReturnById(o){return this.http.get(`${this.apiUrl+"/pv-api/sale_return/?id="}${o}`)}SaleReturnIsActive(o,r){return this.http.patch(`${this.apiUrl+"/pv-api/sale_return/?id="}${o}`,r)}addSaleReturn(o){return this.http.post(this.apiUrl+"/pv-api/sale_return/",o)}updateSaleReturn(o,r){return this.http.put(`${this.apiUrl+"/pv-api/sale_return/?sale_return_id="}${r}`,o)}deleteSaleReturn(o){return this.http.delete(`${this.apiUrl+"/pv-api/sale_return/?id="}${o}`)}getSearchProductById(o){return this.http.get(`${this.apiUrl+"/pv-api/variant-search/?search="}${o}`)}getSearchProduct(){return this.http.get(this.apiUrl+"/pv-api/variant-search/")}filterVariant(o,r,s){let d=this.apiUrl+"/pv-api/sales_product_filter/";const u=[];return o&&u.push(`category=${o}`),r&&u.push(`subcategory=${r}`),s&&u.push(`search=${s}`),u.length>0&&(d+="?"+u.join("&")),this.http.get(d)}getSaleOrderPrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=SaleOrder")}getSaleBillPrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=SaleBill")}getSaleReturnPrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=SaleReturn")}getEstimatePrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=Estimate")}getMaterialOutwardPrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=MaterialOutward")}getAdvanceBookingPrefix(){return this.http.get(this.apiUrl+"/pv-api/prefix/?id=AdvanceBooking")}getUser(o){return this.http.get(this.apiUrl+"/pv-api/contact-user/?search="+o)}getAdvanceBookingfy(o,r){console.log(r,"branch"),console.log(r.length,"branch");let s=this.apiUrl+"/pv-api/advance_booking/";const d=[];if(o&&d.push(`financial_year=${o}`),r&&r.length>0){const u=JSON.stringify(r);console.log(u),console.log(u?.length),d.push(`branch=${u}`)}return d.length>0&&(s+="?"+d.join("&")),this.http.get(s)}getAdvanceBooking(){return this.http.get(this.apiUrl+"/pv-api/advance_booking/")}getAdvanceBookingById(o){return this.http.get(`${this.apiUrl+"/pv-api/advance_booking/?id="}${o}`)}AdvanceBookingIsActive(o,r){return this.http.patch(`${this.apiUrl+"/pv-api/advance_booking/?id="}${o}`,r)}addAdvanceBooking(o){return this.http.post(this.apiUrl+"/pv-api/advance_booking/",o)}updateAdvanceBooking(o,r){return this.http.put(`${this.apiUrl+"/pv-api/advance_booking/?id="}${r}`,o)}deleteAdvanceBooking(o){return this.http.delete(`${this.apiUrl+"/pv-api/advance_booking/?id="}${o}`)}getDelivryChallanFY(o,r){console.log(r,"branch"),console.log(r.length,"branch");let s=this.apiUrl+"/pv-api/delivery_challan/";const d=[];if(o&&d.push(`financial_year=${o}`),r&&r.length>0){const u=JSON.stringify(r);console.log(u),console.log(u?.length),d.push(`branch=${u}`)}return d.length>0&&(s+="?"+d.join("&")),this.http.get(s)}getDelivryChallan(){return this.http.get(this.apiUrl+"/pv-api/delivery_challan/")}getDelivryChallanById(o){return this.http.get(`${this.apiUrl+"/pv-api/delivery_challan/?id="}${o}`)}DelivryChallanIsActive(o,r){return this.http.patch(`${this.apiUrl+"/pv-api/delivery_challan/?id="}${o}`,r)}addDelivryChallan(o){return this.http.post(this.apiUrl+"/pv-api/delivery_challan/",o)}updateDelivryChallan(o,r){return this.http.put(`${this.apiUrl+"/pv-api/delivery_challan/?id="}${r}`,o)}deleteDelivryChallan(o){return this.http.delete(`${this.apiUrl+"/pv-api/delivery_challan/?id="}${o}`)}advanceBookingStatusUpdate(o){return this.http.post(this.apiUrl+"/pv-api/advance_booking_status_update/",o)}deliveryChallanStatusUpdate(o){return this.http.post(this.apiUrl+"/pv-api/delivery_challan_status_update/",o)}}return C.\u0275fac=function(o){return new(o||C)(f.LFG(_.eN))},C.\u0275prov=f.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},50265:(N,y,h)=>{h.r(y),h.d(y,{AddProductionVoucherModule:()=>st});var g=h(36895),f=h(4392),_=h(24006),S=h(35226),C=h.n(S),t=h(94650),o=h(97185),r=h(80927),s=h(72170),d=h(47957),u=h(3238),T=h(44144);function q(l,p){1&l&&(t.TgZ(0,"span",32),t._uU(1,"Select Date"),t.qZA())}function U(l,p){1&l&&(t.TgZ(0,"span",32),t._uU(1,"Enter Production Voucher No."),t.qZA())}function v(l,p){if(1&l){const e=t.EpF();t.TgZ(0,"span",33),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addCart())}),t._uU(1,"Add Item Generated Cart+"),t.qZA()}}function b(l,p){if(1&l){const e=t.EpF();t.O4$(),t.TgZ(0,"svg",68),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.addCartItem())}),t._UZ(1,"path",37)(2,"path",69),t.qZA()}}function w(l,p){if(1&l){const e=t.EpF();t.TgZ(0,"mat-option",71),t.NdJ("onSelectionChange",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw().index,c=t.oxw();return t.KtG(c.oncheckVariant(i,a))})("onSelectionChange",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw().index,c=t.oxw();return t.KtG(c.variantChanged(i,a))}),t._uU(1),t.qZA()}if(2&l){const e=t.oxw().$implicit;t.Q6J("value",(null==e?null:e.product_title)+" "+(null==e?null:e.variant_name)),t.xp6(1),t.hij(" ",(null==e?null:e.product_title)+" "+(null==e?null:e.variant_name)," ")}}function M(l,p){if(1&l&&(t.ynx(0),t.YNc(1,w,2,2,"mat-option",70),t.BQk()),2&l){const e=p.$implicit;t.xp6(1),t.Q6J("ngIf",1==(null==e?null:e.is_active))}}function V(l,p){1&l&&(t.TgZ(0,"mat-option",72),t._uU(1,"Loading..."),t.qZA())}function $(l,p){1&l&&(t.TgZ(0,"mat-option",73)(1,"a",74),t._uU(2,"+add Product"),t.qZA()()),2&l&&t.Q6J("value","No data found")}function F(l,p){1&l&&(t.TgZ(0,"mat-option",75),t._uU(1," Please Enter 3 or more characters "),t.qZA())}function B(l,p){if(1&l){const e=t.EpF();t.TgZ(0,"tr")(1,"td",76),t._uU(2),t.qZA(),t.TgZ(3,"td",76),t._uU(4),t.qZA(),t.TgZ(5,"td",76),t._uU(6),t.qZA(),t.TgZ(7,"td",76),t._uU(8),t.qZA(),t.TgZ(9,"td",76),t._uU(10),t.qZA(),t.TgZ(11,"td",76),t._uU(12),t.qZA(),t.TgZ(13,"td",76),t._uU(14),t.qZA(),t.TgZ(15,"td")(16,"button",78),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.oncheckVariant(a,c.indexCartValue))})("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.variantChanged(a,c.indexCartValue))}),t._uU(17,"Select "),t.qZA()()()}if(2&l){const e=p.$implicit,n=p.index;t.xp6(2),t.hij(" ",n+1+".",""),t.xp6(2),t.hij(" ",null==e?null:e.sku,""),t.xp6(2),t.hij(" ",null==e?null:e.product_title," "),t.xp6(2),t.hij(" ",null==e?null:e.variant_name," "),t.xp6(2),t.hij(" ",null==e||null==e.product?null:e.product.article_no," "),t.xp6(2),t.hij(" ",null==e?null:e.created_date," "),t.xp6(2),t.hij(" ",null==e||null==e.batch[0]?null:e.batch[0].mrp," ")}}function D(l,p){if(1&l&&(t.TgZ(0,"div",7)(1,"div",5)(2,"div",14)(3,"table",15)(4,"thead")(5,"tr")(6,"th",76),t._uU(7," Sr.No."),t.qZA(),t.TgZ(8,"th",76),t._uU(9," Barcode"),t.qZA(),t.TgZ(10,"th",77),t._uU(11," Product"),t.qZA(),t.TgZ(12,"th",76),t._uU(13," Variant Name"),t.qZA(),t.TgZ(14,"th",76),t._uU(15," Article No."),t.qZA(),t.TgZ(16,"th",77),t._uU(17," Date"),t.qZA(),t.TgZ(18,"th",77),t._uU(19," MRP"),t.qZA(),t.TgZ(20,"th",77),t._uU(21," Action"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,B,18,7,"tr",20),t.qZA()()()()()),2&l){const e=t.oxw(2);t.xp6(23),t.Q6J("ngForOf",e.variantList[e.indexCartValue])}}function J(l,p){if(1&l){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr",34)(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td")(5,"div")(6,"div",35),t.O4$(),t.TgZ(7,"svg",36),t.NdJ("click",function(){const a=t.CHM(e).index,c=t.oxw();return t.KtG(c.removeCartItem(a))}),t._UZ(8,"path",37)(9,"path",38),t.qZA()(),t.YNc(10,b,3,0,"svg",39),t.qZA()(),t.kcU(),t.TgZ(11,"td")(12,"input",40,41),t.NdJ("keyup",function(){const a=t.CHM(e).index,c=t.MAs(13),Z=t.oxw();return t.KtG(Z.getVariant(c.value,a,"barcode"))})("blur",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.hideSearch())}),t.qZA()(),t.TgZ(14,"td",42)(15,"div",43)(16,"input",44),t.NdJ("input",function(i){const c=t.CHM(e).index,Z=t.oxw();return t.KtG(Z.getVariant(i.target.value,c,""))}),t.qZA(),t.TgZ(17,"mat-autocomplete",null,45),t.YNc(19,M,2,1,"ng-container",20),t.YNc(20,V,2,0,"mat-option",46),t.YNc(21,$,3,1,"mat-option",47),t.YNc(22,F,2,0,"mat-option",48),t.qZA(),t.TgZ(23,"i",49),t.NdJ("click",function(){const a=t.CHM(e).index,c=t.oxw();return t.KtG(c.openModalProduct(a))}),t.qZA(),t.TgZ(24,"div",50)(25,"div",51)(26,"div",52)(27,"div",53)(28,"h1",54),t._uU(29,"Selected Products "),t.qZA(),t.TgZ(30,"button",55),t.NdJ("click",function(){const a=t.CHM(e).index,c=t.oxw();return t.KtG(c.closeModalProduct(a))}),t.TgZ(31,"span",56),t._uU(32,"\xd7"),t.qZA()()(),t.TgZ(33,"div",57),t.YNc(34,D,24,1,"div",58),t.qZA()()()()()(),t.TgZ(35,"td"),t._UZ(36,"input",59),t.qZA(),t.TgZ(37,"td"),t._UZ(38,"input",60),t.qZA(),t.TgZ(39,"td"),t._UZ(40,"input",61),t.qZA(),t.TgZ(41,"td"),t._UZ(42,"input",62),t.qZA(),t.TgZ(43,"td"),t._UZ(44,"input",63),t.qZA(),t.TgZ(45,"td"),t._UZ(46,"input",64),t.qZA(),t.TgZ(47,"td"),t._UZ(48,"input",65),t.qZA(),t.TgZ(49,"td"),t._UZ(50,"input",66),t.qZA(),t.TgZ(51,"td"),t._UZ(52,"input",67),t.qZA()(),t.BQk()}if(2&l){const e=p.index,n=t.MAs(18),i=t.oxw();let a,c;t.xp6(1),t.Q6J("formGroupName",e),t.xp6(2),t.Oqu(e+1+"."),t.xp6(7),t.Q6J("ngIf",i.isLastCart(e)),t.xp6(2),t.Q6J("value",void 0!==i.barcode[e]?i.barcode[e]:""),t.uIk("data-index",e),t.xp6(4),t.Q6J("formControl",i.myControl.at(e))("matAutocomplete",n),t.xp6(3),t.Q6J("ngForOf",i.variantList[e]),t.xp6(1),t.Q6J("ngIf",(null==i.searchLength||null==(a=i.searchLength.toString())?null:a.length)<2&&i.isSearch),t.xp6(1),t.Q6J("ngIf",0===(null==i.variantList[e]?null:i.variantList[e].length)&&!i.isSearch),t.xp6(1),t.Q6J("ngIf",(null==i.searchLength||null==(c=i.searchLength.toString())?null:c.length)<2),t.xp6(2),t.MGl("id","productModal-",e,""),t.xp6(10),t.Q6J("ngIf",i.variantList&&i.variantList[i.indexCartValue])}}function k(l,p){if(1&l){const e=t.EpF();t.TgZ(0,"span",33),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addCartIConsumed())}),t._uU(1,"Add Item Consumed Cart+"),t.qZA()}}function L(l,p){if(1&l){const e=t.EpF();t.O4$(),t.TgZ(0,"svg",68),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.addCartIConsumed())}),t._UZ(1,"path",37)(2,"path",69),t.qZA()}}function E(l,p){if(1&l){const e=t.EpF();t.TgZ(0,"mat-option",71),t.NdJ("onSelectionChange",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw().index,c=t.oxw();return t.KtG(c.oncheckVariantConsumed(i,a))})("onSelectionChange",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw().index,c=t.oxw();return t.KtG(c.variantChangedConsumed(i,a))}),t._uU(1),t.qZA()}if(2&l){const e=t.oxw().$implicit;t.Q6J("value",(null==e?null:e.product_title)+" "+(null==e?null:e.variant_name)),t.xp6(1),t.hij(" ",(null==e?null:e.product_title)+" "+(null==e?null:e.variant_name)," ")}}function Q(l,p){if(1&l&&(t.ynx(0),t.YNc(1,E,2,2,"mat-option",70),t.BQk()),2&l){const e=p.$implicit;t.xp6(1),t.Q6J("ngIf",1==(null==e?null:e.is_active))}}function G(l,p){1&l&&(t.TgZ(0,"mat-option",72),t._uU(1,"Loading..."),t.qZA())}function j(l,p){1&l&&(t.TgZ(0,"mat-option",73)(1,"a",74),t._uU(2,"+add Product"),t.qZA()()),2&l&&t.Q6J("value","No data found")}function Y(l,p){1&l&&(t.TgZ(0,"mat-option",75),t._uU(1," Please Enter 3 or more characters "),t.qZA())}function K(l,p){if(1&l){const e=t.EpF();t.TgZ(0,"tr")(1,"td",76),t._uU(2),t.qZA(),t.TgZ(3,"td",76),t._uU(4),t.qZA(),t.TgZ(5,"td",76),t._uU(6),t.qZA(),t.TgZ(7,"td",76),t._uU(8),t.qZA(),t.TgZ(9,"td",76),t._uU(10),t.qZA(),t.TgZ(11,"td",76),t._uU(12),t.qZA(),t.TgZ(13,"td",76),t._uU(14),t.qZA(),t.TgZ(15,"td")(16,"button",78),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.oncheckVariant(a,c.indexCartValue))})("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.variantChanged(a,c.indexCartValue))}),t._uU(17,"Select "),t.qZA()()()}if(2&l){const e=p.$implicit,n=p.index;t.xp6(2),t.hij(" ",n+1+".",""),t.xp6(2),t.hij(" ",null==e?null:e.sku,""),t.xp6(2),t.hij(" ",null==e?null:e.product_title," "),t.xp6(2),t.hij(" ",null==e?null:e.variant_name," "),t.xp6(2),t.hij(" ",null==e||null==e.product?null:e.product.article_no," "),t.xp6(2),t.hij(" ",null==e?null:e.created_date," "),t.xp6(2),t.hij(" ",null==e||null==e.batch[0]?null:e.batch[0].mrp," ")}}function R(l,p){if(1&l&&(t.TgZ(0,"div",7)(1,"div",5)(2,"div",14)(3,"table",15)(4,"thead")(5,"tr")(6,"th",76),t._uU(7," Sr.No."),t.qZA(),t.TgZ(8,"th",76),t._uU(9," Barcode"),t.qZA(),t.TgZ(10,"th",77),t._uU(11," Product"),t.qZA(),t.TgZ(12,"th",76),t._uU(13," Variant Name"),t.qZA(),t.TgZ(14,"th",76),t._uU(15," Article No."),t.qZA(),t.TgZ(16,"th",77),t._uU(17," Date"),t.qZA(),t.TgZ(18,"th",77),t._uU(19," MRP"),t.qZA(),t.TgZ(20,"th",77),t._uU(21," Action"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,K,18,7,"tr",20),t.qZA()()()()()),2&l){const e=t.oxw(2);t.xp6(23),t.Q6J("ngForOf",e.variantList2[e.indexCartValue])}}function H(l,p){if(1&l&&(t.TgZ(0,"option",73),t._uU(1),t.qZA()),2&l){const e=p.$implicit;t.Q6J("value",null==e?null:e.id),t.xp6(1),t.hij("",null==e?null:e.mrp," ")}}function z(l,p){if(1&l&&(t.ynx(0),t.TgZ(1,"option",82),t._uU(2,"Select Batch"),t.qZA(),t.YNc(3,H,2,2,"option",83),t.BQk()),2&l){const e=t.oxw().index,n=t.oxw();t.xp6(3),t.Q6J("ngForOf",n.selectedBatch[e])}}function W(l,p){1&l&&(t.ynx(0),t.TgZ(1,"option",82),t._uU(2,"Batch Not Available"),t.qZA(),t.BQk())}function X(l,p){if(1&l){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr",34)(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td")(5,"div")(6,"div",35),t.O4$(),t.TgZ(7,"svg",36),t.NdJ("click",function(){const a=t.CHM(e).index,c=t.oxw();return t.KtG(c.removeCartConsumed(a))}),t._UZ(8,"path",37)(9,"path",38),t.qZA()(),t.YNc(10,L,3,0,"svg",39),t.qZA()(),t.kcU(),t.TgZ(11,"td")(12,"input",40,41),t.NdJ("keyup",function(){const a=t.CHM(e).index,c=t.MAs(13),Z=t.oxw();return t.KtG(Z.getVariantConsumed(c.value,a,"barcode"))})("blur",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.hideSearch())}),t.qZA()(),t.TgZ(14,"td",42)(15,"div",43)(16,"input",44),t.NdJ("input",function(i){const c=t.CHM(e).index,Z=t.oxw();return t.KtG(Z.getVariantConsumed(i.target.value,c,""))}),t.qZA(),t.TgZ(17,"mat-autocomplete",null,45),t.YNc(19,Q,2,1,"ng-container",20),t.YNc(20,G,2,0,"mat-option",46),t.YNc(21,j,3,1,"mat-option",47),t.YNc(22,Y,2,0,"mat-option",48),t.qZA(),t.TgZ(23,"i",49),t.NdJ("click",function(){const a=t.CHM(e).index,c=t.oxw();return t.KtG(c.openModalItemProduct(a))}),t.qZA(),t.TgZ(24,"div",50)(25,"div",51)(26,"div",52)(27,"div",53)(28,"h1",54),t._uU(29,"Selected Products "),t.qZA(),t.TgZ(30,"button",55),t.NdJ("click",function(){const a=t.CHM(e).index,c=t.oxw();return t.KtG(c.closeModalItemProduct(a))}),t.TgZ(31,"span",56),t._uU(32,"\xd7"),t.qZA()()(),t.TgZ(33,"div",57),t.YNc(34,R,24,1,"div",58),t.qZA()()()()()(),t.TgZ(35,"td")(36,"select",79),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.hendelChange(i))}),t.YNc(37,z,4,1,"ng-container",80),t.YNc(38,W,3,0,"ng-container",80),t.qZA()(),t.TgZ(39,"td"),t._UZ(40,"input",59),t.qZA(),t.TgZ(41,"td"),t._UZ(42,"input",60),t.qZA(),t.TgZ(43,"td")(44,"div",81),t._uU(45),t.qZA()(),t.TgZ(46,"td")(47,"div",81),t._uU(48),t.qZA()(),t.TgZ(49,"td")(50,"div",81),t._uU(51),t.qZA()(),t.TgZ(52,"td")(53,"div",81),t._uU(54),t.qZA()(),t.TgZ(55,"td")(56,"div",81),t._uU(57),t.qZA()(),t.TgZ(58,"td")(59,"div",81),t._uU(60),t.qZA()(),t.TgZ(61,"td")(62,"div",81),t._uU(63),t.qZA()()(),t.BQk()}if(2&l){const e=p.index,n=t.MAs(18),i=t.oxw();let a,c;t.xp6(1),t.Q6J("formGroupName",e),t.xp6(2),t.Oqu(e+1+"."),t.xp6(7),t.Q6J("ngIf",i.isLastConsumed(e)),t.xp6(2),t.Q6J("value",void 0!==i.barcodeConsumed[e]?i.barcodeConsumed[e]:""),t.uIk("data-index",e),t.xp6(4),t.Q6J("formControl",i.myControlConsumed.at(e))("matAutocomplete",n),t.xp6(3),t.Q6J("ngForOf",i.variantList2[e]),t.xp6(1),t.Q6J("ngIf",(null==i.searchLengthConsumed||null==(a=i.searchLengthConsumed.toString())?null:a.length)<2&&i.isSearch),t.xp6(1),t.Q6J("ngIf",0===(null==i.variantList2[e]?null:i.variantList2[e].length)&&!i.isSearch),t.xp6(1),t.Q6J("ngIf",(null==i.searchLengthConsumed||null==(c=i.searchLengthConsumed.toString())?null:c.length)<2),t.xp6(2),t.MGl("id","productModalItem-",e,""),t.xp6(10),t.Q6J("ngIf",i.variantList&&i.variantList2[i.indexCartValue]),t.xp6(3),t.Q6J("ngIf",(null==i.selectedBatch[e]?null:i.selectedBatch[e].length)>0),t.xp6(1),t.Q6J("ngIf",0==(null==i.selectedBatch[e]?null:i.selectedBatch[e].length)),t.xp6(7),t.hij(" ",i.Cost_Price," "),t.xp6(3),t.hij(" ",i.Online_Price," "),t.xp6(3),t.hij(" ",i.Offline_Price," "),t.xp6(3),t.hij(" ",i.Employee_Price," "),t.xp6(3),t.hij(" ",i.Dealer_Price," "),t.xp6(3),t.hij(" ",i.Discount," "),t.xp6(3),t.hij(" ",i.Additional_Discount," ")}}function tt(l,p){1&l&&(t.TgZ(0,"button",84),t._uU(1,"Submit"),t.qZA())}function et(l,p){1&l&&(t.TgZ(0,"button",85),t._UZ(1,"span",86),t._uU(2,"\xa0 Submit"),t.qZA())}const O=function(l){return{"is-invalid":l}},it=[{path:"",component:(()=>{class l{constructor(e,n,i,a,c){this.fb=e,this.router=n,this.toastrService=i,this.coreService=a,this.saleService=c,this.isCart=!1,this.isCartConsumed=!1,this.variantList=[],this.isSearch=!1,this.barcode=[],this.variantList2=[],this.isSearchConsumed=!1,this.selectdataForConsumed=[],this.Cost_Price=0,this.Online_Price=0,this.Offline_Price=0,this.Employee_Price=0,this.Dealer_Price=0,this.Discount=0,this.Additional_Discount=0,this.selectedBatch=[],this.barcodeConsumed=[],this.dateError=null,this.loaders=!1}get f(){return this.productionvoucherForm.controls}ngOnInit(){this.myControl=new _.Oe([]),this.myControlConsumed=new _.Oe([]);const e=(new Date).toISOString().split("T")[0];this.productionvoucherForm=this.fb.group({material_consumption_date:new _.NI(e),material_consumption_no:new _.NI("",[_.kI.required]),item_generated_cart:this.fb.array([]),item_consumed_cart:this.fb.array([])}),this.getprefix(),this.addCartItem(),this.addCartIConsumed()}getprefix(){this.coreService.getProductionVoucherPrefix().subscribe(e=>{console.log(e),1==e.success?this.prefixNo=e?.data[0]?.prefix:this.toastrService.error(e.msg)},e=>{this.toastrService.error(e.error.msg)})}cartItem(){return this.fb.group({barcode:new _.NI(""),item_name:new _.NI(""),qty:new _.NI(1),mrp:new _.NI(0),cost_price:new _.NI(0),selling_price_online:new _.NI(0),selling_price_offline:new _.NI(0),selling_price_employee:new _.NI(0),selling_price_dealer:new _.NI(0),discount:new _.NI(0),additional_discount:new _.NI(0)})}getCartItem(){return this.productionvoucherForm.get("item_generated_cart")}addCartItem(){this.getCartItem().push(this.cartItem()),this.isCart=!1,this.getVariant("...","","")}removeCartItem(e){this.getCartItem().removeAt(e),0==this.productionvoucherForm?.value?.item_generated_cart?.length&&(this.isCart=!0)}cartConsumed(){return this.fb.group({barcode:new _.NI(""),item_name:new _.NI(""),qty:new _.NI(1),mrp:new _.NI(0),batch_id:new _.NI("")})}getCartConsumed(){return this.productionvoucherForm.get("item_consumed_cart")}addCartIConsumed(){this.getCartConsumed().push(this.cartConsumed()),this.isCartConsumed=!1,this.getVariantConsumed("...","","")}removeCartConsumed(e){this.getCartConsumed().removeAt(e),0==this.productionvoucherForm?.value?.item_consumed_cart?.length&&(this.isCartConsumed=!0)}isLastCart(e){return e===this.getCartItem().controls.length-1}isLastConsumed(e){return e===this.getCartConsumed().controls.length-1}openModalProduct(e){this.indexCartValue=e;const i=document.getElementById(`productModal-${e}`);i&&(i.classList.add("show"),i.style.display="block")}hendelChange(e){let n=e.target.value;this.selectdataForConsumed.forEach(i=>{i.batch.forEach(a=>{a.id==n&&(this.Cost_Price=a.cost_price,this.Online_Price=a.selling_price_online,this.Offline_Price=a.selling_price_offline,this.Employee_Price=a.selling_price_employee,this.Dealer_Price=a.selling_price_dealer,this.Discount=a.discount,this.Additional_Discount=a.additional_discount)})})}closeModalProduct(e){console.log(e,"index");const n=document.getElementById(`productModal-${e}`);n&&(n.classList.remove("show"),n.style.display="none")}openModalItemProduct(e){this.indexCartValue=e;const i=document.getElementById(`productModalItem-${e}`);i&&(i.classList.add("show"),i.style.display="block")}closeModalItemProduct(e){const n=document.getElementById(`productModalItem-${e}`);n&&(n.classList.remove("show"),n.style.display="none")}getVariant(e,n,i){this.searchLength=e,this.isSearch=!0,e.toString().length>=3&&this.saleService.filterVariant("","",e).subscribe(a=>{console.log(a),this.isSearch=!1,this.variantList[n]=a,console.log(this.variantList),"barcode"===i&&(this.oncheckVariant(a[0],n),this.myControl.setValue(a[0].product_title))})}oncheckVariant(e,n){const i=e.id;console.log(e);this.productionvoucherForm.get("item_generated_cart").at(n).patchValue(e.batch.length>0?{barcode:i,item_name:e?.product_title,qty:e.batch[0]?.stock,mrp:e.batch[0]?.mrp,cost_price:e.batch[0]?.cost_price,selling_price_online:e.batch[0]?.selling_price_online,selling_price_offline:e.batch[0]?.selling_price_offline,selling_price_employee:e.batch[0]?.selling_price_employee,selling_price_dealer:e.batch[0]?.selling_price_dealer,discount:0,additional_discount:e.batch[0]?.additional_discount}:{barcode:i,item_name:e?.product_title,qty:1,mrp:0,cost_price:0,selling_price_online:0,selling_price_offline:0,selling_price_employee:0,selling_price_dealer:e.batch[0]?.selling_price_dealer,discount:0,additional_discount:e.batch[0]?.additional_discount})}variantChanged(e,n){this.barcode[n]=e.sku,this.myControl.push(new _.NI(e?.product_title+" "+e?.variant_name))}getVariantConsumed(e,n,i){this.searchConsumedLength=e,console.warn(this.searchConsumedLength),this.isSearchConsumed=!0,e.toString().length>=3&&this.saleService.filterVariant("","",e).subscribe(a=>{console.log(a),this.isSearchConsumed=!1,this.variantList2[n]=a,console.log(a),console.log(this.variantList2),"barcode"===i&&(this.oncheckVariantConsumed(a[0],n),this.myControlConsumed.setValue(a[0].product_title))})}oncheckVariantConsumed(e,n){const i=e.id;console.log(e),this.selectdataForConsumed[n]=e,this.selectedBatch[n]=e?.batch;const a=this.productionvoucherForm.get("item_consumed_cart").at(n);e.batch.length>0?(a.patchValue({barcode:i,item_name:e?.product_title,qty:e.batch[0]?.stock,mrp:e.batch[0]?.mrp,batch_id:e.batch[0]?.id}),this.Cost_Price=e.batch[0]?.cost_price,this.Online_Price=e.batch[0]?.selling_price_online,this.Offline_Price=e.batch[0]?.selling_price_offline,this.Employee_Price=e.batch[0]?.selling_price_employee,this.Dealer_Price=e.batch[0]?.selling_price_dealer,this.Discount=e.batch[0]?.discount,this.Additional_Discount=e.batch[0]?.additional_discount):a.patchValue({barcode:i,item_name:e?.product_title,qty:1,mrp:0,batch_id:""})}variantChangedConsumed(e,n){this.barcodeConsumed[n]=e.sku,this.myControlConsumed.push(new _.NI(e?.product_title+" "+e?.variant_name))}submit(){C().fire({title:"Are you sure?",text:"do you want to proceed.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Save it!"}).then(e=>{if(e.isConfirmed){this.loaders=!0;let n=new FormData;n.append("material_consumption_date",this.productionvoucherForm.get("material_consumption_date")?.value),n.append("material_consumption_no",this.productionvoucherForm.get("material_consumption_no")?.value);const i=this.productionvoucherForm.get("item_generated_cart"),a=[];i.controls.forEach(P=>{const I=P,x={};Object.keys(I.controls).forEach(m=>{const A=I.controls[m];x[m]="item_name"===m||isNaN(A.value)?A.value:parseFloat(A.value)}),a.push(x)}),n.append("item_generated_cart",JSON.stringify(a));const c=this.productionvoucherForm.get("item_consumed_cart"),Z=[];c.controls.forEach(P=>{const I=P,x={};Object.keys(I.controls).forEach(m=>{const A=I.controls[m];x[m]="item_name"===m||isNaN(A.value)?A.value:parseFloat(A.value)}),Z.push(x)}),n.append("item_consumed_cart",JSON.stringify(Z)),this.coreService.addProductionVoucher(n).subscribe(P=>{this.loaders=!1,this.addRes=P,this.addRes.isSuccess?(this.toastrService.success(this.addRes.msg),this.productionvoucherForm.reset(),this.router.navigate(["//product/production-voucher-list"])):(this.loaders=!1,this.toastrService.error(this.addRes.msg))},P=>{this.loaders=!1,console.warn(P)})}else this.productionvoucherForm.markAllAsTouched(),this.toastrService.error("Please Fill All The Required Fields")})}get material_consumption_date(){return this.productionvoucherForm.get("material_consumption_date")}get material_consumption_no(){return this.productionvoucherForm.get("material_consumption_no")}calculateTotalQty(){let e=0;for(let n=0;n<this.getCartItem().controls.length;n++){const i=this.getCartItem().controls[n].get("qty")||0;i&&(e+=+i.value||0)}return e}calculateTotalMrp(){let e=0;for(let n=0;n<this.getCartItem().controls.length;n++){const i=this.getCartItem().controls[n].get("mrp")||0;i&&(e+=+i.value||0)}return e}calculateTotalCostPrice(){let e=0;for(let n=0;n<this.getCartItem().controls.length;n++){const i=this.getCartItem().controls[n].get("cost_price")||0;i&&(e+=+i.value||0)}return e}calculateTotalOnline(){let e=0;for(let n=0;n<this.getCartItem().controls.length;n++){const i=this.getCartItem().controls[n].get("selling_price_online")||0;i&&(e+=+i.value||0)}return e}calculateTotalOffline(){let e=0;for(let n=0;n<this.getCartItem().controls.length;n++){const i=this.getCartItem().controls[n].get("selling_price_offline")||0;i&&(e+=+i.value||0)}return e}calculateTotalEmployee(){let e=0;for(let n=0;n<this.getCartItem().controls.length;n++){const i=this.getCartItem().controls[n].get("selling_price_employee")||0;i&&(e+=+i.value||0)}return e}calculateTotalDealer(){let e=0;for(let n=0;n<this.getCartItem().controls.length;n++){const i=this.getCartItem().controls[n].get("selling_price_dealer")||0;i&&(e+=+i.value||0)}return e}calculateTotalDiscount(){let e=0;for(let n=0;n<this.getCartItem().controls.length;n++){const i=this.getCartItem().controls[n].get("discount")||0;i&&(e+=+i.value||0)}return e}calculateTotalAdditionalDiscount(){let e=0;for(let n=0;n<this.getCartItem().controls.length;n++){const i=this.getCartItem().controls[n].get("additional_discount")||0;i&&(e+=+i.value||0)}return e}totalQtyConsumed(){let e=0;for(let n=0;n<this.getCartConsumed().controls.length;n++){const i=this.getCartConsumed().controls[n].get("qty")||0;i&&(e+=+i.value||0)}return e}totalMrpConsumed(){let e=0;for(let n=0;n<this.getCartConsumed().controls.length;n++){const i=this.getCartConsumed().controls[n].get("mrp")||0;i&&(e+=+i.value||0)}return e}}return l.\u0275fac=function(e){return new(e||l)(t.Y36(_.qu),t.Y36(f.F0),t.Y36(o._W),t.Y36(r.p),t.Y36(s.M))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-add-production-voucher"]],decls:159,vars:54,consts:[[1,"page-header"],[1,"page-title"],["id","purchaseForm",1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-3","col-sm-6","col-12"],[1,"form-group"],["type","date","formControlName","material_consumption_date",3,"ngClass"],["class","text-danger",4,"ngIf"],["type","text","formControlName","material_consumption_no","placeholder","Enter Production Voucher No.","readonly","",3,"ngModel","ngClass"],[1,"card"],[1,"col-lg-4","col-sm-4","col-12"],[2,"color","#FF9F43","font-size","16px"],[1,"table-responsive"],[1,"table","datanew"],[1,"th"],["colspan","3"],["class","debitIntoCart",3,"click",4,"ngIf"],["formArrayName","item_generated_cart"],[4,"ngFor","ngForOf"],[2,"background","rgba(145, 158, 171, 0.32)"],[1,"text-start"],[2,"width","12%"],[2,"width","8%"],["formArrayName","item_consumed_cart"],["colspan","4"],["colspan","7"],[1,"col-lg-12"],["class","btn btn-submit me-2",4,"ngIf"],["class","btn btn-submit me-2","type","submit","disabled","",4,"ngIf"],["routerLink","//transaction/journalvoucherList",1,"btn","btn-cancel","text-white"],[1,"text-danger"],[1,"debitIntoCart",3,"click"],[3,"formGroupName"],[1,"me-2"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x-circle",2,"color","red",3,"click"],["d","M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],["style","color:green","xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","class","bi bi-plus-circle","viewBox","0 0 16 16",3,"click",4,"ngIf"],["type","text","placeholder","Search Barcode",1,"input",3,"value","keyup","blur"],["id",""],["colspan","1"],[1,"form-group","d-flex","align-items-center",2,"margin-bottom","0"],["type","text","placeholder","Search Product","aria-label","Search Products","matInput","",2,"box-sizing","border-box",3,"formControl","matAutocomplete","input"],["autos","matAutocomplete"],["style","color:#FF9F43",4,"ngIf"],[3,"value",4,"ngIf"],["class","is-loading",4,"ngIf"],["data-bs-toggle","tooltip","title","ion-information",1,"ion-information","circle","ms-2",3,"click"],["tabindex","-1","role","dialog","aria-labelledby","addressModalLabel","aria-hidden","true",1,"modal","fade",3,"id"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title","fs-5"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["class","form-group",4,"ngIf"],["type","number","formControlName","qty",1,"input"],["type","number","formControlName","mrp",1,"input"],["type","number","formControlName","cost_price",1,"input"],["type","number","formControlName","selling_price_online",1,"input"],["type","number","formControlName","selling_price_offline",1,"input"],["type","number","formControlName","selling_price_employee",1,"input"],["type","number","formControlName","selling_price_dealer",1,"input"],["type","number","formControlName","discount",1,"input"],["type","number","formControlName","additional_discount",1,"input"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-plus-circle",2,"color","green",3,"click"],["d","M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"],["style","color:#FF9F43",3,"value","onSelectionChange",4,"ngIf"],[2,"color","#FF9F43",3,"value","onSelectionChange"],[2,"color","#FF9F43"],[3,"value"],["routerLink","//product/addproduct",2,"color","#FF9F43"],[1,"is-loading"],[1,"boder"],[1,"boder","space-text"],["type","button",1,"btn","btn-primary","btn-sm",2,"float","right",3,"click"],["formControlName","batch_id",3,"change"],[4,"ngIf"],[1,"readonly"],["disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-submit","me-2"],["type","submit","disabled","",1,"btn","btn-submit","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4"),t._uU(3,"Production Voucher Add"),t.qZA(),t.TgZ(4,"h6"),t._uU(5,"Create New Production Voucher"),t.qZA()()(),t.TgZ(6,"div",2)(7,"div",3)(8,"form",4),t.NdJ("ngSubmit",function(){return n.submit()}),t.TgZ(9,"div",5)(10,"div",6)(11,"div",7)(12,"label"),t._uU(13,"Select Date*"),t.qZA(),t._UZ(14,"input",8),t.YNc(15,q,2,0,"span",9),t.qZA()(),t.TgZ(16,"div",6)(17,"div",7)(18,"label"),t._uU(19,"Production Voucher No.*"),t.qZA(),t._UZ(20,"input",10),t.YNc(21,U,2,0,"span",9),t.qZA()()(),t.TgZ(22,"div",11)(23,"div",3)(24,"div",5)(25,"div",12)(26,"div",1)(27,"p",13),t._uU(28,"Item Generated"),t.qZA()()(),t.TgZ(29,"div",14)(30,"table",15)(31,"thead")(32,"tr")(33,"th"),t._uU(34,"#"),t.qZA(),t._UZ(35,"th"),t.TgZ(36,"th",16),t._uU(37,"Barcode/SKU"),t.qZA(),t.TgZ(38,"th",16),t._uU(39,"Product Name"),t.qZA(),t.TgZ(40,"th",16),t._uU(41,"QTY"),t.qZA(),t.TgZ(42,"th",16),t._uU(43,"MRP"),t.qZA(),t.TgZ(44,"th",16),t._uU(45,"Cost Price"),t.qZA(),t.TgZ(46,"th",16),t._uU(47,"Online Price"),t.qZA(),t.TgZ(48,"th",16),t._uU(49,"Offline Price"),t.qZA(),t.TgZ(50,"th",16),t._uU(51,"Employee Price"),t.qZA(),t.TgZ(52,"th",16),t._uU(53,"Dealer Price"),t.qZA(),t.TgZ(54,"th",16),t._uU(55,"Discount"),t.qZA(),t.TgZ(56,"th",16),t._uU(57,"Additional Discount"),t.qZA(),t._UZ(58,"th"),t.qZA(),t.TgZ(59,"tr")(60,"th",17),t.YNc(61,v,2,0,"span",18),t.qZA()()(),t.TgZ(62,"tbody"),t.ynx(63,19),t.YNc(64,J,53,13,"ng-container",20),t.BQk(),t.TgZ(65,"tr",21),t._UZ(66,"td")(67,"td")(68,"td"),t.TgZ(69,"td",22)(70,"strong"),t._uU(71,"Total"),t.qZA()(),t.TgZ(72,"td",22),t._uU(73),t.qZA(),t.TgZ(74,"td",22),t._uU(75),t.ALo(76,"number"),t.qZA(),t.TgZ(77,"td",22),t._uU(78),t.ALo(79,"number"),t.qZA(),t.TgZ(80,"td",22),t._uU(81),t.ALo(82,"number"),t.qZA(),t.TgZ(83,"td",22),t._uU(84),t.ALo(85,"number"),t.qZA(),t.TgZ(86,"td",22),t._uU(87),t.ALo(88,"number"),t.qZA(),t.TgZ(89,"td",22),t._uU(90),t.ALo(91,"number"),t.qZA(),t.TgZ(92,"td",22),t._uU(93),t.ALo(94,"number"),t.qZA(),t.TgZ(95,"td",22),t._uU(96),t.ALo(97,"number"),t.qZA()()()()()()()(),t.TgZ(98,"div",11)(99,"div",3)(100,"div",5)(101,"div",12)(102,"div",1)(103,"p",13),t._uU(104,"Item Consumed"),t.qZA()()(),t.TgZ(105,"div",14)(106,"table",15)(107,"thead")(108,"tr")(109,"th"),t._uU(110,"#"),t.qZA(),t._UZ(111,"th"),t.TgZ(112,"th"),t._uU(113,"Barcode/SKU"),t.qZA(),t.TgZ(114,"th"),t._uU(115,"Product Name"),t.qZA(),t.TgZ(116,"th",23),t._uU(117,"Batch"),t.qZA(),t.TgZ(118,"th",24),t._uU(119,"QTY"),t.qZA(),t.TgZ(120,"th"),t._uU(121,"MRP"),t.qZA(),t.TgZ(122,"th",16),t._uU(123,"Cost Price"),t.qZA(),t.TgZ(124,"th",16),t._uU(125,"Online Price"),t.qZA(),t.TgZ(126,"th",16),t._uU(127,"Offline Price"),t.qZA(),t.TgZ(128,"th",16),t._uU(129,"Employee Price"),t.qZA(),t.TgZ(130,"th",16),t._uU(131,"Dealer Price"),t.qZA(),t.TgZ(132,"th",16),t._uU(133,"Discount"),t.qZA(),t.TgZ(134,"th",16),t._uU(135,"Additional Discount"),t.qZA(),t._UZ(136,"th"),t.qZA(),t.TgZ(137,"tr")(138,"th",17),t.YNc(139,k,2,0,"span",18),t.qZA()()(),t.TgZ(140,"tbody"),t.ynx(141,25),t.YNc(142,X,64,22,"ng-container",20),t.BQk(),t.TgZ(143,"tr",21),t._UZ(144,"td",26),t.TgZ(145,"td",22)(146,"strong"),t._uU(147,"Total"),t.qZA()(),t.TgZ(148,"td",22),t._uU(149),t.qZA(),t.TgZ(150,"td",22),t._uU(151),t.ALo(152,"number"),t.qZA(),t._UZ(153,"td",27),t.qZA()()()()()()(),t.TgZ(154,"div",28),t.YNc(155,tt,2,0,"button",29),t.YNc(156,et,3,0,"button",30),t.TgZ(157,"a",31),t._uU(158,"Cancel"),t.qZA()()()()()),2&e&&(t.xp6(8),t.Q6J("formGroup",n.productionvoucherForm),t.xp6(6),t.Q6J("ngClass",t.VKq(50,O,n.f.material_consumption_date.touched&&n.f.material_consumption_date.invalid)),t.xp6(1),t.Q6J("ngIf",n.material_consumption_date&&n.material_consumption_date.invalid&&n.material_consumption_date.touched),t.xp6(5),t.Q6J("ngModel",n.prefixNo)("ngClass",t.VKq(52,O,n.f.material_consumption_no.touched&&n.f.material_consumption_no.invalid)),t.xp6(1),t.Q6J("ngIf",n.material_consumption_no&&n.material_consumption_no.invalid&&n.material_consumption_no.touched),t.xp6(40),t.Q6J("ngIf",n.isCart),t.xp6(3),t.Q6J("ngForOf",n.getCartItem().controls),t.xp6(9),t.Oqu(n.calculateTotalQty()),t.xp6(2),t.Oqu(t.xi3(76,23,n.calculateTotalMrp(),"1.2-2")),t.xp6(3),t.Oqu(t.xi3(79,26,n.calculateTotalCostPrice(),"1.2-2")),t.xp6(3),t.Oqu(t.xi3(82,29,n.calculateTotalOnline(),"1.2-2")),t.xp6(3),t.Oqu(t.xi3(85,32,n.calculateTotalOffline(),"1.2-2")),t.xp6(3),t.Oqu(t.xi3(88,35,n.calculateTotalEmployee(),"1.2-2")),t.xp6(3),t.Oqu(t.xi3(91,38,n.calculateTotalDealer(),"1.2-2")),t.xp6(3),t.Oqu(t.xi3(94,41,n.calculateTotalDiscount(),"1.2-2")),t.xp6(3),t.hij("",t.xi3(97,44,n.calculateTotalAdditionalDiscount(),"1.2-2")," "),t.xp6(43),t.Q6J("ngIf",n.isCartConsumed),t.xp6(3),t.Q6J("ngForOf",n.getCartConsumed().controls),t.xp6(7),t.Oqu(n.totalQtyConsumed()),t.xp6(2),t.Oqu(t.xi3(152,47,n.totalMrpConsumed(),"1.2-2")),t.xp6(4),t.Q6J("ngIf",!n.loaders),t.xp6(1),t.Q6J("ngIf",n.loaders))},dependencies:[g.mk,g.sg,g.O5,f.yS,_._Y,_.YN,_.Kr,_.Fj,_.wV,_.EJ,_.JJ,_.JL,_.oH,_.sg,_.u,_.x0,_.CE,d.XC,d.ZL,u.ey,T.Nt,g.JJ],styles:[".ng-pristine.ng-invalid.is-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}select[_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%], input[type=datetime-local][_ngcontent-%COMP%], .input[_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;padding:10px 15px;border-radius:5px}.select[_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:40%;font-size:14px;font-weight:500;color:#637381;padding:10px 8px;border-radius:5px}.example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}.cdk-overlay-pane[_ngcontent-%COMP%]{width:300.85px!important}a[_ngcontent-%COMP%]{text-decoration:none;color:#ff9f43}@media (max-width: 1023px){h5[_ngcontent-%COMP%]{font-size:13px}}.table[_ngcontent-%COMP%]   th.product-name[_ngcontent-%COMP%]{width:40%}.table[_ngcontent-%COMP%]   th.qty[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th.mrp[_ngcontent-%COMP%]{width:10%}.form-control[_ngcontent-%COMP%]{border-bottom:1px solid #9c9c9c;border-top:none;border-right:none;border-left:none;font-size:15px;color:#606060;border-radius:0;padding-left:2px}.space-text[_ngcontent-%COMP%]{white-space:pre-wrap!important}.circle[_ngcontent-%COMP%]{display:inline-block;width:18px;height:18px;border-radius:50%;border:1px solid #FF9F43;text-align:center;line-height:16px;color:#ff9f43}.button[_ngcontent-%COMP%]{border:1px solid rgba(145,158,171,.32);height:40px;width:100%;font-size:14px;font-weight:500;color:#637381;display:flex;padding:10px 15px;border-radius:5px;justify-content:space-between;align-items:center;background:white}.th[_ngcontent-%COMP%]{white-space:pre-wrap!important}.readonly[_ngcontent-%COMP%]{padding:9px 18px;border:1px solid rgba(145,158,171,.32);border-radius:5px}"]}),l})(),canActivate:[h(30597).l],data:{allowedRoles:["add_productionvoucher"]}}];let rt=(()=>{class l{}return l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[f.Bz.forChild(it),f.Bz]}),l})();var lt=h(8468),at=h(59549);let st=(()=>{class l{}return l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[g.ez,rt,lt.I,d.Bb,at.lN,T.c]}),l})()},30597:(N,y,h)=>{h.d(y,{l:()=>t});var g=h(94650),f=h(4392),_=h(97185),S=h(42917),C=h(80927);let t=(()=>{class o{constructor(s,d,u,T,q){this.router=s,this.Arout=d,this.toastr=u,this.profileService=T,this.coreService=q}canActivate(s,d){const u=JSON.parse(localStorage.getItem("auth"));if(this.profileService.userDetails$.subscribe(T=>{this.userDetails=T,this.permissions=this.userDetails?.permission}),u){const T=s.data.allowedRoles,q=u.some(v=>T.includes(v.codename));let U=this.coreService.profileData$.value;if(U&&U.username){this.userDetails=U,this.profileService.setUserDetails(this.userDetails),this.profileService.ProfileData$.next(U);const v=U?.permission,b=this.profileService.getUserDetails();(!b||b.length!==v.length)&&(this.profileService.setUserPermission(v),window.location.reload())}else this.coreService.getProfile().subscribe(v=>{this.userDetails=v,this.profileService.setUserDetails(this.userDetails),this.profileService.ProfileData$.next(v);const b=v?.permission,w=this.profileService.getUserDetails();(!w||w.length!==b.length)&&(this.profileService.setUserPermission(b),window.location.reload())});if(q)return!0}return this.toastr.error("User have Not Permission to Access This page"),this.router.navigate(["/dashboard"]),!1}}return o.\u0275fac=function(s){return new(s||o)(g.LFG(f.F0),g.LFG(f.gz),g.LFG(_._W),g.LFG(S.J),g.LFG(C.p))},o.\u0275prov=g.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}}]);