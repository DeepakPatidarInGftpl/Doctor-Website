
<div class="page-header">
    <div class="page-title">
        <h4>Update Sub Category Group</h4>
        <h6>Edit new Sub Category Group</h6>
    </div>
</div>
<!-- /add -->
<div class="card">
    <div class="card-body">
        <div class="row">
            <form [formGroup]="subCategoryGroupForm" (ngSubmit)="submit()">
                <div class="row">
                <div class="col-lg-4 col-sm-6 col-12">
                  <div class="form-group">
                    <label>SubCategory Group Name</label>
                    <div class="image-upload mb-2">
                      <input type="text" formControlName="title" placeholder="SubCategory Group Name">
                    </div>
                    <span class="text-danger" *ngIf="title && title.invalid && title.touched">Enter SubCategory Group</span>
                  </div>
                </div>
                <div class="col-lg-4 col-sm-6 col-12">
                  <div class="form-group">
                    <label>Select Category</label>
                    <div class="image-upload mb-2">
                      <select class="w-100" formControlName="category" #categoryValue
                        (change)="getSubcategoryByCategory(categoryValue.value)">
                        <option value=""  disabled>Select Category</option>
                        <option *ngFor="let cate of categories" id="{{cate.id}}" [value]="cate.id">{{ cate.title }}</option>
                      </select>
                    </div>
                    <span class="text-danger" *ngIf="category && category.invalid && category.touched">Select
                      Category</span>
                  </div>
                </div>
                <div class="col-lg-4 col-sm-6 col-12">
                    <div class="form-group">
                        <label>Select Subcategory</label>
                        <div class="dropdown">
                            <button type="button" class="dropdown-toggle button" type="button"
                                data-bs-toggle="dropdown" aria-expanded="false">Select Subcategory</button>
                            <ul class="dropdown-menu" style="width: 100%; max-height: 300px; overflow-y: auto;">
                                <li><input type="text" placeholder="search subcategory group" class="form-control" [(ngModel)]="searchSubcategory" (ngModelChange)="filterSubcategoryData()" [ngModelOptions]="{standalone: true}"></li>
                                <li><a class="dropdown-item"
                                        *ngFor="let subcatgroup of filteredSubcategoryData let i=index;">
                                        <input type="checkbox" [value]="subcatgroup.id" [checked]="selectedSubCats.includes(subcatgroup.id) || selectedSubCategoryIds.includes(subcatgroup.id)"
                                            (change)="onCheckChange($event)" formArrayName="subcategories"
                                            style="margin-right: 5px;" [ngClass]="{
                                                'is-invalid': f['subcategories'].touched && f['subcategories'].invalid
                                              }" #categoryValue
                                            [id]="'checkbox-' + i">
                                        <label [for]="'checkbox-' + i" style="margin-bottom: 0;" (click)="onLabelClick($event)">{{subcatgroup.title}}</label>
                                    </a></li>
                            </ul>
                        </div>
                        <p *ngIf="selectedSubcat>0">{{selectedSubcat + ' Subcategory Selected'}}</p>
                        <span class="text-danger"
                            *ngIf="subcategories && subcategories.invalid && subcategories.touched">Select
                            subcategory 
                        </span>
                        <span class="text-danger"
                            *ngIf="errormessFSubC">Select
                            subcategory 
                        </span>
                    </div>
                </div>
                <div class="col-lg-4 col-sm-6 col-12">
      
                  <div class="form-group">
                    <label>Select Feature Group*</label>
                    <div class="dropdown">
                      <button type="button" class="dropdown-toggle button" type="button" data-bs-toggle="dropdown"
                        aria-expanded="false">Select Feature Group</button>
                      <ul class="dropdown-menu" style="width: 100%; max-height: 300px; overflow-y: auto;">
      
                        <li><input type="text" placeholder="search feature group"
                          class="form-control" [(ngModel)]="searchFeatureGroup"
                          (ngModelChange)="filterFeatureGroupData()"
                          [ngModelOptions]="{standalone: true}"></li>
      
                        <li><a class="dropdown-item" *ngFor="let fGroup of filteredFeatureGroupData; let i=index">
                            <input type="checkbox" [value]="fGroup.id" formArrayName="feature_group" [checked]="selectedFeature.includes(fGroup.id)||selectedFeatureIds.includes(fGroup.id)"
                              (change)="onCheckFeature($event)" style="margin-right: 5px;"
                              [id]="'checkboxFeat-' + i">
      
                            <label [for]="'checkboxFeat-' + i" style="margin-bottom: 0;"
                              (click)="onLabelClick($event)">{{fGroup.title}}</label>
      
                          </a></li>
                      </ul>
                      <p *ngIf="selectedFeatureGrp>0">{{selectedFeatureGrp + ' Feature group selected'}}</p>
                    </div>
                    <span class="text-danger" *ngIf="subcategories && subcategories.invalid && subcategories.touched">Select Feature Group  </span>
                    <span class="text-danger" *ngIf="errormessFFG">Select Feature Group </span>
                  </div>
      
                </div>
      
                <div class="col-lg-4 col-sm-6 col-12">
                  <div class="form-group">
                    <label>Subcategory Group Image*</label>
                    <div class="row">
                      <div class="col-lg-6">
                        <div class="image-upload">
                          <input type="file" formControlName="image" (change)="selectImg($event)">
                          <div class="image-uploads">
                            <img src="assets/img/icons/upload.svg" alt="img">
                            <h4>Drag and drop a file to upload</h4>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-6">
                        <img [src]="url" *ngIf="url" alt="" class="p_img">
                        <img [src]="imgUrl+updateData?.image" *ngIf="!url" alt="" class="p_img">
                    </div>
                    </div>

                    
                  </div>
                </div>

                
                <div class="col-lg-12">
                    <div class="col-lg-12">
                        <button class="btn btn-submit me-2" *ngIf="!loaders">Submit</button>
                        <button class="btn btn-submit me-2" type="submit" *ngIf="loaders" disabled>
                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>&nbsp;Submit</button>
                        <a routerLink="//product/subCategoryGroup" class="btn btn-cancel">Cancel</a>
                    </div>
                </div>
      </div>
              </form>
        </div>
    </div>
</div>
<!-- /add -->
