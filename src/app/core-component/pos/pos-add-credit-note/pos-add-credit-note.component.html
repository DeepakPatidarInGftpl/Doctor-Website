<div class="card">
    <div class="card-body">
        <form [formGroup]="debitNoteForm" (ngSubmit)="submit()">
            <div class="row">
                <div class="col-lg-4 col-md-6 col-12">
                    <div class="form-group">
                        <label>Account Name*</label>
                        <mat-form-field class="w-100" style="padding: 0;width: 100%;min-width: 100%;border-top: none;">
                            <input type="text" placeholder="Select From Account" aria-label="from_account" matInput
                                [formControl]="fromAccountControl" [matAutocomplete]="auto"
                                style="box-sizing: border-box;">
                            <mat-autocomplete #auto="matAutocomplete">
                                <ng-container *ngFor="let account of filteredFromAccount | async">
                                    <mat-option *ngIf="account.is_active==true" [value]="account?.account_id"
                                        (onSelectionChange)="oncheck(account)"
                                        style="color:#FF9F43">{{account?.account_id }}</mat-option>
                                </ng-container>
                                <ng-container *ngIf="(filteredFromAccount | async) as accounts">
                                    <mat-option *ngIf="accounts.length === 0" [value]="'No data found'">
                                        <a routerLink="//account/accountlist" style="color:#FF9F43">+ Add Account</a>
                                    </mat-option>
                                    <mat-option *ngIf="fromAccountControl.value?.length < 3" class="is-loading">Please
                                        Enter 1 or more characters</mat-option>
                                </ng-container>
                            </mat-autocomplete>
                        </mat-form-field>
                        <span class="text-danger" *ngIf="account && account.invalid && account.touched">Select Account
                        </span>
                    </div>
                </div>

                <div class="col-lg-4 col-sm-4 col-12">
                    <div class="form-group">
                        <label>Credit Note Date*</label>
                        <input type="date" formControlName="date" id="date" [attr.min]="minDate" [attr.max]="maxDate"
                            [ngClass]="{'is-invalid': f['date'].touched && f['date'].invalid}">
                        <span class="text-danger" *ngIf="date && date.invalid && date.touched">Select Date </span>
                    </div>
                </div>

                <div class="col-lg-4 col-sm-4 col-12">
                    <div class="form-group">
                        <label>Credit Note No</label>
                        <select formControlName="credit_note_no">
                            <option value="" selected disabled>Select Credit Note No</option>
                            <option value="{{prefix.id}}" *ngFor="let prefix of prefixNo">{{prefix.prefix}}</option>
                        </select>
                        <span class="text-danger"
                            *ngIf="credit_note_no && credit_note_no.invalid && credit_note_no.touched">Select Credit
                            Note No
                        </span>
                    </div>
                </div>

                <div class="col-lg-4 col-sm-4 col-12">
                    <div class="form-group">
                        <label>Select Pos Bill*</label>
                        <select formControlName="pos_bill">
                            <option value="" selected disabled>Select POS bill No</option>
                            <option value="{{prefix?.id}}" *ngFor="let prefix of filteredPosBillList">
                                {{prefix?.bill_no}}</option>
                        </select>
                        <span class="text-danger" *ngIf="pos_bill && pos_bill.invalid && pos_bill.touched">Select Pos
                            Bill No.
                        </span>
                    </div>
                </div>

                <div class="col-lg-4 col-sm-4 col-12">
                    <div class="form-group">
                        <label>Reason</label>
                        <input type="text" formControlName="reason" placeholder="Enter Reason"
                            [ngClass]="{ 'is-invalid': f['reason'].touched && f['reason'].invalid}">
                        <span class="text-danger" *ngIf="reason && reason.invalid && reason.touched">Enter Reason</span>
                    </div>
                </div>

                <div class="col-lg-4 col-sm-4 col-12">
                    <div class="form-group">
                        <label>Round Off</label>
                        <input type="number" formControlName="roundoff" placeholder="Enter Round off"
                            [ngClass]="{ 'is-invalid': f['roundoff'].touched && f['roundoff'].invalid}">
                        <span class="text-danger" *ngIf="roundoff && roundoff.invalid && roundoff.touched">Enter Round
                            Off</span>
                    </div>
                </div>

                <div class="col-lg-4 col-sm-4 col-12">
                    <div class="form-group">
                        <label>Tax %</label>
                        <input type="number" formControlName="tax" placeholder="Enter Tax"
                            [ngClass]="{ 'is-invalid': f['tax'].touched && f['tax'].invalid}">
                        <span class="text-danger" *ngIf="tax && tax.invalid && tax.touched">Enter Tax ex: (1-100)</span>
                    </div>
                </div>

                <div class="col-lg-4 col-sm-4 col-12">
                    <div class="form-group">
                        <label>Total</label>
                        <input type="number" formControlName="total" placeholder="Enter Total" id="total"
                            [ngClass]="{ 'is-invalid': f['total'].touched && f['total'].invalid}">
                        <span class="text-danger" *ngIf="total && total.invalid && total.touched">Enter Total</span>
                    </div>
                </div>

                <div class="col-lg-4 col-sm-4 col-12">
                    <div class="form-group">
                        <label>Note</label>
                        <textarea formControlName="note" placeholder="Enter Note"
                            [ngClass]="{ 'is-invalid': f['note'].touched && f['note'].invalid}"></textarea>
                        <span class="text-danger" *ngIf="tax && tax.invalid && tax.touched">Enter Note</span>
                    </div>
                </div>

                <div class="col-lg-12">
                    <button class="btn btn-submit me-2" *ngIf="!loaders">Submit</button>
                    <button class="btn btn-submit me-2" type="submit" *ngIf="loaders" disabled>
                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>&nbsp;
                        Submit</button>
                    <a routerLink="//transaction/creditnoteList" class="btn btn-cancel text-white">Cancel</a>
                </div>
            </div>
        </form>
    </div>
</div>