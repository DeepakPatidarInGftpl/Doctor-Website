<div class="container-fluid d-flex flex-column pos-container" [ngClass]="{'blur-background': isModalOpen}">


    <!-- <button (click)="addPer('add')">addd per</button>
<button (click)="addPer('hhh')">addd per</button> -->

    <!-- <div class="row align-items-center pb-1">
        <div class="col-lg-9 col-sm-12 tabs_wrapper" style="width: 81%">
            <div class="top-header-left">
                <div class="customer-type-div">
                    <div class="radio">
                        <label>
                            <input type="radio" name="radio"> Walk In
                        </label>
                    </div>
                    <div class="radio">
                        <label>
                            <input type="radio" name="radio"> Delivery
                        </label>
                    </div>
                </div>
                <div class="d-flex align-items-center justify-content-between">
                    <div class="salesman-div">
                        Salesman:
                        <select class="form-select">
                            <option>-- Select --</option>
                            <option>Option 1</option>
                            <option>Option 2</option>
                            <option>Option 3</option>
                            <option>Option 4</option>
                            <option>Option 5</option>
                        </select>
                    </div>
                    <div>
                        <button type="button" class="btn btn-dark" (click)="discardCurrentBill()"> 
                                Discard</button>
                    </div>
                    
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-sm-12" style="width: 19%">
            <div class="right-header-pos">
                <button type="button" class="me-1 btn btn-dark btn-sm">
                    <i class="fa fa-cog" data-bs-toggle="tooltip" title="fa fa-cog"></i>
                </button>
                <button type="button" class="me-1 btn btn-dark btn-sm">
                    <i class="fa fa-bars" data-bs-toggle="tooltip" title="fa fa-bars"></i>
                </button>
                <button type="button" class="me-1 btn btn-dark btn-sm">
                    <i class="fa fa-trash" data-bs-toggle="tooltip" title="fa fa-trash"></i>
                </button>
                <button type="button" class="me-1 btn btn-dark btn-sm">
                    <i class="fa fa-expand" data-bs-toggle="tooltip" title="fa fa-expand"></i>
                </button>
                <button type="button" class="me-1 btn btn-dark btn-sm">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
                <button type="button" class="me-1 btn btn-dark btn-sm">
                    <i class="fa fa-share-square" data-bs-toggle="tooltip" title="fa fa-share-square"></i>
                </button>
            </div>
           
        </div>
    </div> -->
    <!-- <div class="row flex-fill" style="min-height:0">
        <div class="col-2 border mh-100" style="overflow-y: scroll;">Sidebar rirachic, Intelligentsia salvia mustache 90's coch. Butcher polaroid VH Brooklyn deep v PBR narwhal sustainable mixtape swag wolf squid tote bag. Tote bag cronut semiotics, raw denim deep v taxidermy messenger bag. Tofu YOLO Etsy, direct trade ethical Odd Future jean shorts paleo. Forage Shoreditch tousled aesthetic irony, street art organic Bushwick artisan cliche semiotics ugh synth chillwave meditation. Shabby chic lomo plaid vinyl chambray Vice. Vice sustainable cardigan, Williamsburg master cleanse hella DIY 90's blog. </div>
        <div class="col-4 border mh-100 div2" style="overflow-y: hidden;">
            Article list
            <p>Sriracha biodiesel taxidermylla DIY 90's blog.</p>
            <div class="div4">
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Excepturi laboriosam cupiditate veritatis praesentium animi dignissimos, beatae optio aut non mollitia odit totam molestiae velit, sequi, nemo pariatur laborum rerum deleniti!</p>
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Excepturi laboriosam cupiditate veritatis praesentium animi dignissimos, beatae optio aut non mollitia odit totam molestiae velit, sequi, nemo pariatur laborum rerum deleniti!</p>
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Excepturi laboriosam cupiditate veritatis praesentium animi dignissimos, beatae optio aut non mollitia odit totam molestiae velit, sequi, nemo pariatur laborum rerum deleniti!</p>
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Excepturi laboriosam cupiditate veritatis praesentium animi dignissimos, beatae optio aut non mollitia odit totam molestiae velit, sequi, nemo pariatur laborum rerum deleniti!</p>
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Excepturi laboriosam cupiditate veritatis praesentium animi dignissimos, beatae optio aut non mollitia odit totam molestiae velit, sequi, nemo pariatur laborum rerum deleniti!</p>
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Excepturi laboriosam cupiditate veritatis praesentium animi dignissimos, beatae optio aut non mollitia odit totam molestiae velit, sequi, nemo pariatur laborum rerum deleniti!</p>
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Excepturi laboriosam cupiditate veritatis praesentium animi dignissimos, beatae optio aut non mollitia odit totam molestiae velit, sequi, nemo pariatur laborum rerum deleniti!</p>
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Excepturi laboriosam cupiditate veritatis praesentium animi dignissimos, beatae optio aut non mollitia odit totam molestiae velit, sequi, nemo pariatur laborum rerum deleniti!</p>
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Excepturi laboriosam cupiditate veritatis praesentium animi dignissimos, beatae optio aut non mollitia odit totam molestiae velit, sequi, nemo pariatur laborum rerum deleniti!</p>
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Excepturi laboriosam cupiditate veritatis praesentium animi dignissimos, beatae optio aut non mollitia odit totam molestiae velit, sequi, nemo pariatur laborum rerum deleniti!</p>
              <p>The End</p>
            </div>
                <div class="div3">
                  <p>Ethical Kickstarter PBRk occupy Portland.</p>
                </div>

        </div>
        <div class="col-6 border" style="overflow-y: scroll;">Article content </div>
    </div> -->
    <div class="row flex-fill" style="min-height: 0" [ngClass]="{'blur-background': isModalOpen}">
        <!-- <div class="col-lg-9 col-sm-12 mh-100 tabs_wrapper pos-left-wrapper" style="overflow-y: hidden; width: 81%"> -->
        <div class="col-lg-9 col-sm-12 final-left" style="width: 81%">
            <div class="final-test">
                <div class="row">
                    <div class="col-sm-4 product-autocomplete">
                        <!-- <input type="text" class="form-control" placeholder="Scan Barcode/Enter Product Name"> -->
                        <form class="form-ex">
                            <input type="text" placeholder="Scan Barcode/Enter Product Name"
                                [formControl]="productsAutocompleteControl" [matAutocomplete]="auto"
                                class="form-control">
                            <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn"
                                (optionSelected)="optionSelected($event)" (keydown)="onInputKeydown($event)">
                                <mat-option *ngIf="isLoading" class="is-loading">Loading...</mat-option>
                                <mat-option *ngIf="productsAutocompleteControl.value?.length < 3"
                                    class="is-loading">Please Enter 3 or</mat-option>
                                <mat-option *ngIf="errorMsg" class="is-loading">{{errorMsg}}</mat-option>
                                <mat-option *ngFor="let option of filteredProducts" [value]="option">{{
                                    displayFn(option) }}</mat-option>
                            </mat-autocomplete>
                        </form>
                        <!-- <mat-form-field>
                            <mat-label>Scan Barcode/Enter Product Name</mat-label>
                            <input matInput placeholder="Search" [formControl]="autocompleteControl" [matAutocomplete]="auto">
                            <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn" (optionSelected)="optionSelected($event)">
                              <mat-option *ngFor="let option of filteredOptions$" [value]="option">{{ displayFn(option) }}</mat-option>
                            </mat-autocomplete>
                          </mat-form-field> -->
                    </div>

                    <div class="col-sm-4">
                        <form class="exam-form">
                            <input type="text" placeholder="Search for a Customer"
                                [formControl]="customerAutoCompleteControl" [matAutocomplete]="auto1"
                                class="form-control">
                            <mat-autocomplete #auto1="matAutocomplete" [displayWith]="displayCus"
                                (optionSelected)="optionSelected1($event)">
                                <mat-option class="is-loading">
                                    <button type="button" class="btn" data-bs-toggle="modal"
                                        data-bs-target="#exampleModal1">Add New
                                        Customer</button>
                                </mat-option>
                                <mat-option *ngIf="customerAutoCompleteControl.value?.length < 3"
                                    class="is-loading">Please Enter 3 or more characters</mat-option>
                                <mat-option *ngIf="cusIsLoading" class="is-loading">Loading...</mat-option>
                                <mat-option *ngFor="let customer of filteredCustomer" [value]="customer">
                                    <!-- <p></p> -->
                                    {{displayCus(customer)}}
                                </mat-option>
                            </mat-autocomplete>
                        </form>
                        <!-- <select class="form-select">
                            <option>-- Select --</option>
                            <option *ngFor="let customer of customers">{{customer.name}}</option>
                        </select> -->
                    </div>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" [formControl]="saleInvoice"
                            (keyup.enter)="onSaleInvoice($event)" placeholder="Scan Sales Invoice">
                    </div>


                </div>
                <div class="row mt-1">
                    <div class="col-sm-12">
                        <div class="table-responsive table-pos">
                            <table class="table table-nowrap mb-0">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Itemcode</th>
                                        <th>Product</th>
                                        <th>Qty</th>
                                        <th>MRP</th>
                                        <th>Unit Cost</th>
                                        <th>Discount %</th>
                                        <th>Add Disc</th>
                                        <th>Tax</th>
                                        <th>Net Amount</th>
                                        <th></th>
                                    </tr>
                                </thead>

                                <tbody>
                                    <tr class="table-light" *ngFor="let cart of currentItems; let i = index">
                                        <td>{{i + 1}}</td>
                                        <td>{{cart?.sku}}</td>
                                        <td class="product-title-wrapper">
                                            <div class="product-title-div">
                                                <p class="product-title-cart">
                                                    {{cart?.product?.title ? cart.product?.title : cart?.product?.name}}
                                                    |
                                                    {{cart?.variant_name}}
                                                    <button class="cart-btn2 cart-btn1" data-bs-toggle="modal"
                                                        data-bs-target="#productDetailsModal"
                                                        (click)="setIndexForProductDetails(i)">
                                                        <i class="fas fa-info-circle"></i>
                                                    </button>
                                                </p>
                                                <button class="cart-btn2" (click)="setIndexForNotes(i)">
                                                    <i class="fas fa-list"></i>
                                                </button>
                                            </div>
                                            <div class="product-notes" *ngIf="currentCartIndex1 == i">
                                                <textarea rows="3" cols="3" class="form-control"
                                                    [(ngModel)]="cart.notes"
                                                    [ngModelOptions]="{standalone: true}"></textarea>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="input-group pos-i-grp table-black-grp qty-input">
                                                <span (click)="decreaseQtyCurrent(cart,i)"
                                                    class="input-group-text cursor-pointer-pos"
                                                    id="basic-addon1">-</span>
                                                <input type="text" value={{cart?.quantity}} class="form-control"
                                                    aria-label="Username" aria-describedby="basic-addon1">
                                                <span (click)="increaseQtyCurrent(cart,i)"
                                                    class="input-group-text cursor-pointer-pos"
                                                    id="basic-addon1">+</span>
                                            </div>
                                        </td>
                                        <td>
                                            {{cart?.batch[0]?.mrp ? cart?.batch[0]?.mrp :cart?.product?.mrp}}
                                            <!-- <input type="text" disabled value="{{cart?.batch[0]?.mrp}}" class="form-control mrp-input-table" aria-label="Username" aria-describedby="basic-addon1"> -->
                                        </td>
                                        <td>{{cart?.batch[0]?.selling_price_offline}}</td>
                                        <td>
                                            <!-- 11-04 -->
                                            <!-- <ng-container *ngIf="isQPQ[i]">
                                                <select #disV (change)="selectDiscount(disV.value)">
                                                    <ng-container *ngFor="let dis of discountTyp">
                                                        <option [value]="dis?.discount_offer_type" [selected]="dis.is_compulsory">{{dis?.discount_offer_type}}</option>
                                                    </ng-container>
                                                </select>
                                            </ng-container>
                                            <ng-container *ngIf="isQPP[i]">
                                                <select #disV (change)="selectDiscount(disV.value)">
                                                    <ng-container *ngFor="let dis of discountTyp">
                                                        <option [value]="dis?.discount_offer_type" [selected]="dis.is_compulsory">{{dis?.discount_offer_type}}</option>
                                                    </ng-container>
                                                </select>
                                            </ng-container>
                                            <ng-container *ngIf="!isQPP[i] || !isQPQ[i]">
                                                <select #disV (change)="selectDiscount(disV.value)">
                                                    <ng-container *ngFor="let dis of discountTyp[i]">
                                                        <option [value]="dis?.discount_offer_type" [selected]="dis.is_compulsory">{{dis?.discount_offer_type}}</option>
                                                    </ng-container>
                                                </select>
                                            </ng-container>
                                            <ng-container *ngFor="let dis of discountTyp[i]"> 
                                            </ng-container> -->
                                            <!-- {{getProductDisc(cart?.batch[0])}} -->
                                            <ng-container
                                                *ngIf="isDiscountSelect[i]">{{selectedDiscount[i]}}</ng-container>
                                            <ng-container *ngIf="cart.product.name">
                                                <i class="ion-information circle" data-bs-toggle="tooltip"
                                                    title="ion-information"
                                                    (click)="openModalDiscount(i); freeItemBatch(cart,i)"></i>
                                            </ng-container>
                                            <ng-container *ngIf="cart.id>0">
                                                <i class="ion-information circle" data-bs-toggle="tooltip"
                                                    title="ion-information" (click)="openModalDiscount(i)"></i>
                                            </ng-container>

                                            <div class="modal fade" id="discountModal-{{i}}" tabindex="-1" role="dialog"
                                                aria-labelledby="addressModalLabel" aria-hidden="true">
                                                <div class="modal-dialog modal-lg modal-dialog-centered" role="document"
                                                    style="max-width: 57%;">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h1 class="modal-title fs-5" id="staticBackdropLabel">Select
                                                                Discount</h1>
                                                            <button type="button" class="close"
                                                                (click)="closeModalDiscount(i)" aria-label="Close">
                                                                <span aria-hidden="true">&times;</span>
                                                            </button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="form-group">
                                                                <div class="row">
                                                                    <div class="table-responsive">
                                                                        <table class="table datanew">
                                                                            <thead
                                                                                *ngIf="discountTyp[discountCartIndex]">
                                                                                <tr>
                                                                                    <th class="boder space-text">Sr.No.
                                                                                    </th>
                                                                                    <th class="boder space-text">Offer
                                                                                        Type</th>
                                                                                    <th class="boder space-text">Free
                                                                                        Items</th>
                                                                                    <th class="boder space-text">Price
                                                                                        Range</th>
                                                                                    <th class="boder space-text">Invoice
                                                                                        Amount</th>
                                                                                    <th class="boder space-text">Flat
                                                                                        Discount</th>
                                                                                    <th class="boder space-text">Action
                                                                                    </th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <tr
                                                                                    *ngFor="let discount of discountTyp[discountCartIndex]; let ind=index;">
                                                                                    <td class="boder">{{ ind+1+'.'}}
                                                                                    </td>
                                                                                    <td class="boder">{{
                                                                                        discount?.discount_offer_type }}
                                                                                    </td>
                                                                                    <td class="boder">{{
                                                                                        discount?.free_items?.name }}
                                                                                    </td>
                                                                                    <td class="boder">{{
                                                                                        discount?.start_price?discount?.start_price:''}}
                                                                                        -
                                                                                        {{discount?.end_price?discount?.end_price:''}}
                                                                                    </td>
                                                                                    <td class="boder">
                                                                                        {{discount?.invoice_amount?discount?.invoice_amount:'-'}}
                                                                                    </td>
                                                                                    <td class="boder">{{
                                                                                        discount?.flat_discount?discount?.flat_discount:''}}
                                                                                        {{discount?.discount_type?discount.discount_type:''}}
                                                                                    </td>
                                                                                    <td><button type="button"
                                                                                            class="btn btn-primary btn-sm"
                                                                                            style="float: right;"
                                                                                            (click)="selectDiscount(discount,i)">Select</button>
                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                            <tbody
                                                                                *ngIf="!discountTyp[discountCartIndex]">
                                                                                <p>Discount Not Available</p>
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                        <!-- <div class="input-group pos-i-grp table-black-grp">
                                                <span class="input-group-text" id="basic-addon1">₹
                                                </span>
                                                <input type="text" value="0.00" class="form-control disc-input-table" aria-label="Username" aria-describedby="basic-addon1">
                                            </div> -->
                                        <!-- <td><div class="input-group pos-i-grp table-black-grp">
                                            <span class="input-group-text" id="basic-addon1">%</span>
                                            <input type="text" value="0.00" class="form-control disc-input-table" aria-label="Username" aria-describedby="basic-addon1">
                                        </div></td> -->
                                        <td>{{getProductAddDisc(cart?.batch[0])}}</td>
                                        <td>{{getProductTax(cart?.batch[0])}}</td>
                                        <td>{{getNetAmount2(cart?.batch[0], cart?.quantity).toFixed(2)}}</td>
                                        <td><button (click)="removeOptionCurrent(cart)" class="table-cross-btn">
                                                <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                                            </button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="bottom-pos-left mt-1">
                    <div class="row">
                        <div class="col-sm-12">
                            <input type="text" class="form-control" placeholder="Remarks">
                        </div>
                    </div>
                    <div class="row mt-1">
                        <div class="col-sm-12">
                            <div class="amt-info-div">
                                <ul>
                                    <li>
                                        <p>{{this.totalQty()}}</p>
                                        <h5>Quantity</h5>
                                    </li>
                                    <li>
                                        <p>₹{{this.totalMrp()}}</p>
                                        <h5>MRP</h5>
                                    </li>
                                    <li>
                                        <p>₹{{this.totalTaxAmount()}}</p>
                                        <h5>Tax Amount</h5>
                                    </li>
                                    <li>
                                        <p>₹{{currentTotalAdditionalCharges()}}</p>
                                        <button type="button" class="btn btn-dark" data-bs-toggle="modal"
                                            data-bs-target="#addChargesModal" (click)="playBeepSound()">
                                            Add Charges <i class="fas fa-plus" data-bs-toggle="tooltip"
                                                title="fa fa-plus"></i>
                                        </button>
                                    </li>
                                    <li>
                                        <!-- <select #discountVal (change)="selectedBatch(discountVal.value)">
                                            <option value="{{data?.discount_offer_type}}" *ngFor="let data of discountTyp">{{data?.discount_offer_type}}</option>
                                        </select> -->
                                        <!-- <p>₹{{this.totalDiscAmount()}}</p> -->
                                        <p>₹{{this.totalDiscountRupees()}}</p>
                                        <h5>Discount </h5>
                                    </li>
                                    <li>
                                        <div class="flat-disc-wrapper">
                                            <div class="input-group pos-i-grp">
                                                <span class="input-group-text" id="basic-addon1">%</span>
                                                <input type="text" class="form-control" aria-label="Username"
                                                    aria-describedby="basic-addon1">
                                            </div>
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" name="checkbox">
                                                </label>
                                            </div>
                                        </div>
                                        <h5>Flat Discount %</h5>
                                    </li>
                                    <li>
                                        <input type="text" class="form-control pos-s-input" value="{{getRoundOff()}}">
                                        <h5>Round Off</h5>
                                    </li>
                                    <li>
                                        <p>₹{{this.finalAmount()}}</p>
                                        <h5>Amount</h5>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <div class="col-sm-12">
                            <div class="btns-row">
                                <button type="button" class="btn btn-dark" data-bs-toggle="modal"
                                    [disabled]="!isInternetConnection" data-bs-target="#exampleModal3"
                                    (click)="playBeepSound('btn'); redeemCredit()">
                                    <i class="fas fa-money-bill" data-bs-toggle="tooltip" title="fas fa-money-bill"></i>
                                    Redeem Credit</button>
                                <button type="button" class="btn btn-dark holdF6" [disabled]="!isInternetConnection"
                                    (click)="holdBill()">
                                    <i class="fas fa-pause" data-bs-toggle="tooltip" title="fas fa-pause"></i>
                                    Hold(F6)</button>
                                <button type="button" class="btn btn-dark upiF5" [disabled]="!isInternetConnection"
                                    data-bs-toggle="modal" data-bs-target="#upiMethodModal"
                                    (click)="playBeepSound('btn')">
                                    <i class="fas fa-forward" data-bs-toggle="tooltip" title="fas fa-forward"></i>
                                    UPI(F5)</button>
                                <button type="button" class="btn btn-dark cardF3" [disabled]="!isInternetConnection"
                                    data-bs-toggle="modal" data-bs-target="#cardMethodModal"
                                    (click)="playBeepSound('btn')">
                                    <i class="fas fa-credit-card" data-bs-toggle="tooltip"
                                        title="fas fa-credit-card"></i>
                                    Card(F3)</button>
                                <button type="button" class="btn btn-dark cashF4" data-bs-toggle="modal"
                                    data-bs-target="#exampleModal5" (click)="playBeepSound('btn')">
                                    <i class="fas fa-rupee-sign" data-bs-toggle="tooltip" title="fas fa-rupee-sign"></i>
                                    Cash(F4)</button>
                                <button type="button" class="btn btn-dark bankF9" [disabled]="!isInternetConnection"
                                    data-bs-toggle="modal" data-bs-target="#bankMethodModal"
                                    (click)="playBeepSound('btn')">
                                    <i class="fas fa-university" data-bs-toggle="tooltip" title="fas fa-rupee-sign"></i>
                                    Bank(F9)</button>
                                <button type="button" class="btn btn-dark mpF12" [disabled]="!isInternetConnection"
                                    data-bs-toggle="modal" data-bs-target="#exampleModal4"
                                    (click)="playBeepSound('btn'); multiplePay()">
                                    <i class="fas fa-dice-two" data-bs-toggle="tooltip" title="fas fa-dice-two"></i>
                                    Multiple Pay(F12)</button>

                            </div>
                        </div>
                    </div>
                    <div class="row mt-1">
                        <div class="col-sm-12">
                            <div class="btns-row">
                                <button type="button" class="btn btn-dark w-100" [disabled]="!isInternetConnection"
                                    data-bs-toggle="modal" data-bs-target="#exampleModal6"
                                    (click)="playBeepSound('btn')">
                                    <i class="fas fa-gift" data-bs-toggle="tooltip" title="fas fa-gift"></i>
                                    Apply Coupon</button>
                                <button type="button" class="btn btn-dark w-100" [disabled]="!isInternetConnection"
                                    (click)="playBeepSound('sale'); saleReturn()">
                                    <i class="fas fa-exchange-alt" data-bs-toggle="tooltip"
                                        title="fas fa-exchange-alt"></i>
                                    Sale Return</button>
                                <button type="button" class="btn btn-dark w-100" [disabled]="!isInternetConnection"
                                    (click)="holdAndPrint()">
                                    <i class="fas fa-pause" data-bs-toggle="tooltip" title="fas fa-pause"></i>
                                    Hold&Print</button>
                                <button type="button" class="btn btn-dark w-100 upF10"
                                    [disabled]="!isInternetConnection" data-bs-toggle="modal"
                                    data-bs-target="#upiPrintMethodModal" (click)="playBeepSound('btn')">
                                    <i class="fas fa-forward" data-bs-toggle="tooltip" title="fas fa-forward"></i>
                                    UPI&Print(F10)</button>
                                <button type="button" class="btn btn-dark w-100 cpF7" [disabled]="!isInternetConnection"
                                    data-bs-toggle="modal" data-bs-target="#cardPrintMethodModal"
                                    (click)="playBeepSound('btn')">
                                    <i class="fas fa-credit-card" data-bs-toggle="tooltip" title="fas fa-pause"></i>
                                    Card&Print(F7)</button>
                                <button type="button" class="btn btn-dark w-100 cashprintF8" data-bs-toggle="modal"
                                    data-bs-target="#printCashModal" (click)="playBeepSound('btn')">
                                    <i class="fas fa-rupee-sign" data-bs-toggle="tooltip"
                                        title="fas fa-credit-card"></i>
                                    Cash&Print(F8)</button>
                                <button type="button" class="btn btn-dark w-100 bankF9"
                                    [disabled]="!isInternetConnection" data-bs-toggle="modal"
                                    data-bs-target="#bankPrintMethodModal" (click)="playBeepSound('btn')">
                                    <i class="fas fa-university" data-bs-toggle="tooltip" title="fas fa-rupee-sign"></i>
                                    Bank&Print</button>
                                <button type="button" class="btn btn-dark w-100 plF11"
                                    [disabled]="!isInternetConnection" data-bs-toggle="modal"
                                    (click)="playBeepSound('btn'); payLater()">
                                    <i class="fas fa-calendar" data-bs-toggle="tooltip" title="fas fa-calendar"></i>
                                    Pay Later(F11)</button>
                            </div>
                        </div>
                    </div>

                    <!-- <div class="row mt-3">
                        <div class="col-sm-2">
                            <button type="button" class="btn btn-dark w-100" data-bs-toggle="modal" data-bs-target="#exampleModal5"> 
                            <i class="fas fa-money-bill" data-bs-toggle="tooltip" title="fas fa-money-bill"></i>
                                Redeem Credit</button>
                        </div>
                        <div class="col-sm-2">
                            <button type="button" class="btn btn-dark w-100" data-bs-toggle="modal" data-bs-target="#exampleModal6"> 
                            <i class="fas fa-pause" data-bs-toggle="tooltip" title="fas fa-pause"></i>
                                Hold(F6)</button>
                        </div>
                        <div class="col-sm-2">
                            <button type="button" class="btn btn-dark w-100"> 
                            <i class="fas fa-forward" data-bs-toggle="tooltip" title="fas fa-forward"></i>
                                UPI(F5)</button>
                        </div>
                        <div class="col-sm-2">
                            <button type="button" class="btn btn-dark w-100"> 
                            <i class="fas fa-credit-card" data-bs-toggle="tooltip" title="fas fa-credit-card"></i>
                                Card(F3)</button>
                        </div>
                        <div class="col-sm-2">
                            <button type="button" class="btn btn-dark w-100"> 
                            <i class="fas fa-rupee-sign" data-bs-toggle="tooltip" title="fas fa-rupee-sign"></i>
                                Cash(F4)</button>
                        </div>
                        <div class="col-sm-2">
                            <button type="button" class="btn btn-dark w-100"> 
                            <i class="fas fa-dice-two" data-bs-toggle="tooltip" title="fas fa-dice-two"></i>
                                Multiple Pay(F12)</button>
                        </div>
                    </div> -->
                    <!-- <div class="row mt-2">
                        <div class="col-sm-2">
                            <button type="button" class="btn btn-dark w-100"> 
                            <i class="fas fa-gift" data-bs-toggle="tooltip" title="fas fa-gift"></i>
                                Apply Coupon</button>
                        </div>
                        <div class="col-sm-2">
                            <button type="button" class="btn btn-dark w-100"> 
                            <i class="fas fa-calendar" data-bs-toggle="tooltip" title="fas fa-calendar"></i>
                                Pay Later(F11)</button>
                        </div>
                        <div class="col-sm-2">
                            <button type="button" class="btn btn-dark w-100"> 
                            <i class="fas fa-pause" data-bs-toggle="tooltip" title="fas fa-pause"></i>
                                Hold&Print(F7)</button>
                        </div>
                        <div class="col-sm-2">
                            <button type="button" class="btn btn-dark w-100"> 
                            <i class="fas fa-forward" data-bs-toggle="tooltip" title="fas fa-forward"></i>
                                UPI&Print(F10)</button>
                        </div>
                        <div class="col-sm-2">
                            <button type="button" class="btn btn-dark w-100"> 
                            <i class="fas fa-credit-card" data-bs-toggle="tooltip" title="fas fa-credit-card"></i>
                                Card&Print(F9)</button>
                        </div>
                        <div class="col-sm-2">
                            <button type="button" class="btn btn-dark w-100"> 
                            <i class="fas fa-rupee-sign" data-bs-toggle="tooltip" title="fas fa-rupee-sign"></i>
                                Cash&Print(F8)</button>
                        </div>
                    </div> -->
                </div>
            </div>

        </div>
        <div class="col-lg-3 mh-100 col-sm-12" style="overflow-y: scroll; width: 19%">
            <div class="row py-2">
                <div class="right-header-pos">
                    <button type="button" class="btn btn-dark btn-sm">
                        <i class="fa fa-cog" data-bs-toggle="tooltip" title="fa fa-cog"></i>
                    </button>
                    <button type="button" class="btn btn-dark btn-sm">
                        <i class="fa fa-bars" data-bs-toggle="tooltip" title="fa fa-bars"></i>
                    </button>
                    <button type="button" class="btn btn-dark btn-sm">
                        <i class="fa fa-trash" data-bs-toggle="tooltip" title="fa fa-trash"></i>
                    </button>
                    <button type="button" class="btn btn-dark btn-sm">
                        <i class="fa fa-expand" data-bs-toggle="tooltip" title="fa fa-expand"></i>
                    </button>
                    <button type="button" class="btn btn-dark btn-sm">
                        <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                    </button>
                    <button type="button" class="btn btn-dark btn-sm">
                        <i class="fa fa-share-square" data-bs-toggle="tooltip" title="fa fa-share-square"></i>
                    </button>
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-sm-12">
                    <div class="cus-details-wrapper right-btns-wrapper">
                        <ul>
                            <li>
                                <button type="button" class="btn-pos" data-bs-toggle="offcanvas"
                                    data-bs-target="#offcanvasExample" (click)="playBeepSound()">
                                    <i class="fas fa-pause"></i>
                                    Hold Bill</button>
                            </li>

                            <li>
                                <button type="button" class="btn-pos" data-bs-toggle="modal"
                                    data-bs-target="#posOrdersModal" (click)="playBeepSound()">
                                    <i class="fa fa-th-list" data-bs-toggle="tooltip" title="fa fa-th-list"></i>
                                    Orders</button>
                            </li>

                            <li>
                                <div class="d-flex align-items-start">
                                    <button type="button" class="btn-pos me-0" data-bs-toggle="modal"
                                        data-bs-target="#posPaymentsModal" (click)="playBeepSound()">
                                        <i class="fa fa-cash-register" data-bs-toggle="tooltip"
                                            title="fa fa-th-list"></i>
                                        Payments</button>
                                    <button class="p-0 m-0 border-0" data-bs-toggle="modal"
                                        data-bs-target="#posPaymentsVoucherModal"
                                        (click)="playBeepSound(); isPaymentModalShown = true;">
                                        <i class="fas fa-plus add-icon-wrapper"></i>
                                    </button>
                                </div>
                            </li>
                            <!-- <li>
                                <button type="button" class="btn-pos" data-bs-toggle="modal" data-bs-target="#exampleModal2"> 
                                    <i class="fas fa-money-bill" data-bs-toggle="tooltip" title="fas fa-money-bill"></i>
                                        Add Payment</button> 
                            </li> -->

                            <li>
                                <div class="d-flex align-items-start">
                                    <button type="button" class="btn-pos me-0" data-bs-toggle="modal"
                                        data-bs-target="#salesModal" (click)="playBeepSound()">
                                        <i class="fas fa-receipt" data-bs-toggle="tooltip"
                                            title="fas fa-money-bill"></i>
                                        Receipts</button>
                                    <button class="p-0 m-0 border-0" data-bs-toggle="modal"
                                        data-bs-target="#posReceiptVoucherModal"
                                        (click)="playBeepSound(); isReceiptModalShown = true;">
                                        <i class="fas fa-plus add-icon-wrapper"></i>
                                    </button>
                                </div>
                            </li>

                            <li>
                                <div class="d-flex align-items-start">
                                    <button type="button" class="btn-pos me-0" data-bs-toggle="modal"
                                        data-bs-target="#expenseModal" (click)="playBeepSound()">
                                        <i class="fas fa-money-check" data-bs-toggle="tooltip"
                                            title="fas fa-money-bill"></i>
                                        Expense</button>
                                    <button class="p-0 m-0 border-0" data-bs-toggle="modal"
                                        data-bs-target="#posExpenseVoucherModal"
                                        (click)="playBeepSound(); isExpanseModalShown = true;">
                                        <i class="fas fa-plus add-icon-wrapper"></i>
                                    </button>
                                </div>
                            </li>

                            <li>
                                <div class="d-flex align-items-start">
                                    <button type="button" class="btn-pos me-0" data-bs-toggle="modal"
                                        data-bs-target="#creditNoteModal" (click)="playBeepSound()">
                                        <i class="fas fa-sticky-note" data-bs-toggle="tooltip"
                                            title="fas fa-sticky-note"></i>
                                        Credit Notes</button>
                                    <button class="p-0 m-0 border-0" data-bs-toggle="modal"
                                        data-bs-target="#posCreditNoteModal"
                                        (click)="playBeepSound(); isCreditNoteModalShown = true;">
                                        <i class="fas fa-plus add-icon-wrapper"></i>
                                    </button>
                                </div>
                            </li>

                            <!-- <li>
                                <button type="button" class="btn-pos">
                                    <i class="fas fa-gift" data-bs-toggle="tooltip" title="fas fa-gift"></i>
                                    Redeem Loyalty</button>
                            </li> -->

                            <li *ngIf="showSyncButton()">
                                <button type="button" class="btn-pos">
                                    <i class="fas fa-pause" data-bs-toggle="tooltip" title="fas fa-pause"></i>
                                    Sync Orders</button>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-sm-12">
                    <div class="cus-details-wrapper">
                        <h4>Customer Details</h4>
                        <ul>
                            <li>
                                <p>
                                    Last Visited:-
                                </p>
                            </li>
                            <li>
                                <p>
                                    Last Bill Amount:-
                                </p>
                            </li>
                            <li>
                                <p>
                                    Most Purchased Item:-
                                </p>
                            </li>
                            <li>
                                <p>
                                    Closing:-
                                </p>
                            </li>
                            <li>
                                <p>
                                    Total Purchase:-
                                </p>
                            </li>
                            <li>
                                <p>
                                    Loyalty Points:-
                                </p>
                            </li>
                            <li>
                                <p>
                                    Membership:-
                                </p>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Button trigger modal -->
<!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
    Launch demo modal
  </button> -->

<div class="outer container" id="debitNote">
    <div class="pdf-div" id="doc-target">
        <div class="top mb-4">
            <div class="container">
                <div class="col-sm-12">
                    <div class="row">
                        <div class="col-sm-7">
                            <div class="d-flex justify-content-between align-items-center top-div"
                                style="float: inline-start;">
                                <div class="left-top">
                                    <img src="assets/dummy/pos.png" alt="">
                                    <p class="gst"><span>GST: </span> {{orderDetails?.customer?.gstin || '--'}}</p>
                                    <p><span>Name</span> : {{orderDetails?.customer?.name || '--'}}</p>
                                    <p><span>Address: </span> :
                                        {{orderDetails?.customer?.address[0]?.city?.city+','+orderDetails?.customer?.address[0]?.state?.state+'
                                        , '+orderDetails?.customer?.address[0]?.country?.country_name+'
                                        ,'+orderDetails?.customer?.address[0]?.pincode}}
                                    </p>
                                    <p><span>Phone</span> : {{orderDetails?.customer?.mobile_no || '--'}}</p>
                                    <p><span>Email</span> : {{orderDetails?.customer?.email || '--'}}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5">
                            <div class="d-flex justify-content-between align-items-center top-div my-3"
                                style="float: inline-end;">
                                <div class="right-top">
                                    <h1 class="pb-4">Invoice</h1>
                                    <p><span>Invoice Date</span> : {{orderDetails?.estimate_date ?
                                        (orderDetails?.estimate_date| date: 'dd-MMMM-yyyy')
                                        : '--'}}</p>
                                    <p><span>Invoice NO</span> : {{orderDetails?.estimate_no || '--'}} </p>
                                    <p><span>Expiry Date</span> : {{orderDetails?.estimate_expiry_date ?
                                        (orderDetails?.estimate_expiry_date | date:
                                        'dd-MMMM-yyyy') : '--'}}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="pdf-table1 mb-4">
            <div class="container">
                <div class="col-sm-12">
                    <div class="table-responsive">
                        <table class="table datanew">
                            <thead>
                                <tr>
                                    <th class="thone" style="white-space: normal !important;">Payment Mode</th>
                                    <th class="thone" style="white-space: normal !important;">Party Name</th>
                                    <th class="thone" style="white-space: normal !important;">Total Amount</th>
                                    <th class="thone" style="white-space: normal !important;">Created Date</th>
                                    <th class="thone" style="white-space: normal !important;">Total Tax</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>{{orderDetails?.payment_mode}}</td>
                                    <td>{{orderDetails?.customer?.name}}</td>
                                    <td>{{orderDetails?.total_amount}}</td>
                                    <td>{{orderDetails?.created_date | date: 'dd-MMMM-yyyy'}}</td>
                                    <td>{{orderDetails?.total_tax}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="pdf-footer">
            <p>Please make cheques payable to <span>PV LTD.</span></p>
        </div>
    </div>
</div>

<div *ngIf="isSyncLoading" class="spinner-container">
    <div class="spinner-border" role="status">
        <span class="sr-only">Loading...</span>
    </div>
</div>

<!-- Modal -->
<div class="modal fade posmodal" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Cash In Hand Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Cash In Hand</label>
                    <input type="text" class="form-control" placeholder="Cash In Hand">
                </div>
            </div>
            <div class="modal-footer mt-5">
                <!-- <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button> -->
                <button type="button" class="btn btn-dark modal1BtnPos">Start Selling</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal 2-->
<div class="modal fade modalCusDetails posmodal" id="exampleModal1" tabindex="-1" aria-labelledby="exampleModal1Label"
    aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add Customer Details</h5>
                <button type="button" class="btn-close addCusModal" data-bs-dismiss="modal" aria-label="Close"
                    (click)="playBeepSound()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>


            <div class="modal-body">
                <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()">

                    <div class="row">
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label>Name</label>
                                <input type="text" class="form-control" placeholder="Name" formControlName="name">
                            </div>
                            <div *ngIf="name.invalid && (name.dirty || name.touched)" class="alert alert-danger">

                                <div *ngIf="name.errors?.['required']">
                                    Name is required.
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label>Mobile No.</label>
                                <input type="text" class="form-control" placeholder="Mobile No."
                                    formControlName="mobile_no" (input)="handleMobileInputChange($event)">
                            </div>
                            <div class="alert alert-danger" *ngIf="mobile_no.valid && customerRegistrationNumberSame">
                                Mobile No. already exists.</div>
                            <div *ngIf="mobile_no.invalid && (mobile_no.dirty || mobile_no.touched)"
                                class="alert alert-danger">

                                <div *ngIf="mobile_no.errors?.['required']">
                                    Mobile No is required.
                                </div>
                                <div *ngIf="mobile_no.errors?.['pattern']">
                                    Mobile No pattern not match.
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label>Whatsapp No.</label>
                                <input type="text" class="form-control" placeholder="Whatsapp No."
                                    formControlName="whatsapp_no">
                            </div>
                            <div *ngIf="whatsapp_no.invalid && (whatsapp_no.dirty || whatsapp_no.touched)"
                                class="alert alert-danger">

                                <div *ngIf="whatsapp_no.errors?.['required']">
                                    Whatsapp No is required.
                                </div>
                                <div *ngIf="whatsapp_no.errors?.['pattern']">
                                    Whatsapp No pattern not match.
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4">
                            <div class="form-group mb-0">
                                <label>Date Of Birth</label>
                                <input type="date" class="form-control" placeholder="Date Of Birth"
                                    formControlName="date_of_birth">
                            </div>
                            <div *ngIf="date_of_birth.invalid && (date_of_birth.dirty || date_of_birth.touched)"
                                class="alert alert-danger">

                                <div *ngIf="date_of_birth.errors?.['required']">
                                    DOB is required.
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group mb-0">
                                <label>Anniversary Date</label>
                                <input type="date" class="form-control" placeholder="Anniversary"
                                    formControlName="anniversary_date">
                            </div>
                            <div *ngIf="anniversary_date.invalid && (anniversary_date.dirty || anniversary_date.touched)"
                                class="alert alert-danger">

                                <div *ngIf="anniversary_date.errors?.['required']">
                                    Anniversary Date is required.
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" class="form-control" placeholder="Email" formControlName="email">
                            </div>
                            <div *ngIf="email.invalid && (email.dirty || email.touched)" class="alert alert-danger">

                                <div *ngIf="email.errors?.['required']">
                                    Email is required.
                                </div>
                                <div *ngIf="email.errors?.['email']">
                                    Email pattern not match.
                                </div>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="add-more-details-btn my-3"
                        (click)="addMoreDetailsHandler()">{{addMoreDetails ? 'Hide More Details' : 'Add More
                        Details'}}</button>
                    <div *ngIf="addMoreDetails">
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label>Address Line</label>
                                    <input type="text" class="form-control" placeholder="Address Line1"
                                        formControlName="address_line_1">
                                </div>
                                <div *ngIf="address_line_1.invalid && (address_line_1.dirty || address_line_1.touched)"
                                    class="alert alert-danger">

                                    <div *ngIf="address_line_1.errors?.['required']">
                                        Address 1 is required.
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label>Address Line</label>
                                    <input type="text" class="form-control" placeholder="Address Line2"
                                        formControlName="address_line_2">
                                </div>
                                <div *ngIf="address_line_2.invalid && (address_line_2.dirty || address_line_2.touched)"
                                    class="alert alert-danger">

                                    <div *ngIf="address_line_2.errors?.['required']">
                                        Address 2 is required.
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label>State</label>
                                    <select class="form-select" formControlName="state"
                                        (change)="onStateChange($event)">
                                        <option value="" disabled selected>Select State</option>
                                        <option *ngFor="let state of stateList" [value]="state.id"
                                            [selected]="state.id == currentState">{{state?.state}}</option>
                                    </select>
                                </div>
                                <div *ngIf="state.invalid && (state.dirty || state.touched)" class="alert alert-danger">

                                    <div *ngIf="state.errors?.['required']">
                                        State is required.
                                    </div>
                                </div>

                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label>City</label>
                                    <select class="form-select" formControlName="city" (change)="onCityChange($event)">
                                        <!-- <option>-- Select --</option>
                                <option>Option 1</option>
                                <option>Option 2</option> -->
                                        <option value="" disabled selected>Select City</option>
                                        <option *ngFor="let city of cityList" [value]="city?.id"
                                            [selected]="city?.id == currentCities">{{city?.city}}</option>
                                    </select>
                                </div>
                                <div *ngIf="city.invalid && (city.dirty || city.touched)" class="alert alert-danger">

                                    <div *ngIf="city.errors?.['required']">
                                        City is required.
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label>Pincode</label>
                                    <input type="text" class="form-control" placeholder="Pincode"
                                        formControlName="pincode">
                                </div>
                                <div *ngIf="pincode.invalid && (pincode.dirty || pincode.touched)"
                                    class="alert alert-danger">

                                    <div *ngIf="pincode.errors?.['required']">
                                        Pincode is required.
                                    </div>
                                    <div *ngIf="pincode.errors?.['pattern']">
                                        Pincode pattern not match.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label>GST Type</label>
                                    <select class="form-select" formControlName="gst_type" (change)="onGstTypeChange()">
                                        <option value="" disabled selected>Select GST Type</option>
                                        <option value="{{gst.value}}" *ngFor="let gst of gstType">{{gst.label}}</option>
                                    </select>
                                </div>
                                <div *ngIf="gst_type.invalid && (gst_type.dirty || gst_type.touched)"
                                    class="alert alert-danger">

                                    <div *ngIf="gst_type.errors?.['required']">
                                        GST Type is required.
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label>GSTIN</label>
                                    <input type="text" class="form-control" placeholder="GSTIN" formControlName="gstin">
                                </div>
                                <div *ngIf="gstin.invalid && (gstin.dirty || gstin.touched)" class="alert alert-danger">

                                    <div *ngIf="gstin.errors?.['required']">
                                        GSTIN is required.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 d-flex justify-content-center">
                            <button type="submit" class="btn btn-dark modal2BtnPos">Save</button>

                        </div>
                    </div>

                </form>

            </div>
            <!-- <div class="modal-footer mt-2">
            <button type="submit" class="btn btn-dark modal2BtnPos">Save</button>
        </div> -->
        </div>
    </div>
</div>


<!-- Modal 3-->
<div class="modal fade modalPayment posmodal" id="exampleModal2" tabindex="-1" aria-labelledby="exampleModal2Label"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModal2Label">Payment</h5>
                <button type="button" class="btn-close receiptModalClose" data-bs-dismiss="modal" aria-label="Close">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form [formGroup]="receiptPaymentForm" (ngSubmit)="receiptFormSubmit()">

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label class="d-block">Select Voucher Type</label>
                                <div class="row justify-center">
                                    <div class="col-sm-12">
                                        <div class="radio-payments-modal-wrapper d-flex justify-content-around">
                                            <div class="form-check" *ngFor="let option of voucherType">
                                                <input class="form-check-input" type="radio"
                                                    formControlName="voucher_type" [value]="option.value">
                                                <label class="form-check-label">{{option.label}}</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="voucher_type.invalid && (voucher_type.dirty || voucher_type.touched)"
                                class="alert alert-danger">

                                <div *ngIf="voucher_type.errors?.['required']">
                                    Voucher Type is required.
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12"
                            *ngIf="receiptPaymentForm.get('voucher_type').value === 'sales' || receiptPaymentForm.get('voucher_type').value === 'purchase'">
                            <div class="form-group">
                                <label class="d-block">Select Payment Type</label>
                                <div class="radio-payments-modal-wrapper d-flex justify-content-around">
                                    <div class="form-check" *ngFor="let option of paymentType">
                                        <input class="form-check-input" type="radio" formControlName="payment_type"
                                            [value]="option.value">
                                        <label class="form-check-label">{{option.label}}</label>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="payment_type.invalid && (payment_type.dirty || payment_type.touched)"
                                class="alert alert-danger">

                                <div *ngIf="payment_type.errors?.['required']">
                                    Payment Type is required.
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6"
                            *ngIf="receiptPaymentForm.get('voucher_type').value === 'sales' || receiptPaymentForm.get('voucher_type').value === 'purchase'">
                            <div class="form-group">
                                <label>Payment Mode</label>
                                <select class="form-select" formControlName="payment_mode">
                                    <option disabled selected value="">-- Select Payment Mode --</option>
                                    <option *ngFor="let option of paymentMode" [value]="option.value">{{option.label}}
                                    </option>
                                </select>
                            </div>
                            <div *ngIf="payment_mode.invalid && (payment_mode.dirty || payment_mode.touched)"
                                class="alert alert-danger">

                                <div *ngIf="payment_mode.errors?.['required']">
                                    Payment Mode is required.
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6"
                            *ngIf="receiptPaymentForm.get('payment_type').value === 'Against Bill' && receiptPaymentForm.get('voucher_type').value !== 'expense'">
                            <div class="form-group">
                                <label>Select Sales</label>
                                <select class="form-select" formControlName="receipt_sales">
                                    <option disabled selected value="">-- Select Sales --</option>
                                    <option *ngFor="let option of receiptSales" [value]="option?.id">
                                        {{option?.dueAmount}}</option>
                                </select>
                            </div>
                            <div *ngIf="receipt_sales.invalid && (receipt_sales.dirty || receipt_sales.touched)"
                                class="alert alert-danger">

                                <div *ngIf="receipt_sales.errors?.['required']">
                                    Selecting Sales is required.
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label>Amount</label>
                                <input type="number" formControlName="amount_receipt" class="form-control"
                                    placeholder="Enter Amount">
                            </div>
                            <div *ngIf="amount_receipt.invalid && (amount_receipt.dirty || amount_receipt.touched)"
                                class="alert alert-danger">

                                <div *ngIf="amount_receipt.errors?.['required']">
                                    Amount is required.
                                </div>
                            </div>
                        </div>



                        <div class="row">

                            <div class="col-sm-8" *ngIf="receiptPaymentForm.get('voucher_type').value === 'sales'">
                                <div class="form-group">
                                    <label>Customer</label>
                                    <input type="text" placeholder="Search for a Customer"
                                        [formControl]="receiptPaymentForm.get('customer_receipt')"
                                        [matAutocomplete]="autoReceipt" class="form-control">
                                    <mat-autocomplete #autoReceipt="matAutocomplete"
                                        (optionSelected)="optionSelectedReceipt($event)">
                                        <mat-option *ngIf="receiptPaymentForm.get('customer_receipt').value?.length < 3"
                                            class="is-loading">
                                            Please Enter 3 or more characters
                                        </mat-option>
                                        <mat-option *ngIf="cusIsLoading" class="is-loading">
                                            Loading...
                                        </mat-option>
                                        <mat-option *ngIf="cusErrorMsg" class="is-loading">
                                            {{cusErrorMsg}}
                                        </mat-option>
                                        <mat-option *ngFor="let customer of filteredCustomer2" [value]="customer">
                                            {{ displayCus(customer) }}
                                        </mat-option>
                                    </mat-autocomplete>
                                </div>
                                <div *ngIf="customer_receipt.invalid && (customer_receipt.dirty || customer_receipt.touched)"
                                    class="alert alert-danger">

                                    <div *ngIf="customer_receipt.errors?.['required']">
                                        Customer is required.
                                    </div>
                                </div>



                            </div>
                            <div class="col-sm-8"
                                *ngIf="receiptPaymentForm.get('voucher_type').value === 'purchase' || receiptPaymentForm.get('voucher_type').value === 'expense'">
                                <div class="form-group">
                                    <label>Party</label>
                                    <input type="text" placeholder="Search for a Party"
                                        [formControl]="receiptPaymentForm.get('party_receipt')"
                                        [matAutocomplete]="partyReceipt" class="form-control">
                                    <mat-autocomplete #partyReceipt="matAutocomplete" [displayWith]="displayParty"
                                        (optionSelected)="optionSelectedParty($event)">

                                        <mat-option *ngIf="receiptPaymentForm.get('party_receipt').value?.length < 3"
                                            class="is-loading">Please Enter 3 or more characters</mat-option>
                                        <mat-option *ngIf="partyIsLoading" class="is-loading">Loading...</mat-option>
                                        <mat-option *ngIf="partyErrorMsg"
                                            class="is-loading">{{cusErrorMsg}}</mat-option>
                                        <mat-option *ngFor="let party of filteredParty" [value]="party">
                                            {{ displayParty(party) }}
                                        </mat-option>
                                    </mat-autocomplete>
                                </div>
                                <div *ngIf="party_receipt.invalid && (party_receipt.dirty || party_receipt.touched)"
                                    class="alert alert-danger">

                                    <div *ngIf="party_receipt.errors?.['required']">
                                        Party is required.
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>

                    <div class="row" *ngIf="receiptPaymentForm.get('voucher_type').value !== 'cash in hand'">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label>Payment Account</label>
                                <select class="form-select" formControlName="payment_account">
                                    <option value="" disabled selected>Select Payment Account</option>
                                    <option *ngFor="let bank of companyBankList" [value]="bank.id">{{bank?.name}}
                                    </option>
                                </select>
                            </div>
                            <div *ngIf="payment_account_receipt.invalid && (payment_account_receipt.dirty || payment_account_receipt.touched)"
                                class="alert alert-danger">

                                <div *ngIf="payment_account_receipt.errors?.['required']">
                                    Payment Account is required.
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6"
                            *ngIf="receiptPaymentForm.get('payment_mode').value === 'UPI' && receiptPaymentForm.get('voucher_type').value !== 'expense'">
                            <div class="form-group">
                                <label>UPI Id</label>
                                <input type="text" class="form-control" placeholder="UPI ID" formControlName="upi_id">
                            </div>
                            <div *ngIf="upi_id_receipt.invalid && (upi_id_receipt.dirty || upi_id_receipt.touched)"
                                class="alert alert-danger">

                                <div *ngIf="upi_id_receipt.errors?.['required']">
                                    UPI ID is required.
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6" *ngIf="receiptPaymentForm.get('payment_mode').value === 'Bank'">
                            <div class="form-group">
                                <label>Account No</label>
                                <input type="text" class="form-control" placeholder="Account No"
                                    formControlName="account_no">
                            </div>
                            <div *ngIf="receipt_account_no.invalid && (receipt_account_no.dirty || receipt_account_no.touched)"
                                class="alert alert-danger">

                                <div *ngIf="receipt_account_no.errors?.['required']">
                                    Account No is required.
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row" *ngIf="receiptPaymentForm.get('payment_mode').value === 'Card'">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label>Customer Bank Name</label>
                                <input type="text" class="form-control" placeholder="Customer Bank Name"
                                    formControlName="customer_bank_name">
                            </div>
                            <div *ngIf="receipt_customer_bank_name.invalid && (receipt_customer_bank_name.dirty || receipt_customer_bank_name.touched)"
                                class="alert alert-danger">

                                <div *ngIf="receipt_customer_bank_name.errors?.['required']">
                                    Customer Bank Name is required.
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label>Card Payment Amount</label>
                                <input type="number" class="form-control" placeholder="Card Payment Amount"
                                    formControlName="card_payment_amount">
                            </div>
                            <div *ngIf="receipt_card_payment_amount.invalid && (receipt_card_payment_amount.dirty || receipt_card_payment_amount.touched)"
                                class="alert alert-danger">

                                <div *ngIf="receipt_card_payment_amount.errors?.['required']">
                                    Card Payment Amount is required.
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label>Card Holder Name</label>
                                <input type="text" class="form-control" placeholder="Card Holder Name"
                                    formControlName="card_holder_name">
                            </div>
                            <div *ngIf="receipt_card_holder_name.invalid && (receipt_card_holder_name.dirty || receipt_card_holder_name.touched)"
                                class="alert alert-danger">

                                <div *ngIf="receipt_card_holder_name.errors?.['required']">
                                    Card Holder Name is required.
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label>Card Transaction No</label>
                                <input type="number" class="form-control" placeholder="Card Transaction No"
                                    formControlName="cart_transactions_no">
                            </div>
                            <div *ngIf="receipt_cart_transactions_no.invalid && (receipt_cart_transactions_no.dirty || receipt_cart_transactions_no.touched)"
                                class="alert alert-danger">

                                <div *ngIf="receipt_cart_transactions_no.errors?.['required']">
                                    Card Transaction No. is required.
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row" *ngIf="receiptPaymentForm.get('voucher_type').value === 'expense'">
                        <div class="col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input type="checkbox" formControlName="non_gst"> Non GST
                                </label>
                            </div>
                            <div *ngIf="expense_non_gst.invalid && (expense_non_gst.dirty || expense_non_gst.touched)"
                                class="alert alert-danger">

                                <div *ngIf="expense_non_gst.errors?.['required']">
                                    Non GST is required.
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group mb-0">
                                <label>Remark</label>
                                <input type="text" formControlName="receipt_remark" class="form-control"
                                    placeholder="Enter Remark">
                            </div>
                            <div *ngIf="receipt_remark.invalid && (receipt_remark.dirty || receipt_remark.touched)"
                                class="alert alert-danger">

                                <div *ngIf="receipt_remark.errors?.['required']">
                                    Remark is required.
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-sm-12 d-flex justify-content-center">
                            <button type="submit" class="btn btn-dark modal2BtnPos">Save</button>

                        </div>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>

<!-- Modal 4-->
<div *ngIf="currentItems?.length !== 0 && (currentCustomer !== null && currentCustomer !== undefined)"
    class="modal fade modalRedeem posmodal" id="exampleModal3" tabindex="-1" aria-labelledby="exampleModal3Label"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModal3Label">Redeem Credit</h5>
                <button type="button" class="btn-close creditRedeemClose" data-bs-dismiss="modal" aria-label="Close">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-2"></div>
                    <div class="col-sm-8">
                        <button type="button" class="btn btn-dark w-100">Invoice Balance: {{cartProductTotalAmout ?? 0}}
                        </button>
                    </div>
                    <div class="col-sm-2"></div>
                </div>
                <div class="row mt-4">
                    <div class="col-sm-12">
                        <div class="form-group">
                            <label>Scan Barcode/Type Number</label>
                            <select [formControl]="redeemCreditControl">
                                <option *ngFor="let item of selectedAccountCreditData"
                                    [value]="item?.credit_note_no + ' - ' + (item?.total ?? 0)">
                                    {{item?.credit_note_no}} - {{item?.total ?? 0}}
                                </option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="redeem-modal-details">
                            <h5>
                                Credit Note Date
                            </h5>
                            <h5 *ngIf="selectedAccountCreditData">
                                {{selectedAccountCreditData[0]?.date}}
                            </h5>
                        </div>
                        <div class="redeem-modal-details">
                            <h5>
                                Credit Amount
                            </h5>
                            <h5 *ngIf="selectedAccountCreditData">
                                {{selectedAccountCreditData[0]?.total ?? 0}}
                            </h5>
                        </div>
                        <div class="redeem-modal-details">
                            <h5>
                                Credit Available
                            </h5>
                            <h5 *ngIf="selectedAccountCreditData">
                                {{selectedAccountCreditData[0]?.pending_amount ?? 0}}
                            </h5>
                        </div>
                        <div class="redeem-modal-details">
                            <h5>
                                Apply Credit
                            </h5>
                            <input type="number" class="form-control" [formControl]="applyCredit" value="0" />
                        </div>
                        <p *ngIf="isErrorMessageShown" class="text-danger">Apply Credit value must be less than or
                            equal to the Credit Available</p>
                        <div class="redeem-modal-details mt-2">
                            <h4>
                                ₹Payable Amt
                            </h4>
                            <h4>
                                {{creditRedeemTotalAmount ?? 0}}
                            </h4>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer mt-2">
                <button type="button" class="btn btn-dark modal2BtnPos" (click)="applyCreditRedeem()">Apply
                    Credit</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal 5-->
<div *ngIf="currentItems?.length !== 0 && (currentCustomer !== null && currentCustomer !== undefined)"
    class="modal fade posmodal fullmodal-pos" [ngClass]="{'blur-modal': isModalShown}" id="exampleModal4" tabindex="-1"
    aria-labelledby="exampleModal4Label" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="btn btn-dark paymentModal" data-bs-dismiss="modal" aria-label="Close"
                    (click)="playBeepSound()">Back To Sale</button>
            </div>
            <div class="modal-body">
                <div class="row flex-fill full-modal-row" style="min-height: 0">
                    <div class="col-sm-4 mh-100" style="overflow-y: hidden;">
                        <div class="left">
                            <h3 class="title">Sale Summery</h3>
                            <h5 class="desc">Customer: {{this.currentCustomer}}- 932477888</h5>
                            <div class="product-detail-box my-3">
                                <div class="table-responsive table-pos">
                                    <table class="table table-nowrap mb-0">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>Product</th>
                                                <th>Qty</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="table-light" *ngFor="let cart of cartItems; let i = index">
                                                <td>{{i}}</td>
                                                <td>{{cart.name}}</td>
                                                <td>{{cart.quantity}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="other-product-details">
                                <div class="other-product-detail">
                                    <h5>Tax Amount</h5>
                                    <h5>0.00</h5>
                                </div>
                                <div class="other-product-detail">
                                    <h5>Total Amounts</h5>
                                    <h5>{{this.totalAmount()}}</h5>
                                </div>
                                <div class="other-product-detail">
                                    <h5>Round Off</h5>
                                    <h5>0.00</h5>
                                </div>
                            </div>
                            <div class="payment-details">
                                <h3>{{this.totalAmount()}}</h3>
                                <h5>Payable Amount</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-8 mh-100" style="overflow-y: scroll;">
                        <div class="right">
                            <div class="total-amt">
                                <h3>Pay</h3>
                                <div class="input-group pos-i-grp table-black-grp">
                                    <span class="input-group-text" id="basic-addon1">₹
                                    </span>
                                    <input type="text" value="{{this.totalAmount()}}" class="form-control"
                                        aria-label="Username" aria-describedby="basic-addon1">
                                </div>
                            </div>


                            <form [formGroup]="paymentForm">
                                <div class="address-details-wrapper">
                                    <div class="w-100 text-right my-3">
                                        <button class="p-2 px-3 border-0 btn btn-dark"
                                            (click)="addMorePaymentDetails()">
                                            <p class="addMore-btn"><span class="plus-icon">+</span> Add More Payment</p>
                                        </button>
                                    </div>
                                    <div formArrayName="addMorePayment" class="mb-3 pb-3">
                                        <div *ngFor="let d of addMorePaymentData?.controls; let i = index"
                                            [formGroupName]="i"
                                            style="border: 1px solid rgba(145, 158, 171, 0.32); margin-top: 10px;">
                                            <div class="col-12 d-flex align-items-center justify-content-end mt-2">
                                                <span (click)="removePaymentDetails(i)" class="btn me-2"
                                                    style="color: red;" *ngIf="i > 0">
                                                    <svg style="width:28px; height:28px"
                                                        xmlns="http://www.w3.org/2000/svg" width="28" height="28"
                                                        fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16">
                                                        <path
                                                            d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                                                        <path
                                                            d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" />
                                                    </svg>
                                                </span>
                                            </div>
                                            <div class="row m-2">
                                                <div class="col-lg-3 col-sm-3 col-12">
                                                    <div class="form-group me-3">
                                                        <label>Amount:</label>
                                                        <input formControlName="amount" type="text" />
                                                        <span class="text-danger"
                                                            *ngIf="d.get('amount')?.invalid && d.get('amount')?.touched">Amount
                                                            is required</span>
                                                    </div>
                                                </div>
                                                <div class="col-lg-3 col-sm-3 col-12">
                                                    <div class="form-group me-3">
                                                        <label>Payment Method:</label>
                                                        <select formControlName="receipt_type"
                                                            (change)="receiptTypeChange($event, i)" class="form-select">
                                                            <option value="" disabled selected>Select Method</option>
                                                            <option value="Cash">Cash</option>
                                                            <option value="Bank">Bank</option>
                                                            <option value="PayLater">PayLater</option>
                                                        </select>
                                                        <span class="text-danger"
                                                            *ngIf="d.get('receipt_type')?.invalid && d.get('receipt_type')?.touched">Select
                                                            a payment method</span>
                                                    </div>
                                                </div>
                                                <div *ngIf="d.get('receipt_type').value !== 'PayLater'"
                                                    class="col-lg-3 col-md-6 col-12">
                                                    <div class="form-group">
                                                        <label>Payment Account*</label>
                                                        <select formControlName="payment_account" class="form-control"
                                                            (change)="onSelectPaymentAccount($event.target.value, i)">
                                                            <option value="" disabled selected>Select Payment Account
                                                            </option>
                                                            <option *ngFor="let account of accountListAlies[i]"
                                                                [value]="account?.id">
                                                                {{ account.title }}
                                                            </option>
                                                        </select>
                                                        <span class="text-danger"
                                                            *ngIf="d.get('payment_account')?.invalid && d.get('payment_account')?.touched">Select
                                                            Payment Account</span>
                                                    </div>
                                                </div>
                                                <div class="col-lg-3 col-sm-3 col-12">
                                                    <div class="form-group me-3">
                                                        <label>Note:</label>
                                                        <input formControlName="note" type="text" />
                                                    </div>
                                                </div>

                                                <div class="row m-0" *ngIf="d.get('receipt_type').value === 'Bank'">
                                                    <div class="col-lg-3 col-sm-3 col-12">
                                                        <div class="form-group me-3">
                                                            <label>Transaction Date:</label>
                                                            <input class="transaction-date-wrapper"
                                                                formControlName="transaction_date" type="date" />
                                                            <span class="text-danger"
                                                                *ngIf="d.get('transaction_date')?.invalid && d.get('transaction_date')?.touched">Transaction
                                                                Date is required</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-3 col-sm-3 col-12">
                                                        <div class="form-group me-3">
                                                            <label>Payment Mode:</label>
                                                            <select formControlName="payment_mode" class="form-select">
                                                                <option *ngFor="let item of paymentModeList"
                                                                    value="{{item?.id}}" selected>{{item?.title}}
                                                                </option>
                                                            </select>
                                                            <span class="text-danger"
                                                                *ngIf="d.get('payment_mode')?.invalid && d.get('payment_mode')?.touched">Payment
                                                                Mode is required</span>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-3 col-sm-3 col-12">
                                                        <div class="form-group me-3">
                                                            <label>Transaction Id:</label>
                                                            <input formControlName="transaction_id" type="text" />
                                                            <span class="text-danger"
                                                                *ngIf="d.get('transaction_id')?.invalid && d.get('transaction_id')?.touched">Transaction
                                                                ID is required</span>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div *ngIf="d.get('receipt_type').value === 'PayLater'"
                                                    class="col-lg-3 col-sm-3 col-12">
                                                    <div class="form-group me-3">
                                                        <label>Day:</label>
                                                        <select formControlName="days"
                                                            (change)="onSelectDay($event.target.value, i)">
                                                            <option value="" selected disabled>Select days
                                                            </option>
                                                            <option value="{{payment?.days}}"
                                                                *ngFor="let payment of paymentTermsList">
                                                                {{payment?.title}}
                                                            </option>
                                                        </select>
                                                        <span class="text-danger"
                                                            *ngIf="d.get('day')?.invalid && d.get('day')?.touched">Day
                                                            is required</span>
                                                    </div>
                                                </div>

                                                <div *ngIf="d.get('receipt_type').value === 'PayLater'"
                                                    class="col-lg-3 col-sm-3 col-12">
                                                    <div class="form-group me-3">
                                                        <label>Date:</label>
                                                        <input class="transaction-date-wrapper" type="date"
                                                            formControlName="date" />
                                                        <span class="text-danger"
                                                            *ngIf="d.get('date')?.invalid && d.get('date')?.touched">Date
                                                            is required</span>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>




                            <!--  <div class="row mt-3">
                                <div class="col-sm-12 payment-wrapper-p">
                                    <div class="payment-wrapper">
                                        <div class="form-group me-3">
                                            <label>Received Amount:</label>
                                            <input type="text" class="form-control" placeholder="Received Amount:">
                                        </div>
                                        <div class="form-group me-3">
                                            <label>Payment Method:</label>
                                            <select class="form-select">
                                                <option>-- Select --</option>
                                                <option>Cash</option>
                                                <option>Card</option>
                                                <option>UPI</option>
                                            </select>
                                        </div>
                                        <button type="button" class="btn-remove" aria-label="Close">
                                            <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-sm-12 payment-wrapper-p">
                                    <div class="payment-wrapper">
                                        <div class="form-group me-3">
                                            <label>Received Amount:</label>
                                            <input type="text" class="form-control" placeholder="Received Amount:">
                                        </div>
                                        <div class="form-group me-3">
                                            <label>Payment Method:</label>
                                            <select class="form-select">
                                                <option>-- Select --</option>
                                                <option>Option 1</option>
                                                <option>Option 2</option>
                                            </select>
                                        </div>
                                        <div class="form-group me-3">
                                            <label>Payment Account:</label>
                                            <select class="form-select">
                                                <option>-- Select --</option>
                                                <option>Option 1</option>
                                                <option>Option 2</option>
                                            </select>
                                        </div>
                                        <button type="button" class="btn-remove" aria-label="Close">
                                            <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                                        </button>
                                    </div>
                                    <div class="payment-wrapper2">
                                        <div class="form-group">
                                            <label>UPI ID::</label>
                                            <input type="text" class="form-control" placeholder="UPI ID">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-sm-12 payment-wrapper-p">
                                    <div class="payment-wrapper">
                                        <div class="form-group me-3">
                                            <label>Received Amount:</label>
                                            <input type="text" class="form-control" placeholder="Received Amount:">
                                        </div>
                                        <div class="form-group me-3">
                                            <label>Payment Method:</label>
                                            <select class="form-select">
                                                <option>-- Select --</option>
                                                <option>Option 1</option>
                                                <option>Option 2</option>
                                            </select>
                                        </div>
                                        <button type="button" class="btn-remove" aria-label="Close">
                                            <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                            </div> -->
                            <div class="row mt-3">
                                <div class="col-sm-12">
                                    <!-- <button type="button" class="add-more-details-btn btn btn-dark my-3"
                                        (click)="addMoreDetailsHandler()"><i class="fa fa-plus me-1"
                                            data-bs-toggle="tooltip" title="fa fa-long-arrow-right"></i>
                                        {{addMoreDetails ? 'Hide More Details' : 'Add More Payment'}}</button> -->
                                    <button type="button" class="btn btn-dark w-100" (click)="proceedToPay()">
                                        Proceed To Pay <i class="fa fa-arrow-right ms-1" data-bs-toggle="tooltip"
                                            title="fa fa-long-arrow-right"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- <div class="modal-footer mt-2">
            <button type="button" class="btn btn-dark modal2BtnPos">Apply Credit</button>
        </div> -->
        </div>
    </div>
</div>

<!-- Modal 6-->
<div *ngIf="currentItems?.length !== 0 && (currentCustomer !== null && currentCustomer !== undefined)"
    class="modal fade posmodal" id="exampleModal5" tabindex="-1" aria-labelledby="exampleModal5Label"
    aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <!-- <div class="modal-header">
          <h5 class="modal-title" id="exampleModal5Label">Calculator</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
          </button>
        </div> -->
            <div class="modal-body">
                <form (ngSubmit)="cashPaymentGenerateOrder('normal')">
                    <div class="row mb-3">
                        <div class="col-sm-4">
                            <div class="form-group mb-0">
                                <label>Due Amount</label>
                                <input type="number" value="{{this.totalAmount()}}" class="form-control"
                                    placeholder="Cash In Hand">
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group mb-0">
                                <label>Tendered</label>
                                <input type="number" [(ngModel)]="tenderedAmount" [ngModelOptions]="{standalone: true}"
                                    class="form-control" placeholder="Tendered">
                            </div>
                            <span class="text-danger"
                                *ngIf="isCashFormSubmitted && tenderedAmount < totalAmount()">Tendered amount should
                                be greater than due amount.</span>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group mb-0">
                                <label>Change</label>
                                <input type="number" value="{{this.changeAmt()}}" disabled class="form-control"
                                    placeholder="Change">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-5">
                            <div class="cal-wrapper">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="cal-div-wrapper">
                                            <div class="cal-div" (click)="changeTenderedAmt(1)">1</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(2)">2</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(3)">3</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(100)">+100</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(1000)">+1000</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="cal-div-wrapper">
                                            <div class="cal-div" (click)="changeTenderedAmt(4)">4</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(5)">5</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(6)">6</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(200)">+200</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(2000)">+2000</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="cal-div-wrapper">
                                            <div class="cal-div" (click)="changeTenderedAmt(7)">7</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(8)">8</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(9)">9</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(500)">+500</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(5000)">+5000</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="cal-div-wrapper">
                                            <div class="cal-div" (click)="changeTenderedAmt(10)">10</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(20)">20</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(50)">50</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(1000)">+1000</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(10000)">+10000</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-7">
                            <div>
                                <button *ngIf="!isInternetConnection" type="button" class="btn btn-dark mb-2 w-100"
                                    (click)="this.generateOrder()">Submit</button>
                                <button *ngIf="isInternetConnection" type="submit"
                                    class="btn btn-dark mb-2 w-100">Submit</button>
                            </div>
                            <div>
                                <button id="exampleModal5Close" type="button" class="btn btn-dark w-100 cashModalClose"
                                    data-bs-dismiss="modal" aria-label="Close" (click)="playBeepSound()">Cancel</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <!-- <div class="modal-footer mt-5">
          <button type="button" class="btn btn-dark modal1BtnPos">Start Selling</button>
        </div> -->
        </div>
    </div>
</div>

<!-- Modal 7-->
<div *ngIf="currentItems?.length !== 0 && (currentCustomer !== null && currentCustomer !== undefined)"
    class="modal fade posmodal" id="exampleModal6" tabindex="-1" aria-labelledby="exampleModal6Label"
    aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModal6Label">Current Register (19 Mar 2022 11:10 am - 19 Mar 2022
                    11:10 am)</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-3">
                        <div class="register-left-wrapper">
                            <div class="register-left-div">
                                <h4>Opening Cash</h4>
                                <h4>500</h4>
                            </div>
                            <div class="register-left-div">
                                <h4>Opening Cash</h4>
                                <h4>500</h4>
                            </div>
                            <div class="register-left-div">
                                <h4>Opening Cash</h4>
                                <h4>500</h4>
                            </div>
                            <div class="register-left-div">
                                <h4>Opening Cash</h4>
                                <h4>500</h4>
                            </div>
                            <div class="register-left-div">
                                <h4>Opening Cash</h4>
                                <h4>500</h4>
                            </div>
                            <div class="register-left-div">
                                <h4>Opening Cash</h4>
                                <h4>500</h4>
                            </div>
                            <div class="register-left-div">
                                <h4>Opening Cash</h4>
                                <h4>500</h4>
                            </div>
                            <div class="register-left-div">
                                <h4>Opening Cash</h4>
                                <h4>500</h4>
                            </div>
                            <div class="register-left-div">
                                <h4>Opening Cash</h4>
                                <h4>500</h4>
                            </div>
                            <div class="register-left-div">
                                <h4>Opening Cash</h4>
                                <h4>500</h4>
                            </div>
                            <div class="register-left-div">
                                <h4>Opening Cash</h4>
                                <h4>500</h4>
                            </div>
                            <div class="register-left-div">
                                <h4>Opening Cash</h4>
                                <h4>500</h4>
                            </div>
                            <div class="register-left-div">
                                <h4>Opening Cash</h4>
                                <h4>500</h4>
                            </div>
                            <div class="register-left-div">
                                <h4>Opening Cash</h4>
                                <h4>500</h4>
                            </div>
                            <div class="register-left-div">
                                <h4>Opening Cash</h4>
                                <h4>500</h4>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="register-table">
                            <div class="table-responsive">
                                <table class="table table-striped mb-0">
                                    <thead>
                                        <tr>
                                            <th>Firstname</th>
                                            <th>Lastname</th>
                                            <th>Email</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>John</td>
                                            <div class="form-group">
                                                <input type="text" class="form-control"
                                                    placeholder="Scan Barcode/Type Number" value="0">
                                            </div>
                                            <td>john&#64;example.com</td>
                                        </tr>
                                        <tr>
                                            <td>John</td>
                                            <div class="form-group">
                                                <input type="text" class="form-control"
                                                    placeholder="Scan Barcode/Type Number" value="0">
                                            </div>
                                            <td>john&#64;example.com</td>
                                        </tr>
                                        <tr>
                                            <td>John</td>
                                            <div class="form-group">
                                                <input type="text" class="form-control"
                                                    placeholder="Scan Barcode/Type Number" value="0">
                                            </div>
                                            <td>john&#64;example.com</td>
                                        </tr>
                                        <tr>
                                            <td>John</td>
                                            <div class="form-group">
                                                <input type="text" class="form-control"
                                                    placeholder="Scan Barcode/Type Number" value="0">
                                            </div>
                                            <td>john&#64;example.com</td>
                                        </tr>
                                        <tr>
                                            <td>John</td>
                                            <div class="form-group">
                                                <input type="text" class="form-control"
                                                    placeholder="Scan Barcode/Type Number" value="0">
                                            </div>
                                            <td>john&#64;example.com</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-3">
                        <div class="form-group">
                            <label>Bank Account</label>
                            <select class="form-select">
                                <option>-- Select --</option>
                                <option>Option 1</option>
                                <option>Option 2</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Scan Barcode/Type Number</label>
                            <input type="text" class="form-control" placeholder="Scan Barcode/Type Number">
                        </div>
                        <div class="form-group">
                            <label>Scan Barcode/Type Number</label>
                            <input type="text" class="form-control" placeholder="Scan Barcode/Type Number">
                        </div>
                        <div class="form-group">
                            <label>Scan Barcode/Type Number</label>
                            <input type="text" class="form-control" placeholder="Scan Barcode/Type Number">
                        </div>
                        <div class="form-group">
                            <label>Scan Barcode/Type Number</label>
                            <input type="text" class="form-control" placeholder="Scan Barcode/Type Number">
                        </div>
                        <div class="form-group">
                            <label>Scan Barcode/Type Number</label>
                            <input type="text" class="form-control" placeholder="Scan Barcode/Type Number">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-dark modal2BtnPos" data-bs-dismiss="modal" aria-label="Close">Close
                    Register</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal 8-->
<div class="modal fade posmodal" id="exampleModal7" tabindex="-1" aria-labelledby="exampleModal7Label"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModal7Label">Sync Orders</h5>
                <button type="button" (click)="closeSyncModal()" class="btn-close" data-bs-dismiss="modal"
                    aria-label="Close">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body p-4 px-3">
                <h4>Do you want to sync your orders?</h4>
            </div>
            <div class="modal-footer d-flex align-items-center justify-content-end p-3">
                <button type="button" (click)="closeSyncModal()" class="btn close-btn-wrapper m-0 me-3 p-2"
                    data-bs-dismiss="modal" aria-label="Close">Close</button>
                <button type="button" class="btn btn-dark p-2 m-0" (click)="syncOfflineOrder()">Sync Orders</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade posmodal" id="batchModal" tabindex="-1" aria-labelledby="batchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="batchModalLabel">Select Product Batch</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                    (click)="playBeepSound()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- <div class="radio" *ngFor="let batch of currentProduct?.batch">
                <label>
                    <input type="radio" name="batchProduct" value="{{batch?.id}}" [(ngModel)]="currentBatch" [ngModelOptions]="{standalone: true}" > Price: {{batch?.selling_price_offline}}
                </label>
            </div> -->
                <table class="table mb-0">
                    <thead>
                        <tr>
                            <!-- <th>Sr.No.</th> -->
                            <th></th>
                            <th>MRP</th>
                            <th>Selling Price Offline</th>
                            <th>Stock</th>
                            <th>Minimum Stock Threshold</th>
                            <th>Max Order Quantity</th>
                            <th>Sale Tax</th>
                            <!-- <th>Discount %</th> -->
                            <th>Additional Discount %</th>
                        </tr>
                    </thead>
                    <tbody>
                        <ng-container>
                            <tr *ngFor="let batch of currentProduct?.batch;let i=index">
                                <td>
                                    <label>
                                        <input type="radio" name="batchProduct" value="{{batch?.id}}"
                                            (change)="selectedBatch(batch,i)" [(ngModel)]="currentBatch"
                                            [ngModelOptions]="{standalone: true}">
                                    </label>
                                </td>
                                <td>{{batch?.mrp}}</td>
                                <td>{{batch?.selling_price_offline}}</td>
                                <td>{{batch?.stock}}</td>
                                <td>{{batch?.minimum_stock_threshold}}</td>
                                <td>{{batch?.max_order_quantity}}</td>
                                <td>{{batch?.sale_tax}}</td>
                                <!-- <td>{{batch?.discount}}</td>                         -->
                                <td>{{batch?.additional_discount}}</td>
                            </tr>
                        </ng-container>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <!-- <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button> -->
                <button type="button" class="btn btn-dark modal1BtnPos" (click)="confirmBatch()">Confirm</button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade posmodal" id="addChargesModal" tabindex="-1" aria-labelledby="addChargesModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addChargesModalLabel">Add Additional Charges</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                    (click)="playBeepSound()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <table class="table mb-0">
                    <thead>
                        <tr>
                            <th>Additional Charge</th>
                            <th>Value</th>
                            <th>Tax</th>
                            <th>Total</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let charges of currentOrderAdditionalCharges;let ci=index">
                            <td>
                                <select class="form-select" (change)="updateACInCAC(ci, $event)"
                                    [(ngModel)]="charges.additional_charge" [ngModelOptions]="{standalone: true}">
                                    <option>-- Select --</option>
                                    <option value="{{d.id}}" *ngFor="let d of additionalChargesList">
                                        {{d.additional_charge}}</option>
                                </select>
                            </td>
                            <td>
                                <div class="input-group">
                                    <input type="text" (change)="updateValueInCAC(ci, $event)" class="form-control"
                                        placeholder="value" [(ngModel)]="charges.value"
                                        [ngModelOptions]="{standalone: true}" aria-label="value"
                                        aria-describedby="basic-addon2">
                                    <span class="input-group-text" id="basic-addon2"
                                        (click)="updateValueTypeInCAC(ci, charges.value_type)">{{charges.value_type ===
                                        'percentage' ? '%' : '&#8377;'}}</span>
                                </div>
                            </td>
                            <td>
                                <select class="form-select" (change)="updateTaxInCAC(ci, $event)"
                                    [(ngModel)]="charges.tax" [ngModelOptions]="{standalone: true}">
                                    <option>-- Select --</option>
                                    <option value="{{d.id}}" *ngFor="let d of taxesList">{{d.title}}</option>
                                </select>
                            </td>
                            <td>{{charges.total}}</td>
                            <td><button class="table-cross-btn" (click)="deleteRowInCAC(ci, $event)">
                                    <i class="fa fa-times" title="fa fa-times"></i>
                                </button></td>
                        </tr>

                    </tbody>
                    <tfoot>
                        <th>
                            <button class="me-1 btn btn-link" (click)="addRowToCAC()">Add More Additional
                                Charge</button>
                        </th>
                        <th></th>
                        <th></th>
                        <th>{{currentTotalAdditionalCharges()}}</th>
                        <th></th>
                    </tfoot>
                </table>

            </div>
            <div class="modal-footer mt-5">
                <!-- <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button> -->
                <button type="button" class="btn btn-dark modal1BtnPos" data-bs-dismiss="modal"
                    (click)="playBeepSound()">Confirm</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade posmodal" id="posOrdersModal" tabindex="-1" aria-labelledby="posOrdersModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addChargesModalLabel">POS Orders</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                    (click)="playBeepSound()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <table class="table mb-0">
                    <thead>
                        <tr>
                            <!-- <th>Sr.No.</th> -->
                            <th>Invoice No.</th>
                            <th>Date</th>
                            <th>Customer Name</th>
                            <th>Customer Ph.No</th>
                            <th>Total Amt</th>
                            <th>Due Amt</th>
                            <!-- <th>Order Type</th> -->
                            <th>Payment Mode</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let order of posOrders">
                            <!-- <tr *ngFor="let order of posOrders | paginate: { itemsPerPage: 10, currentPage: page }"> -->
                            <!-- <td>{{order.index}}</td> -->
                            <td>{{order?.id}}</td>
                            <td>{{getDateForOrders(order?.date)}}</td>
                            <td>{{order?.customer?.name}}</td>
                            <td>{{order?.customer?.mobile_no}}</td>
                            <td>{{order?.total_amount}}</td>
                            <td>{{order?.dueAmount}}</td>
                            <td>{{order?.payment_mode}}</td>
                        </tr>

                    </tbody>
                    <!-- <tfoot>
                </tfoot> -->
                </table>

            </div>
            <div class="modal-footer">
                <!-- <div class="col-sm-12">
                <pagination-controls (pageChange)="page = $event"></pagination-controls>

                </div> -->
                <div class="d-flex w-100 justify-content-end my-4">
                    <ul class="pagination-list">
                        <li [class.disabled]="page === 1" (click)="page > 1 && pageChange(page - 1)">
                            <a href="javascript:void(0)">
                                <i class="fa fa-angle-double-left"></i> Previous
                            </a>
                        </li>
                        <li *ngFor="let p of getPageNumbers()" [ngClass]="{'active-page': p === page}"
                            (click)="pageChange(p)">
                            <a href="javascript:void(0)">{{ p }}</a>
                        </li>
                        <li [class.disabled]="page === getTotalPages()"
                            (click)="page < getTotalPages() && pageChange(page + 1)">
                            <a href="javascript:void(0)">
                                Next <i class="fa fa-angle-double-right"></i>
                            </a>
                        </li>
                    </ul>
                </div>
                <!-- <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button> -->
                <button type="button" class="btn btn-dark modal1BtnPos" data-bs-dismiss="modal"
                    (click)="playBeepSound()">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal UPI-->
<div *ngIf="currentItems?.length !== 0 && (currentCustomer !== null && currentCustomer !== undefined)"
    class="modal fade posmodal" id="upiMethodModal" tabindex="-1" aria-labelledby="upiModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="upiModalLabel">UPI Details</h5>
                <button type="button" class="btn-close upiModalClose" data-bs-dismiss="modal" aria-label="Close"
                    (click)="playBeepSound()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form [formGroup]="upiPaymentMethodForm" (ngSubmit)="upiPaymentGenerateOrder('normal')">

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Payment Account</label>
                                <select class="form-select" formControlName="payment_account">
                                    <option value="" disabled selected>Select Payment Account</option>
                                    <option *ngFor="let bank of companyBankList" [value]="bank.id">{{bank?.name}}
                                    </option>
                                </select>
                            </div>
                            <div *ngIf="payment_account_upi.invalid && (payment_account_upi.dirty || payment_account_upi.touched)"
                                class="alert alert-danger">

                                <div *ngIf="payment_account_upi.errors?.['required']">
                                    Payment Account is required.
                                </div>
                            </div>

                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>UPI Id</label>
                                <input type="text" class="form-control" placeholder="UPI ID" formControlName="upi_id">
                            </div>
                            <div *ngIf="upi_id.invalid && (upi_id.dirty || upi_id.touched)" class="alert alert-danger">

                                <div *ngIf="upi_id.errors?.['required']">
                                    UPI ID is required.
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Transaction ID</label>
                                <input type="text" class="form-control" placeholder="Transaction ID"
                                    formControlName="transaction_id">
                            </div>
                            <div *ngIf="transaction_id.invalid && (transaction_id.dirty || transaction_id.touched)"
                                class="alert alert-danger">

                                <div *ngIf="transaction_id.errors?.['required']">
                                    Transaction ID is required.
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-sm-12 d-flex justify-content-center">
                            <button type="submit" class="btn btn-dark">Save</button>
                        </div>
                    </div>

                </form>
            </div>
            <!-- <div class="modal-footer mt-2">
            <button type="button" class="btn btn-dark">Finalize Payment</button>
        </div> -->
        </div>
    </div>
</div>



<!-- Modal Bank-->
<div *ngIf="currentItems?.length !== 0 && (currentCustomer !== null && currentCustomer !== undefined)"
    class="modal fade posmodal" id="bankMethodModal" tabindex="-1" aria-labelledby="bankModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="bankModalLabel">Bank Details</h5>
                <button type="button" class="btn-close bankModalClose" data-bs-dismiss="modal" aria-label="Close"
                    (click)="playBeepSound()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form [formGroup]="bankPaymentMethodForm" (ngSubmit)="bankPaymentGenerateOrder('normal')">

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Payment Account</label>
                                <select class="form-select" formControlName="payment_account">
                                    <option value="" disabled selected>Select Payment Account</option>
                                    <option *ngFor="let bank of companyBankList" [value]="bank.id">{{bank?.name}}
                                    </option>
                                </select>
                            </div>
                            <div *ngIf="payment_account_bank.invalid && (payment_account_bank.dirty || payment_account_bank.touched)"
                                class="alert alert-danger">

                                <div *ngIf="payment_account_bank.errors?.['required']">
                                    Payment Account is required.
                                </div>
                            </div>

                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Account No</label>
                                <input type="text" class="form-control" placeholder="Account No"
                                    formControlName="account_no">
                            </div>
                            <div *ngIf="account_no.invalid && (account_no.dirty || account_no.touched)"
                                class="alert alert-danger">

                                <div *ngIf="account_no.errors?.['required']">
                                    Account No is required.
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-sm-12 d-flex justify-content-center">
                            <button type="submit" class="btn btn-dark">Save</button>
                        </div>
                    </div>

                </form>
            </div>
            <!-- <div class="modal-footer mt-2">
            <button type="button" class="btn btn-dark">Finalize Payment</button>
        </div> -->
        </div>
    </div>
</div>

<!-- Modal Pay Later-->
<div *ngIf="(currentItems?.length !== 0) && (currentCustomer !== null && currentCustomer !== undefined) && (creditLimit !== 0) && (isPayLaterModalShown)"
    class="modal fade posmodal" id="payLaterMethodModal" tabindex="-1" aria-labelledby="payLaterModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="payLaterModalLabel">Invoice</h5>
                <button type="button" class="btn-close payLaterModalClose" data-bs-dismiss="modal" aria-label="Close"
                    (click)="playBeepSound()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form [formGroup]="payLaterMethodForm" (ngSubmit)="payLaterGenerateOrder()">

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Payment Terms</label>
                                <select class="form-select" formControlName="day">
                                    <option value="" disabled selected>Select Payment Account</option>
                                    <option *ngFor="let terms of paymentTermsList" [value]="terms.days">{{terms?.title}}
                                    </option>
                                </select>
                            </div>
                            <div *ngIf="pay_later_day.invalid && (pay_later_day.dirty || pay_later_day.touched)"
                                class="alert alert-danger">

                                <div *ngIf="pay_later_day.errors?.['required']">
                                    Payment Terms is required.
                                </div>
                            </div>

                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Due Date</label>
                                <input type="date" class="form-control" placeholder="Due Date" formControlName="date">
                            </div>
                            <div *ngIf="pay_later_date.invalid && (pay_later_date.dirty || pay_later_date.touched)"
                                class="alert alert-danger">

                                <div *ngIf="pay_later_date.errors?.['required']">
                                    Due Date is required.
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group row">
                                <label class="col-lg-5">Send Reminder</label>
                                <div class="col-lg-7">
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" formControlName="is_send_reminder"
                                            id="reminder_true" value="true">
                                        <label class="form-check-label" for="reminder_true">
                                            Yes
                                        </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" formControlName="is_send_reminder"
                                            id="reminder_false" value="false">
                                        <label class="form-check-label" for="reminder_false">
                                            No
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="is_send_reminder.invalid && (is_send_reminder.dirty || is_send_reminder.touched)"
                                class="alert alert-danger">

                                <div *ngIf="is_send_reminder.errors?.['required']">
                                    Send Reminder is required.
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-sm-12 d-flex justify-content-center">
                            <button type="submit" class="btn btn-dark">Save</button>
                        </div>
                    </div>

                </form>
            </div>
            <!-- <div class="modal-footer mt-2">
            <button type="button" class="btn btn-dark">Finalize Payment</button>
        </div> -->
        </div>
    </div>
</div>

<!-- Modal Card Payment-->
<div *ngIf="currentItems?.length !== 0 && (currentCustomer !== null && currentCustomer !== undefined)"
    class="modal fade posmodal" id="cardMethodModal" tabindex="-1" aria-labelledby="cardModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="cardModalLabel">Card Details</h5>
                <button type="button" class="btn-close cardModalClose" data-bs-dismiss="modal" aria-label="Close"
                    (click)="playBeepSound()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form [formGroup]="cardPaymentMethodForm" (ngSubmit)="cardPaymentGenerateOrder('normal')">

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Payment Account</label>
                                <select class="form-select" formControlName="payment_account">
                                    <option value="" disabled selected>Select Payment Account</option>
                                    <option *ngFor="let bank of companyBankList" [value]="bank.id">{{bank?.name}}
                                    </option>
                                </select>
                            </div>
                            <div *ngIf="payment_account_card.invalid && (payment_account_card.dirty || payment_account_card.touched)"
                                class="alert alert-danger">

                                <div *ngIf="payment_account_card.errors?.['required']">
                                    Payment Account is required.
                                </div>
                            </div>

                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Customer Bank Name</label>
                                <input type="text" class="form-control" placeholder="Customer Bank Name"
                                    formControlName="customer_bank_name">
                            </div>
                            <div *ngIf="customer_bank_name.invalid && (customer_bank_name.dirty || customer_bank_name.touched)"
                                class="alert alert-danger">

                                <div *ngIf="customer_bank_name.errors?.['required']">
                                    Customer Bank Name is required.
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Card Payment Amount</label>
                                <input type="number" class="form-control" placeholder="Card Payment Amount"
                                    formControlName="card_payment_amount">
                            </div>
                            <div *ngIf="card_payment_amount.invalid && (card_payment_amount.dirty || card_payment_amount.touched)"
                                class="alert alert-danger">

                                <div *ngIf="card_payment_amount.errors?.['required']">
                                    Card Payment Amount is required.
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Card Holder Name</label>
                                <input type="text" class="form-control" placeholder="Card Holder Name"
                                    formControlName="card_holder_name">
                            </div>
                            <div *ngIf="card_holder_name.invalid && (card_holder_name.dirty || card_holder_name.touched)"
                                class="alert alert-danger">

                                <div *ngIf="card_holder_name.errors?.['required']">
                                    Card Holder Name is required.
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Card Transaction No</label>
                                <input type="number" class="form-control" placeholder="Card Transaction No"
                                    formControlName="cart_transactions_no">
                            </div>
                            <div *ngIf="cart_transactions_no.invalid && (cart_transactions_no.dirty || cart_transactions_no.touched)"
                                class="alert alert-danger">

                                <div *ngIf="cart_transactions_no.errors?.['required']">
                                    Card Transaction No. is required.
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-sm-12 d-flex justify-content-center">
                            <button type="submit" class="btn btn-dark">Save</button>
                        </div>
                    </div>

                </form>
            </div>
            <!-- <div class="modal-footer mt-2">
            <button type="button" class="btn btn-dark">Finalize Payment</button>
        </div> -->
        </div>
    </div>
</div>

<!-- Hold Off Canvas -->
<div class="offcanvas offcanvas-end pos-offcanvas" tabindex="-1" id="offcanvasExample"
    aria-labelledby="offcanvasExampleLabel">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasExampleLabel">On Hold</h5>
        <button type="button" class="btn-close text-reset holdClose" data-bs-dismiss="offcanvas" aria-label="Close"
            (click)="playBeepSound()">
            <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
        </button>
    </div>
    <div class="offcanvas-body">
        <div class="row" *ngFor="let bill of heldBills" (click)="resumeBill(bill.id)">
            <div class="col-sm-12">
                {{test(bill)}}
                <div class="on-hold-card">
                    <button type="button" class="holdRemove" (click)="removeFromHold(bill.id)">
                        <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                    </button>
                    <div class="on-hold-card-header">
                        <h5>ORD: {{bill?.id}}</h5>
                        <h5>Amt: ₹{{bill.totalAmt}}</h5>
                    </div>
                    <h5 class="mb-1">Contact: {{bill.currentCustomer.mobile_no}}</h5>
                    <h5>Created On: 2023-02-23 1:21pm</h5>
                    <!-- <div class="d-flex justify-content-between align-items-center mt-3">
                        <button class="btn btn-dark" (click)="resumeBill(bill.id)">Resume</button>
  <button  class="btn btn-dark" (click)="removeFromHold(bill.id)">Remove</button>
                    </div> -->
                </div>
            </div>
            <!-- <div class="col-sm-12 mt-3">
                <div class="on-hold-card">
                    <div class="on-hold-card-header">
                        <h5>ORD: 6766</h5>
                        <h5>Amt: ₹766</h5>
                    </div>
                    <h5 class="mb-1">Contact Name: Aditi Kapoor- 8389299999</h5>
                    <h5>Created On: 2023-02-23 1:21pm</h5>
                </div>
            </div> -->
        </div>
    </div>
</div>

<!-- <div *ngIf="loader" class="pos-loader">
  <svg viewBox="25 25 50 50">
    <circle r="20" cy="50" cx="50"></circle>
  </svg>  
  </div> -->

<!-- Expense Payment Modal -->
<div class="modal fade modalPayment posmodal" id="expenseModal" tabindex="-1" aria-labelledby="expenseModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="expenseModalLabel">Expense</h5>
                <button type="button" class="btn-close expenseModalClose" data-bs-dismiss="modal" aria-label="Close"
                    (click)="playBeepSound()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- <form [formGroup]="expensePaymentForm" (ngSubmit)="formSubmitExpense()">

            <div class="row">
                
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Amount</label>
                                    <input type="number" formControlName="amount" class="form-control" placeholder="Enter Amount">
                                </div>
                                <div *ngIf="expense_amount.invalid && (expense_amount.dirty || expense_amount.touched)"
    class="alert alert-danger">

  <div *ngIf="expense_amount.errors?.['required']">
    Amount is required.
  </div>
</div>
</div>
<div class="col-sm-6">
    <div class="form-group">
        <label>Party</label>
        <input type="text"
        placeholder="Search for a Party"
        [formControl]="expensePaymentForm.get('party')"
        [matAutocomplete]="partyExpense"
        class="form-control">
 <mat-autocomplete #partyExpense="matAutocomplete" [displayWith]="displayParty" (optionSelected)="optionSelectedPartyExpense($event)">
     
     <mat-option *ngIf="expensePaymentForm.get('party').value?.length < 3" class="is-loading">Please Enter 3 or more characters</mat-option>
     <mat-option *ngIf="partyIsLoading" class="is-loading">Loading...</mat-option>
     <mat-option *ngIf="partyErrorMsg" class="is-loading">{{cusErrorMsg}}</mat-option>
   <mat-option *ngFor="let party of filteredPartyExpense" [value]="party">
     {{ displayParty(party) }}
   </mat-option>
 </mat-autocomplete>
    </div>
    <div *ngIf="expense_party.invalid && (expense_party.dirty || expense_party.touched)"
class="alert alert-danger">

<div *ngIf="expense_party.errors?.['required']">
Party is required.
</div>
</div>
    
</div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label>Payment Account</label>
                    <select class="form-select" formControlName="payment_account">
                        <option value="" disabled selected>Select Payment Account</option>
<option *ngFor="let bank of companyBankList" [value]="bank.id">{{bank?.name}}</option>
                    </select>
                </div>
                <div *ngIf="expense_payment_account.invalid && (expense_payment_account.dirty || expense_payment_account.touched)"
class="alert alert-danger">

<div *ngIf="expense_payment_account.errors?.['required']">
Payment Account is required.
</div>
</div>
            </div>
           

             

                <div class="col-sm-6">
                    <div class="form-group">
                        <label>Remark</label>
                        <input type="text" formControlName="remark" class="form-control" placeholder="Enter Remark">
                    </div>
                    <div *ngIf="expense_remark.invalid && (expense_remark.dirty || expense_remark.touched)"
    class="alert alert-danger">

  <div *ngIf="expense_remark.errors?.['required']">
    Remark is required.
  </div>
</div>
                </div>
                </div>
                <div class="col-sm-12">
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" formControlName="non_gst"> Non GST
                        </label>
                    </div>
                    <div *ngIf="expense_nongst.invalid && (expense_nongst.dirty || expense_nongst.touched)"
    class="alert alert-danger">

  <div *ngIf="expense_nongst.errors?.['required']">
    Non GST is required.
  </div>
                </div>
            </div>
            <div class="row mt-4">
                <div class="col-sm-12 d-flex justify-content-center">
                    <button type="submit" class="btn btn-dark modal2BtnPos">Save</button>

                </div>
            </div>
            </form> -->

                <div class="table-responsive">
                    <table class="table datanew" id="mytable">
                        <thead>
                            <tr>
                                <th (click)="sort('id')" class="thone">Sr. No.<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Party<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Expense Voucher No.<i class="fa fa-sort"></i>
                                </th>
                                <th (click)="sort('id')" class="thone">Refrence Bill No.<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Date<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Sub Total<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Total<i class="fa fa-sort"></i></th>
                                <!-- <th (click)="sort('id')" class="thone">Reverse Charge<i class="fa fa-sort"></i></th> -->
                            </tr>
                        </thead>
                        <tbody *ngIf="expenseList?.length>=0 ">
                            <tr
                                *ngFor="let products of expenseList | orderBy:key:reverse | paginate:{itemsPerPage:itemsPerPage,currentPage:p} let i = index">
                                <td>{{i+1}}</td>
                                <td class="productimgname"><a
                                        routerLink="//transaction/detailsexpensesVoucher/{{products.id}}"
                                        style="line-height: 3;">{{products?.party?.name ?? '--'}}</a></td>
                                <td class="text-center">{{products?.expense_no ?? '--'}}</td>
                                <td class="text-center">{{products?.refrence_bill_no ?? '--'}}</td>
                                <td class="text-center">{{products?.expense_date ?? '--'}}</td>
                                <td class="text-center">{{products?.tax_amount ?? '--'}}</td>
                                <td class="text-center">{{products?.total_amount ?? '--'}}</td>
                                <!-- <td>{{products?.reverse_charge}}</td> -->
                            </tr>
                        </tbody>
                        <tbody *ngIf="expenseList?.length===0 && !loader">
                            <tr>
                                <td colspan="10">
                                    <p class="center-textt">Data not available</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

            </div>

        </div>
    </div>
</div>

<!-- Sales Payment Modal -->
<div class="modal fade modalPayment posmodal" id="salesModal" tabindex="-1" aria-labelledby="salesModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="salesModalLabel">Receipt</h5>
                <button type="button" class="btn-close salesModalClose" data-bs-dismiss="modal" aria-label="Close"
                    (click)="playBeepSound()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- <form [formGroup]="salesPaymentForm" (ngSubmit)="formSubmitReceipt()">
            <div class="row">
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="d-block">Select Payment Type</label>
                                <div class="radio-payments-modal-wrapper d-flex justify-content-around">
                                    <div class="form-check" *ngFor="let option of paymentType">
                                        <input class="form-check-input" type="radio" formControlName="payment_type" [value]="option.value">
                                        <label class="form-check-label">{{option.label}}</label>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="sales_payment_type.invalid && (sales_payment_type.dirty || sales_payment_type.touched)"
    class="alert alert-danger">

  <div *ngIf="salespayment_type.errors?.['required']">
    Payment Type is required.
  </div>
</div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Customer</label>
                                    <input type="text"
                                    placeholder="Search for a Customer"
                                    [formControl]="salesPaymentForm.get('customer')"
                                    [matAutocomplete]="autoReceipt"
                                    class="form-control">
                             <mat-autocomplete #autoReceipt="matAutocomplete" [displayWith]="displayCus" (optionSelected)="optionSelectedReceipt($event)">
                                 
                                 <mat-option *ngIf="salesPaymentForm.get('customer').value?.length < 3" class="is-loading">Please Enter 3 or more characters</mat-option>
                                 <mat-option *ngIf="cusIsLoading" class="is-loading">Loading...</mat-option>
                                 <mat-option *ngIf="cusErrorMsg" class="is-loading">{{cusErrorMsg}}</mat-option>
                               <mat-option *ngFor="let customer of filteredCustomer2" [value]="customer">
                                 {{ displayCus(customer) }}
                               </mat-option>
                             </mat-autocomplete>
                                </div>
                                <div *ngIf="sales_customer.invalid && (sales_customer.dirty || sales_customer.touched)"
class="alert alert-danger">

<div *ngIf="sales_customer.errors?.['required']">
Customer is required.
</div>
</div>
                                
                                   
                                
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Payment Mode</label>
                                    <select class="form-select" formControlName="payment_mode">
                                        <option disabled selected value="">-- Select Payment Mode --</option>
                                        <option *ngFor="let option of paymentMode" [value]="option.value">{{option.label}}</option>
                                    </select>
                                </div>
                                <div *ngIf="sales_payment_mode.invalid && (sales_payment_mode.dirty || sales_payment_mode.touched)"
    class="alert alert-danger">

  <div *ngIf="sales_payment_mode.errors?.['required']">
    Payment Mode is required.
  </div>
</div>
                            </div>
                            <div class="col-sm-6" *ngIf="salesPaymentForm.get('payment_type').value === 'Against Bill'">
                                <div class="form-group">
                                    <label>Select Sales</label>
                                    <select class="form-select" formControlName="sales">
                                        <option disabled selected value="">-- Select Sales --</option>
                                        <option *ngFor="let option of receiptSales" [value]="option?.id">{{option?.dueAmount}}</option>
                                    </select>
                                </div>
                                <div *ngIf="sales_sales.invalid && (sales_sales.dirty || sales_sales.touched)"
    class="alert alert-danger">

  <div *ngIf="sales_sales.errors?.['required']">
    Selecting Sales is required.
  </div>
</div>
                            </div>
                
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Amount</label>
                                    <input type="number" formControlName="amount" class="form-control" placeholder="Enter Amount">
                                </div>
                                <div *ngIf="sales_amount.invalid && (sales_amount.dirty || sales_amount.touched)"
    class="alert alert-danger">

  <div *ngIf="sales_amount.errors?.['required']">
    Amount is required.
  </div>
</div>
</div>

            <div class="col-sm-6">
                <div class="form-group">
                    <label>Payment Account</label>
                    <select class="form-select" formControlName="payment_account">
                        <option value="" disabled selected>Select Payment Account</option>
<option *ngFor="let bank of companyBankList" [value]="bank.id">{{bank?.name}}</option>
                    </select>
                </div>
                <div *ngIf="sales_payment_account.invalid && (sales_payment_account.dirty || sales_payment_account.touched)"
class="alert alert-danger">

<div *ngIf="sales_payment_account.errors?.['required']">
Payment Account is required.
</div>
</div>
            </div>   

                <div class="col-sm-6">
                    <div class="form-group">
                        <label>Remark</label>
                        <input type="text" formControlName="remark" class="form-control" placeholder="Enter Remark">
                    </div>
                    <div *ngIf="sales_remark.invalid && (sales_remark.dirty || sales_remark.touched)"
    class="alert alert-danger">

  <div *ngIf="sales_remark.errors?.['required']">
    Remark is required.
  </div>
</div>
                </div>

            </div>
            <div class="row" *ngIf="salesPaymentForm.get('payment_mode').value === 'UPI'">
                <div class="col-sm-6">
                    <div class="form-group">
                        <label>UPI Id</label>
                        <input type="text" class="form-control"
                        placeholder="UPI ID"
                        formControlName="upi_id">
                    </div>
                    <div *ngIf="sales_upi_id.invalid && (sales_upi_id.dirty || sales_upi_id.touched)"
    class="alert alert-danger">

  <div *ngIf="sales_upi_id.errors?.['required']">
    UPI ID is required.
  </div>
</div>
                </div>
            </div>

            <div class="row" *ngIf="salesPaymentForm.get('payment_mode').value === 'Bank'">
                <div class="col-sm-6">
                    <div class="form-group">
                        <label>Account No</label>
                        <input type="text" class="form-control"
                        placeholder="Account No"
                        formControlName="account_no">
                    </div>
                    <div *ngIf="sales_account_no.invalid && (sales_account_no.dirty || sales_account_no.touched)"
    class="alert alert-danger">

  <div *ngIf="sales_account_no.errors?.['required']">
    Account No is required.
  </div>
</div>
                </div>
            </div>

            <div class="row" *ngIf="salesPaymentForm.get('payment_mode').value === 'Card'">
                <div class="col-sm-6">
                    <div class="form-group">
                        <label>Customer Bank Name</label>
                        <input type="text" class="form-control"
                        placeholder="Customer Bank Name"
                        formControlName="customer_bank_name">
                    </div>
                    <div *ngIf="sales_customer_bank_name.invalid && (sales_customer_bank_name.dirty || sales_customer_bank_name.touched)"
    class="alert alert-danger">

  <div *ngIf="sales_customer_bank_name.errors?.['required']">
    Customer Bank Name is required.
  </div>
</div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label>Card Payment Amount</label>
                        <input type="number" class="form-control" 
                        placeholder="Card Payment Amount"
                        formControlName="card_payment_amount">
                    </div>
                    <div *ngIf="sales_card_payment_amount.invalid && (sales_card_payment_amount.dirty || sales_card_payment_amount.touched)"
    class="alert alert-danger">

  <div *ngIf="sales_card_payment_amount.errors?.['required']">
    Card Payment Amount is required.
  </div>
</div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label>Card Holder Name</label>
                        <input type="text" class="form-control" 
                        placeholder="Card Holder Name"
                        formControlName="card_holder_name">
                    </div>
                    <div *ngIf="sales_card_holder_name.invalid && (sales_card_holder_name.dirty || sales_card_holder_name.touched)"
    class="alert alert-danger">

  <div *ngIf="sales_card_holder_name.errors?.['required']">
    Card Holder Name is required.
  </div>
</div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label>Card Transaction No</label>
                        <input type="number" class="form-control" 
                        placeholder="Card Transaction No"
                        formControlName="cart_transactions_no">
                    </div>
                    <div *ngIf="sales_cart_transactions_no.invalid && (sales_cart_transactions_no.dirty || sales_cart_transactions_no.touched)"
    class="alert alert-danger">

  <div *ngIf="sales_cart_transactions_no.errors?.['required']">
    Card Transaction No. is required.
  </div>
</div>
                </div>
            </div>
                
            <div class="row mt-4">
                <div class="col-sm-12 d-flex justify-content-center">
                    <button type="submit" class="btn btn-dark modal2BtnPos">Save</button>

                </div>
            </div>
            </form> -->

                <div class="table-responsive">
                    <table class="table datanew" id="mytable">
                        <thead>
                            <tr>
                                <th (click)="sort('id')" class="thone">Sr. No.<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Account<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Reciept Type<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Mode Type<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Voucher No.<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Payer<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Payment<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Date<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Transaction Date<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Transaction Id<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Amount<i class="fa fa-sort"></i></th>
                            </tr>
                        </thead>
                        <tbody *ngIf="recieptList?.length>=0 ">
                            <tr *ngFor="let products of recieptList | orderBy:key:reverse let i = index">
                                <td>{{i+1}}</td>
                                <td class="productimgname"><a
                                        routerLink="//transaction/detailsrecieptVoucher/{{products.id}}"
                                        style="line-height: 3;">{{products?.payer?.account_id ?? '--'}}</a></td>
                                <td class="text-center">{{products?.receipt_type ?? '--'}}</td>
                                <td>{{products.mode_type ?? '--'}}</td>
                                <td>{{products.receipt_voucher_no ?? '--'}}</td>
                                <td>{{products?.payer?.account_id ?? '--'}}</td>
                                <td>{{products?.bank_payment ?? '--'}}</td>
                                <td>{{products?.date ?? '--'}}</td>
                                <td>{{products?.transaction_date ?? '--'}}</td>
                                <td class="text-center">{{products?.transaction_id ?? '--'}}</td>
                                <td>{{products?.amount ?? '--'}}</td>
                            </tr>
                        </tbody>
                        <tbody *ngIf="recieptList?.length===0 && !loader">
                            <tr>
                                <td colspan="10">
                                    <p class="center-textt">Data not available</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- CreditNote Modal -->
<div class="modal fade modalPayment posmodal" id="creditNoteModal" tabindex="-1" aria-labelledby="creditNoteModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="creditNoteModalLabel">Credit Notes</h5>
                <button type="button" class="btn-close salesModalClose" data-bs-dismiss="modal" aria-label="Close"
                    (click)="playBeepSound()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="table-responsive">
                    <table class="table datanew" id="mytable">
                        <thead>
                            <tr class="payment-voucher-wrapper">
                                <th (click)="sort('id')" class="thone">Sr. No.<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Account<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Credit Note Date<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Credit Note No<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Sales Bill<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Reason<i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Round off <i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Tax <i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Total <i class="fa fa-sort"></i></th>
                                <th (click)="sort('id')" class="thone">Status <i class="fa fa-sort"></i></th>
                            </tr>
                        </thead>
                        <tbody *ngIf="creditNoteList?.length >= 0">
                            <tr class="payment-voucher-wrapper" *ngFor="let products of creditNoteList; let i = index">
                                <td>{{i+1}}</td>
                                <td class="productimgname">
                                    <a routerLink="//transaction/detailscreditnote/{{products?.id}}"
                                        style="line-height: 3;">{{products?.account?.account_id ?? '--'}}</a>
                                </td>
                                <td>{{products?.date ?? '--'}}</td>
                                <td>{{products?.credit_note_no ?? '--'}}</td>
                                <td>{{products?.sale_bill_no?.id ?? '--'}}</td>
                                <td>{{products?.reason ?? '--'}}</td>
                                <td>{{products?.roundoff ?? '--'}}</td>
                                <td>{{products?.tax ?? '--'}}</td>
                                <td>{{products?.total ?? '--'}}</td>
                                <td>
                                    <span
                                        [ngClass]="{'bg-lightgreen': products.status === 'Complete', 'bg-lightred' : products.status === 'Pending','bg-lightyellow' : products.status === 'Ordered'}"
                                        class="badges">{{products.status}}</span>
                                </td>
                            </tr>
                        </tbody>
                        <tbody *ngIf="creditNoteList?.length===0 && !loader">
                            <tr>
                                <td colspan="10">
                                    <p class="center-textt">Data not available</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Pos Add Payment Voucher Modal -->
<div class="modal fade posmodal" id="posPaymentsVoucherModal" tabindex="-1" aria-labelledby="posPaymentsModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="posPaymentsModalLabel">Payment Voucher Add</h5>
                <button type="button" class="btn-close posPaymentVoucher" data-bs-dismiss="modal" aria-label="Close"
                    (click)="playBeepSound()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div *ngIf="isPaymentModalShown">
                    <app-pos-add-payment-voucher (modalClose)="modalClose($event)"></app-pos-add-payment-voucher>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Pos Add Expense Voucher Modal -->
<div class="modal fade posmodal" id="posExpenseVoucherModal" tabindex="-1" aria-labelledby="posExpenseVoucherModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="posExpenseVoucherModalLabel">Expense Voucher Add</h5>
                <button type="button" class="btn-close posExpenseVoucher" data-bs-dismiss="modal" aria-label="Close"
                    (click)="playBeepSound()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div *ngIf="isExpanseModalShown">
                    <app-pos-add-expense-voucher (modalClose)="expenseModalClose($event)"></app-pos-add-expense-voucher>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Pos Add Receipts Voucher Modal -->
<div class="modal fade posmodal" id="posReceiptVoucherModal" tabindex="-1" aria-labelledby="posReceiptVoucherModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="posReceiptVoucherModalLabel">Reciept Voucher Add</h5>
                <button type="button" class="btn-close posReceiptVoucher" data-bs-dismiss="modal" aria-label="Close"
                    (click)="playBeepSound()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div *ngIf="isReceiptModalShown">
                    <app-pos-add-receipts-voucher
                        (modalClose)="receiptModalClose($event)"></app-pos-add-receipts-voucher>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Pos Add Credit Note Modal -->
<div class="modal fade posmodal" id="posCreditNoteModal" tabindex="-1" aria-labelledby="posCreditNoteModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="posCreditNoteModalLabel">Add Credit Note</h5>
                <button type="button" class="btn-close posCreditNote" data-bs-dismiss="modal" aria-label="Close"
                    (click)="playBeepSound()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div *ngIf="isCreditNoteModalShown">
                    <app-pos-add-credit-note (modalClose)="creditNoteModalClose($event)"></app-pos-add-credit-note>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Pos Payment Voucher Modal -->
<div class="modal fade posmodal" id="posPaymentsModal" tabindex="-1" aria-labelledby="posPaymentsModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="posPaymentsModalLabel">Payments</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                    (click)="playBeepSound()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <!-- <label class="d-block">Select Payment Type</label> -->
                    <!-- <div class="radio-payments-modal-wrapper d-flex justify-content-around">
                            <div class="form-check" *ngFor="let option of voucherType2">
                                <input class="form-check-input" type="radio" [value]="option.value" [(ngModel)]="selectedPaymentsOption" [ngModelOptions]="{standalone: true}">
                                <label class="form-check-label">{{option.label}}</label>
                            </div>
                        </div>
                    </div>
                    <div *ngIf="selectedPaymentsOption === 'sales'">
                        <table class="table mb-0">
                            <thead>
                                <tr>
                                    <th>Receipt No.</th>
                                    <th>Date</th>
                                    <th>Mode</th>
                                    <th>Method</th>
                                    <th>Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let order of salesPayments">
                                    <td>{{order?.id}}</td>
                                    <td>{{getDateForOrders(order?.receipt_date)}}</td>
                                    <td>{{order?.receipt_mode}}</td>  
                                    <td>{{order?.receipt_method}}</td>                      
                                    <td>{{order?.amount}}</td>
                                </tr>
                                
                            </tbody>
                        </table>
                      </div>
                      <div *ngIf="selectedPaymentsOption === 'purchase'">
                        <table class="table mb-0">
                            <thead>
                                <tr>
                                    <th>Receipt No.</th>
                                    <th>Date</th>
                                    <th>Mode</th>
                                    <th>Method</th>
                                    <th>Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let order of purchasePayments">
                                    <td>{{order?.id}}</td>
                                    <td>{{getDateForOrders(order?.receipt_date)}}</td>
                                    <td>{{order?.receipt_mode}}</td>  
                                    <td>{{order?.receipt_method}}</td>                      
                                    <td>{{order?.amount}}</td>
                                </tr>
                                
                            </tbody>
                        </table>
                    </div>
                    <div *ngIf="selectedPaymentsOption === 'expense'">
                        <table class="table mb-0">
                            <thead>
                                <tr>
                                    <th>Receipt No.</th>
                                    <th>Party Name</th>
                                    <th>Branch Name</th>
                                    <th>Non-GST</th>
                                    <th>Amount</th>
                                    <th>Remarks</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let order of expensePayments">
                                    <td>{{order?.id}}</td>
                                    <td>{{order?.party?.name}}</td>
                                    <td>{{order?.payment_account?.branch_name}}</td>
                                    <td>{{order?.non_gst}}</td>                                                        
                                    <td>{{order?.amount}}</td>
                                    <td>{{order?.remarks}}</td>
                                </tr>
                                
                            </tbody>
                        </table>
                    </div>   -->

                    <div class="table-responsive">
                        <table class="table datanew" id="mytable">
                            <thead>
                                <tr class="payment-voucher-wrapper">
                                    <th (click)="sort('id')" class="thone">Sr. No.<i class="fa fa-sort"></i></th>
                                    <th (click)="sort('id')" class="thone">Supplier<i class="fa fa-sort"></i></th>
                                    <th (click)="sort('id')" class="thone">Payment Type<i class="fa fa-sort"></i></th>
                                    <th (click)="sort('id')" class="thone">Mode Type<i class="fa fa-sort"></i></th>
                                    <th (click)="sort('id')" class="thone">Voucher No.<i class="fa fa-sort"></i></th>
                                    <th (click)="sort('id')" class="thone">Account<i class="fa fa-sort"></i></th>
                                    <th (click)="sort('id')" class="thone">Payment<i class="fa fa-sort"></i></th>
                                    <th (click)="sort('id')" class="thone">Date<i class="fa fa-sort"></i></th>
                                    <th (click)="sort('id')" class="thone">Transaction Date<i class="fa fa-sort"></i>
                                    </th>
                                    <th (click)="sort('id')" class="thone">Transaction Id<i class="fa fa-sort"></i></th>
                                    <th (click)="sort('id')" class="thone">Amount<i class="fa fa-sort"></i></th>
                                </tr>
                            </thead>
                            <tbody *ngIf="paymentList?.length>=0 ">
                                <tr class="payment-voucher-wrapper"
                                    *ngFor="let products of paymentList | orderBy:key:reverse | paginate:{itemsPerPage:itemsPerPage,currentPage:p} let i = index">

                                    <td>{{i+1+'.'}}</td>
                                    <td class="productimgname"><a
                                            routerLink="//transaction/detailspaymentVoucher/{{products.id}}"
                                            style="line-height: 3;">{{products?.supplier?.company_name ?? '--'}}</a>
                                    </td>
                                    <td class="text-center">{{products?.payment_type ?? '--'}}</td>
                                    <td>{{products?.mode_type ?? '--'}}</td>
                                    <td>{{products?.payment_voucher_no ?? '--'}}</td>
                                    <td>{{products?.payment_account?.account_id ?? '--'}}</td>
                                    <td>{{products?.bank_payment ?? '--'}}</td>
                                    <td>{{products?.date ?? '--'}}</td>
                                    <td>{{products?.transaction_date ?? '--'}}</td>
                                    <td class="text-center">{{products?.transaction_id ?? '--'}}</td>
                                    <td>{{products?.amount ?? '--'}}</td>
                                </tr>
                            </tbody>
                            <tbody *ngIf="paymentList?.length===0 && !loader">
                                <tr>
                                    <td colspan="10">
                                        <p class="center-textt">Data not available</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="progressbar">
                            <mat-progress-bar mode="indeterminate" class="progressbar"
                                *ngIf="loader"></mat-progress-bar>
                        </div>

                    </div>
                </div>
                <div class="modal-footer">
                    <!-- <div class="col-sm-12">
                <pagination-controls (pageChange)="page = $event"></pagination-controls>

            </div> -->
                    <!-- <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button> -->
                    <button type="button" class="btn btn-dark modal1BtnPos" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Print Cash Modal -->
<div *ngIf="currentItems?.length !== 0 && (currentCustomer !== null && currentCustomer !== undefined)"
    class="modal fade posmodal" id="printCashModal" tabindex="-1" aria-labelledby="printCashModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <!-- <div class="modal-header">
          <h5 class="modal-title" id="exampleModal5Label">Calculator</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
          </button>
        </div> -->
            <div class="modal-body">
                <form (ngSubmit)="this.cashPaymentGenerateOrder('print')">
                    <div class="row mb-3">
                        <div class="col-sm-4">
                            <div class="form-group mb-0">
                                <label>Due Amount</label>
                                <input type="number" value="{{this.totalAmount()}}" class="form-control"
                                    placeholder="Cash In Hand">
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group mb-0">
                                <label>Tendered</label>
                                <input type="number" [(ngModel)]="tenderedAmount" class="form-control"
                                    [ngModelOptions]="{standalone: true}" placeholder="Tendered">
                            </div>
                            <span class="text-danger"
                                *ngIf="isCashFormSubmitted && tenderedAmount < totalAmount()">Tendered amount should
                                be greater than due amount.</span>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group mb-0">
                                <label>Change</label>
                                <input type="number" value="{{this.changeAmt()}}" disabled class="form-control"
                                    placeholder="Change">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-5">
                            <div class="cal-wrapper">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="cal-div-wrapper">
                                            <div class="cal-div" (click)="changeTenderedAmt(1)">1</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(2)">2</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(3)">3</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(100)">+100</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(1000)">+1000</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="cal-div-wrapper">
                                            <div class="cal-div" (click)="changeTenderedAmt(4)">4</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(5)">5</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(6)">6</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(200)">+200</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(2000)">+2000</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="cal-div-wrapper">
                                            <div class="cal-div" (click)="changeTenderedAmt(7)">7</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(8)">8</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(9)">9</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(500)">+500</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(5000)">+5000</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="cal-div-wrapper">
                                            <div class="cal-div" (click)="changeTenderedAmt(10)">10</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(20)">20</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(50)">50</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(1000)">+1000</div>
                                            <div class="cal-div" (click)="changeTenderedAmt(10000)">+10000</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-7">
                            <div>
                                <!-- <button type="button" class="btn btn-dark mb-2 w-100" (click)="this.generateOrder()">Submit</button> -->
                                <button type="submit" class="btn btn-dark mb-2 w-100">Submit</button>
                            </div>
                            <div>
                                <button id="exampleModal5Close" type="button"
                                    class="btn btn-dark w-100 cashPrintModalClose" data-bs-dismiss="modal"
                                    aria-label="Close" (click)="playBeepSound()">Cancel</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <!-- <div class="modal-footer mt-5">
          <button type="button" class="btn btn-dark modal1BtnPos">Start Selling</button>
        </div> -->
        </div>
    </div>
</div>

<!-- Modal UPI Print-->
<div *ngIf="currentItems?.length !== 0 && (currentCustomer !== null && currentCustomer !== undefined)"
    class="modal fade posmodal" id="upiPrintMethodModal" tabindex="-1" aria-labelledby="upiPrintModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="upiPrintModalLabel">UPI Details</h5>
                <button type="button" class="btn-close upiPrintModalClose" data-bs-dismiss="modal" aria-label="Close"
                    (click)="playBeepSound()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form [formGroup]="upiPaymentMethodForm" (ngSubmit)="upiPaymentGenerateOrder('print')">

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Payment Account</label>
                                <select class="form-select" formControlName="payment_account">
                                    <option value="" disabled selected>Select Payment Account</option>
                                    <option *ngFor="let bank of companyBankList" [value]="bank.id">{{bank?.name}}
                                    </option>
                                </select>
                            </div>
                            <div *ngIf="payment_account_upi.invalid && (payment_account_upi.dirty || payment_account_upi.touched)"
                                class="alert alert-danger">

                                <div *ngIf="payment_account_upi.errors?.['required']">
                                    Payment Account is required.
                                </div>
                            </div>

                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>UPI Id</label>
                                <input type="text" class="form-control" placeholder="UPI ID" formControlName="upi_id">
                            </div>
                            <div *ngIf="upi_id.invalid && (upi_id.dirty || upi_id.touched)" class="alert alert-danger">
                                <div *ngIf="upi_id.errors?.['required']"> UPI ID is required.</div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Transaction ID</label>
                                <input type="text" class="form-control" placeholder="Transaction ID"
                                    formControlName="transaction_id">
                            </div>
                            <div *ngIf="transaction_id.invalid && (transaction_id.dirty || transaction_id.touched)"
                                class="alert alert-danger">

                                <div *ngIf="transaction_id.errors?.['required']">
                                    Transaction ID is required.
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-sm-12 d-flex justify-content-center">
                            <button type="submit" class="btn btn-dark">Save</button>
                        </div>
                    </div>

                </form>

            </div>
            <!-- <div class="modal-footer mt-2">
            <button type="button" class="btn btn-dark">Finalize Payment</button>
        </div> -->
        </div>
    </div>
</div>

<!-- Modal MultiPay PayLater -->
<div class="modal" id="multiPayLaterModal" [class.show]="isModalShown" tabindex="-1"
    aria-labelledby="multiPayLaterModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header border-0">
                <button type="button" class="btn-close multiPayLaterModalClose" data-bs-dismiss="modal"
                    aria-label="Close" (click)="playBeepSound(); closePayLaterModal()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form (ngSubmit)="submitMultiPayLater()">
                    <div class="form-group me-3">
                        <label>Payment Terms:</label>
                        <select [(ngModel)]="payment_terms" [ngModelOptions]="{standalone: true}"
                            (change)="onPaymentTermChange($event.target.value)">
                            <option value="" selected disabled>Select days
                            </option>
                            <option value="{{payment?.days}}" *ngFor="let payment of paymentTermsList">
                                {{payment?.title}}
                            </option>
                        </select>
                        <span class="text-danger" *ngIf="!payment_terms && isFormSubmitted">Payment Terms
                            is required</span>
                    </div>

                    <div class="form-group me-3">
                        <label>Due Date:</label>
                        <input class="transaction-date-wrapper" type="date" [(ngModel)]="due_date"
                            [ngModelOptions]="{standalone: true}" />
                        <span class="text-danger" *ngIf="!due_date && isFormSubmitted">Due Date
                            is required</span>
                    </div>
                    <div class="row m-0">
                        <div class="col-6 p-0">
                            <div class="form-group mb-0">
                                <label class="mb-0">Send Reminder</label>
                            </div>
                        </div>
                        <div class="col-6 d-flex align-items-center">
                            <input type="radio" class="input-radio-wrapper" name="option" [(ngModel)]="selectedReminder"
                                [ngModelOptions]="{standalone: true}" value="True" />
                            <label class="form-check-label ms-2" for="sendReminderYes">Yes</label>
                            <input type="radio" class="input-radio-wrapper ms-3" name="option"
                                [(ngModel)]="selectedReminder" [ngModelOptions]="{standalone: true}" value="False" />
                            <label class="form-check-label ms-2" for="sendReminderYes">No</label>
                        </div>
                        <span class="text-danger" *ngIf="!selectedReminder && isFormSubmitted">Send Reminder
                            is required</span>
                    </div>
                    <div class="row m-0 mt-3">
                        <div class="col-sm-12 d-flex justify-content-end p-0">
                            <button type="submit" class="btn btn-dark m-0">Submit</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal-backdrop fade show blur-background2" *ngIf="isModalShown"></div>

<!-- Modal Card Payment And Print-->
<div *ngIf="currentItems?.length !== 0 && (currentCustomer !== null && currentCustomer !== undefined)"
    class="modal fade posmodal" id="cardPrintMethodModal" tabindex="-1" aria-labelledby="cardPrintModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="cardPrintModalLabel">Card Details</h5>
                <button type="button" class="btn-close cardPrintModalClose" data-bs-dismiss="modal" aria-label="Close"
                    (click)="playBeepSound()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form [formGroup]="cardPaymentMethodForm" (ngSubmit)="cardPaymentGenerateOrder('print')">

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Payment Account</label>
                                <select class="form-select" formControlName="payment_account">
                                    <option value="" disabled selected>Select Payment Account</option>
                                    <option *ngFor="let bank of companyBankList" [value]="bank.id">{{bank?.name}}
                                    </option>
                                </select>
                            </div>
                            <div *ngIf="payment_account_card.invalid && (payment_account_card.dirty || payment_account_card.touched)"
                                class="alert alert-danger">

                                <div *ngIf="payment_account_card.errors?.['required']">
                                    Payment Account is required.
                                </div>
                            </div>

                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Customer Bank Name</label>
                                <input type="text" class="form-control" placeholder="Customer Bank Name"
                                    formControlName="customer_bank_name">
                            </div>
                            <div *ngIf="customer_bank_name.invalid && (customer_bank_name.dirty || customer_bank_name.touched)"
                                class="alert alert-danger">

                                <div *ngIf="customer_bank_name.errors?.['required']">
                                    Customer Bank Name is required.
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Card Payment Amount</label>
                                <input type="number" class="form-control" placeholder="Card Payment Amount"
                                    formControlName="card_payment_amount">
                            </div>
                            <div *ngIf="card_payment_amount.invalid && (card_payment_amount.dirty || card_payment_amount.touched)"
                                class="alert alert-danger">

                                <div *ngIf="card_payment_amount.errors?.['required']">
                                    Card Payment Amount is required.
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Card Holder Name</label>
                                <input type="text" class="form-control" placeholder="Card Holder Name"
                                    formControlName="card_holder_name">
                            </div>
                            <div *ngIf="card_holder_name.invalid && (card_holder_name.dirty || card_holder_name.touched)"
                                class="alert alert-danger">

                                <div *ngIf="card_holder_name.errors?.['required']">
                                    Card Holder Name is required.
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Card Transaction No</label>
                                <input type="number" class="form-control" placeholder="Card Transaction No"
                                    formControlName="cart_transactions_no">
                            </div>
                            <div *ngIf="cart_transactions_no.invalid && (cart_transactions_no.dirty || cart_transactions_no.touched)"
                                class="alert alert-danger">

                                <div *ngIf="cart_transactions_no.errors?.['required']">
                                    Card Transaction No. is required.
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-sm-12 d-flex justify-content-center">
                            <button type="submit" class="btn btn-dark">Save</button>
                        </div>
                    </div>

                </form>
            </div>
            <!-- <div class="modal-footer mt-2">
            <button type="button" class="btn btn-dark">Finalize Payment</button>
        </div> -->
        </div>
    </div>
</div>

<!-- Modal Bank Print-->
<div *ngIf="currentItems?.length !== 0 && (currentCustomer !== null && currentCustomer !== undefined)"
    class="modal fade posmodal" id="bankPrintMethodModal" tabindex="-1" aria-labelledby="bankPrintModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="bankPrintModalLabel">Bank Details</h5>
                <button type="button" class="btn-close bankPrintModalClose" data-bs-dismiss="modal" aria-label="Close"
                    (click)="playBeepSound()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form [formGroup]="bankPaymentMethodForm" (ngSubmit)="bankPaymentGenerateOrder('print')">

                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Payment Account</label>
                                <select class="form-select" formControlName="payment_account">
                                    <option value="" disabled selected>Select Payment Account</option>
                                    <option *ngFor="let bank of companyBankList" [value]="bank.id">{{bank?.name}}
                                    </option>
                                </select>
                            </div>
                            <div *ngIf="payment_account_bank.invalid && (payment_account_bank.dirty || payment_account_bank.touched)"
                                class="alert alert-danger">

                                <div *ngIf="payment_account_bank.errors?.['required']">
                                    Payment Account is required.
                                </div>
                            </div>

                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Account No</label>
                                <input type="text" class="form-control" placeholder="Account No"
                                    formControlName="account_no">
                            </div>
                            <div *ngIf="account_no.invalid && (account_no.dirty || account_no.touched)"
                                class="alert alert-danger">

                                <div *ngIf="account_no.errors?.['required']">
                                    Account No is required.
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-sm-12 d-flex justify-content-center">
                            <button type="submit" class="btn btn-dark">Save</button>
                        </div>
                    </div>

                </form>
            </div>
            <!-- <div class="modal-footer mt-2">
            <button type="button" class="btn btn-dark">Finalize Payment</button>
        </div> -->
        </div>
    </div>
</div>


<!-- Modal Product Details-->
<div class="modal fade posmodal" id="productDetailsModal" tabindex="-1" aria-labelledby="productDetailsModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="productDetailsModalLabel">Product Details</h5>
                <button type="button" class="btn-close productDetailsModalClose" data-bs-dismiss="modal"
                    aria-label="Close" (click)="playBeepSound()">
                    <i class="fa fa-times" data-bs-toggle="tooltip" title="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <table class="table mb-0">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- <tr *ngFor="let order of posOrders"> -->
                        <tr>
                            <td>Available Stock</td>
                            <td>{{currentItems[currentCartIndex]?.batch?.length ?
                                currentItems[currentCartIndex]?.batch[0]?.stock : 0}}</td>
                        </tr>
                        <tr>
                            <td>Category</td>
                            <td>{{currentItems[currentCartIndex]?.product?.category?.title}}</td>
                        </tr>
                        <tr>
                            <td>Brand</td>
                            <td>{{currentItems[currentCartIndex]?.product?.brand?.title}}</td>
                        </tr>
                        <tr>
                            <td>HSN Code</td>
                            <td>{{currentItems[currentCartIndex]?.product?.hsncode}}</td>
                        </tr>
                    </tbody>
                    <!-- <tfoot>
                </tfoot> -->
                </table>
            </div>
            <!-- <div class="modal-footer mt-2">
            <button type="button" class="btn btn-dark">Finalize Payment</button>
        </div> -->
        </div>
    </div>
</div>