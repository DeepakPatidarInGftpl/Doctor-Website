<!-- Header -->
<div class="header" [ngClass]="{
    'header-one': changeLayout == '2',
    'header-two': changeLayout == '3',
    'header-three': changeLayout == '4',
    'header-four': changeLayout == '5'
  }" [ngClass]="{'blur-background': isModalOpen}">
  <div [class.container]="changeLayout == '3' || changeLayout == '4'">
    <!-- Logo -->
    <div class="header-left active" *ngIf="activePath != 'pos'">
      <a routerLink="/dashboard/sales" class="logo">
        <img [src]="logoPath" alt="" />
      </a>
      <a routerLink="/dashboard/sales" class="logo-small">
        <img src="assets/img/logo-small.png" alt="" />
      </a>
      <a id="toggle_btn" *ngIf="changeLayout == '1' || changeLayout == '3'" href="javascript:void(0);">
      </a>
    </div>
    <div class="header-left active" *ngIf="activePath === 'pos'" style="border-right: none">
      <a routerLink="/dashboard/sales" class="logo">
        <img [src]="logoPath" alt="" />
      </a>
      <a routerLink="/dashboard/sales" class="logo-small">
        <img src="assets/img/logo-small.png" alt="" />
      </a>
    </div>
    <!-- /Logo -->

    <a id="mobile_btn" class="mobile_btn" href="#sidebar" *ngIf="activePath != 'pos'">
      <span class="bar-icon">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </a>
    <div class="top-nav-search" *ngIf="changeLayout == '3'">
      <a href="javascript:void(0);" class="responsive-search">
        <i class="fa fa-search"></i>
      </a>
      <form action="#">
        <div class="searchinputs" [ngClass]="{ show: showSearch == true }">
          <input type="text" placeholder="Search Here ..." />
          <div class="search-addon">
            <span (click)="showSearch = !showSearch"><img src="assets/img/icons/closes.svg" alt="img" /></span>
          </div>
        </div>
        <!-- <a *ngIf="showSearch == false" (click)="showSearch = !showSearch" class="btn" id="searchdiv"><img
            src="assets/img/icons/search.svg" alt="img" /></a> -->
      </form>
    </div>
    <!-- Header Menu -->
    <ul class="nav user-menu">
      <!-- Search -->
      <li class="nav-item">
        <div class="top-nav-search" *ngIf="changeLayout != '3'">
          <a href="javascript:void(0);" class="responsive-search">
            <i class="fa fa-search"></i>
          </a>
         
          <form action="#">
            <div class="searchinputs" [ngClass]="{ show: showSearch == true }">
              <input type="text" placeholder="Search Here ..." />
              <div class="search-addon">
                <span (click)="showSearch = !showSearch"><img src="assets/img/icons/closes.svg" alt="img" /></span>
              </div>
            </div>
            <!-- <a *ngIf="showSearch == false" (click)="showSearch = !showSearch" class="btn" id="searchdiv"><img
                src="assets/img/icons/search.svg" alt="img" /></a> -->
          </form>
        </div>
      </li>
      <!-- /Search -->
<!-- 6-5 -->
<li class="nav-item dropdown has-arrow flag-nav" style="padding-top: 10px;">
  <form [formGroup]="financialYearForm">
    <select formControlName="financial_year" #yearVal (change)="selectYear(yearVal.value)">
      <option value="" selected disabled>select date</option>
      <option [value]="year.id" *ngFor="let year of financialYearList">{{year?.start_year}} - {{year?.close_year}}</option>
    </select>
  </form>

</li>
      <!-- Flag -->
      <li class="nav-item dropdown has-arrow flag-nav">
        <a class="nav-link dropdown-toggle"  routerLink="/newpos/pos" target="_blank">
          <!-- <img src="assets/dummy/pos.png" alt="" height="20" /> -->
          <!-- <i class="fa-solid fa-cash-register"></i> -->
          <i class="fa fa-fax" data-bs-toggle="tooltip" title="fa fa-fax"></i>
        </a>
        <!-- <div class="dropdown-menu dropdown-menu-right">
          <a href="javascript:void(0);" class="dropdown-item">
            <img src="assets/logo/logo.png" alt="" height="16" /> English
          </a>
          <a href="javascript:void(0);" class="dropdown-item">
            <img src="assets/img/flags/fr.png" alt="" height="16" /> French
          </a>
          <a href="javascript:void(0);" class="dropdown-item">
            <img src="assets/img/flags/es.png" alt="" height="16" /> Spanish
          </a>
          <a href="javascript:void(0);" class="dropdown-item">
            <img src="assets/img/flags/de.png" alt="" height="16" /> German
          </a>
        </div> -->
      </li>
     
      <li class="nav-item dropdown has-arrow flag-nav">
        <!-- 4-5 -->
        <a href="javascript:void(0);" class="dropdown-toggle nav-link userset blue_link me-0" data-bs-toggle="dropdown" (click)="openModalDayClose()" *ngIf="isCloseDay">
        <i data-bs-toggle="tooltip" title="ion-arrow-return-left" class="ion-arrow-return-left" style="color: #9c9c9c;"></i>
      </a>
     </li>

      <!-- Notifications -->
      <li class="nav-item dropdown">
        <a href="javascript:void(0);" class="dropdown-toggle nav-link" data-bs-toggle="dropdown">
          <img src="assets/img/icons/notification-bing.svg" alt="img" />
          <span class="badge rounded-pill">4</span>
        </a>
        <div class="dropdown-menu notifications">
          <div class="topnav-dropdown-header">
            <span class="notification-title">Notifications</span>
            <a href="javascript:void(0)" class="clear-noti"> Clear All </a>
          </div>
          <div class="noti-content">
            <ul class="notification-list">
              <li class="notification-message">
                <a routerLink="/activities">
                  <div class="media d-flex">
                    <span class="avatar flex-shrink-0">
                      <img alt="" src="assets/img/profiles/avatar-02.jpg" />
                    </span>
                    <div class="media-body flex-grow-1">
                      <p class="noti-details">
                        <span class="noti-title">John Doe</span> added new task
                        <span class="noti-title">Patient appointment booking</span>
                      </p>
                      <p class="noti-time">
                        <span class="notification-time">4 mins ago</span>
                      </p>
                    </div>
                  </div>
                </a>
              </li>
              <li class="notification-message">
                <a routerLink="/activities">
                  <div class="media d-flex">
                    <span class="avatar flex-shrink-0">
                      <img alt="" src="assets/img/profiles/avatar-03.jpg" />
                    </span>
                    <div class="media-body flex-grow-1">
                      <p class="noti-details">
                        <span class="noti-title">Tarah Shropshire</span> changed
                        the task name
                        <span class="noti-title">Appointment booking with payment gateway</span>
                      </p>
                      <p class="noti-time">
                        <span class="notification-time">6 mins ago</span>
                      </p>
                    </div>
                  </div>
                </a>
              </li>
              <li class="notification-message">
                <a routerLink="/activities">
                  <div class="media d-flex">
                    <span class="avatar flex-shrink-0">
                      <img alt="" src="assets/img/profiles/avatar-06.jpg" />
                    </span>
                    <div class="media-body flex-grow-1">
                      <p class="noti-details">
                        <span class="noti-title">Misty Tison</span> added
                        <span class="noti-title">Domenic Houston</span> and
                        <span class="noti-title">Claire Mapes</span> to project
                        <span class="noti-title">Doctor available module</span>
                      </p>
                      <p class="noti-time">
                        <span class="notification-time">8 mins ago</span>
                      </p>
                    </div>
                  </div>
                </a>
              </li>
              <li class="notification-message">
                <a routerLink="/activities">
                  <div class="media d-flex">
                    <span class="avatar flex-shrink-0">
                      <img alt="" src="assets/img/profiles/avatar-17.jpg" />
                    </span>
                    <div class="media-body flex-grow-1">
                      <p class="noti-details">
                        <span class="noti-title">Rolland Webber</span> completed
                        task
                        <span class="noti-title">Patient and Doctor video conferencing</span>
                      </p>
                      <p class="noti-time">
                        <span class="notification-time">12 mins ago</span>
                      </p>
                    </div>
                  </div>
                </a>
              </li>
              <li class="notification-message">
                <a routerLink="/activities">
                  <div class="media d-flex">
                    <span class="avatar flex-shrink-0">
                      <img alt="" src="assets/img/profiles/avatar-13.jpg" />
                    </span>
                    <div class="media-body flex-grow-1">
                      <p class="noti-details">
                        <span class="noti-title">Bernardo Galaviz</span> added
                        new task
                        <span class="noti-title">Private chat module</span>
                      </p>
                      <p class="noti-time">
                        <span class="notification-time">2 days ago</span>
                      </p>
                    </div>
                  </div>
                </a>
              </li>
            </ul>
          </div>
          <div class="topnav-dropdown-footer">
            <a routerLink="/activities">View all Notifications</a>
          </div>
        </div>
      </li>
      <!-- /Notifications -->

      <li class="nav-item dropdown has-arrow main-drop">
        <a href="javascript:void(0);" class="dropdown-toggle nav-link userset" data-bs-toggle="dropdown">
          <span class="user-img">
            <img src="assets/dummy/profile.png" alt="" />
            <span class="status online"></span></span>
        </a>
        <div class="dropdown-menu menu-drop-user">
          <div class="profilename">
            <div class="profileset">
              <span class="user-img">
                <img src="assets/dummy/profile.png" alt="" />
                <span class="status online"></span></span>
              <div class="profilesets">
                <h6>{{userDetails?.username | titlecase}}</h6>
                <h5 *ngIf="userDetails?.role!=='None'"><b>Role</b>:{{userDetails?.role}}</h5>
              </div>
            </div>
            <hr class="m-0" />
            <a class="dropdown-item" routerLink="/profile"><img src="assets/img/icons/users1.svg" class="me-2"
                alt="img" />
              My Profile</a>
            <!-- <a class="dropdown-item" routerLink="/settings/generalsettings"><img src="assets/img/icons/settings.svg"
                class="me-1" alt="img" />Settings</a> -->
            <hr class="m-0" />
            <a class="dropdown-item logout pb-0" (click)="logOut()"><img src="assets/img/icons/log-out.svg"
                class="me-2" alt="img" />Logout</a>
          </div>
        </div>
      </li>
    </ul>
    <!-- /Header Menu -->

    <!-- Mobile Menu -->
    <div class="dropdown mobile-user-menu">
      <a href="javascript:void(0);" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false"><i
          class="fa fa-ellipsis-v"></i></a>
      <div class="dropdown-menu dropdown-menu-right">
        <a class="dropdown-item" routerLink="/profile">My Profile</a>
        <a class="dropdown-item" routerLink="/settings/generalsettings">Settings</a>
        <a class="dropdown-item" (click)="logOut()">Logout</a>
      </div>
    </div>
    <!-- /Mobile Menu -->
  </div>
</div>
<!-- Header -->



<!-- modal day open -->

<div class="modal fade " id="dayModal" tabindex="-1" role="dialog" aria-labelledby="addressModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h1 class="modal-title fs-5" id="staticBackdropLabel" style="margin: 0 auto;">Open Registered</h1>
        <button type="button" class="close" (click)="closeModalDay()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container" style="height: auto !important;">
          <div class="card">
            <div class="card-body">
              <form [formGroup]="dayOpenForm" (ngSubmit)="submit()" class="text-center">
                <div class="form-group" style="margin-bottom: 10px;">
                  <label class="text_18">Opening Amount<span class="red_star">*</span></label>
                  <input type="text" formControlName="opening_amount"
                    [ngClass]="{'is-invalid': f['opening_amount']?.touched && f['opening_amount']?.invalid}"
                    [ngStyle]="{'border': modalError ? '1px solid red' : ''}" style="width: 40%;">
                  <br>
                  <span class="text-danger"
                    *ngIf="opening_amount && opening_amount?.invalid && opening_amount?.touched">Enter Opening Amount
                  </span>
                </div>
                <button class="btn btn-submit me-2" *ngIf="!loader">Submit</button>
                <button class="btn btn-submit me-2" type="submit" *ngIf="loader" disabled>
                  <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>&nbsp;
                  Submit</button>
                <br>
                <span class="text-danger" *ngIf="modalError"
                  style="font-size: 15px;font-weight: 500;">{{modalError}}</span>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- end modal -->
<!-- modal day close -->
<div class="modal fade " id="dayCloseModal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document" style="max-width: 65%;">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h1 class="modal-title fs-5" id="staticBackdropLabel" style="margin: 0 auto;">Close Registered</h1>
        <button type="button" class="close" (click)="closeModalDayClose()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" style="padding: 1%;">
        <div class="card">
          <div class="card-body">
            <div class="row">
              <div class="col-lg-4 col-sm-12 col-sm-12">
                <div class="card">
                  <div class="card-body" style="padding: 0px;">
                    <div class="productdetails">
                      <ul class="product-bar">
                        <li>
                          <h4 class="th">Start Date</h4>
                          <h6 class="td">{{dayList?.['Start Date']}}</h6>
                        </li>
                        <li>
                          <h4 class="th">Start Time</h4>
                          <h6 class="td">{{dayList?.['Start Time']}}</h6>
                        </li>
                        <li>
                          <h4 class="th">Bills</h4>
                          <h6 class="td">{{dayList?.no_of_bill| number:'1.2-2'}}</h6>
                        </li>
                        <li>
                          <h4 class="th">Items</h4>
                          <h6 class="td">{{dayList?.no_of_item| number:'1.2-2'}}</h6>
                        </li>
                        <li>
                          <h4 class="th">Pending Amount</h4>
                          <h6 class="td">{{dayList?.pending_amount| number:'1.2-2'}}</h6>
                        </li>
                        <li>
                          <h4 class="th">Total Cash</h4>
                          <h6 class="td">{{dayList?.total_cash| number:'1.2-2'}}</h6>
                        </li>
                        <li>
                          <h4 class="th">Total Discount</h4>
                          <h6 class="td">{{dayList?.total_discount| number:'1.2-2'}}</h6>
                        </li>
                        <li>
                          <h4 class="th">Total Payment Given</h4>
                          <h6 class="td">{{dayList?.total_payment| number:'1.2-2'}}</h6>
                        </li>
                        <li>
                          <h4 class="th">Total Sale</h4>
                          <h6 class="td">{{dayList?.total_sale| number:'1.2-2'}}</h6>
                        </li>
                        <li>
                          <h4 class="th">Total Payment Recieved</h4>
                          <h6 class="td">{{dayList?.total_sale_amount| number:'1.2-2'}}</h6>
                        </li>
                        <li>
                          <h4 class="th">Total Sale Return</h4>
                          <h6 class="td">{{dayList?.total_sale_return| number:'1.2-2'}}</h6>
                        </li>
                        <li>
                          <h4 class="th">Total Tax</h4>
                          <h6 class="td">{{dayList?.total_tax| number:'1.2-2'}}</h6>
                        </li>
                     
                      </ul>
                    </div>
                  </div>

                </div>
              </div>
              <div class="col-lg-4 col-sm-12 col-sm-12">
                <div class="card">
                  <div class="card-body" style="padding: 0px;">
                    <div class="productdetails">
                      <ul class="product-bar">
                        <li>
                          <h4 class="th">Opening Cash</h4>
                          <h6 class="td">{{dayList?.opening_amount| number:'1.2-2'}}</h6>
                        </li>
                        <ng-container *ngFor="let dayClose of dayList?.sale_bill_payment">
                          <li>
                            <h4 class="th" *ngIf="dayClose.bank_payment=='Online'">{{dayClose?.bank_payment}}</h4>
                            <h4 class="th" *ngIf="dayClose.receipt_type=='Bank'">{{dayClose?.receipt_type}}</h4>
                            <h6 class="td">{{dayClose?.total_amount| number:'1.2-2'}}</h6>
                          </li>
                        </ng-container>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-lg-4 col-sm-12 col-sm-12">
                <div class="card">
                  <div class="card-body">
                    <div class="productdetails">
                      <ul class="product-bar">
                        <li>
                          <h4 class="th">Total Cash Left in Drawer</h4>
                          <h6 class="td">{{dayList?.final_cash| number:'1.2-2'}}</h6>
                        </li>
                  </ul>
                    <form [formGroup]="dayCloseForm" (ngSubmit)="submitDayClose()">
                      <div class="row">
                        <div class="col-lg-12 col-sm-12 col-sm-12">
                          <div class="form-group">
                            <label class="text_18">Closing Amount<span class="red_star">*</span></label>
                            <input type="text" formControlName="closing_amount"
                              [ngClass]="{'is-invalid': d['closing_amount']?.touched && d['closing_amount']?.invalid}">
                            <span class="text-danger"
                              *ngIf="closing_amount && closing_amount?.invalid && closing_amount?.touched">Enter
                              Closing Amount </span>
                          </div>
                        </div>
                        <div class="col-lg-12 col-sm-12 col-sm-12">
                          <div class="form-group">
                            <label class="text_18">Closing Notes</label>
                            <input type="text" formControlName="remarks" placeholder="Closing Notes"
                              [ngClass]="{'is-invalid': d['remarks']?.touched && d['remarks']?.invalid}">
                            <span class="text-danger" *ngIf="remarks && remarks?.invalid && remarks?.touched">Enter
                              Closing Notes</span>
                          </div>
                        </div>
                        <div class="col-lg-12 col-sm-12 col-sm-12">
                          <button class="btn btn-submit me-2" *ngIf="!loader">Submit</button>
                          <button class="btn btn-submit me-2" type="submit" *ngIf="loader" disabled>
                          <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>&nbsp; Submit</button>
                        </div>
                      </div>
                    </form>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- end modal -->